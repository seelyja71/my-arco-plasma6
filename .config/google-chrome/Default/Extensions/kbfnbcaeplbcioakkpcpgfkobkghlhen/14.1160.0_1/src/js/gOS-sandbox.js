/*! For license information please see gOS-sandbox.js.LICENSE.txt */
var e={41696:e=>{e.exports={}},27061:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function b(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},82989:function(e,t,r){var n;!function(i,s){var o="function",a="undefined",c="object",u="string",l="model",h="name",p="type",f="vendor",b="version",d="architecture",g="console",m="mobile",w="tablet",v="smarttv",y="wearable",_="embedded",x="Amazon",E="Apple",S="ASUS",k="BlackBerry",A="Firefox",O="Google",T="Huawei",I="LG",C="Microsoft",M="Motorola",L="Opera",R="Samsung",P="Sharp",j="Sony",N="Xiaomi",$="Zebra",U="Facebook",F=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===a?e:e.substring(0,350)},D=function(e,t){for(var r,n,i,a,u,l,h=0;h<t.length&&!u;){var p=t[h],f=t[h+1];for(r=n=0;r<p.length&&!u;)if(u=p[r++].exec(e))for(i=0;i<f.length;i++)l=u[++n],typeof(a=f[i])===c&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):s:this[a[0]]=l?a[1].call(this,l,a[2]):s:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):s):this[a]=l||s;h+=2}},B=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(q(t[r][n],e))return"?"===r?s:r}else if(q(t[r],e))return"?"===r?s:r;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,b],[/opios[\/ ]+([\w\.]+)/i],[b,[h,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[b,[h,L]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[h,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[b,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure Browser"],b],[/\bfocus\/([\w\.]+)/i],[b,[h,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[b,[h,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[h,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[h,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[b,[h,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 Browser"],b],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,U],b],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[h,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,"Chrome WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[b,B,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[h,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,b]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,W]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,R],[p,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,R],[p,m]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[f,E],[p,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,E],[p,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,T],[p,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,T],[p,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[f,N],[p,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,N],[p,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[p,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[p,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[p,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,M],[p,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,M],[p,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,I],[p,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,I],[p,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[p,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[p,m]],[/(pixel c)\b/i],[l,[f,O],[p,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,O],[p,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,j],[p,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,j],[p,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[p,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,x],[p,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,x],[p,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[p,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,k],[p,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,S],[p,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,S],[p,m]],[/(nexus 9)/i],[l,[f,"HTC"],[p,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[p,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[p,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[p,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,P],[p,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[p,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[p,w]],[/(surface duo)/i],[l,[f,C],[p,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[p,m]],[/(u304aa)/i],[l,[f,"AT&T"],[p,m]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[p,m]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[p,w]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[p,w]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[p,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[p,w]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[p,w]],[/\b(k88) b/i],[l,[f,"ZTE"],[p,w]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[p,m]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[p,m]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[p,w]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[p,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[p,w]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[p,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[p,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[p,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[p,m]],[/\b(ph-1) /i],[l,[f,"Essential"],[p,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[p,w]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[p,w]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[p,w]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[p,w]],[/(sprint) (\w+)/i],[f,l,[p,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,C],[p,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,$],[p,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,$],[p,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[p,g]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[p,g]],[/(playstation [345portablevi]+)/i],[l,[f,j],[p,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,C],[p,g]],[/smart-tv.+(samsung)/i],[f,[p,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,R],[p,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[p,v]],[/(apple) ?tv/i],[f,[l,"Apple TV"],[p,v]],[/crkey/i],[[l,"Chromecast"],[f,O],[p,v]],[/droid.+aft(\w)( bui|\))/i],[l,[f,x],[p,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,P],[p,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,j],[p,v]],[/(mitv-\w{5}) bui/i],[l,[f,N],[p,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,V],[l,V],[p,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,v]],[/((pebble))app/i],[f,l,[p,y]],[/droid.+; (glass) \d/i],[l,[f,O],[p,y]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,$],[p,y]],[/(quest( 2)?)/i],[l,[f,U],[p,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[p,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[p,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[b,B,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[b,B,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,b],[/\(bb(10);/i],[b,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[h,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[b,[h,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],b],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,b],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,b]]},G=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof G))return new G(e,t).getResult();var r=e||(typeof i!==a&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(z,t):z;return this.getBrowser=function(){var e,t={};return t.name=s,t.version=s,D.call(t,r,n.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:s,t},this.getCPU=function(){var e={};return e.architecture=s,D.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e.vendor=s,e.model=s,e.type=s,D.call(e,r,n.device),e},this.getEngine=function(){var e={};return e.name=s,e.version=s,D.call(e,r,n.engine),e},this.getOS=function(){var e={};return e.name=s,e.version=s,D.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?V(e,350):e,this},this.setUA(r),this};G.VERSION="1.0.32",G.BROWSER=F([h,b,"major"]),G.CPU=F([d]),G.DEVICE=F([l,f,p,g,m,v,w,y,_]),G.ENGINE=G.OS=F([h,b]),typeof t!==a?(e.exports&&(t=e.exports=G),t.UAParser=G):r.amdO?(n=function(){return G}.call(t,r,t,e))===s||(e.exports=n):typeof i!==a&&(i.UAParser=G);var Y=typeof i!==a&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var Z=new G;Y.ua=Z.getResult(),Y.ua.get=function(){return Z.getUA()},Y.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var r in t)Y.ua[r]=t[r]}}}("object"==typeof self?self:this)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.amdO={},(()=>{r(41696);function e(e,t){return e.some((e=>e===t))?t:void 0}class t extends Error{constructor(e){super(`Matching not exhaustive: unexpected value ${JSON.stringify(e)}`)}}function n(e){throw new t(e)}function i(e){if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?void 0:t}return"number"==typeof e?e:void 0}function s(e,t){try{return e()}catch(e){return t(e)}}var o;!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(o||(o={}));void 0!==self.requestIdleCallback&&self.requestIdleCallback;class a extends Error{constructor(e){super(`Assertion failed: ${e?"string"==typeof e?e:e():"(unnamed)"}`)}}function c(e,t){if(null==e)throw new a((()=>t?`Expected ${t} to be non-null`:"Expected non-null"));return e}var u,l,h,p,f,b,d,g,m;function w(e,t){return e.filter((e=>!!e)).join(t)}!function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};function r(e,r,n){return"retail"===n&&"safariIOSWebExtension"===r?"safariIOSExt-retail":"edge"===e?"chromiumEdgeExt":t[r]}e.getAppName=r,e.create=function(e,t,n,i){return{appName:c(r(e,t,n),"gnar app name"),url:`https://gnar.${i}`,domain:`.${i}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(u||(u={})),function(e){const t={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariAppExtension:"extensionSafari",safariWebExtension:"extensionSafariWeb",safariIOSWebExtension:"extensionSafariIOS"};e.create=function(e,r,n,i){let s;return s="retail"===n&&"safariIOSWebExtension"===r?"extensionSafariIOS-retail":"edge"===e?"extensionEdge":c(t[r],"felog app name"),{appName:s,sendUsageMetrics:!0,sendPerfMetricsType:"dev"===i?"local":"off"}}}(l||(l={})),function(e){const t={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariAppExtension:"extension_safari",safariWebExtension:"extension_safari_web",safariIOSWebExtension:"extension_safari_ios"},r={regular:"inline",retail:"retail_demo"};e.create=(e,n,i)=>({clientType:"edge"===e?"extension_chromium_edge":c(t[n],"capi client type"),clientSubType:c(r[i],"capi client subType")})}(h||(h={})),function(e){e.create=function(e){return{urls:{fetchMessages:`${e}/api/v1/messages`,acknowledgeMessage:`${e}/api/v1/messages/acknowledge`,dismissMessage:`${e}/api/v1/messages/dismiss`}}}}(p||(p={})),function(e){e.create=function(e){return{urls:{getInAppMessages:`${e}/api/inApp/getMessages`,track:`${e}/api/events/track`,trackInAppOpen:`${e}/api/events/trackInAppOpen`,trackInAppClose:`${e}/api/events/trackInAppClose`,trackInAppConsume:`${e}/api/events/inAppConsume`,trackInAppClick:`${e}/api/events/trackInAppClick`,userUpdate:`${e}/api/users/update`}}}}(f||(f={})),function(e){e.create=function(e){return{urls:{getJWTToken:`${e}/token`}}}}(b||(b={})),function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};e.create=function(e,r){return{xClientType:"edge"===e?"chromiumEdgeExt":t[r]}}}(d||(d={})),function(e){let t;var r;r=t=e.GrStaticUrl||(e.GrStaticUrl={}),r.toGrStaticUrl=e=>"https://assets.extension.grammarly.com/"+e}(g||(g={})),function(e){e.create=function(t,r,n,i,s){const o="safari"===t?"disableAppsPromotion=true":"";function a(e){const t=`https://${e}.${r}`;return(e="",r="")=>{const n=w([o,r],"&");return w([t+e,n],"?")}}const c=a("www"),u=a("app"),l=a("account"),h=a("redirect"),p=e.GrStaticUrl.toGrStaticUrl,f=`https://data.${r}`,b=`https://auth.${r}/v3`,d=`https://auth.${r}/v4`,g=`https://capi.${r}/api/configuration/cheetah/v1/settings`,m=`https://capi.${r}`,v=`wss://capi.${r}/freews`;return{accountSubscription:l("/subscription"),accountSubscriptionAddBillingInfo:l("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:l("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:l("/admin/subscription","popup=ungated_trial"),app:u(),appPersonalDictionary:l("/customize"),featuresSettings:l("/customize/features"),capi:v,capiStatic:v,capiGDocs:`wss://capi.${r}/gdocs`,dapi:f,cheetahSettings:g,editorDictionary:u("/profile/dictionary"),desktop:c("/desktop"),dictionary:`https://capi.${r}/api/defs`,docs:u("/docs"),docsApi:`https://dox.${r}/documents`,newDoc:u("/docs/new"),tokens:`${d}/api`,auth:b,userOrAnonymous:`${b}/user/oranonymous`,userOrAnonymousV4:`${d}/api/userinfo`,signin:c("/signin"),signup:c("/signup"),dialect:`${m}/api/configuration/language/v1/settings`,fbSignin:c("/signin","fromExtensionFb=true"),fbSignup:c("/signup","fromExtensionFb=true"),googleSignin:c("/signin","fromExtensionGoogle=true"),googleSignup:c("/signup","fromExtensionGoogle=true"),resetPassword:c("/resetpassword"),newFelog:n,sumoLogic:i,vmetrics:s,welcomeC:c("/extension-success"),afterInstall:c("/after_install_page/"),planComparison:c("/plans"),businessHomepage:c("/business"),businessPricing:c("/business/pricing"),businessStyleGuide:c("/business/styleguide"),businessBrandTones:c("/business/brand-tones"),uninstall:c("/extension-uninstall"),terms:c("/terms"),policy:c("/privacy-policy"),californiaPolicy:c("/privacy-policy#for-california-users"),extensionSuccess:c("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://config.extension.grammarly.com/dynamicConfig.json",pageConfigUrl:"https://config.extension.grammarly.com/browserplugin/config.json",grammarlyDomain:r,grammarlyProtocol:"https:",redirect:h("/redirect"),snippetsApi:`https://goldengate.${r}/snippets/v1/snippets`,snippetsNew:l("/admin/snippets","action=create"),snippetsAdmin:l("/admin/snippets"),snippetsSettings:l("/customize/snippets"),knowledgeHubApi:`https://goldengate.${r}/knowledge-hub/v1/institution`,clientControlsApi:`https://goldengate.${r}/client-controls`,suggestionsSettings:l("/customize/suggestions"),allSettings:l(),styleGuideSettings:l("/admin/style-guide"),writingStyleSettings:l("/admin/style-guide-writing-style"),brandTones:l("/admin/brand-tones"),grammarlyIdeasSelf:u("/ideas/grow/self"),grammarlyIdeasPeer:u("/ideas/grow/peer"),grammarlyIdeasSales:u("/ideas/sales"),iOSApp:"grammarly://home",iOSUpgrade:"grammarly://premium-instructions?deepLinkSource=safari",standWithUkraine:c("/stand-with-ukraine"),standWithUkraineBlockedUserPing:"https://rwsgfy.grammarly.com/stand-with-ukraine",tourGdocs:c("/tour-gdocs"),assets:{assistantOnboardingTourGif:p("assets/assistant/assistant-onboarding-tour"),ownerActivationIPMHeader:p("assets/ipm/owner-activation-ipm-header"),graduationIpmSvg:p("assets/ipm/graduation-campaign-ipm"),writingProgressIpmGif:p("assets/ipm/writing-progress-ipm-header"),onboardingTour:{inlineSuggestionsPreviewImage:p("assets/onboarding/inline-suggestions-preview-image-v2.jpg"),inlineSuggestionsAnimation:p("assets/onboarding/inline-suggestions-v2.mp4"),clickToAcceptAnimation:p("assets/onboarding/click-to-accept-v2.mp4"),happyWritingAnimation:p("assets/onboarding/happy-writing-v2.mp4")},knowledgeShareOnboardingTour:{step1:p("assets/knowledgeShareOnboarding/ks-onboarding-step1.mp4"),step2:p("assets/knowledgeShareOnboarding/ks-onboarding-step2.mp4"),step3:p("assets/knowledgeShareOnboarding/ks-onboarding-step3.mp4")}},support:`https://support.${r}/hc/en-us/requests/new#/`,grammarlyEmployeesBugReportsUrl:"https://in-product.report.grammarly.io/v1/report"}}}(g||(g={})),function(e){const t="grammarly.com",r="qagr.io",i="ppgr.io";e.create=function(e,s,o,a){const c=(e,t,r,i,s)=>"prod"===a?e:"qa"===a?t:"dev-qa"===a?r:"dev-preprod"===a?i:"dev"===a?s:void n(a),m="https://127.0.0.1:8000",w=c("https://f-log-extension.grammarly.io",m,m,m,m),v=c("https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV1OF-4ic11yqpre0casnyvs_ZoaCHciEYdRyBkrfwP6DMlsWt8tSVU76RPqgGvAGjXGQk_UNuxPx-pYbToJapM_Fr0CUcgKaA8_IVl-lhSr5Q==",m,m,m,m),y=c("https://extension.femetrics.grammarly.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.ppgr.io/batch/import","https://femetrics.qagr.io/batch/import"),_=c(t,r,r,i,r),x=c(t,r,r,i,t),E=c("https://chipmunk.grammarly.com","https://chipmunk.qagr.io","https://chipmunk.qagr.io","https://chipmunk.ppgr.io","https://chipmunk.grammarly.com");return{url:g.create(e,x,w,v,y),gnar:u.create(e,s,o,_),felog:l.create(e,s,o,a),capi:h.create(e,s,o),chipmunk:p.create("https://chipmunk.grammarly.com"),iterable:f.create("https://api.iterable.com"),mise:b.create(E),auth:d.create(e,s),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(m||(m={}));const v=s((()=>browser),(()=>self.browser)),y=s((()=>browser),(()=>self.browser));self.chrome=self.chrome;var _,x,E,S,k,A;!function(e){e.create=function(e,t,r,n,i,s,o,a){const c=void 0!==s&&void 0!==o?s:"UNVERSIONED",u=`${e}.${t}.${r}`;return{version:u,fullVersion:`${u}-${[n,["prod"!==i?i:null,c!==n?c:null].filter((e=>!!e)).join(".")].filter((e=>""!==e)).join("/")}`,commitHash:o,gitBranch:s,manifestVersion:a}},e.getManifestVersion=function(e,t,r){switch(e){case"safariAppExtension":switch(t){case"bg":case"popup":return r.safari.extension.displayVersion;default:return}case"chromiumWebExtension":return r.chrome.runtime.getManifest().version;case"firefoxWebExtension":return v.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return y.runtime.getManifest().version;default:return n(e)}}}(_||(_={})),function(t){t.create=function(t){return e(["chrome","safari","firefox","edge"],t)},t.isValidTargetBrowser=function(e){return["chrome","safari","firefox","edge"].includes(e)}}(x||(x={})),function(t){t.create=function(t){return e(["dev","prod","qa","dev-qa","dev-preprod"],t)}}(E||(E={})),function(t){t.create=function(t){return e(["regular","retail"],t)}}(S||(S={})),function(t){t.create=function(t){return e(["chromiumWebExtension","firefoxWebExtension","safariAppExtension","safariWebExtension","safariIOSWebExtension"],t)}}(k||(k={})),function(e){e.create=function(e,t,r,n,i){return{browser:e,extensionType:t,deploymentType:r,env:n,context:i}}}(A||(A={}));var O=r(82989);const T=e=>e.split(".")[0],I=(e=self)=>{const t=e.navigator.userAgent,r=new O.UAParser(t).getResult();return{browserName:r.browser.name||"unknown",browserVersion:r.browser.version?T(r.browser.version):void 0,osName:r.os.name||"unknown",osVersion:r.os.version?T(r.os.version):void 0,userAgent:t}};var C,M,L,R,P;!function(e){e.create=function(e){const t=I(e);return{name:t.browserName||"other",version:t.browserVersion}}}(C||(C={})),function(e){e.create=function(e){const t=I(e);return{name:t.osName,version:t.osVersion,isWindows:-1!==e.navigator.userAgent.indexOf("Win"),isMac:-1!==e.navigator.userAgent.indexOf("Mac"),isChromeOS:-1!==e.navigator.userAgent.indexOf("CrOS")}}}(M||(M={})),function(e){e.create=function(e){return{browser:C.create(e),os:M.create(e)}}}(L||(L={})),function(e){function t(e,t,r,n,i,s,o){return{env:e,major_number:t,build_number:r,release_number:n,git_branch:i,git_commit:s,manifest_version:o}}e.create=t,e.fromBrowserify=function(){return t("prod","14","1160","0","UNVERSIONED","UNVERSIONED","3")}}(R||(R={})),function(e){e.getTargetEnv=function(e){if(!e.env)throw new Error("processEnv.env is null or undefined");const t=E.create(e.env);if(!t)throw new Error(`Invalid processEnv.env: ${e.env}`);return t},e.create=function(e,t,r,n,s,o){const a=[s.major_number,s.build_number,s.release_number].map(i);let c;if(3===a.length&&a.every((e=>void 0!==e)))c=a;else{let e;try{e=_.getManifestVersion(t,n,self)}catch(e){}const r=(e||"").split(".").map(i);c=3===r.length&&r.every((e=>void 0!==e))?r:[0,0,0]}const[u,l,h]=c;return{buildInfo:_.create(u,l,h,e,o,s.git_branch,s.git_commit,s.manifest_version),bundleInfo:A.create(e,t,r,o,n),appConfig:m.create(e,t,r,o),systemInfo:L.create(self)}}}(P||(P={}));const j=new class{constructor(e){this._getFallbackValue=e}init(e){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=e}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}((()=>{throw new Error("Global config not initialized")}));let N=()=>j.get();function $(){return N().bundleInfo.env}class U{constructor(e){if(this.capacity=e,this._start=0,this._end=0,this._isFull=!1,e<=0)throw new Error("Invalid capacity "+e);this._buffer=new Array(e)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(e){let t=null;return this.isFull&&(t=this._buffer[this._start],this._startInc()),this._buffer[this._end]=e,this._endInc(),this._start===this._end&&(this._isFull=!0),t}dequeue(){if(this.isEmpty)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,e}delete(e){const t=this._buffer.indexOf(e);if(t>=0){if(t<this._end){for(let e=t;e<this._end-1;e++)this._buffer[e]=this._buffer[e+1];this._buffer[--this._end]=null}else{for(let e=this._start;e<t;e++)this._buffer[e+1]=this._buffer[e];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this._isFull=!1}toArray(){let e;if(this.isEmpty)e=[];else if(this._start<this._end)e=this._buffer.slice(this._start,this._end);else{e=new Array(this.size);let t=0;for(let r=this._start;r<this.capacity;++r,++t)e[t]=this._buffer[r];for(let r=0;r<this._end;++r,++t)e[t]=this._buffer[r]}return e}}const F=e=>e===Object(e)&&!Array.isArray(e);var q;!function(e){function t(e){return{message:e.message,stack:e.stack}}function r(e){try{return!("string"==typeof JSON.stringify(e))}catch(e){return e.message.includes("Converting circular structure to JSON")}}e.normalizeException=t,e.isCircularObject=r,e.normalizeData=function e(n){try{return self.HTMLElement&&n instanceof self.HTMLElement?{type:(i=n).nodeName,html:i.outerHTML,attributes:Array.from(i.attributes).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{})}:n instanceof Error?t(n):Array.isArray(n)?n.map((t=>e(t))):"function"==typeof n?`${n.name}()`:F(n)?r(n)?t(new Error("Couldn't normalize circular data!")):Object.keys(n).reduce(((t,r)=>({...t,[r]:e(n[r])})),{}):n}catch(e){return bt.create("HistoryLogNormalizer").error("cannot normalize data",e,n),t(new Error("Data normalization fail!"))}var i}}(q||(q={}));const W="common";function V(e){return e===W?"common.":""}class D{constructor(e){var t;this._historyArgs=e,this._historyBuffers={},this.isHistoryEnabled=()=>{var e;return Boolean("prod"!==$()||(null===(e=this._historyArgs.enabledInProd)||void 0===e?void 0:e.get()))},this.isAdvancedHistoryEnabled=()=>{var e,t;return Boolean("prod"!==$()||(null===(e=this._historyArgs.enabledInProd)||void 0===e?void 0:e.get())&&(null===(t=this._historyArgs.enableAdvancedInProd)||void 0===t?void 0:t.get()))},this.getLogs=()=>Object.entries(this._historyBuffers).map((([e,t])=>t.toArray().map((t=>({...t,data:q.normalizeData(t.data),loggerName:V(e)+t.loggerName,exception:t.exception?q.normalizeException(t.exception):void 0}))))).flat(),this._updateBackupStorage=()=>{var e;null===(e=this._historyArgs.backupStorage)||void 0===e||e.set(this._getBuffer(null).toArray())},this._initCliCommands(),this._historyBuffers.common=new U(null!==(t=this._historyArgs.maxEventsToStore)&&void 0!==t?t:1e3)}_getBuffer(e){return e?(this._historyBuffers[e.name]||(this._historyBuffers[e.name]=new U(e.settings.limit)),this._historyBuffers[e.name]):this._historyBuffers.common}pushLog(e,t){this._getBuffer(e).enqueue(t),this._updateBackupStorage()}_initCliCommands(){self.GRIsDebugEnabled=()=>this.isHistoryEnabled(),self.GREnableHistoryLogger=(e=60)=>{var t,r;null===(r=(t=this._historyArgs).enableHistoryLoggerUntil)||void 0===r||r.call(t,Date.now()+60*e*1e3)},self.GRDisableHistoryLogger=()=>{var e,t;null===(t=(e=this._historyArgs).disableHistoryLogger)||void 0===t||t.call(e)}}static create(e){return e.isBG?new B(e):new H(e)}}class B extends D{constructor(e){super(e),this._historyArgs=e,this._syncInitialStateWithStorage()}_syncInitialStateWithStorage(){var e;null===(e=this._historyArgs.backupStorage)||void 0===e||e.get().then((e=>{if(!e)return;const t=this._getBuffer(null),r=t.toArray();t.clear(),e.forEach((e=>t.enqueue(e))),r.forEach((e=>t.enqueue(e))),this._updateBackupStorage()}))}}class H extends D{}var z;!function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(z||(z={}));const G={[z.TRACE]:1,[z.DEBUG]:2,[z.INFO]:3,[z.WARN]:4,[z.ERROR]:5,[z.FATAL]:6};function Y(e){return G[e]||0}class Z{constructor(e){this.name=e,this._isError=e=>{const t=e;return t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}trace(e,t,r){this._logMessage(z.TRACE,e,t,r)}debug(e,t,r){this._logMessage(z.DEBUG,e,t,r)}info(e,t,r){this._logMessage(z.INFO,e,t,r)}warn(e,t,r){this._logMessage(z.WARN,e,t,r)}error(e,t,r){this._logMessage(z.ERROR,e,t,r)}fatal(e,t,r){this._logMessage(z.FATAL,e,t,r)}_logMessage(e,t,r,n){const i={level:e,loggerName:this.name,message:t,timestamp:Date.now()};r&&(this._isError(r)?i.exception=r:i.data=r),i.data=i.data||n,this.handleEvent(i)}}class J{constructor(e,t){this.name=e,this._createLogger=t}trace(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(e,t,r)}debug(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(e,t,r)}info(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(e,t,r)}warn(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(e,t,r)}error(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(e,t,r)}fatal(e,t,r){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(e,t,r)}isHistoryEnabled(){return!1}isAdvancedHistoryEnabled(){return!1}}class X extends Z{constructor(e,t,r,n){var i,s;super(e),this._config=t,this._historyLogsService=r,this._loggerSettings=n,this._buffer=(null===(i=this._loggerSettings)||void 0===i?void 0:i.historyBufferSettings)?{name:this.name,settings:null===(s=this._loggerSettings)||void 0===s?void 0:s.historyBufferSettings}:null}handleEvent(e){var t,r;this._config.filterFn(e)&&!(null===(t=this._loggerSettings)||void 0===t?void 0:t.skipWriteToConsole)&&this._config.writer.write(e),this._historyLogsService.isHistoryEnabled()&&!(null===(r=this._loggerSettings)||void 0===r?void 0:r.skipWriteToHistoryLogger)&&this._historyLogsService.pushLog(this._buffer,e)}isHistoryEnabled(){return this._historyLogsService.isHistoryEnabled()}isAdvancedHistoryEnabled(){return this._historyLogsService.isAdvancedHistoryEnabled()}}var Q;!function(e){e.LEVEL={[z.TRACE]:"color: white; background: orange;",[z.DEBUG]:"color: black; background: #ffdc00;",[z.INFO]:"color: black; background: #abdcfb",[z.WARN]:"color: white; background: darkorange;",[z.ERROR]:"color: white; background: red;",[z.FATAL]:"color: white; background: darkred;"},e.GRAMMARLY="color: black; background: #bada55;";const t=new Map;function r(e,t){return e+Math.floor(Math.random()*(t-e+1))}function n(e){return`color: ${e.isDark?"white":"black"}; background: rgb(${e.red}, ${e.green}, ${e.blue})`}e.getLoggerName=function(e){const i=t.get(e);if(i)return n(i);const s=r(0,255),o=r(0,255),a=r(0,255),c={red:s,green:o,blue:a,isDark:Math.sqrt(s*s*.299+o*o*.587+a*a*.114)<127.5};return t.set(e,c),n(c)},e.RESET_DEFAULT="color: reset;",e.RESET_DEBUG=`color: ${self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches?"white":"black"};`,e.getReset=function(t){return t!==z.TRACE&&t!==z.DEBUG?e.RESET_DEFAULT:t===z.TRACE||t===z.DEBUG?e.RESET_DEBUG:e.RESET_DEFAULT},e.outputLog=function(e){return[`grm ${e.level} [${e.loggerName}] ░░ ${e.message}`]}}(Q||(Q={}));class K{constructor(){this._writeFunc=K._commonWriteFunc}shouldWriteLog(e){const t=Y(e);return!!(t&&1<=t)}write(e){try{const t=Q.outputLog(e);e.data&&t.push(e.data),e.exception&&t.push(e.exception),this.shouldWriteLog(e.level)&&this._writeFunc[e.level].apply(null,t)}catch(e){}}}K._commonWriteFunc=function(){const{debug:e,info:t,warn:r,error:n}=(i=console,new Proxy({},{get(e,t){const r=i[t];return r&&"function"==typeof r?r.bind(i):void 0}}));var i;return{[z.TRACE]:e,[z.DEBUG]:e,[z.INFO]:t,[z.WARN]:r,[z.ERROR]:n,[z.FATAL]:n}}();var ee=function(e,t){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ee(e,t)};function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;Object.create;function re(e){return"function"==typeof e}var ne=!1,ie={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;ne=e},get useDeprecatedSynchronousErrorHandling(){return ne}};function se(e){setTimeout((function(){throw e}),0)}var oe={closed:!0,next:function(e){},error:function(e){if(ie.useDeprecatedSynchronousErrorHandling)throw e;se(e)},complete:function(){}},ae=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function ce(e){return null!==e&&"object"==typeof e}var ue=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),le=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a){n[a].remove(this)}if(re(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(e){t=e instanceof ue?he(e.errors):[e]}}if(ae(o)){a=-1;for(var c=o.length;++a<c;){var u=o[a];if(ce(u))try{u.unsubscribe()}catch(e){t=t||[],e instanceof ue?t=t.concat(he(e.errors)):t.push(e)}}}if(t)throw new ue(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[r]:s.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function he(e){return e.reduce((function(e,t){return e.concat(t instanceof ue?t.errors:t)}),[])}var pe=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),fe=function(e){function t(r,n,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=oe;break;case 1:if(!r){s.destination=oe;break}if("object"==typeof r){r instanceof t?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new be(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new be(s,r,n,i)}return s}return te(t,e),t.prototype[pe]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(le),be=function(e){function t(t,r,n,i){var s,o=e.call(this)||this;o._parentSubscriber=t;var a=o;return re(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==oe&&(re((a=Object.create(r)).unsubscribe)&&o.add(a.unsubscribe.bind(a)),a.unsubscribe=o.unsubscribe.bind(o))),o._context=a,o._next=s,o._error=n,o._complete=i,o}return te(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;ie.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=ie.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):se(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;se(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};ie.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ie.useDeprecatedSynchronousErrorHandling)throw e;se(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!ie.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return ie.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(se(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(fe);var de=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function ge(e){return e}function me(e){return 0===e.length?ge:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var we=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=function(e,t,r){if(e){if(e instanceof fe)return e;if(e[pe])return e[pe]()}return e||t||r?new fe(e,t,r):new fe(oe)}(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||ie.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),ie.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){ie.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof fe?n:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=ve(t))((function(t,n){var i;i=r.subscribe((function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[de]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:me(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ve(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function ve(e){if(e||(e=ie.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var ye=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),_e=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return te(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(le),xe=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return te(t,e),t}(fe),Ee=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return te(t,e),t.prototype[pe]=function(){return new xe(this)},t.prototype.lift=function(e){var t=new Se(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ye;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ye;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ye;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ye;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ye;return this.hasError?(e.error(this.thrownError),le.EMPTY):this.isStopped?(e.complete(),le.EMPTY):(this.observers.push(e),new _e(this,e))},t.prototype.asObservable=function(){var e=new we;return e.source=this,e},t.create=function(e,t){return new Se(e,t)},t}(we),Se=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return te(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):le.EMPTY},t}(Ee),ke=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return te(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ye;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Ee);function Ae(){}var Oe=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new Te(e,this.nextOrObserver,this.error,this.complete))},e}(),Te=function(e){function t(t,r,n,i){var s=e.call(this,t)||this;return s._tapNext=Ae,s._tapError=Ae,s._tapComplete=Ae,s._tapError=n||Ae,s._tapComplete=i||Ae,re(r)?(s._context=s,s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||Ae,s._tapError=r.error||Ae,s._tapComplete=r.complete||Ae),s}return te(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(fe);function Ie(){return function(e){return e.lift(new Ce(e))}}var Ce=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new Me(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),Me=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return te(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(fe),Le=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return te(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new le).add(this.source.subscribe(new Pe(this.getSubject(),this))),e.closed&&(this._connection=null,e=le.EMPTY)),e},t.prototype.refCount=function(){return Ie()(this)},t}(we),Re=function(){var e=Le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),Pe=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return te(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(xe);var je=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(e);return i.add(t.subscribe(n)),i},e}();function Ne(){return new Ee}function $e(){return function(e){return Ie()((t=Ne,function(e){var n;if(n="function"==typeof t?t:function(){return t},"function"==typeof r)return e.lift(new je(n,r));var i=Object.create(e,Re);return i.source=e,i.subjectFactory=n,i})(e));var t,r}}var Ue=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Fe(e,this.predicate,this.thisArg))},e}(),Fe=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return te(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(fe);function qe(e,t){return function(r,n){return t(r(e(n)),n)}}function We(e,t){return{get:e,set:t,modify:qe(e,t),compose:r=>We((t=>r.get(e(t))),((n,i)=>t(r.set(n,e(i)),i)))}}function Ve(...e){if(0===e.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===e.length)return e[0];{let t=e[0];return e.slice(1).forEach((e=>{t=t.compose(e)})),t}}We((e=>e),((e,t)=>e));(function e(t,r){return{get:t,set:r,modify:qe(t,r),compose:n=>e((e=>{const r=t(e);return void 0!==r?n.get(r):void 0}),((e,i)=>{const s=t(i);return void 0!==s?r(n.set(e,s),i):i}))}})((e=>{}),((e,t)=>t));function De(e){const t=[];let r;for(;!(r=e.next()).done;)t.push(r.value);return t}function Be(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function He(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}const ze=function(){const e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return Be("callee",e)}}(),Ge=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],r=function(){return arguments.propertyIsEnumerable("length")}(),n=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1};return"function"!=typeof Object.keys||r?function(i){if(Object(i)!==i)return[];let s,o;const a=[],c=r&&ze(i);for(s in i)!Be(s,i)||c&&"length"===s||(a[a.length]=s);if(e)for(o=t.length-1;o>=0;)s=t[o],Be(s,i)&&!n(a,s)&&(a[a.length]=s),o-=1;return a}:function(e){return Object(e)!==e?[]:Object.keys(e)}}();function Ye(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function Ze(e,t,r=[],n=[]){if(He(e,t))return!0;if(Ye(e)!==Ye(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(Ye(e)){case"Arguments":case"Array":case"Object":if(null!=(i=e)&&"function"==typeof i.then)return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!He(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!He(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!Ze(De(e.entries()),De(t.entries()),r,n))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i;const s=Ge(e);if(s.length!==Ge(t).length)return!1;let o=r.length-1;for(;o>=0;){if(r[o]===e)return n[o]===t;o-=1}for(r.push(e),n.push(t),o=s.length-1;o>=0;){const i=s[o];if(!Be(i,t)||!Ze(t[i],e[i],r,n))return!1;o-=1}return r.pop(),n.pop(),!0}const Je=void 0!==r(27061)&&!1;function Xe(e,t,r){if(e in r&&Ze(t,r[e]))return r;{const n={};for(const e in r)n[e]=r[e];return n[e]=t,n}}const Qe=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function Ke(e){return function(e){const t=Qe,r=e.match(t);if(r&&r[2])return r[2].split(".");throw new TypeError(`Expected a property expression, got "${e}".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"`)}(e.toString())}function et(e){return void 0===e?e=>We((t=>t[e]),((t,r)=>Xe(e,t,r))):We((t=>t[e]),((t,r)=>Xe(e,t,r)))}let tt=0;function rt(e){if(tt<10){tt++;const t=`x.${e.join(".")}`,r=`'${e.join("', '")}'`;!function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+e);try{throw new Error(e)}catch(e){}}(`The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => ${t}) to a.lens(${r}),\n  Lens.prop((x: T) => ${t}) to Lens.key<T>()(${r}).`)}}function nt(e){return e&&"function"==typeof e.schedule}var it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(fe),st=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return te(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(fe),ot=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};function at(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var ct=at();var ut=function(e){if(e&&"function"==typeof e[de])return i=e,function(e){var t=i[de]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((n=e)&&"number"==typeof n.length&&"function"!=typeof n)return ot(e);if(function(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}(e))return r=e,function(e){return r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,se),e};if(e&&"function"==typeof e[ct])return t=e,function(e){for(var r=t[ct]();;){var n=void 0;try{n=r.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add((function(){r.return&&r.return()})),e};var t,r,n,i,s=ce(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function lt(e,t,r,n,i){if(void 0===i&&(i=new st(e,r,n)),!i.closed)return t instanceof we?t.subscribe(i):ut(t)(i)}function ht(e,t){return t?function(e,t){return new we((function(r){var n=new le,i=0;return n.add(t.schedule((function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}(e,t):new we(ot(e))}var pt={};var ft,bt,dt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new gt(e,this.resultSelector))},e}(),gt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return te(t,e),t.prototype._next=function(e){this.values.push(pt),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(lt(this,n,void 0,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r){var n=this.values,i=n[r],s=this.toRespond?i===pt?--this.toRespond:this.toRespond:0;n[r]=t,0===s&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(it);class mt extends ke{view(...e){return void 0!==e[0]?"function"==typeof e[0]?new _t(this,e[0]):"string"==typeof e[0]?new _t(this,Ve(...e.map(et())).get):new _t(this,(t=>e[0].get(t))):this}}class wt extends mt{set(e){this.modify((()=>e))}lens(e,...t){return new yt(this,"function"==typeof e?function(e){const t=Ke(e);return Je&&rt(t),Ve(...t.map(et()))}(e):"string"==typeof e?Ve(et(e),...t.map((e=>et(e)))):e,Ze)}}class vt extends wt{constructor(e){super(e)}get(){return this.getValue()}modify(e){const t=this.getValue(),r=e(t);Ze(t,r)||this.next(r)}set(e){Ze(this.getValue(),e)||this.next(e)}}class yt extends wt{_source;_lens;_eq;constructor(e,t,r=Ze){super(void 0),this._source=e,this._lens=t,this._eq=r}get(){return this._subscription?this.getValue():this._lens.get(this._source.get())}modify(e){this._source.modify((t=>this._lens.modify(e,t)))}set(e){this._source.modify((t=>this._lens.set(e,t)))}_onSourceValue(e){const t=this.getValue(),r=this._lens.get(e);this._eq(t,r)||this.next(r)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new le((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class _t extends mt{_source;_getter;_eq;constructor(e,t,r=Ze){super(void 0),this._source=e,this._getter=t,this._eq=r}get(){return this._subscription?this.getValue():this._getter(this._source.get())}_onSourceValue(e){const t=this.getValue(),r=this._getter(e);this._eq(t,r)||this.next(r)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new le((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class xt extends mt{_sources;_combineFn;_eq;constructor(e,t,r=Ze){super(void 0),this._sources=e,this._combineFn=t,this._eq=r}get(){return this._subscription?this.getValue():this._combineFn(this._sources.map((e=>e.get())))}_onSourceValues(e){const t=this.getValue(),r=this._combineFn(e);this._eq(t,r)||this.next(r)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,n=void 0;return nt(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&ae(e[0])&&(e=e[0]),ht(e,n).lift(new dt(r))}(this._sources).subscribe((e=>this._onSourceValues(e)))),this._refCount++;const t=new le((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}!function(e){e.create=function(e){return new vt(e)},e.log=function(e,t){const r=(e,t,r)=>console.log("%c"+e,`color: ${t}; font-weight: bold`,r);let n=e.get();return e.subscribe((e=>{"function"==typeof t?t(n,e):(console.group(`UPDATE ${t?`TYPE: ${t} `:""}@ ${(new Date).toTimeString()}`),r("prev state","#9E9E9E",n),r("next state","#4CAF50",e),console.groupEnd()),n=e})),e},e.combine=function(...e){return new xt(e.slice(void 0,-1),(t=>e[e.length-1](...t)))},e.fromObservable=function(t){const r=new ke(null),n=t.pipe((i=t=>{const n=r.value;null===n?r.next(e.create(t)):n.set(t)},function(e){return e.lift(new Oe(i,s,o))}),$e());var i,s,o;return new we((e=>{const t=new le;var i,s;return t.add(r.pipe((i=e=>!!e,function(e){return e.lift(new Ue(i,s))})).subscribe(e)),t.add(n.subscribe(void 0,(t=>e.error(t)),(()=>e.complete()))),t}))}}(ft||(ft={}));class Et{static getInstance(){if(void 0===this._instanceShared)throw new Error("shared Env not inited yet");return this._instanceShared}static initShared(e){if(void 0!==this._instanceShared)throw new Error("shared Env already inited");this._instanceShared=e}constructor(e,t=ft.create(!1),r=ft.create(!1)){this._enableHistoryLoggerInProd=t,this._enableAdvancedHistoryLoggerInProd=r,this.enableHistoryLoggerInProd=(e=!0)=>{e&&!this._enableHistoryLoggerInProd.get()?(console.warn("Debug reports have been enabled"),this._enableHistoryLoggerInProd.set(!0)):!e&&this._enableHistoryLoggerInProd.get()&&(console.warn("Debug reports have been disabled"),this._enableHistoryLoggerInProd.set(!1))},this.enableAdvancedHistoryLoggerInProd=(e=!0)=>{e&&!this._enableAdvancedHistoryLoggerInProd.get()?(console.warn("Advanced logging has been enabled"),this._enableAdvancedHistoryLoggerInProd.set(!0)):!e&&this._enableAdvancedHistoryLoggerInProd.get()&&(console.warn("Advanced logging has been disabled"),this._enableAdvancedHistoryLoggerInProd.set(!1))};const n=e.testArgs,i=n&&n.processEnv?n.processEnv:R.fromBrowserify(),s=P.getTargetEnv(i);this._initLogger(e,s);const o=function(e,t,r,n,i,s){const o=P.create(e,t,r,n,i,s);return j.init(o),self.GR_CFG=j.get(),o}(e.browser,e.extensionType,e.deploymentType,e.context,i,s);this.context=e.context,this.config=o}_initLogger(e,t){this.historyLogsService=D.create({...e.historyLoggerExtraArgs,enabledInProd:this._enableHistoryLoggerInProd,enableAdvancedInProd:this._enableAdvancedHistoryLoggerInProd});const r="prod"!==t||"cs"!==e.context,n={create:(e,t)=>{return new X(e,{writer:new K,filterFn:r?e=>!0:(n=z.ERROR,e=>Y(e.level)>=Y(n))},this.historyLogsService,t);var n}};this.logger=n}}function St(){return Et.getInstance()}!function(e){e.create=function(e,t){return new J(e,(()=>St().logger.create(e,t)))}}(bt||(bt={}));class kt{constructor(e){var t;this._didReceiveReadyMessage=!1,this._onMessageListeners=[],this._pendingOutgoingMessages=[],this._onMessage=e=>{null!=e.source&&e.source===this._iframe.contentWindow&&(this._didReceiveReadyMessage=!0,this._onMessageListeners.forEach((t=>t(e.data))),this._flushPendingOutgoingMessages())},this._flushPendingOutgoingMessages=()=>{if(this._didReceiveReadyMessage&&0!==this._pendingOutgoingMessages.length&&null!=this._iframe.contentWindow){for(const e of this._pendingOutgoingMessages)this._iframe.contentWindow.postMessage(e,this._iframeTargetOrigin);this._pendingOutgoingMessages.length=0}},this._iframe=e;const r=new URL(e.src,self.location.href),n=r.origin,i=self.origin;this._iframeTargetOrigin="null"===i||"http:"===self.location.protocol&&"https:"===r.protocol||!1===(null===(t=e.getAttribute("sandbox"))||void 0===t?void 0:t.includes("allow-same-origin"))?"*":n,self.addEventListener("message",this._onMessage)}postMessage(e){null!=this._iframe.contentWindow&&this._didReceiveReadyMessage?(this._flushPendingOutgoingMessages(),this._iframe.contentWindow.postMessage(e,this._iframeTargetOrigin)):this._pendingOutgoingMessages.push(e)}onMessage(e){this._onMessageListeners.push(e)}dispose(){self.removeEventListener("message",this._onMessage),this._onMessageListeners.length=0,this._pendingOutgoingMessages.length=0}}var At;!function(e){e.postMessage="postMessage",e.setSource="setSource"}(At||(At={}));const Ot={id:"0",type:"request",action:"ping",data:null};(function(){const e=bt.create("gOS-sandbox");try{const t=function(){const e=document.createElement("iframe");return e.style.border="none",e.style.width="100%",e.style.height="100%",e.allow="clipboard-read *; clipboard-write *",e}(),r=new kt(t);document.body.appendChild(t);const n=setInterval((()=>{var e;null===(e=t.contentWindow)||void 0===e||e.postMessage(Ot,"*")}),4);r.onMessage((e=>{clearInterval(n),self.parent.postMessage(e,"*")})),self.addEventListener("message",(n=>{if(null==self.parent||n.source!==self.parent)return;const i=function(e){const t=e.data;if(null!=t&&"object"==typeof t&&"string"==typeof t.type)return t}(n);if(null!=i)switch(i.type){case At.setSource:t.src=i.url;break;case At.postMessage:r.postMessage(i.data)}else e.debug("invalid message",n.data)})),self.parent.postMessage(Ot,"*")}catch(t){e.error(t)}})()})();