/*! For license information please see 2748.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[2748],{87986:(e,t,n)=>{n.r(t),n.d(t,{ActionArg:()=>g,ActionArgDef:()=>v,ActionArgDefRadioButtonGroup:()=>k,ActionArgDefRadioButtonGroupHint:()=>x,ActionArgDefString:()=>y,ActionArgDefStringHint:()=>b,ActionDef:()=>C,ActionDefDisabled:()=>w,ActionDefGeneratesTextType:()=>S,ActionInfo:()=>E,AvailableVoiceProfile:()=>O,AvailableVoiceProfileSection:()=>A,AvailableVoiceProfileSectionTag:()=>I,AvailableVoiceProfileSectionTagState:()=>_,AvailableVoiceProfiles:()=>R,ClientMessage:()=>c,ClientMessageImplementations:()=>Me,Context:()=>B,DocumentOverview:()=>M,Error:()=>T,ErrorKind:()=>F,GeneratedText:()=>P,GenerationMode:()=>N,Message:()=>j,MessageAction:()=>D,MessageChunk:()=>Q,MessageError:()=>K,MessageGetContext:()=>U,MessageGetHistory:()=>$,MessageGetUserState:()=>H,MessageInterrupt:()=>Z,MessageInvalidateContext:()=>z,MessageResult:()=>J,MessageResultChangesSummary:()=>Y,MessageSearchReferences:()=>V,MessageSearchReferencesResult:()=>q,MessageSetContext:()=>W,MessageSetHistory:()=>re,MessageSetHistoryCard:()=>ie,MessageSetHistoryCardTitle:()=>ee,MessageSetHistoryCardTitleAction:()=>ne,MessageSetHistoryCardTitleUserPrompt:()=>te,MessageSetUserState:()=>X,MessageSetVoice:()=>L,MessageSetVoiceProfile:()=>G,Metadata:()=>oe,Notification:()=>se,NotificationKind:()=>ae,OuterContext:()=>ce,OuterContextItem:()=>le,PreviousText:()=>ue,PreviousTextHistory:()=>me,PreviousTextRegular:()=>de,PreviousTextWriterExpert:()=>pe,ProtocolMessage:()=>u,Reference:()=>he,ReferencePrivacyLevel:()=>fe,ReferencePrivacyLevelPublic:()=>ge,ReferencePrivacyLevelRestricted:()=>ve,Root:()=>f,ServerMessage:()=>d,ServerMessageImplementations:()=>Fe,SpecialView:()=>be,SpecialViewAiUsageAlert:()=>ye,StartMessage:()=>m,StartedMessage:()=>p,Style:()=>xe,Text:()=>ke,TextLike:()=>h,TextRange:()=>Se,Toggle:()=>we,UrlReference:()=>Ce,Usage:()=>Ee,UserState:()=>Ie,UserStateSettings:()=>_e,Voice:()=>Ae,VoiceProfileSettings:()=>Be,VoiceProfileSettingsMyVoiceIsEnabledByDefault:()=>Oe,VoiceProfileSettingsStatus:()=>Re,encoderSchemable:()=>ze,extend:()=>Ue,interpreter:()=>je,make:()=>Ne});var i=n(59312),r=n(68599),o=n(83257),a=n(18164),s=n(73915),l=n(57050),c=Ne((function(e){return Pe(u(e),e.struct({}))(e)})),u=Ne((function(e){return e.struct({id:e.number})})),d=Ne((function(e){return Pe(u(e),e.struct({}))(e)})),m=Ne((function(e){return e.intersect(e.partial({docIdIsTransient:e.boolean}))(e.struct({}))})),p=Ne((function(e){return e.struct({cheetahState:Ie(e)})})),h=Ne((function(e){return e.struct({plain:e.sensitiveString,delta:e.sensitiveDelta})})),f=Ne((function(e){return j(e)})),g=Ne((function(e){return e.struct({name:e.string,value:e.sensitiveString})})),v=Ne((function(e){var t;return e.sum("valueType")(((t={}).string=y(e),t.radioButtonGroup=k(e),t))})),b=Ne((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),y=Ne((function(e){return e.intersect(e.partial({hint:b(e)}))(e.struct({valueType:e.literal("string"),label:e.string,name:e.string}))})),x=Ne((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),k=Ne((function(e){return e.intersect(e.partial({hint:x(e)}))(e.struct({valueType:e.literal("radioButtonGroup"),label:e.string,name:e.string,radioButtonGroupValues:e.readonly(e.array(e.string))}))})),S=Te(r.cX),w=Ne((function(e){return e.intersect(e.partial({onActionNotification:se(e)}))(e.struct({}))})),C=Ne((function(e){return e.intersect(e.partial({generatesTextType:S(e)}))(e.intersect(e.partial({disabled:w(e)}))(e.struct({id:e.string,iconUrl:e.string,group:e.string,label:e.string,searchTags:e.readonly(e.array(e.string)),args:e.readonly(e.array(v(e)))})))})),E=Ne((function(e){return e.intersect(e.partial({useReferences:e.readonly(e.array(Ce(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.struct({contextId:e.string,triggerContextId:e.string,actionId:e.string,args:e.readonly(e.array(g(e)))})))})),_=Te(r.ES),I=Ne((function(e){return e.struct({name:e.string,state:_(e)})})),A=Ne((function(e){return e.struct({name:e.string,tags:e.readonly(e.array(I(e)))})})),O=Ne((function(e){return e.struct({name:e.string,summary:e.string,selected:e.boolean,sections:e.readonly(e.array(A(e)))})})),R=Ne((function(e){return e.readonly(e.array(O(e)))})),B=Ne((function(e){return e.intersect(e.partial({voiceProfileSettings:Be(e)}))(e.intersect(e.partial({intent:e.sensitiveString}))(e.intersect(e.partial({documentOverview:M(e)}))(e.intersect(e.partial({specialView:be(e)}))(e.intersect(e.partial({textScope:Se(e)}))(e.intersect(e.partial({contextNotification:se(e)}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({id:e.string,voice:Ae(e),availableActions:e.readonly(e.array(C(e))),parentAction:E(e),stateBlob:e.string,promptAction:C(e),quickRewriteAction:C(e)}))))))))})),M=Ne((function(e){return e.struct({title:e.string,summary:e.string})})),F=Te(r.oS),T=Ne((function(e){return e.struct({kind:F(e),title:e.string,text:e.string})})),P=Ne((function(e){return Pe(h(e),e.struct({plain:e.sensitiveString,interrupted:e.boolean,renderDiff:e.boolean,delta:e.sensitiveDelta}))(e)})),N=Te(r.s2),j=Ne((function(e){var t;return Pe(u(e),e.sum("action")(((t={})["cheetah:getContext"]=U(e),t["cheetah:invalidateContext"]=z(e),t["cheetah:action"]=D(e),t["cheetah:setVoice"]=L(e),t["cheetah:setVoiceProfile"]=G(e),t["cheetah:interrupt"]=Z(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=V(e),t["cheetah:getHistory"]=$(e),t["cheetah:error"]=K(e),t["cheetah:setContext"]=W(e),t["cheetah:searchReferencesResult"]=q(e),t["cheetah:chunk"]=Q(e),t["cheetah:result"]=J(e),t["cheetah:setUserState"]=X(e),t["cheetah:setHistory"]=re(e),t)))(e)})),U=Ne((function(e){return Pe(c(e),e.intersect(e.partial({outerContext:ce(e)}))(e.intersect(e.partial({selectedRange:Se(e)}))(e.intersect(e.partial({stateBlob:e.string}))(e.intersect(e.partial({previousText:ue(e)}))(e.intersect(e.partial({includeDisabledActions:e.boolean}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:getContext"),rev:e.number,generationMode:N(e)}))))))))(e)})),z=Ne((function(e){return Pe(d(e),e.struct({action:e.literal("cheetah:invalidateContext")}))(e)})),D=Ne((function(e){return Pe(c(e),e.intersect(e.partial({useReferences:e.readonly(e.array(Ce(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.intersect(e.partial({previousText:ue(e)}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:action"),rev:e.number,contextId:e.string,triggerContextId:e.string,actionId:e.string,stateBlob:e.string,args:e.readonly(e.array(g(e)))}))))))(e)})),L=Ne((function(e){return Pe(c(e),e.struct({action:e.literal("cheetah:setVoice"),voice:Ae(e)}))(e)})),G=Ne((function(e){return Pe(c(e),e.intersect(e.partial({role:e.string}))(e.intersect(e.partial({isEnabledByDefault:e.boolean}))(e.intersect(e.partial({profiles:R(e)}))(e.struct({action:e.literal("cheetah:setVoiceProfile")})))))(e)})),Z=Ne((function(e){return Pe(c(e),e.struct({action:e.literal("cheetah:interrupt"),promptId:e.number}))(e)})),H=Ne((function(e){return Pe(c(e),e.struct({action:e.literal("cheetah:getUserState")}))(e)})),V=Ne((function(e){return Pe(c(e),e.intersect(e.partial({url:e.string}))(e.struct({action:e.literal("cheetah:searchReferences")})))(e)})),$=Ne((function(e){return Pe(c(e),e.struct({action:e.literal("cheetah:getHistory")}))(e)})),K=Ne((function(e){return Pe(d(e),e.struct({action:e.literal("cheetah:error"),promptId:e.number,error:T(e)}))(e)})),W=Ne((function(e){return Pe(d(e),e.intersect(e.partial({progressMessage:e.string}))(e.struct({action:e.literal("cheetah:setContext"),promptId:e.number,context:B(e),usage:Ee(e)})))(e)})),q=Ne((function(e){return Pe(d(e),e.struct({action:e.literal("cheetah:searchReferencesResult"),promptId:e.number,references:e.readonly(e.array(he(e)))}))(e)})),Q=Ne((function(e){return Pe(d(e),e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:chunk"),promptId:e.number,token:e.sensitiveString})))(e)})),Y=Ne((function(e){return e.struct({title:e.string,description:e.readonly(e.array(e.string))})})),J=Ne((function(e){return Pe(d(e),e.intersect(e.partial({metadata:oe(e)}))(e.intersect(e.partial({context:B(e)}))(e.intersect(e.partial({error:T(e)}))(e.intersect(e.partial({text:P(e)}))(e.intersect(e.partial({withVoiceText:P(e)}))(e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.intersect(e.partial({references:e.readonly(e.array(he(e)))}))(e.intersect(e.partial({changesSummary:Y(e)}))(e.struct({action:e.literal("cheetah:result"),promptId:e.number,usage:Ee(e)}))))))))))(e)})),X=Ne((function(e){return Pe(d(e),e.struct({action:e.literal("cheetah:setUserState"),state:Ie(e)}))(e)})),ee=Ne((function(e){var t;return e.sum("kind")(((t={}).userPrompt=te(e),t.action=ne(e),t))})),te=Ne((function(e){return e.struct({kind:e.literal("userPrompt"),text:e.string})})),ne=Ne((function(e){return e.struct({kind:e.literal("action"),iconUrl:e.string,label:e.string})})),ie=Ne((function(e){return e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.struct({id:e.string,text:ke(e),withVoiceText:ke(e),title:ee(e),references:e.readonly(e.array(he(e)))}))})),re=Ne((function(e){return Pe(d(e),e.struct({action:e.literal("cheetah:setHistory"),cards:e.readonly(e.array(ie(e)))}))(e)})),oe=Ne((function(e){return e.any})),ae=Te(r.W7),se=Ne((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({kind:ae(e),text:e.string}))})),le=Ne((function(e){return e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.struct({text:e.sensitiveString})))})),ce=Ne((function(e){return e.intersect(e.partial({pageIdHash:e.string}))(e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.intersect(e.partial({items:e.readonly(e.array(le(e)))}))(e.struct({})))))})),ue=Ne((function(e){var t;return e.sum("kind")(((t={}).regular=de(e),t.history=me(e),t.writerExpert=pe(e),t))})),de=Ne((function(e){return e.struct({kind:e.literal("regular"),text:e.string})})),me=Ne((function(e){return e.struct({kind:e.literal("history"),text:e.string})})),pe=Ne((function(e){return e.struct({kind:e.literal("writerExpert"),text:e.string,suggestionId:e.string,pname:e.string})})),he=Ne((function(e){return e.intersect(e.partial({url:e.string}))(e.struct({id:e.string,privacyLevel:fe(e),title:e.string,iconUrl:e.string}))})),fe=Ne((function(e){var t;return e.sum("kind")(((t={}).public=ge(e),t.restricted=ve(e),t))})),ge=Ne((function(e){return e.struct({kind:e.literal("public")})})),ve=Ne((function(e){return e.struct({kind:e.literal("restricted")})})),be=Ne((function(e){var t;return e.sum("kind")(((t={}).aiUsageAlert=ye(e),t))})),ye=Ne((function(e){return e.struct({kind:e.literal("aiUsageAlert")})})),xe=Ne((function(e){return e.struct({button:we(e),tones:e.readonly(e.array(we(e))),maxTones:e.number})})),ke=Ne((function(e){return Pe(h(e),e.struct({}))(e)})),Se=Ne((function(e){return e.struct({start:e.number,end:e.number})})),we=Ne((function(e){return e.struct({iconUrl:e.string,label:e.string,description:e.string})})),Ce=Ne((function(e){return e.struct({url:e.string,referenceId:e.string})})),Ee=Ne((function(e){return e.struct({promptsRemaining:e.number,promptsAllocated:e.number,refillDate:e.string})})),_e=Ne((function(e){return e.struct({inlineQuickReplyEnabled:e.boolean,inlineRewriteEnabled:e.boolean})})),Ie=Ne((function(e){return e.intersect(e.partial({historyItems:e.number}))(e.struct({settings:_e(e),usage:Ee(e)}))})),Ae=Ne((function(e){return e.intersect(e.partial({styles:e.readonly(e.array(xe(e)))}))(e.intersect(e.partial({selectedRole:e.string}))(e.intersect(e.partial({roles:e.readonly(e.array(e.string))}))(e.struct({selectedStyle:e.string,selectedTones:e.readonly(e.array(e.string)),needSetup:e.boolean}))))})),Oe=Ne((function(e){return e.struct({state:e.boolean,label:e.string})})),Re=Te(r.J8),Be=Ne((function(e){return e.intersect(e.partial({status:Re(e)}))(e.struct({userName:e.string,myVoiceIsEnabledByDefault:Oe(e),title:e.string,subTitle:e.string,profiles:R(e)}))})),Me=Ne((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=U(e),t["cheetah:action"]=D(e),t["cheetah:setVoice"]=L(e),t["cheetah:setVoiceProfile"]=G(e),t["cheetah:interrupt"]=Z(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=V(e),t["cheetah:getHistory"]=$(e),t))})),Fe=Ne((function(e){var t;return e.sum("action")(((t={})["cheetah:invalidateContext"]=z(e),t["cheetah:error"]=K(e),t["cheetah:setContext"]=W(e),t["cheetah:searchReferencesResult"]=q(e),t["cheetah:chunk"]=Q(e),t["cheetah:result"]=J(e),t["cheetah:setUserState"]=X(e),t["cheetah:setHistory"]=re(e),t))}));function Te(e){var t=Object.keys(e).map((function(t){return e[t]})),n=t[0],r=t.slice(1);return Ne((function(e){return e.literal.apply(e,(0,i.ev)([n],r,!1))}))}function Pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne((function(t){return e.reduce((function(e,n){return t.intersect(n)(e)}))}))}function Ne(e){return a.H(e)}var je=(0,l.MZ)(s.n);function Ue(e){return function(t){return(0,i.pi)((0,i.pi)({},e),t)}}var ze={URI:o.ov,literal:function(){return o.id()},string:o.id(),number:o.id(),boolean:o.id(),nullable:o.AG,type:o.dt,struct:o.n_,partial:o.r$,record:o.IM,array:o.IX,tuple:o.bc,intersect:o.wf,sum:o.Sm,lazy:function(e,t){return o.Vo(t)},readonly:o.OT}},68599:(e,t,n)=>{var i,r,o,a,s,l;n.d(t,{ES:()=>r,J8:()=>l,W7:()=>s,cX:()=>i,oS:()=>o,s2:()=>a}),function(e){e.Insertable="insertable",e.NonInsertable="non_insertable"}(i||(i={})),function(e){e.Active="active",e.Snoozed="snoozed"}(r||(r={})),function(e){e.Generic="generic",e.Overflow="overflow",e.PromptsLimitExceeded="promptsLimitExceeded",e.SensitiveContent="sensitiveContent",e.ServerOverloaded="serverOverloaded",e.UnsupportedLanguage="unsupportedLanguage"}(o||(o={})),function(e){e.Ideation="ideation",e.PushRewrite="pushRewrite",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite"}(a||(a={})),function(e){e.Generic="generic",e.Info="info"}(s||(s={})),function(e){e.Initial="initial",e.Seen="seen",e.Updated="updated"}(l||(l={}))},93986:(e,t,n)=>{n.d(t,{z:()=>h});var i=n(27378),r=n(64757),o=n(1509),a=n(76974),s=n(2844),l=n(77176),c=n(54001),u=n(44361),d=n(33498),m=n(95835),p=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const h=e=>{var{className:t,compact:n=!1,theme:h="light",variant:f="primary",contained:g=!1,size:v=a.of("large"),style:b=a.of(void 0),children:y,onClick:x}=e,k=p(e,["className","compact","theme","variant","contained","size","style","children","onClick"]);return i.createElement(r.zx.Animated,Object.assign({},(0,c.Sh)(s.aj([(0,d.D)(b),(0,d.D)(v)]).pipe(l.U((([e,t])=>(0,m.P_)({compact:n,theme:h,size:t,style:e,variant:f,contained:g})))),t),k,{styleType:o.Z.Type.Button,onClick:(0,u.m)(x)}),y)}},95835:(e,t,n)=>{n.d(t,{P_:()=>h,Rv:()=>d});var i=n(89894),r=n(53514),o=n(69470),a=n(17138),s=n(16882),l=n(79378),c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function u(e){var t,n;const i=null!==(t=e.default)&&void 0!==t?t:{},{$nest:r}=i,o=c(i,["$nest"]);return Object.assign(Object.assign({},o),{$nest:Object.assign({"&:not([data-disabled='true'])[data-hovered='true']":Object.assign({},e.hovered),"&:not([data-disabled='true']):hover":Object.assign({},e.hovered),"&[data-disabled='true']":Object.assign({},e.disabled),"&:not([data-disabled='true']):active":Object.assign({},e.active),"&[data-active='true']":Object.assign({},null!==(n=e.selected)&&void 0!==n?n:e.active),"&[hidden]":Object.assign({},e.hidden),"& > i":Object.assign({},e.icon),"&[data-textpos='left']":Object.assign({},e.textPosLeft),"&[data-textpos='right']":Object.assign({},e.textPosRight),"&[data-textpos='everywhere']":Object.assign({},e.textPosEverywhere)},r)})}function d(e){return{'&:focus:not(:active):not([data-active="true"])':{boxShadow:e,zIndex:1},'&:focus:not(:active):not(:focus-visible):not([data-active="true"])':{boxShadow:"none"},"&:focus-visible":{boxShadow:e,zIndex:1}}}function m(e,t,n=!1){const r=(e,t)=>void 0!==e&&"transparent"!==e?`${t?`${t}, `:""} inset 0 0 0 1px ${e}`:t,o=(n,i=!1)=>{const r=t?((e,t=!1)=>t?`0 0 0 2px ${e}`:`inset 0 0 0 2px ${e}`)(e.focusOutline,i):((e,t=!1)=>t?`inset 0 0 0 2px ${e}, inset 0 0 0 3px ${a.I.Text.Base.Inverse}`:`0 0 0 2px ${a.I.Text.Base.Inverse}, 0 0 0 4px ${e}`)(e.focusOutline,i);return d(n?i?`${r}, ${n}`:`${n}, ${r}`:r)},s=r(e.borderDefault,e.boxShadow),l=r(e.borderHover,e.boxShadow),c=r(e.borderActive,e.boxShadow);return u({default:{borderRadius:e.borderRadius,fontWeight:e.fontWeight,color:e.colorDefault,backgroundColor:e.backgroundDefault,boxShadow:s,$nest:o(s,n)},hovered:{color:e.colorHover,backgroundColor:e.backgroundHover,boxShadow:l,$nest:o(l,n)},active:{color:e.colorActive,backgroundColor:e.backgroundActive,boxShadow:c,$nest:o(c,n)},icon:{stroke:i.ux.important(e.colorDefault),fill:i.ux.important(e.colorDefault),$nest:{'&[data-hovered="true"]':{stroke:i.ux.important(e.colorHover),fill:i.ux.important(e.colorHover)}}}})}const p={primaryLight:{fontWeight:"bold",backgroundDefault:l.Z.BackgroundBrandDefault,colorDefault:a.I.Text.Base.Inverse,backgroundHover:l.Z.BackgroundBrandHover,colorHover:a.I.Text.Base.Inverse,backgroundActive:l.Z.BackgroundBrandActive,colorActive:a.I.Background.Base.Default,focusOutline:l.Z.BorderBrandDefault},primaryDark:void 0,secondaryLight:{backgroundDefault:"transparent",colorDefault:l.Z.ButtonTextSecondaryDefault,borderDefault:l.Z.BorderBrandDefault,backgroundHover:l.Z.ButtonBackgroundSecondaryHover,colorHover:l.Z.ButtonTextSecondaryHover,borderHover:l.Z.BorderBrandDefault,backgroundActive:l.Z.ButtonBackgroundSecondaryActive,colorActive:l.Z.ButtonTextSecondaryActive,borderActive:l.Z.BorderBrandDefault,focusOutline:l.Z.BorderBrandDefault},secondaryDark:void 0,tertiaryLight:{backgroundDefault:"transparent",colorDefault:l.Z.ButtonTextTertiaryDefault,borderDefault:"transparent",backgroundHover:l.Z.ButtonBackgroundTertiaryHover,colorHover:l.Z.ButtonTextTertiaryHover,borderHover:l.Z.ButtonBorderTertiaryHover,backgroundActive:l.Z.ButtonBackgroundTertiaryActive,colorActive:l.Z.ButtonTextTertiaryActive,borderActive:l.Z.ButtonBorderTertiaryActive,focusOutline:l.Z.BorderBrandDefault},tertiaryDark:{backgroundDefault:"transparent",colorDefault:l.Z.ButtonTextTertiaryDefaultInverse,borderDefault:"transparent",backgroundHover:l.Z.ButtonBackgroundTertiaryHoverInverse,colorHover:l.Z.ButtonTextTertiaryHoverInverse,borderHover:l.Z.ButtonBorderTertiaryHoverInverse,backgroundActive:l.Z.ButtonBackgroundTertiaryActiveInverse,colorActive:l.Z.ButtonTextTertiaryActiveInverse,borderActive:l.Z.ButtonBorderTertiaryActiveInverse,focusOutline:l.Z.BorderBrandDefault},roundLight:{borderRadius:"100%",backgroundDefault:a.I.Background.Base.Default,colorDefault:l.Z.ButtonTextTertiaryDefault,borderDefault:l.Z.ButtonBorderTertiaryActive,backgroundHover:l.Z.ButtonBackgroundTertiaryHover,colorHover:l.Z.ButtonTextTertiaryHover,borderHover:l.Z.ButtonBorderTertiaryHover,backgroundActive:l.Z.ButtonBackgroundTertiaryActive,colorActive:l.Z.ButtonTextTertiaryActive,borderActive:l.Z.ButtonBorderTertiaryActive,focusOutline:l.Z.BorderBrandDefault,boxShadow:s.dZ.boxShadow},roundDark:void 0};function h(e){var t,n;const a=p[`${e.variant}${"dark"===e.theme?"Dark":"Light"}`];return i.ux.style(function(e,t){const n="small"===e?1.5:"medium"===e?1.75:2,a=t?0:i.ux.rem(r.x);return u({default:{borderRadius:i.ux.rem(o.xB),display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",transform:"scale(1)",overflow:"hidden",padding:0,outline:"none",border:0,backgroundColor:"transparent",verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",fontWeight:"normal",minWidth:i.ux.rem(n),minHeight:i.ux.rem(n),lineHeight:i.ux.rem(n)},icon:{minWidth:i.ux.rem(n),minHeight:i.ux.rem(n),lineHeight:i.ux.rem(n)},hovered:{cursor:"pointer"},disabled:{opacity:.4,cursor:"not-allowed",$nest:{'& > i[data-disabled="true"]':{fill:"inherit",stroke:"inherit"}}},hidden:{display:"none"},textPosLeft:{padding:`0 0 0 ${a}`},textPosRight:{padding:`0 ${a} 0 0`},textPosEverywhere:{padding:`0 ${a} 0 ${a}`}})}(null!==(t=e.size)&&void 0!==t?t:"large",null!==(n=e.compact)&&void 0!==n&&n),a?m(a,"dark"===e.theme,e.contained):void 0,...Array.from([]).concat(e.style).map((e=>u(null!=e?e:{}))))}},45578:(e,t,n)=>{n.d(t,{x:()=>p});var i=n(27378),r=n(4870),o=n(93986),a=n(89894),s=n(17138),l=n(94689);const c="closeBtn",u="closeIcon",d=(0,l.dD)({$nest:{[`& .${u}`]:Object.assign(Object.assign({},(0,l.fx)(1.5)),{stroke:a.ux.important(s.I.Text.Base.Inverse)})}},c),m={closeButton:a.ux.joinClasses([c,a.ux.style(d)]),closeIcon:u},p=({name:e,style:t,onClick:n})=>i.createElement(o.z,{variant:"tertiary",style:[t],onClick:n,compact:!0,size:"small",theme:"dark",name:e},i.createElement(r.JO.Close,{className:m.closeIcon}))},31956:(e,t,n)=>{n.d(t,{d:()=>a});var i=n(27378),r=n(18208),o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const a=i.forwardRef((function(e,t){var{children:n,rel:a}=e,s=o(e,["children","rel"]);const l=i.useMemo((()=>r.fg(10)),[]);return i.createElement(i.Fragment,null,i.createElement("span",{hidden:!0,id:l},"Opens an external site in a new window"),i.createElement("a",Object.assign({},s,{"aria-describedby":l,target:"_blank",rel:null!=a?a:"noopener noreferrer",ref:t}),n))}))},27995:(e,t,n)=>{n.d(t,{J2:()=>_,yS:()=>C});var i=n(27378),r=n(30116),o=n(37869),a=n(64840),s=n(5114),l=n(57050),c=n(99517),u=n(89894),d=n(32952),m=n(19751),p=n(53514),h=n(17138),f=n(69470),g=n(54001),v=n(40),b=n(79378),y=n(13713),x=n(45578),k=n(33829),S=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const w=(0,g.xb)(r.aV),C=i.createContext({closePopover:l.Q1});var E;!function(e){e.umount="unmount",e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick"}(E||(E={}));const _=e=>{var t,n,r,l,p,h,f,g,{reference:b,title:_,body:T,footer:P,className:N,placement:j,offset:U,containerPadding:z,onClose:D,onMount:L}=e,G=S(e,["reference","title","body","footer","className","placement","offset","containerPadding","onClose","onMount"]);const Z=i.useRef(null),[H,V]=i.useState(null),[$,K]=i.useState(null),W=(0,v.s)(),{styles:q,attributes:Q,state:Y}=(0,o.D)(b,H,{placement:null!=j?j:"top",modifiers:[{name:"offset",options:{offset:[0,6+(null!=U?U:0)]}},{name:"arrow",options:{element:$,padding:12}},{name:"preventOverflow",options:{padding:null!=z?z:5}},W]}),J=null!==(g=null===(f=null===(h=null===(p=null===(l=null===(r=null===(n=null===(t=q.arrow)||void 0===t?void 0:t.transform)||void 0===n?void 0:n.replace("translate3d(",""))||void 0===r?void 0:r.replace("translate(",""))||void 0===l?void 0:l.replace(")",""))||void 0===p?void 0:p.split(","))||void 0===h?void 0:h.map((e=>e.trim())))||void 0===f?void 0:f.map((e=>parseInt(e,10))))&&void 0!==g?g:[],X=i.useRef(new d.xQ),ee=i.useRef(null),te=(0,a.d)({defaultOpen:!1,onOpenChange:e=>{const t=ee.current;null!==t&&clearTimeout(t),e||(ee.current=setTimeout((()=>X.current.next(void 0)),500))}}),{overlayProps:ne,underlayProps:ie}=(0,k.I)({isOpen:te.isOpen,onClose:te.close,shouldCloseOnBlur:!0,isDismissable:!0,shouldCloseOnInteractOutside:(e,t)=>{const n=null==t?void 0:t.composedPath();let i=!1;return i=!n||!n.some((e=>e instanceof Node&&(null==H?void 0:H.contains(e)))),i&&(Z.current=E.interactOutside),i}},{current:H}),{portalContainer:re}=i.useContext(y.l);i.useEffect((()=>{const e=m.timer(0).subscribe((()=>te.open()));return()=>e.unsubscribe()}),[]),i.useEffect((()=>{te.isOpen&&H&&(null==L||L(H))}),[te.isOpen,H]),i.useEffect((()=>{const e=X.current.subscribe((()=>{var e;return null==D?void 0:D(null!==(e=Z.current)&&void 0!==e?e:E.umount)}));return()=>e.unsubscribe()}),[X]);const oe=i.useCallback((e=>{Z.current=e,te.close()}),[te]);return b?i.createElement(w,{portalContainer:re.view(s.toUndefined)},i.createElement(c.n,{in:te.isOpen},((e,t)=>{var n,r;return i.createElement(i.Fragment,null,te.isOpen&&i.createElement("div",Object.assign({},ie,{className:A})),i.createElement("div",Object.assign({},G,Q.popper,ne,{ref:e=>V(e),style:Object.assign(Object.assign({},q.popper),ne.style),className:u.ux.joinClasses([O,N,e]),onTransitionEnd:e=>{if(e.target===H&&(t(),!te.isOpen)){const e=ee.current;null!==e&&clearTimeout(e),X.current.next(void 0)}}}),i.createElement("div",{ref:K},i.createElement("svg",{className:F,"data-placement":(null===(n=null==Y?void 0:Y.placement)||void 0===n?void 0:n.startsWith("bottom"))?"bottom":(null==Y?void 0:Y.placement.startsWith("top"))?"top":(null==Y?void 0:Y.placement.startsWith("right"))?"right":(null===(r=null==Y?void 0:Y.placement)||void 0===r?void 0:r.startsWith("left"))?"left":void 0,viewBox:"0 0 12 12",style:{position:"absolute",left:0!==J[0]&&Number.isFinite(J[0])?J[0]:void 0,top:0!==J[1]&&Number.isFinite(J[1])?J[1]:void 0}},i.createElement("path",{d:"M0 0 L6 6 L12 0"}))),i.createElement(C.Provider,{value:{closePopover:oe}},i.createElement(x.x,{style:I,onClick:()=>oe(E.closeButtonClick),name:"tooltipClose"}),_?i.createElement("div",{className:R},_):null,T?i.createElement("div",{className:B},T):null,P?i.createElement("div",{className:M},P):null)))}))):null},I={default:{position:"absolute",top:u.ux.rem(p.x),right:u.ux.rem(p.x)}},A=u.ux.style({position:"fixed",inset:0}),O=u.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:u.ux.rem(p.yC),background:b.Z.PopoverBackgroundBaseSubdued,border:`1px solid ${h.I.Border.Base.Default}`,color:h.I.Text.Base.Inverse,borderRadius:u.ux.rem(f.ze),minWidth:u.ux.rem(9.375),maxWidth:u.ux.rem(15),fontSize:u.ux.rem(.875),lineHeight:u.ux.rem(1.375),padding:u.ux.rem(p.mh),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}}),R=u.ux.style({fontWeight:700,color:h.I.Text.Base.Inverse}),B=u.ux.style({color:h.I.Border.Base.Subdued}),M=u.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:u.ux.rem(p.x),marginTop:u.ux.rem(p.mh-p.yC),width:"100%"}),F=u.ux.style({position:"absolute",stroke:h.I.Border.Base.Default,fill:b.Z.PopoverBackgroundBaseSubdued,strokeWidth:"1px",width:u.ux.rem(.75),height:u.ux.rem(.75),$nest:{'&[data-placement="top"]':{top:"100%",transform:"translateX(-50%)"},'&[data-placement="bottom"]':{bottom:"100%",transform:"translateX(-50%) rotate(180deg)"},'&[data-placement="left"]':{left:"100%",transform:"translateY(-50%) rotate(-90deg)"},'&[data-placement="right"]':{right:"100%",transform:"translateY(-50%) rotate(90deg)"}}})},40:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(27378);const r=function(){return i.useMemo((()=>({name:"forcePopperUpdateEffect",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}},24435:(e,t,n)=>{n.d(t,{F:()=>c});var i=n(27378),r=n(90845),o=n(80544),a=n(79692),s=n(60797),l=n(28043);function c(e){const{ref:t,onMount:n}=r.P.useElWatcher(),c=i.useMemo((()=>t.pipe(o.QV(a.E),s.oA,l.x(),e)),[t]);return r.P.useSubscriptionTo(c),{ref:t,onMount:n}}},83289:(e,t,n)=>{n.d(t,{i:()=>i});var i,r=n(8125),o=n(22232);!function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.headerCloseButtonClick="headerCloseButtonClick",e.headerGoBackButtonClick="headerGoBackButtonClick",e.headerVoiceButtonClick="headerVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.actionBrickMount="actionBrickMount",e.actionBrickShow="actionBrickShow",e.actionsMount="actionsMount",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardCopyButtonClick="resultCardCopyButtonClick",e.resultCardCopyToClipboard="resultCardCopyToClipboard",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardDismissButtonClick="errorCardDismissButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange",e.voiceProfileTabChange="voiceProfileTabChange",e.voiceTagClick="voiceTagClick",e.voiceTagPopoverClose="voiceTagPopoverClose",e.voiceTagPopoverKeepButtonClick="voiceTagPopoverKeepButtonClick",e.voiceTagPopoverRemoveButtonClick="voiceTagPopoverRemoveButtonClick",e.voiceDialectDropdownSelectionChange="voiceDialectDropdownSelectionChange",e.voiceRoleDropdownSelectionChange="voiceRoleDropdownSelectionChange",e.voiceSelectionsSaveButtonClick="voiceSelectionsSaveButtonClick",e.voiceSelectionsCancelButtonClick="voiceSelectionsCancelButtonClick",e.voiceSelectionsEditButtonClick="voiceSelectionsEditButtonClick",e.surveyRatingSelectionChange="surveyRatingSelectionChange",e.surveyOpenAnswerChange="surveyOpenAnswerChange",e.surveySubmitButtonClick="surveySubmitButtonClick",e.surveyKeyPressShiftEnter="surveyKeyPressShiftEnter",e.surveyCancelButtonClick="surveyCancelButtonClick",e.surveyCloseButtonClick="surveyCloseButtonClick",e.regenerateWithoutReferenceButtonClick="regenerateWithoutReferenceButtonClick",e.restoreHistoryButtonClick="restoreHistoryButtonClick",e.userPromptSubmit="userPromptSubmit",e.radioOptionsSubmitButtonClick="radioOptionsSubmitButtonClick",e.radioOptionsCancelButtonClick="radioOptionsCancelButtonClick",e.removeSelectionContextClick="removeSelectionContextClick",e.selectionContextInteraction="selectionContextInteraction",e.settingsButtonClick="settingsButtonClick",e.toneReportLoadedEmptyMount="toneReportLoadedEmptyMount",e.toneReportLoadedNonEmptyMount="toneReportLoadedNonEmptyMount",e.toneReportBackToSuggestionsButtonClick="toneReportBackToSuggestionsButtonClick",e.toneReportToneLikeButtonClick="toneReportToneLikeButtonClick",e.toneReportToneDislikeButtonClick="toneReportToneDislikeButtonClick",e.toneReportFooterUphookPremiumButtonShow="toneReportFooterUphookPremiumButtonShow",e.toneReportFooterUphookPremiumButtonClick="toneReportFooterUphookPremiumButtonClick",e.signInButtonClick="signInButtonClick"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,r.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardCopyButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick),e.is(e.Kind.regenerateWithoutReferenceButtonClick)),e.isToneDetectorAction=(0,r.Kg)(e.is(e.Kind.toneReportLoadedEmptyMount),e.is(e.Kind.toneReportLoadedNonEmptyMount),e.is(e.Kind.toneReportBackToSuggestionsButtonClick),e.is(e.Kind.toneReportToneLikeButtonClick),e.is(e.Kind.toneReportToneDislikeButtonClick),e.is(e.Kind.toneReportFooterUphookPremiumButtonShow),e.is(e.Kind.toneReportFooterUphookPremiumButtonClick)),e.isSurveyAction=(0,r.Kg)(e.is(e.Kind.surveyOpenAnswerChange),e.is(e.Kind.surveySubmitButtonClick),e.is(e.Kind.surveyKeyPressShiftEnter),e.is(e.Kind.surveyCancelButtonClick),e.is(e.Kind.surveyCloseButtonClick),e.is(e.Kind.surveyRatingSelectionChange)),e.isSurveyImplicitDismissAction=(0,r.Kg)(e.is(e.Kind.promptSubmitButtonClick),e.is(e.Kind.actionBrickClick),e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.resultCardHeaderClick))}(i||(i={})),(0,o.L0)(void 0)},33148:(e,t,n)=>{n.d(t,{J4:()=>u,JS:()=>r});var i,r,o=n(69243),a=n(59502),s=n(73915),l=n(8125),c=n(79662);!function(e){e.Codec=o.OT(o.jV([o.OT(o.dt({action:o.OT(o.Z_)})),o.G0([o.r$({}),o.IM(o.Z_,o._4)])])),e.is=function(t){return e.Codec.is(t)}}(i||(i={})),function(e){let t,n,i,r,u,d;!function(e){const t=o.OT(o.i0("error")),n=o.OT(o.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(t=e.Error||(e.Error={})),function(e){const t=o.OT(o.i0("finished")),n=o.OT(o.G0([o.OT(o.i0("all_checks_failed")),o.OT(o.i0("all_checks_succeeded")),o.OT(o.i0("nothing_to_check")),o.OT(o.i0("some_checks_failed")),o.OT(o.i0("some_checks_in_progress")),o.OT(o.i0("unknown"))])),i=o.OT(o.dt({action:t,checksStatus:n}));e.is=function(e){return i.is(e)},e.isAction=function(e){return t.is(e)}}(n=e.Finished||(e.Finished={})),function(e){const t=o.OT(o.i0("async_check_finished")),n=o.OT(o.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(i=e.AsyncCheckFinished||(e.AsyncCheckFinished={})),function(e){const t=o.OT(o.i0("emotions")),n=o.OT(o.dt({action:o.OT(o.i0("emotions"))}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(r=e.TonesResult||(e.TonesResult={})),function(e){const t=o.OT(o.i0("show_survey")),n=o.OT(o.dt({action:t}));e.is=function(e){return n.is(e)},e.isAction=function(e){return t.is(e)}}(u=e.ShowSurvey||(e.ShowSurvey={})),function(e){let t,n;!function(e){const t=o.OT(o.i0("cheetah"));e.Codec=o.OT(o.dt({action:t,id:o.OT(o.pk)})),e.is=function(t){return e.Codec.is(t)},e.isAction=function(e){return t.is(e)}}(t=e.CheetahAck||(e.CheetahAck={})),function(e){e.is=s.n(c.Pb.extend(a.Schemable)({any:a.id(),sensitiveString:a.string,sensitiveDelta:a.id()}))(c.Pb.ServerMessageImplementations).is}(n=e.CheetahProtocolServerMessage||(e.CheetahProtocolServerMessage={})),e.is=(0,l.Kg)(t.is,n.is)}(d=e.CheetahInboundCAPIMessage||(e.CheetahInboundCAPIMessage={})),e.is=(0,l.Kg)(t.is,u.is,d.is,r.is,n.is,i.is)}(r||(r={}));const u=(0,l.Kg)(r.Finished.is,r.AsyncCheckFinished.is,r.TonesResult.is);(0,l.Kg)(r.Finished.isAction,r.AsyncCheckFinished.isAction,r.TonesResult.isAction),r.CheetahInboundCAPIMessage.is},819:(e,t,n)=>{n.d(t,{_:()=>i});var i,r=n(5114),o=n(57050),a=n(8125);!function(e){let t,n;function i(e){return e.kind===t.activeLimited||e.kind===t.activeUnlimited}function s(e){return e.kind===t.passive}function l(e){return e.kind===t.unknown}function c(e){return i(e)||l(e)}function u(n){if(void 0===n)return{kind:t.unknown,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}};const i=e.Active.parseRefillDate(n.usage.refillDate);return n.usage.promptsRemaining<0?{kind:t.unknown,userSettings:n.settings}:1e4===n.usage.promptsAllocated&&n.usage.promptsRemaining>0?{kind:t.activeUnlimited,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}:n.usage.promptsRemaining>0?{kind:t.activeLimited,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}:{kind:t.passive,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}}!function(e){e.activeLimited="activeLimited",e.activeUnlimited="activeUnlimited",e.passive="passive",e.unavailable="unavailable",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,a.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function n(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=n,e.daysUntilRefillDate=function(e){return Math.floor(n(e)/24)}}(n=e.Active||(e.Active={})),e.isActive=i,e.isActiveUnlimited=function(e){return e.kind===t.activeUnlimited},e.isPassive=s,e.isActiveOrPassive=(0,a.Kg)(i,s),e.isUnknown=l,e.isUsable=c,e.isVisible=function(e){return c(e)||s(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUserState=u,e.updateUsage=function(t,n){return u({usage:n,settings:t.kind===e.Kind.disabled||t.kind===e.Kind.unavailable?{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}:t.userSettings})},e.getPromptsAllocated=function(t){return(0,o.zG)(t,r.fromPredicate(e.isActiveOrPassive),r.map((e=>e.promptsAllocated)))}}(i||(i={}))},98370:(e,t,n)=>{function i(e){return{kind:e.kind,source:e.source,name:e.name,jsonData:JSON.stringify(e.data)}}n.d(t,{L:()=>i})},89727:(e,t,n)=>{function i(e){return{kind:"error",source:"core",name:"lifecycleStartingFailed",data:e}}function r(e){return{kind:"error",source:"core",name:"lifecycleVisuallyReadyFailed",data:e}}function o(e){return{kind:"error",source:"core",name:"lifecycleInteractionReadyFailed",data:e}}function a(e){return{kind:"error",source:"core",name:"lifecycleReadyToDragFailed",data:e}}function s(e){return{kind:"error",source:"core",name:"lifecycleFocusStateChangedFailed",data:e}}function l(e){return{kind:"error",source:"core",name:"lifecycleCloseFailed",data:e}}function c(e){return{kind:"error",source:"core",name:"unsanitizeTextOnInboundCAPIMessageFailed",data:e}}function u(e){return{kind:"error",source:"core",name:"sanitizeTextOnOutboundCAPIMessageFailed",data:e}}function d(){return{kind:"error",source:"core",name:"getContextFailed",data:null}}function m(){return{kind:"error",source:"core",name:"getHistoryFailed",data:null}}function p(e){return{kind:"error",source:"core",name:"actionFailed",data:e}}function h(e){return{kind:"error",source:"core",name:"waitForContextTimeout",data:e}}function f(){return{kind:"error",source:"core",name:"waitForHistoryTimeout",data:null}}function g(){return{kind:"error",source:"core",name:"waitForResultTimeout",data:null}}function v(e){return{kind:"error",source:"core",name:"waitForAckTimeout",data:e}}function b(e){return{kind:"error",source:"core",name:"setVoiceProfileFailed",data:e}}function y(e){return{kind:"error",source:"core",name:"setNewVoiceProfileFailed",data:e}}function x(e){return{kind:"error",source:"core",name:"capiErrorUnhandled",data:e}}function k(e){return{kind:"error",source:"core",name:"insertResultFailed",data:e}}function S(e){return{kind:"error",source:"core",name:"copyResultFailed",data:e}}function w(e){return{kind:"error",source:"core",name:"regenerateResultFailed",data:e}}function C(e){return{kind:"error",source:"core",name:"stopInProgressResultFailed",data:e}}function E(e){return{kind:"error",source:"core",name:"getTextFailed",data:e}}function _(e){return{kind:"error",source:"core",name:"reportUphookShowFailed",data:e}}function I(e){return{kind:"error",source:"core",name:"reportUphookClickFailed",data:e}}function A(e){return{kind:"error",source:"core",name:"reportMetricFailed",data:e}}n.d(t,{$E:()=>d,Ax:()=>f,B$:()=>s,CN:()=>l,IL:()=>a,Jr:()=>y,Kf:()=>k,Ld:()=>A,Lp:()=>C,No:()=>v,Nu:()=>S,Qw:()=>o,TX:()=>b,Z9:()=>x,bE:()=>g,bS:()=>u,g0:()=>w,g4:()=>p,gW:()=>h,ix:()=>_,o9:()=>r,ol:()=>I,pA:()=>i,q_:()=>E,tD:()=>m,xe:()=>c})},4068:(e,t,n)=>{n.d(t,{H:()=>i});var i,r=n(5114),o=n(64015),a=n(17889),s=n(57050);!function(e){let t,n;e.fromOuterContext=function(e){var n,i,l,c;const u=e=>(0,s.zG)(r.fromNullable(null==e?void 0:e.from),r.chain(o.YM),r.fold((()=>t.empty),t.fromNameAndEmailString)),d=e=>(0,s.zG)(r.fromNullable(null==e?void 0:e.to),r.chain(a.c2),r.map(a.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[]))),m=(0,s.zG)(r.fromNullable(e.items),r.chain(o.YM),r.getOrElseW((()=>{})));return{previousMessageInfo:{author:u(null==m?void 0:m.people),directRecipients:d(null==m?void 0:m.people),text:null!==(n=null==m?void 0:m.text)&&void 0!==n?n:""},title:null!==(i=e.title)&&void 0!==i?i:"",author:u(e.people),directRecipients:d(e.people),indirectRecipients:(0,s.zG)(r.fromNullable(null===(l=e.people)||void 0===l?void 0:l.cc),r.chain(a.c2),r.map(a.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[]))),undisclosedRecipients:(0,s.zG)(r.fromNullable(null===(c=e.people)||void 0===c?void 0:c.bcc),r.chain(a.c2),r.map(a.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,s.zG)(r.fromNullable(t.match(/^([^<]*)<(.*)>$/)),r.map((e=>{var t,n,i,r;return{name:null!==(n=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==n?n:"",email:null!==(r=null===(i=e[2])||void 0===i?void 0:i.trim())&&void 0!==r?r:""}})),r.getOrElse((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(n=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(i||(i={}))},14047:(e,t,n)=>{n.d(t,{x:()=>i});var i,r=n(73975),o=n(5114),a=n(64015),s=n(17889),l=n(57050),c=n(56929),u=n(8125),d=n(95195),m=n(65602),p=n(3299);!function(e){let t,n,i,h,f,g,v;function b(e){return"complete"===e.kind}function y(e){return"history"===e.kind}function x(e){return"inProgressOngoing"===e.kind}function k(e){return"inProgressPending"===e.kind}!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e,10)},e.eq=r.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(n=e.Feedback||(e.Feedback={})),function(e){e.insert="insert",e.copy="copy",e.rephrase="rephrase"}(i=e.SupportedAction||(e.SupportedAction={})),e.hasId=function(e){return"id"in e},e.isComplete=b,e.isHistory=y,e.isAIUsageNotification=function(e){return"aiUsageNotification"===e.kind},e.isStandardCompletedResult=(0,u.Kg)(b,y),e.isInProgressOngoing=x,e.isInProgressPending=k,e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,u.Kg)(x,k),function(e){e.generic="generic",e.user="user"}(h=e.GeneratedTextVoice||(e.GeneratedTextVoice={})),function(t){t.createFromResultMessage=function(t){var n,i;const r=(0,l.zG)((0,m.DO)(null===(n=t.text)||void 0===n?void 0:n.delta),o.getOrElse((()=>new c.i)));return(0,l.zG)((0,m.DO)(null===(i=t.withVoiceText)||void 0===i?void 0:i.delta),d.fromOption((()=>r)),d.map((n=>({generic:r,user:n,preferVoice:!0===(null==t?void 0:t.showVoiceTextByDefault)?e.GeneratedTextVoice.user:e.GeneratedTextVoice.generic}))))}}(f=e.ResultDelta||(e.ResultDelta={})),function(t){t.createFromCard=function(t,n){return{kind:"history",id:e.Id.create(t.id),header:"action"===t.title.kind?{label:t.title.label,iconUrl:""!==t.title.iconUrl.trim()?o.some(t.title.iconUrl):o.none,copiablePrompt:o.none}:{label:t.title.text,iconUrl:o.none,copiablePrompt:""!==t.title.text.trim()?o.some(t.title.text):o.none},replacementDelta:f.createFromResultMessage({text:t.text,withVoiceText:t.text.plain===t.withVoiceText.plain?void 0:t.withVoiceText,showVoiceTextByDefault:t.text.plain===t.withVoiceText.plain?void 0:t.showVoiceTextByDefault}),supportedActions:new Set([e.SupportedAction.insert].concat(n?[e.SupportedAction.copy]:[])),references:(0,l.zG)(t.references,a.UI(p.s.create),s.c2)}}}(g=e.History||(e.History={})),function(e){e.fromInProgressResult=function(e,t){return Object.assign(Object.assign({},e),{kind:"aiUsageNotification",text:t})}}(v=e.AIUsageNotification||(e.AIUsageNotification={}))}(i||(i={}))},54518:(e,t,n)=>{n.d(t,{s:()=>i});var i,r=n(8125);!function(e){function t(e){return"rewrite"===e}function n(e){return"quickRewrite"===e}e.isIdeation=function(e){return"ideation"===e},e.isRewrite=t,e.isQuickReply=function(e){return"quickReply"===e},e.isQuickRewrite=n,e.isPushRewrite=function(e){return"pushRewrite"===e},e.isRewriteOrQuickRewrite=(0,r.Kg)(t,n)}(i||(i={}))},12968:(e,t,n)=>{n.d(t,{u:()=>i});const i={}},99877:(e,t,n)=>{var i,r;n.d(t,{e:()=>i,n:()=>r}),function(e){e.intentCard="intentCard",e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.appActionsList="appActionsList",e.creditsInfoButton="creditsInfoButton",e.promptInput="promptInput",e.promptInputAndMenuContainer="promptInputAndMenuContainer",e.promptMenuContent="promptMenuContent",e.skill="skill",e.referencesList="referencesList",e.historyButton="historyButton",e.historyButtonActive="historyButtonActive"}(i||(i={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.initialBTSPopupAnchor="initialBTSPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(r||(r={}))},6273:(e,t,n)=>{n.d(t,{Z:()=>i});var i,r=n(57050),o=n(22232),a=n(5114),s=n(71249);!function(e){let t,n,i,l,c,u,d,m,p;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive",e.copy="copy",e.generationCompleted="generationCompleted"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner",e.keepVoiceTag="keepTag",e.removeVoiceTag="removeTag",e.toggleToMyVoice="toggleToMyVoice",e.toggleToNeutral="toggleToNeutral"}(t=e.UserAction||(e.UserAction={}))}(n=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(i=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(l=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(c=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={}))}(u=e.HistoryButton||(e.HistoryButton={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(d=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close",e.readyToInteract="readyToInteract"}(t=e.UserAction||(e.UserAction={}))}(m=e.Assistant||(e.Assistant={})),function(e){let t,n;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={})),function(e){e.dontShowOnDocument="dontShowOnDocument",e.dontShowForever="dontShowForever"}(n=e.AIUsageUserAction||(e.AIUsageUserAction={}))}(p=e.Notification||(e.Notification={})),e.getComponentId=function(e,t,n,l={}){const c=(0,r.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===i.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"historyButton":case"prompt":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return t;default:return(0,o.L0)(t)}}));return(0,r.zG)(a.fromNullable(n),a.map((e=>`cheetah:history-card:${e}`)),a.getOrElse((()=>`cheetah:${c}${t?`:${t}`:""}`)),(u=l,e=>(0,r.zG)(Object.entries(u),s.u4(e,((e,[t,n])=>{const i=e.includes("?")?"&":"?";return e+`${i}${t}=${n}`})))));var u},e.getUserAction=function(e){return(0,r.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===i.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===m.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"historyButton":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return e.userAction;default:return(0,o.L0)(t)}}))}}(i||(i={}))},79662:(e,t,n)=>{n.d(t,{Pb:()=>o,XU:()=>a});var i=n(87986),r=n(31237);const o=i,a=r.i},43254:(e,t,n)=>{n.d(t,{t:()=>G});var i=n(99950),r=n(62965),o=n(57050),a=n(87986),s=n(85985),l=n(71032),c=n(12126),u=n(82900),d=n(18775),m=n(50858),p=n(55818),h=n(95195),f=n(40154),g=n(36991),v=n(98314),b=n(11452),y=n(83257),x=n(55415);function k(e){return{encode:function(t){var n=Object.entries(e).filter((function(e){return(0,v._)(e,1)[0]in t})).map((function(e){var n=(0,v._)(e,2),i=n[0],a=n[1];return(0,o.zG)(void 0===t[i]?r.F2(void 0):a.encode(t[i]),r.UI((function(e){return[i,e]})))}));return(0,o.zG)(r.RD(n),r.UI((function(e){return x.sq(e)})))}}}var S=k,w=S;function C(){return{encode:function(e){return r.F2(e)}}}var E,_=function(e){return null===e?"null":void 0===e?"undefined":(0,b._)(e)},I=function(e,t){if(void 0!==e&&void 0!==t){var n=_(e),i=_(t);if("object"===n||"object"===i)return Object.assign({},e,t)}return t},A={URI:"io-ts/EncoderAsync",literal:function(){return C()},string:C(),number:C(),boolean:C(),nullable:function(e){return{encode:function(t){return null===t?r.F2(null):e.encode(t)}}},type:w,struct:S,partial:k,record:function(e){return{encode:function(t){var n=Object.entries(t).map((function(t){var n=(0,v._)(t,2),i=n[0],a=n[1];return(0,o.zG)(e.encode(a),r.UI((function(e){return[i,e]})))}));return(0,o.zG)(r.RD(n),r.UI((function(e){return x.sq(e)})))}}},array:function(e){return{encode:function(t){return r.RD(t.map((function(t){return e.encode(t)})))}}},tuple:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{encode:function(e){return r.RD(t.map((function(t,n){return t.encode(e[n])})))}}},intersect:function(e){return function(t){return{encode:function(n){return(0,o.zG)(t.encode(n),r.tS((function(t){return(0,o.zG)(e.encode(n),r.UI((function(e){return I(t,e)})))})))}}}},sum:y.Sm,lazy:function(e,t){return y.Vo(t)},readonly:y.OT},O=n(73915);y.ov,y.id(),y.id(),y.id(),y.AG,y.dt,y.n_,y.r$,y.IM,y.IX,y.bc,y.wf,y.Sm,y.OT;!function(e){e.interpreter=(0,o.MZ)(O.n);e.extend=function(e){return function(t){return(0,m._)({},e,t)}}}(E||(E={}));var R=n(50693),B=n(74923),M=n(31099),F=n(71346),T=function(e){(0,M._)(n,e);var t=(0,F._)(n);function n(e,i){var r;return(0,u._)(this,n),r=t.call(this,"DLP Sanitizer: Schema mismatch error. ".concat(e)),(0,d._)((0,R._)(r),"decodeError",void 0),r.decodeError=i,r}return(0,B._)(n,[{key:"toString",value:function(){return"Decode error:\n      Message: ".concat(this.message,"\n      Details: ").concat(this.decodeError)}}]),n}(n(22232).sH),P=function e(t){var n=this;(0,u._)(this,e),(0,d._)(this,"_sanitizationFunctions",void 0),(0,d._)(this,"sanitizeMessage",void 0),(0,d._)(this,"unsanitizeMessage",void 0),(0,d._)(this,"_replaceInDelta",void 0),(0,d._)(this,"_sanitizeDelta",void 0),(0,d._)(this,"_unsanitizeDelta",void 0),(0,d._)(this,"_sensitiveDecoder",void 0),(0,d._)(this,"_sanitizingEncoder",void 0),(0,d._)(this,"_unsanitizingEncoder",void 0),(0,d._)(this,"_getMessageHandler",void 0),this._sanitizationFunctions=t,this.sanitizeMessage=function(e,t){var i=n._getMessageHandler(t);return(0,o.zG)(i.decode(e),h.fold((function(e){return r.t$(new T("Sanitization failed",f.ii(e)))}),(function(e){return i.sanitizer.encode(e)})))},this.unsanitizeMessage=function(e,t){var i=n._getMessageHandler(t);return(0,o.zG)(i.decode(e),h.fold((function(e){return r.t$(new T("Unsanitization failed",f.ii(e)))}),(function(e){return i.unsanitizer.encode(e)})))},this._replaceInDelta=function(e,t){return(0,o.zG)(r.RD(e.ops.map((function(e){return g.s.isInsertString(e)?(0,o.zG)(t(e.insert),r.UI((function(t){return(0,p._)((0,m._)({},e),{insert:t})}))):r.F2(e)}))),r.UI((function(e){return{ops:e}})))},this._sanitizeDelta=function(e){return n._replaceInDelta(e,n._sanitizationFunctions.sanitizeText)},this._unsanitizeDelta=function(e){return n._replaceInDelta(e,n._sanitizationFunctions.unsanitizeText)},this._sensitiveDecoder=E.extend(j)({any:f.id(),sensitiveString:f.Z_,sensitiveDelta:f.id()}),this._sanitizingEncoder=E.extend(A)({any:C(),sensitiveString:{encode:this._sanitizationFunctions.sanitizeText},sensitiveDelta:{encode:this._sanitizeDelta}}),this._unsanitizingEncoder=E.extend(A)({any:C(),sensitiveString:{encode:this._sanitizationFunctions.unsanitizeText},sensitiveDelta:{encode:this._unsanitizeDelta}}),this._getMessageHandler=function(e){return(0,p._)((0,m._)({},E.interpreter(n._sensitiveDecoder)(e)),{sanitizer:E.interpreter(n._sanitizingEncoder)(e),unsanitizer:E.interpreter(n._unsanitizingEncoder)(e)})}},N=function e(){(0,u._)(this,e),(0,d._)(this,"sanitizeMessage",(function(e,t){return r.F2(e)})),(0,d._)(this,"unsanitizeMessage",(function(e,t){return r.F2(e)}))},j=(0,p._)((0,m._)({},f.z2),{struct:f.z2.partial,type:f.z2.partial}),U=n(33148),z=n(98370),D=n(89727),L=n(2735);class G{constructor(e){this._params=e,this.relevantInboundCAPIMessages=this._getRelevantInboundCAPIMessagesObs();const t=e.dlpOptions;this._dlpSanitizer=t?new P({sanitizeText:e=>r.Y3((()=>t.sanitizeText(e)),L.N),unsanitizeText:e=>r.Y3((()=>t.unsanitizeText(e)),L.N)}):new N}cheetahGetContext(e){return(0,o.zG)(this._sanitizeOutboundCheetahMessage("cheetah:getContext",e,a.MessageGetContext),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:getContext",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahAction(e){return(0,o.zG)(this._sanitizeOutboundCheetahMessage("cheetah:action",e,a.MessageAction),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:action",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahGetHistory(){return this._params.sendCAPIMessage({action:"cheetah:getHistory",shouldInjectRev:!1,data:{},shouldInjectSessionId:!1})}cheetahGetUserState(){return this._params.sendCAPIMessage({action:"cheetah:getUserState",data:{},shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahInterrupt(e){return this._params.sendCAPIMessage({action:"cheetah:interrupt",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSearchReferences(e){return this._params.sendCAPIMessage({action:"cheetah:searchReferences",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoice(e){return this._params.sendCAPIMessage({action:"cheetah:setVoice",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoiceProfile(e){return this._params.sendCAPIMessage({action:"cheetah:setVoiceProfile",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}user_action(e){return this._params.sendCAPIMessage({action:"user_action",data:e,shouldInjectRev:!1,shouldInjectSessionId:!0})}set_context(e){return this._params.sendCAPIMessage({action:"set_context",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}submit_survey_result(e){return this._params.sendCAPIMessage({action:"submit_survey_result",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}feedback(e){return this._params.sendCAPIMessage({action:"feedback",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}toggle_checks(e){return this._params.sendCAPIMessage({action:"toggle_checks",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}_getRelevantInboundCAPIMessagesObs(){return this._params.inboundCAPIMessages.pipe(s.h(U.JS.is),l.b((e=>c.D((0,o.zG)(e,(e=>{switch(e.action){case"cheetah:setContext":return this._dlpSanitizer.unsanitizeMessage(e,a.MessageSetContext);case"cheetah:chunk":return this._dlpSanitizer.unsanitizeMessage(e,a.MessageChunk);case"cheetah:result":return this._dlpSanitizer.unsanitizeMessage(e,a.MessageResult);default:return r.F2(e)}}),r.g_((t=>(this._params.monitoringService.notify((0,z.L)((0,D.xe)({capiMessageAction:e.action,reason:(0,L.N)(t).message}))),i.of(e))),i.of),(e=>e()))))))}_sanitizeOutboundCheetahMessage(e,t,n){return(0,o.zG)(this._dlpSanitizer.sanitizeMessage(t,n),r.Vn((t=>(this._params.monitoringService.notify((0,z.L)((0,D.bS)({capiMessageAction:e,reason:(0,L.N)(t).message}))),t))))}}},92627:(e,t,n)=>{n.d(t,{L:()=>p});var i=n(5114),r=n(57050),o=n(9922),a=n(85985),s=n(77176),l=n(60797),c=n(98403),u=n(23239),d=n(33148),m=n(819);class p{constructor(e,t){this._capiService=e,this._genAIFeaturesState=t,this._subs=new o.w.Keeper,this._availability=u.h.create({kind:m._.Kind.pending,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}}),this.availability=this._availability.view(),this._subs.push(this._genAIFeaturesState.subscribe((e=>{this._availability.set(e.enabled?m._.fromUserState(e.userState):{kind:m._.Kind.unavailable})}))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,a.h(d.JS.CheetahInboundCAPIMessage.is),s.U((e=>"cheetah:setUserState"===e.action?i.some(e.state):i.none)),l.oA,s.U(m._.fromUserState)).subscribe(c.wW(this._availability))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,a.h(d.JS.CheetahInboundCAPIMessage.is),s.U((e=>{switch(e.action){case"cheetah:setContext":case"cheetah:result":return i.some(e.usage);default:return i.none}})),l.oA,s.U((e=>m._.updateUsage(this._availability.get(),e)))).subscribe(c.wW(this._availability)))}dispose(){this._subs.dispose()}}},35298:(e,t,n)=>{n.d(t,{j:()=>a});var i=n(14601),r=n(98403),o=n(23239);class a{constructor(e){this._hostAvailability=e,this._sub=new i.w,this._availability=o.h.create(null),this.availability=this._availability.view(),this._sub=e.subscribe(r.wW(this._availability))}augment(e){this._sub.unsubscribe(),this._sub=e(this._hostAvailability).subscribe(r.wW(this._availability))}dispose(){this._sub.unsubscribe()}}},94689:(e,t,n)=>{n.d(t,{Ki:()=>a,dD:()=>s,fx:()=>r,s4:()=>o});var i=n(89894);function r(e,t){return Object.assign(Object.assign({},function(e){return{width:i.ux.rem(e),minWidth:i.ux.rem(e)}}(e)),function(e){return{height:i.ux.rem(e),minHeight:i.ux.rem(e)}}(null!=t?t:e))}function o(e,t){return`.${e}`.repeat(t)}const a=7;function s(e,t){return function(e,t,n){return{$nest:{[`&${o(t,n)}`]:e}}}(e,t,a)}},65602:(e,t,n)=>{n.d(t,{DO:()=>c,l:()=>u});var i=n(5114),r=n(57050),o=n(69243),a=n(66665),s=n(36991);const l=o.OT(o.dt({ops:o.Bk(o.G0([o.dt({insert:o.OT(o.Z_)}),o.dt({retain:o.OT(o.pk)}),o.dt({delete:o.OT(o.pk)})]))}));function c(e){return(0,r.zG)(e,i.fromPredicate(l.is),i.map((e=>new a.i([...e.ops]))))}function u(e,t){return e.reduce(((e,t)=>(s.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):s.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:s.s.isRetain(t)?e.index+=t.retain:function(e){var t;return s.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}},79378:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(55162);const r=Object.assign(Object.assign({},i),{BrandGreen60:"#018374",BrandGreen80:"#017467",BorderBaseSubduedColor:"#CDD1DC",TextBaseSubduedColor:"#646B81",TextBaseDefault:"#161719",BorderBaseInverse:"#ffffff",BackgroundNeutralDefault:"#646B81",BackgroundAdditionSubdued:"#DEF7F5",BackgroundBaseSubdued:"#F4F4F6",BackgroundBrandDefault:"#027E6F",BackgroundBrandHover:"#017467",BackgroundBrandActive:"#014C43",BorderBrandDefault:"#027E6F",ColorBrandDefault:"#027E6F",ButtonBackgroundSecondaryHover:"#DEF7F5",ButtonBackgroundSecondaryActive:"#B1F0E8",ButtonTextSecondaryDefault:"#027E6F",ButtonTextSecondaryHover:"#014C43",ButtonTextSecondaryActive:"#014C43",ButtonBackgroundTertiaryHover:"#E2E4E9",ButtonBackgroundTertiaryActive:"#CDD1DC",ButtonTextTertiaryDefault:"#646B81",ButtonTextTertiaryHover:"#474B58",ButtonTextTertiaryActive:"#474B58",ButtonBorderTertiaryHover:"#878DA2",ButtonBorderTertiaryActive:"#878DA2",ButtonTextTertiaryDefaultInverse:"#C2C6D4",ButtonTextTertiaryHoverInverse:"#C2C6D4",ButtonBackgroundTertiaryHoverInverse:"#27282E",ButtonBorderTertiaryHoverInverse:"#C2C6D4",ButtonTextTertiaryActiveInverse:"#C2C6D4",ButtonBackgroundTertiaryActiveInverse:"#474B58",ButtonBorderTertiaryActiveInverse:"#C2C6D4",PopoverBackgroundBaseSubdued:"#27282E",IndicatorDotDefault:"#E7E9F5",IndicatorDotActive:"#4A6EE0",OnBrandBadge:"#EDF5FF",OnBrandBadgeLabel:"#4A6EE0",OnBrandBadgeIcon:"#3659B5",OffBrandBadge:"#FDF0F3",OffBrandBadgeLabel:"#CE1331",OffBrandBadgeIcon:"#CE1331",FooterBorder:"#E7E9F5",MenuBackgroundSelected:"#F4F4F6",MenuIconSelected:"#646B81",MenuBorderDefault:"#878DA2",MenuBackgroundHover:"#E2E4E9",MenuIconHover:"#474B58"})},2735:(e,t,n)=>{function i(e){return function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}(e)?e:{message:String(e),name:"",stack:void 0}}n.d(t,{N:()=>i})},44361:(e,t,n)=>{function i(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}n.d(t,{m:()=>i})},33498:(e,t,n)=>{n.d(t,{D:()=>o});var i=n(44586),r=n(76974);function o(e){return e instanceof i.y?e:(0,r.of)(e)}},26320:(e,t,n)=>{n.d(t,{L:()=>c,t:()=>l});var i=n(95195),r=n(62965),o=n(57050),a=n(2735),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function l(e,t,n,r,o){return s(this,void 0,void 0,(function*(){try{const a=yield t();i.isLeft(a)?(null==n||n.error("Error executing async task.",{taskName:e,reason:a.left.message}),null==o||o(a.left)):(null==n||n.debug("Successfully executed async task.",{taskName:e,result:a.right}),null==r||r(a.right))}catch(t){null==o||o(t instanceof Error?t:new Error(String(t)));const i=(0,a.N)(t);null==n||n.error("Error executing async task, promise rejected.",{taskName:e,reason:i.message})}}))}const c={URI:r.ov,map:r.dO.map,ap:(e,t)=>(0,o.zG)(e,r.ap(t))}},13713:(e,t,n)=>{n.d(t,{l:()=>a});var i=n(27378),r=n(5114),o=n(23239);const a=i.createContext({portalContainer:o.h.create(r.none)})},97768:(e,t,n)=>{n.d(t,{S:()=>uP});var i=n(27378),r=n(34217),o=n(5114),a=n(57050),s=n(32952),l=n(14601),c=n(66310),u=n(76974),d=n(98403),m=n(22232),p=n(23239),h=n(819),f=n(12968),g=n(17771),v=n(95195),b=n(64015),y=n(17889),x=n(13853),k=n(62965),S=n(28043),w=n(50628),C=n(84966),E=n(9922),_=n(85985),I=n(77176),A=n(38062),O=n(19751),R=n(23063),B=n(55935),M=n(60797),F=n(66081),T=n(2834),P=n(40151),N=n(12126),j=n(83078),U=n(73975),z=n(8125),D=n(31699),L=n(45701);function G(e,t=3){if(e&&t>0){const n=function(e){const t=(null===(r=null===(i=(n=e).ownerDocument)||void 0===i?void 0:i.defaultView)||void 0===r?void 0:r.getComputedStyle(n))||null;var n,i,r;return t?"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX:null}(e);return n?e:null===n?null:G(null==e?void 0:e.parentElement,t-1)}return null}function Z(e){var t,n;return null===(n=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===n?void 0:n.activeElement}function H(e){return e instanceof HTMLElement}const V=["b","i"];function $(e,t=V){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,D.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}}:{dangerouslySetInnerHTML:e.pipe(I.U((e=>({__html:(0,D.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}))))}}var K,W,q,Q=n(59179);!function(e){let t,n,i;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(n=e.StringValue||(e.StringValue={})),function(e){e.create=function(e,t){return{id:e,kind:"radio",value:t}}}(i=e.RadioValue||(e.RadioValue={}))}(K||(K={})),function(e){e.match=e=>t=>{const n=t.kind;return"string"===n?e.string(t):"radio"===n?e.radio(t):void(0,m.L0)(n)}}(W||(W={})),function(e){function t(e){return"followUpQuestion"===e.kind}function n(e){return"quickAction"===e.kind}let i,r,s,l,c,u;e.isFollowUpQuestionActionValue=t,e.isQuickActionValue=n,e.isListableActionValue=(0,z.Kg)(t,n),e.isUserPromptActionValue=function(e){return"userPrompt"===e.kind},e.isQuickRewriteActionValue=function(e){return"quickRewrite"===e.kind},e.isFollowUpQuestionActionInput=function(e){return"followUpQuestion"===e.kind},e.isQuickActionInput=function(e){return"quickAction"===e.kind},e.isSkillAction=function(e){return"skillAction"===e.kind},e.isToneAction=function(e){return"toneAction"===e.kind},e.isPlagiarismAction=function(e){return"plagiarismAction"===e.kind},e.isWritingExpertAction=function(e){return"writingExpertAction"===e.kind},e.createFollowUpQuestionActionInputOrQuickActionInput=function(t,n,i){const s=Array.from(new Set(n.map((e=>e.group)).filter((0,a.ff)(r.isPinned)))).findIndex((e=>t.group===e)),l={id:e.Id.create(t.id),contextId:i,icon:v.right(t.iconUrl),group:{id:r.Id.create(t.group),label:t.group,rank:s>-1?s:Number.MAX_SAFE_INTEGER},label:(0,D.sanitize)(t.label,{ALLOWED_TAGS:V}),searchLabel:(0,D.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesTextType:o.fromNullable(t.generatesTextType),disabled:void 0!==t.disabled,notificationOnAttempt:(0,a.zG)(o.fromNullable(t.disabled),o.chain((({onActionNotification:e})=>o.fromNullable(e))),o.map((({text:e})=>e)))};if(1===t.args.length){const e=t.args[0],n={id:K.Id.create(e.name),label:e.label,hints:(0,a.zG)(o.fromNullable(e.hint),o.map((e=>({header:e.header,items:e.text}))))};return"string"===e.valueType?o.some(Object.assign(Object.assign({},l),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},n),{kind:"string"})],generatesTextType:o.fromNullable(t.generatesTextType)})):"radioButtonGroup"===e.valueType?(0,a.zG)(e.radioButtonGroupValues,y.nI,o.map((e=>Object.assign(Object.assign({},l),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},n),{kind:"radio",radioOptions:e})],generatesTextType:o.fromNullable(t.generatesTextType)})))):o.none}return 0===t.args.length?o.some(Object.assign(Object.assign({},l),{kind:"quickAction",args:[]})):o.none},function(e){e.create=function(e){return e},e.eq=U.yv}(i=e.Id||(e.Id={})),function(t){let n;!function(e){e.create=function(e){return e},e.eq=U.yv}(n=t.Id||(t.Id={})),t.isPinned=function(t){return t===e.knownGroup.pinned}}(r=e.Group||(e.Group={})),e.knownGroup={tools:r.Id.create("tools"),apps:r.Id.create("apps"),pinned:r.Id.create("pinned")},e.knownGroupRank={[e.knownGroup.tools]:-3,[e.knownGroup.apps]:-2,[e.knownGroup.pinned]:-1},e.knowGroupLabels={[e.knownGroup.tools]:"Tools",[e.knownGroup.apps]:"Apps",[e.knownGroup.pinned]:""},function(e){e.fromTextInput=function(e,t){return Object.assign(Object.assign({},e),{args:[K.StringValue.create(e.args[0].id,t)]})},e.fromRadioInput=function(e,t){return Object.assign(Object.assign({},e),{args:[K.RadioValue.create(e.args[0].id,t)]})}}(s=e.FollowUpQuestionActionValue||(e.FollowUpQuestionActionValue={})),e.createSkillAction=function(t){return{kind:"skillAction",id:i.create(t.id),group:{id:e.knownGroup.apps,label:"App actions",rank:Number.MAX_SAFE_INTEGER},icon:v.right(t.iconUrl),label:(0,D.sanitize)(t.displayName,{ALLOWED_TAGS:V}),searchLabel:(0,D.sanitize)(t.displayName,{ALLOWED_TAGS:[]}),searchTags:t.tags,generatesTextType:o.none,args:[],skill:t,disabled:!1,notificationOnAttempt:o.none}},e.createToneAction=function(t){const n="Check my tone";return{kind:"toneAction",id:i.create(t.name),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:v.right((r=t.emojiId,Q.g+r+".svg")),label:n,searchLabel:(0,D.sanitize)(t.name,{ALLOWED_TAGS:[]}),searchTags:[n,t.name],generatesTextType:o.none,args:[],tone:t,disabled:!1,notificationOnAttempt:o.none};var r},e.createPlagiarismAction=function(){const t="Check for plagiarism";return{kind:"plagiarismAction",id:i.create("plagiarism"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:v.left("plagiarism"),label:t,searchLabel:"plagiarism",searchTags:[t],generatesTextType:o.none,args:[],disabled:!1,notificationOnAttempt:o.none}},e.createWritingExpertAction=function(){const t="Increase the impact of your text";return{kind:"writingExpertAction",id:i.create("writingExpert"),group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},icon:v.left("writingExpert"),label:t,searchLabel:"ideas",searchTags:[t],generatesTextType:o.none,args:[],disabled:!1,notificationOnAttempt:o.none}},function(e){e.ordByGroup=L.contramap((e=>e.group.rank))(L.ordNumber)}(l=e.ListableActionInput||(e.ListableActionInput={})),function(e){e.fromInput=function(e,t,n,i){return Object.assign(Object.assign({},e),{arg:K.StringValue.create(e.arg.id,t),useReferences:n,omitReferenceIds:i})}}(c=e.UserPromptActionValue||(e.UserPromptActionValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(u=e.QuickRewriteActionValue||(e.QuickRewriteActionValue={}))}(q||(q={}));var Y,J=n(33148);function X(e){return(0,a.zG)(o.fromNullable(e.changesSummary),o.filter((({title:e})=>""!==e)),o.chain((({title:e,description:t})=>(0,a.zG)(y.c2(t),o.map((t=>({title:e,description:t})))))))}!function(e){let t,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind},function(e){e.empty=function(e){return{id:e,kind:"pending",availableActions:[],specialView:o.none,userPromptAction:o.none,intent:o.none,documentOverview:o.none,selection:o.none,isBoundary:!1,textRevision:o.none}}}(n=e.Pending||(e.Pending={}))}(Y||(Y={}));var ee,te=n(68599);!function(e){let t;function n(e){switch(e){case"sensitiveResult":return{header:"Assistance is unavailable",text:"Assistance is unavailable for that text or prompt.\nTry something else."};case"overload":return{header:"Couldnt generate text",text:"Were handling a lot of prompts right now and couldnt generate that text.\nPlease try again later."};case"unsupportedLanguage":return{header:"Hmm, dont know that language",text:"Assistance is currently only available for English."};case"critical":case"timeout":case"emptyResult":case"truncatedResult":case"usageExceeded":return{header:"Something went wrong",text:"Were not sure what happened, but we couldnt generate that text.\nPlease try again."};default:return(0,a.Rz)(e)}}!function(e){e.create=function(e){switch(e){case te.oS.Generic:return"critical";case te.oS.Overflow:return"truncatedResult";case te.oS.PromptsLimitExceeded:return"usageExceeded";case te.oS.SensitiveContent:return"sensitiveResult";case te.oS.ServerOverloaded:return"overload";case te.oS.UnsupportedLanguage:return"unsupportedLanguage";default:return(0,a.Rz)(e)}}}(t=e.Reason||(e.Reason={})),e.create=function(e){const i=t.create(e.kind),r=(0,a.zG)(g.Y(o.Applicative)({header:(0,a.zG)(o.fromNullable(e.title),o.filter((e=>""!==e.trim()))),text:(0,a.zG)(o.fromNullable(e.text),o.filter((e=>""!==e.trim())))}),o.getOrElse((()=>n(i))));return Object.assign({reason:i},r)},e.createCriticalError=function(e){return{reason:"critical",header:"Something went wrong",text:e?"Were not sure what happened.\nPlease try again later.":"Were not sure what happened, but we couldnt generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:"emptyResult"},n("emptyResult"))}}(ee||(ee={}));var ne=n(98370),ie=n(89727);var re,oe=n(14047);!function(e){let t,n,i;!function(e){e.restoreDisabled="restoreDisabled",e.unknown="unknown",e.hasHistory="hasHistory",e.noHistory="noHistory",e.historyRequested="historyRequested",e.historyRestored="historyRestored"}(t=e.HistoryStatus||(e.HistoryStatus={})),function(e){e.unknown="unknown",e.static="static",e.dynamic="dynamic"}(n=e.SelectionContextStatus||(e.SelectionContextStatus={})),e.toStarting=function(e){return"starting"===e.kind?o.some(e):o.none},e.toStarted=function(e){return"started"===e.kind?o.some(e):o.none},e.toContextless=function(e){return"contextless"===e.kind?o.some(e):o.none},e.fold=function(e){return t=>"starting"===t.kind?e.starting(t):"started"===t.kind?e.started(t):"contextless"===t.kind?e.contextless(t):void(0,m.L0)(t)},e.isStartedWithInProgressResult=function(e){return"started"===e.kind&&o.isSome(e.inProgressResult)},e.isStartingWithoutError=function(e){return o.isNone(e.error)&&"starting"===e.kind},function(e){e.initial=e=>({kind:"starting",mode:e,selectedRange:o.none,selectedText:o.none,quickReplyContext:o.none,historyStatus:t.unknown,writingExpertContext:o.none,error:o.none,textRevision:0,selectionContextStatus:n.unknown})}(i=e.Starting||(e.Starting={}))}(re||(re={}));var ae=n(54518);function se(e){return ae.s.isRewriteOrQuickRewrite(e.mode)}function le(e){return ae.s.isQuickReply(e.mode)}function ce(e){return ae.s.isPushRewrite(e.mode)}function ue(e){return"signed-in"===e.kind&&e.email.endsWith("@grammarly.com")&&(0,a.zG)(e.institution,o.fold(a.jv,(e=>624392205===e.id)))}function de(e){return"signed-in"===e.kind}function me(e){return"signed-out"===e.kind}function pe(e){return de(e)&&e.isPremium}var he,fe=n(56929);!function(e){const t={"Cheetah/_System/Push/SimplifyRewrite":{copiablePrompt:o.none,iconUrl:o.some("https://assets.grammarly.com/cheetah/v1/actions/simplify.svg"),label:"Simplify your text"},"Cheetah/_System/Push/ImproveParagraph":{copiablePrompt:o.none,iconUrl:o.some("https://assets.grammarly.com/cheetah/v1/actions/improve.svg"),label:"Improve your text"}};e.toPreviousText=function(e){return(0,a.zG)(e,o.fromPredicate((e=>e.alertPname in t)),o.map((e=>({kind:"writerExpert",suggestionId:e.alertId,pname:e.alertPname,text:e.replacementText}))))},e.getInitialResult=function(e){const n=v.left((new fe.i).insert(e.replacementText));return(0,a.zG)(o.fromNullable(t[e.alertPname]),o.map((t=>({kind:"complete",id:oe.x.Id.create(0),header:t,replacementDelta:n,text:e.replacementText,references:o.none,source:o.none,changesSummary:o.none,timestamp:Date.now(),supportedActions:new Set([oe.x.SupportedAction.insert,oe.x.SupportedAction.copy]),boundaryContextId:o.none}))))}}(he||(he={}));var ge,ve,be=n(2735),ye=n(26320),xe=n(89068);function ke(e,t){const n=N.D(e).pipe(R.q(1));return void 0!==t?n.pipe(xe.V(t)).toPromise():n.toPromise()}!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(ge||(ge={})),function(e){e.create=function(e,t,n,i,r){return"information"===e?{kind:"information",persistent:!!i,customTimeout:r,text:t,id:n||ge.create()}:{kind:e,persistent:!!n,customTimeout:"number"==typeof i?i:void 0,id:t||ge.create()}}}(ve||(ve={}));var Se=n(3299);var we,Ce,Ee=n(48044);!function(e){let t,n,i,r,a,s;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=U.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=U.yv}(t=e.Id||(e.Id={}))}(n=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=U.yv}(t=e.Id||(e.Id={}))}(i=e.Role||(e.Role={})),function(e){function t(e){switch(e){case"american":return"American English";case"australian":return"Australian English";case"british":return"British English";case"canadian":return"Canadian English";case"indian":return"Indian English";default:return(0,m.L0)(e)}}function n(e){switch(e){case"american":return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case"australian":return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case"british":return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case"canadian":return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case"indian":return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,m.L0)(e)}}let i;!function(e){e.create=function(e){return e},e.eq=U.yv}(i=e.Id||(e.Id={})),e.american={id:i.create("american"),label:t("american"),iconUrl:n("american")},e.australian={id:i.create("australian"),label:t("australian"),iconUrl:n("australian")},e.british={id:i.create("british"),label:t("british"),iconUrl:n("british")},e.canadian={id:i.create("canadian"),label:t("canadian"),iconUrl:n("canadian")},e.indian={id:i.create("indian"),label:t("indian"),iconUrl:n("indian")},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=U.MW({selectedStyle:n.Id.eq,selectedTonesPerStyle:Ee.Eh(n.Id.eq,x.Eh(t.Id.eq)),selectedRole:o.getEq(i.Id.eq),selectedDialect:r.Id.eq})}(a=e.Selections||(e.Selections={})),e.toLegacyVoiceProfile=function(e){return"legacyVoiceProfile"===e.kind?o.some(e):o.none},function(e){const t=U.MW({name:U.yv,state:U.yv}),n=U.MW({name:U.yv,tags:b.Eh(t)}),a=U.MW({name:U.yv,summary:U.yv,selected:U.vD,sections:b.Eh(n)}),s=b.Eh(a);e.eqByRoleDialectProfileAndIsEnabledByDefault=U.MW({profiles:s,selectedRole:o.getEq(i.Id.eq),selectedDialect:r.Id.eq,isEnabledByDefault:U.vD})}(s=e.NewSelections||(e.NewSelections={})),e.toNewVoiceProfile=function(e){return"newVoiceProfile"===e.kind?o.some(e):o.none}}(we||(we={})),function(e){e.createId=({tagName:e,sectionName:t,profileName:n})=>`${t}-${e}-${n}`}(Ce||(Ce={}));var _e=n(45630),Ie=n(30816),Ae=n(32426),Oe=n(4068),Re=n(65602);const Be=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Me(e,t,n,i,r){let o,a,s,l,c,u,d,m,p,h,f,g,v;for(;r>=64;){for(o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],m=t[7],h=0;h<16;h++)f=i+4*h,e[h]=(255&n[f])<<24|(255&n[f+1])<<16|(255&n[f+2])<<8|255&n[f+3];for(h=16;h<64;h++)p=e[h-2],g=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[h-15],v=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[h]=(g+e[h-7]|0)+(v+e[h-16]|0);for(h=0;h<64;h++)g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&d)|0)+(m+(Be[h]+e[h]|0)|0)|0,v=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&s^a&s)|0,m=d,d=u,u=c,c=l+g|0,l=s,s=a,a=o,o=g+v|0;t[0]+=o,t[1]+=a,t[2]+=s,t[3]+=l,t[4]+=c,t[5]+=u,t[6]+=d,t[7]+=m,i+=64,r-=64}return i}class Fe{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(Me(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=Me(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,n=e/536870912|0,i=e<<3,r=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<r-8;e++)this.buffer[e]=0;this.buffer[r-8]=n>>>24&255,this.buffer[r-7]=n>>>16&255,this.buffer[r-6]=n>>>8&255,this.buffer[r-5]=n>>>0&255,this.buffer[r-4]=i>>>24&255,this.buffer[r-3]=i>>>16&255,this.buffer[r-2]=i>>>8&255,this.buffer[r-1]=i>>>0&255,Me(this.temp,this.state,this.buffer,0,r),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}new Uint8Array(32);var Te=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Pe(e,t){switch(e.historyStatus){case re.HistoryStatus.restoreDisabled:return e.historyStatus;case re.HistoryStatus.unknown:case re.HistoryStatus.noHistory:case re.HistoryStatus.hasHistory:return void 0!==t?t>0?re.HistoryStatus.hasHistory:re.HistoryStatus.noHistory:re.HistoryStatus.unknown;case re.HistoryStatus.historyRequested:case re.HistoryStatus.historyRestored:return"started"===e.kind&&void 0!==e.results.find(oe.x.isHistory)?re.HistoryStatus.historyRestored:re.HistoryStatus.restoreDisabled;default:(0,m.L0)(e.historyStatus)}}function Ne(e,t=!1){return(0,a.zG)(e.replacementDelta,v.fold(a.yR,(({preferVoice:e,generic:n,user:i})=>t?e===oe.x.GeneratedTextVoice.generic?n:i:n)),(e=>(0,Re.l)(e,"")))}function je(e){return k.fj((()=>"started"===e.kind?v.right(e):v.left(new Error("Session not started"))))}function Ue(e,t,n,i){var r;const s=(0,a.zG)(re.toStarted(n),o.fold((()=>[]),(e=>e.voiceProfile.roles)));return{kind:"newVoiceProfile",userName:e.userName,title:e.title,subTitle:e.subTitle,profiles:e.profiles,isEnabledByDefault:e.myVoiceIsEnabledByDefault.state,isEnabledByDefaultLabel:e.myVoiceIsEnabledByDefault.label,dialects:we.Dialect.all(),roles:(0,a.zG)(null!==(r=t.roles)&&void 0!==r?r:[],b.UI((e=>({id:we.Role.Id.create(e),label:e}))),(e=>e.length>0?e:s)),selectedDialect:(0,a.zG)(re.toStarted(n),o.fold((()=>we.Dialect.Id.create(i)),(e=>e.voiceProfile.selectedDialect))),selectedRole:(0,a.zG)(o.fromNullable(t.selectedRole),o.map((e=>e.trim())),o.filter((e=>""!==e)),o.map(we.Role.Id.create)),needsSetup:!1}}function ze(e,t,n){var i,r;const s=(0,a.zG)(re.toStarted(t),o.map((e=>e.voiceProfile)),o.chain(we.toLegacyVoiceProfile),o.fold((()=>[]),(e=>e.styles))),l=(0,a.zG)(re.toStarted(t),o.fold((()=>[]),(e=>e.voiceProfile.roles))),c=(0,a.zG)(null!==(i=e.styles)&&void 0!==i?i:[],b.UI((e=>({id:we.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:we.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:s)),u=we.Style.Id.create(e.selectedStyle),d=c.find((e=>we.Style.Id.eq.equals(e.id,u)));return{kind:"legacyVoiceProfile",styles:c,roles:(0,a.zG)(null!==(r=e.roles)&&void 0!==r?r:[],b.UI((e=>({id:we.Role.Id.create(e),label:e}))),(e=>e.length>0?e:l)),selectedStyle:u,selectedTonesPerStyle:(new Map).set(u,new Set(e.selectedTones.filter((e=>null==d?void 0:d.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,a.zG)(o.fromNullable(e.selectedRole),o.map((e=>e.trim())),o.filter((e=>""!==e)),o.map(we.Role.Id.create)),dialects:we.Dialect.all(),selectedDialect:(0,a.zG)(re.toStarted(t),o.fold((()=>we.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function De(e,t,n){return[...(0,a.zG)(t,b.UI((n=>q.createFollowUpQuestionActionInputOrQuickActionInput(n,t,e))),b.oA),...n.map((e=>q.createSkillAction(e)))]}function Le(e,t){const n=(0,a.zG)(e.args,b.YM,o.map((t=>({id:q.Id.create(e.id),kind:"userPrompt",arg:{id:K.Id.create(t.name),kind:"string",label:t.label,hints:(0,a.zG)(o.fromNullable(t.hint),o.map((e=>({header:e.header,items:e.text}))))},generatesTextType:o.some(te.cX.Insertable),useReferences:o.none,omitReferenceIds:o.none,disabled:void 0!==e.disabled,notificationOnAttempt:(0,a.zG)(o.fromNullable(e.disabled),o.chain((({onActionNotification:e})=>o.fromNullable(e))),o.map((({text:e})=>e)))}))));return o.isNone(n)&&t.warn("Failed to extract user prompt action, received empty action args.",{actionId:e.id}),n}function Ge(e){return{kind:"quickRewrite",id:q.Id.create(e.id),label:(0,D.sanitize)(e.label,{ALLOWED_TAGS:V}),icon:v.right(e.iconUrl),generatesTextType:o.fromNullable(e.generatesTextType),disabled:void 0!==e.disabled,notificationOnAttempt:(0,a.zG)(o.fromNullable(e.disabled),o.chain((({onActionNotification:e})=>o.fromNullable(e))),o.map((({text:e})=>e)))}}function Ze(e){return(0,a.zG)(o.fromNullable(e),o.map((e=>(0,D.sanitize)(e,{ALLOWED_TAGS:[...V,"person"]}))),o.map((e=>e.trim())),o.filter((e=>e.length>0)))}function He(e){return{kind:oe.x.isComplete(e)?"regular":oe.x.isHistory(e)?"history":(0,m.L0)(e),text:Ne(e)}}function Ve(e){return(0,a.zG)(o.fromNullable(e.references),o.map((t=>t.map((t=>{var n;return Object.assign(Object.assign({},t),{id:Se.s.Id.create(t.id),url:o.fromNullable(t.url),contextText:(0,a.zG)(o.fromNullable(null===(n=e.metadata)||void 0===n?void 0:n.knowledge_engine_references),o.chainNullableK((e=>{const n=Array.isArray(e)?e.find((e=>e.id===t.id)):void 0,i=null==n?void 0:n.contextText;return"string"==typeof i?i:void 0})))})})))))}const $e=o.fromNullable;function Ke(e){switch(e){case"ideation":return te.s2.Ideation;case"rewrite":return te.s2.Rewrite;case"quickRewrite":return te.s2.QuickRewrite;case"quickReply":return te.s2.QuickReply;case"pushRewrite":return te.s2.PushRewrite;default:return(0,m.L0)(e)}}function We(e){const t=(0,a.zG)(e,o.fromPredicate((e=>function(e){return ae.s.isIdeation(e.mode)}(e)&&!!e.documentUrl)),o.map((e=>e.documentUrl)),o.chain(o.fromNullable),o.chain(Qe),o.map((e=>({pageIdHash:e})))),n=(0,a.zG)(e,o.fromPredicate(le),o.map((e=>Oe.H.toOuterContext(e.quickReplyContext))));return o.getMonoid((0,Ae.getFirstSemigroup)()).concat(t,n)}function qe(e){return(0,a.zG)(e.quickReplyContext,o.map(Oe.H.toOuterContext))}function Qe(e){var t;return(0,a.zG)(null!==(t=function(e){var t;return null===(t=e.match(/^https:\/\/docs.google.com\/[a-zA-Z0-9-_]+\/d\/([a-zA-Z0-9-_]+)/))||void 0===t?void 0:t[1]}(e))&&void 0!==t?t:function(e){var t;const n=null!==(t=e.match(/^https:\/\/([a-zA-Z0-9-_]+).atlassian.net\/wiki\/spaces\/[a-zA-Z0-9-_]+\/pages\/([0-9]+)/))&&void 0!==t?t:[];return n[1]&&n[2]?`${n[1]}:${n[2]}`:void 0}(e),o.fromNullable,o.map(Ye))}function Ye(e){const t=(new TextEncoder).encode(e);return Ie.Buffer.from(function(e){const t=(new Fe).update(e),n=t.digest();return t.clean(),n}(t)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Je(e,t,n,i,r){var s,l;return Te(this,void 0,void 0,(function*(){if((null==r?void 0:r.contextUpdatesServer)&&!Y.isPending(e)&&n.textRevision===o.toUndefined(e.textRevision)){const r=(0,a.zG)(o.isNone(n.selectedRange)?(0,a.zG)(o.fromNullable(null===(s=t.context)||void 0===s?void 0:s.textScope),o.filter((e=>e.start!==e.end))):(0,a.zG)(g.Y(o.option)({currentSelectionRange:n.selectedRange,backendSelectionRange:o.fromNullable(null===(l=t.context)||void 0===l?void 0:l.textScope)}),o.filter((({currentSelectionRange:e,backendSelectionRange:t})=>e.start!==t.start||e.end!==t.end)),o.map((({backendSelectionRange:e})=>e))),o.toUndefined);if(r){if(r.start===r.end)return v.right(o.none);{const t=yield i(r)();return v.right((0,a.zG)(o.fromEither(t),o.map((e=>({text:e,range:r}))),o.alt((()=>e.selection))))}}return v.left(void 0)}return v.left(void 0)}))}var Xe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},et=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class tt{constructor(e){var t,n,i,r;if(this._params=e,this._subs=new E.w.Keeper,this._logger=this._params.logService.getLogger(tt.name),this._session=p.h.create(re.Starting.initial(this._params.genAIStartSessionOptions.mode)),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._historyResultIdByGetContextMessageId=new Map,this._contextMessageIdsTriggeredBySelectionChanges=new Set,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=p.h.create(we.Dialect.Id.create("american")),this._cheetahAckIds=new Set,this._searchReferencesUrlsById=new Map,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._historyTimeout=void 0,this._cheetahAckTimeout=void 0,this._historyAckHandler=void 0,this._skills=[],this._capiCheckingStatus=p.h.create("unknown"),this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:2e4,this._contextTimeoutMs=null!==(n=this._params.contextTimeoutMs)&&void 0!==n?n:2e4,this._historyTimeoutMs=null!==(i=this._params.historyTimeoutMs)&&void 0!==i?i:2e4,this._cheetahAckTimeoutMs=null!==(r=this._params.cheetahAckTimeoutMs)&&void 0!==r?r:2e4,this._notificationHandler=null,this.session=this._session.view(),this._handleCAPIMessage=e=>{switch(e.action){case"error":return this._handleError(e);case"cheetah":return this._handleCheetahAck(e);case"cheetah:setContext":return void this._handleCheetahSetContext(e);case"cheetah:chunk":return this._handleCheetahChunk(e);case"cheetah:result":return void this._handleCheetahResult(e);case"cheetah:error":return this._handleCheetahError(e);case"cheetah:setUserState":return this._handleCheetahSetUserState(e);case"cheetah:searchReferencesResult":return this._handleCheetahSearchReferencesResult(e);case"cheetah:invalidateContext":return void this._getContext();case"cheetah:setHistory":return this._handleCheetahSetHistory(e);case"show_survey":case"emotions":case"finished":case"async_check_finished":return;default:return(0,m.L0)(e)}},this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.Finished.is),I.U((e=>e.checksStatus))).subscribe(d.wW(this._capiCheckingStatus))),se(this._params.genAIStartSessionOptions)){const e=this._params.textEditorService.selectedRange.get();(0,a.zG)(e,o.fold((()=>this._init()),(e=>(0,ye.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>this._init({selectedRange:e,selectedText:t})),(t=>{this._params.monitoringService.notify((0,ne.L)((0,ie.q_)({textRange:e,reason:(0,be.N)(t).message}))),this._init()})))))}else this._init()}registerNotificationHandler(e){this._notificationHandler=e}_pushNotification(e){var t;null===(t=this._notificationHandler)||void 0===t||t.call(this,e)}_init(e){var t;this._session.set({kind:"starting",mode:this._params.genAIStartSessionOptions.mode,selectedRange:o.fromNullable(null==e?void 0:e.selectedRange),selectedText:(0,a.zG)(o.fromNullable(null==e?void 0:e.selectedText),o.filter((e=>e.length>0))),quickReplyContext:o.fromNullable(le(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.quickReplyContext:void 0),writingExpertContext:o.fromNullable(ce(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.writingExpertContext:void 0),historyStatus:re.HistoryStatus.unknown,error:o.none,textRevision:0,selectionContextStatus:this._params.selectionContextAvailability&&(null===(t=this._params.selectionContextAvailability.get())||void 0===t?void 0:t.contextUpdatesClient)?re.SelectionContextStatus.dynamic:re.SelectionContextStatus.static}),this._setupSessionModeUpdater(),this._subs.push(this._params.capiService.relevantInboundCAPIMessages.subscribe((e=>this._handleCAPIMessage(e)))),this._subs.push(this._params.userService.user.pipe(_.h(de),I.U((({dialect:e})=>e)),I.U(we.Dialect.Id.create)).subscribe(d.wW(this._upstreamDialect))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.pipe((0,S.x)(((e,t)=>e.kind===t.kind)),(0,w.P)((e=>"started"===e.kind))).subscribe((()=>{this._params.userActionTrackingService.trackReadyToInteract(),this._params.metricService.report({name:"assistant_gen_ai_initial_context_ready",labels:void 0},["assistant_lifecycle_starting"])}))),this._params.selectionContextAvailability&&this._setUpSelectionAvailabilityChangeHandlers(this._params.selectionContextAvailability),this._setupGenAIAvailabilityHandler(),this._subs.push(this._session.subscribe((e=>this._logger.debug("Session updated.",e))))}_setupGenAIAvailabilityHandler(){this._subs.push(this._params.genAIAvailability.pipe(I.U(h._.isUnavailable),S.x()).subscribe((e=>{this._logger.debug("Gen-AI availability updated.",{genAIIsUnavailable:e}),e?(this._session.modify((e=>Object.assign(Object.assign({},e),{kind:"contextless",nonContextualActions:[]}))),this._getSkills()):"started"!==this._session.get().kind&&(this._session.modify((e=>Object.assign(Object.assign({},e),{kind:"starting"}))),this._startSessionWhenAppropriate())})))}_startSessionWhenAppropriate(){var e;this._params.selectionContextAvailability&&null===this._params.selectionContextAvailability.get()?A.S3([this._params.selectionContextAvailability.pipe(_.h((e=>null!==e))),O.timer(null!==(e=this._params.selectionContextAvailabilityWaitTimeoutMs)&&void 0!==e?e:2e3)]).pipe(R.q(1)).subscribe((()=>this._startSession())):this._startSession()}_startSession(e){(0,ye.t)("flush",this._params.textEditorService.flush(),this._logger,(()=>{var t,n;const i=se(this._params.genAIStartSessionOptions)?this._params.textEditorService.selectedRange.get():o.fromNullable(void 0),r=We(this._params.genAIStartSessionOptions),s=o.fromNullable(ce(this._params.genAIStartSessionOptions)?this._params.genAIStartSessionOptions.writingExpertContext:void 0),l={generationMode:Ke(this._params.genAIStartSessionOptions.mode),selectedRange:o.toUndefined(i),outerContext:o.toUndefined(r),stateBlob:e,metadata:this._params.genAIStartSessionOptions.metadata,previousText:(0,a.zG)(s,o.chain(he.toPreviousText),o.toUndefined),includeDisabledActions:this._params.selectionContextAvailability&&(null===(t=this._params.selectionContextAvailability.get())||void 0===t?void 0:t.contextUpdatesServer)&&(null===(n=this._params.selectionContextAvailability.get())||void 0===n?void 0:n.contextUpdatesClient)};this._getSkills(),this._getContext(l)}))}_getSkills(){if(this._params.skillService){const e={skills:0===this._skills.length?this._params.skillService.getSkills():k.F2(this._skills),shouldShowSkills:(0,a.zG)(this._params.experimentService?this._params.experimentService.isGateEnabled(_e.CI.CheetahFetchSkills):k.F2(!1),k.Vn((e=>new Error(e))))};(0,ye.t)("getSkills",g.Y(ye.L)(e),this._logger,(({skills:e,shouldShowSkills:t})=>{t&&(this._skills=e,this._session.modify(re.fold({starting:a.yR,contextless:e=>Object.assign(Object.assign({},e),{nonContextualActions:this._skills.map((e=>q.createSkillAction(e)))}),started:e=>e.activeContext.availableActions.some((e=>"skillAction"===e.kind))?e:Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{availableActions:e.activeContext.availableActions.concat(this._skills.map((e=>q.createSkillAction(e))))}),activeBoundaryContext:Object.assign(Object.assign({},e.activeBoundaryContext),{availableActions:e.activeBoundaryContext.availableActions.concat(this._skills.map((e=>q.createSkillAction(e))))})})})))}),(e=>this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"error",source:"skill",name:"getSkillsFailed",data:e}}({reason:(0,be.N)(e).message})))))}}_setUpSelectionAvailabilityChangeHandlers(e){const t=e.pipe(I.U((e=>!!(null==e?void 0:e.contextUpdatesClient))));this._subs.push(t.pipe(c.w((e=>e?this._params.textEditorService.selectedRange.pipe(B.T(1),M.oA,F.e(500),T.b((e=>this._handleSelectedRangeUpdate(e)))):P.E))).subscribe()),this._subs.push(t.pipe(c.w((e=>e?N.D(this._params.textEditorService.textUpdated).pipe(T.b((()=>this._handleTextUpdated()))):P.E))).subscribe()),this._subs.push(t.pipe(T.b((e=>{this._session.modify((t=>Object.assign(Object.assign({},t),{selectionContextStatus:e?re.SelectionContextStatus.dynamic:re.SelectionContextStatus.static})))}))).subscribe())}_handleSelectedRangeUpdate(e){this._logger.debug("Handling selected range update.",{selectedRange:e}),(0,ye.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>{t.trim().length?(this._session.modify(re.fold({starting:a.yR,contextless:a.yR,started:n=>Object.assign(Object.assign({},n),{mode:"rewrite",activeContext:Object.assign(Object.assign({},n.activeContext),{kind:"pending",isBoundary:!0,textRevision:o.some(n.textRevision),selection:o.some({text:t,range:e})}),activeBoundaryContext:Object.assign(Object.assign({},n.activeBoundaryContext),{kind:"pending",isBoundary:!0,textRevision:o.some(n.textRevision),selection:o.some({text:t,range:e})}),selectedRange:o.some(e),selectedText:(0,a.zG)(o.some(t),o.filter((e=>e.length>0)))})})),this._getContext(void 0,void 0,!0)):this._session.modify((e=>Object.assign(Object.assign({},e),{selectedRange:o.none,selectedText:o.none})))}))}_handleTextUpdated(){this._logger.debug("Handling text update."),this._session.modify(re.fold({starting:a.yR,contextless:a.yR,started:e=>Object.assign(Object.assign({},e),{textRevision:e.textRevision+1})}))}_setupSessionModeUpdater(){"quickReply"===this._params.genAIStartSessionOptions.mode&&this._params.textEditorService.trimmedTextLength&&this._subs.push(N.D(this._params.textEditorService.trimmedTextLength).pipe(_.h((e=>e>0)),R.q(1)).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{mode:"quickReply"===e.mode?"ideation":e.mode})))})))}submitAction(e,t){this._logger.debug("Submitting action.",{actionValue:e,selectedVoice:t}),this._submitAction(e,void 0,void 0,void 0,void 0,t)}setVoiceProfile(e){return this._logger.debug("Setting voice profile (legacy).",{voiceProfileSelections:e}),(0,a.zG)(je(this._session.get()),k.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending"})})),t))),k.tS((t=>(0,a.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,a.zG)(e.selectedRole,o.toUndefined),needSetup:!1}}),k.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!we.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),k.tS((t=>t?g.g(k.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:e.selectedDialect}}),k.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(e.selectedDialect),k.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):k.of(null))),k.Pd((e=>(this._params.monitoringService.notify((0,ne.L)((0,ie.TX)({reason:(0,be.N)(e).message}))),e)),a.Q1)))))}setNewVoiceProfile(e){var{selectedDialect:t}=e,n=et(e,["selectedDialect"]);return this._logger.debug("Setting voice profile (new).",{dialect:t,voiceProfile:n}),(0,a.zG)(je(this._session.get()),k.UI((e=>(this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending"})})),e))),k.tS((e=>(0,a.zG)(this._params.capiService.cheetahSetVoiceProfile({role:(0,a.zG)(n.selectedRole,o.toUndefined),isEnabledByDefault:n.isEnabledByDefault,profiles:n.profiles}),k.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!we.Dialect.Id.eq.equals(e.voiceProfile.selectedDialect,t))),k.tS((e=>e?g.g(k.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:t}}),k.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(t),k.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):k.of(null))),k.Pd((e=>(this._params.monitoringService.notify((0,ne.L)((0,ie.Jr)({reason:(0,be.N)(e).message}))),e)),a.Q1)))))}stopInProgressResult(){return this._logger.debug("Stopping in-progress result."),(0,a.zG)(this._session.get(),k.DT(re.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result."))),k.tS((e=>(this._clearResultRelatedTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{activeContext:(0,a.zG)(e.results.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),o.getOrElse((()=>e.activeContext))),inProgressResult:oe.x.isInProgressPending(e.inProgressResult.value)?o.some(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):oe.x.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:oe.x.isInProgressOngoing(e.inProgressResult.value)?o.none:(0,m.L0)(e.inProgressResult.value)}))),(0,a.zG)(e.inProgressResult.value,o.fromPredicate(oe.x.isInProgressOngoing),o.fold((()=>k.of(-1)),(e=>this._params.capiService.cheetahInterrupt({promptId:oe.x.Id.toPrimitive(e.id)}))))))),k.Pd((e=>(this._params.monitoringService.notify((0,ne.L)((0,ie.Lp)({reason:(0,be.N)(e).message}))),e)),a.Q1))}regenerateResult(e,t,n){this._logger.debug("Regenerating result.",{resultId:e,options:t,selectedVoice:n}),(0,a.zG)(re.toStarted(this._session.get()),j.ew((()=>this._params.monitoringService.notify((0,ne.L)((0,ie.g0)({resultId:e,reason:"session-not-started"}))))),o.chain((t=>(0,a.zG)(o.fromNullable(this._resultById.get(e)),o.filter(oe.x.isComplete),o.filter((e=>e.supportedActions.has(oe.x.SupportedAction.rephrase))),o.map((e=>({session:t,result:e}))),j.ew((()=>this._params.monitoringService.notify((0,ne.L)((0,ie.g0)({resultId:e,reason:"not-found"})))))))),o.chain((({session:t,result:n})=>(0,a.zG)(g.Y(o.option)({resultSource:n.source,boundaryContextId:n.boundaryContextId}),o.map((({resultSource:e,boundaryContextId:i})=>({resultSource:e,boundaryContextId:i,resultText:Ne(n),session:t}))),j.ew((()=>this._params.monitoringService.notify((0,ne.L)((0,ie.g0)({resultId:e,reason:"no-source-action"})))))))),o.map((({resultSource:i,boundaryContextId:r,resultText:s})=>{const l=i.actionValue,c=o.getMonoid(y.jG()).concat,u=(0,a.zG)(l,o.fromPredicate(q.isUserPromptActionValue),o.fold((0,a.a9)(l),(e=>Object.assign(Object.assign({},e),{omitReferenceIds:c(e.omitReferenceIds,t.omitReferenceIds)})))),d=this._contextIdByResultId.get(e);void 0===d&&this._params.monitoringService.notify((0,ne.L)({kind:"warn",source:"core",name:"regenerateResultContextNotFound",data:null})),this._submitAction(u,i.contextId,d,r,{kind:"regular",text:s},n),this._params.userActionTrackingService.trackResultRephrase(d)})))}searchReferences(e){const t=this._session.get();"started"===t.kind?t.detectedReferences.has(e)||(this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(e,o.none)})),this._setupCheetahAckHandler("searchReferences",(t=>{this._searchReferencesUrlsById.set(t,e)})),(0,ye.t)("cheetahSearchReferences",this._params.capiService.cheetahSearchReferences({url:e}),this._logger)):this._logger.warn("Failed to search references, session not started.",{referencesUrl:e})}dismissResult(e){this._logger.debug("Dismissing result.",{resultId:e});const t=this._session.get();let n=null;if("started"===t.kind){if(this._resultById.delete(e)){const i=t.results.findIndex((t=>t.id===e));n=t.results[i];let r=t.activeContext,s=t.activeBoundaryContext,l=null;if(0===i&&t.results.length>1){this._logger.debug("Dismissing latest result, will try to restore context from previous result.",{session:t,resultId:e});const n=o.toUndefined(this._extractPreviousResultContext(t)),i=(0,a.zG)(this._extractPreviousResultBoundaryContext(t),o.alt((()=>o.fromNullable(this._initialReceivedContext))),o.toUndefined),c=o.toUndefined(this._extractLatestResultBoundaryContext(t));n?i!==c?(this._logger.debug("Dismissing result, previous result was for different boundary context, will keep currently active boundary context.",{session:t,resultId:e}),r=t.activeBoundaryContext):(this._logger.debug("Dismissing result, found context for previous result, will restore its context.",{session:t,resultId:e,previousResultContext:n}),r=n,i&&(s=i)):t.results[1]&&oe.x.isHistory(t.results[1])&&(0,a.zG)(o.fromNullable(this._contextIdByResultId.get(t.results[1].id)),o.chain((e=>o.fromNullable(this._contextById.get(e)))),o.isNone)?l=t.results[1].id:this._logger.warn("Failed to find context for previous result after dismissing result.",{resultId:e})}else 1===t.results.length&&(r=t.activeBoundaryContext);this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},r),{kind:null!==l?"pending":r.kind,availableActions:l?[]:r.availableActions}),activeBoundaryContext:s,results:t.results.filter((t=>!oe.x.Id.eq.equals(t.id,e)))}));const c=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultDismiss(c,oe.x.isHistory(n)?e:void 0),"aiUsageNotification"===n.kind&&this._params.userActionTrackingService.trackAINotificationDismiss("document"),l&&this._getContext(void 0,l)}else this._logger.warn("Failed to dismiss result, result does not exist.",{resultId:e})}else this._logger.warn("Failed to dismiss result, session not started.",{resultId:e})}dismissError(){this._logger.debug("Dismissing error."),this._session.lens("error").set(o.none)}restoreHistory(){this._getHistory()}trackResultInsert(e,t=!1){this._logger.debug("Tracking result insert.",{resultId:e,isUserVoice:t});const n=this._resultById.get(e);if(n){const i=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultInsert(i,oe.x.isHistory(n)?n.id:void 0,t)}else this._logger.warn("Failed to track result insert, result does not exist.",{resultId:e})}trackResultCopy(e,t=!1){this._logger.debug("Tracking result copy.",{resultId:e,isUserVoice:t});const n=this._resultById.get(e);if(n){const i=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultCopy(i,oe.x.isHistory(n)?n.id:void 0,t)}else this._logger.warn("Failed to track result copy, result does not exist.",{resultId:e})}_trackResultGenerationCompleted(e){this._logger.debug("Tracking result generation-complete.",{resultId:e});const t=this._resultById.get(e);if(t){const n=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultGenerationCompleted(n,oe.x.isHistory(t)?t.id:void 0)}else this._logger.warn("Failed to track result generation-complete, result does not exist.",{resultId:e})}trackResultOffensive(e){this._logger.debug("Tracking result as offensive.",{resultId:e});const t=this._resultById.get(e);if(t){const n=this._contextIdByResultId.get(e);this._params.userActionTrackingService.trackResultOffensive(n,oe.x.isHistory(t)?t.id:void 0)}else this._logger.warn("Failed to track result as offensive, result does not exist.",{resultId:e})}trackActionsOffensive(){this._logger.debug("Tracking actions as offensive.");const e=this._session.get();"started"===e.kind?this._params.userActionTrackingService.trackActionsOffensive(e.activeContext.id):this._logger.warn("Failed to track actions as offensive, session not started.")}getContextById(e){return o.fromNullable(this._contextById.get(e))}dismissActiveBoundaryContext(e){this._logger.debug("Dismissing active boundary context.",{restorePreviousBoundaryContext:e});const t=(0,a.zG)(re.toStarted(this._session.get()),o.map((e=>e.activeContext.id!==e.activeBoundaryContext.id)),o.getOrElse(a.jv));if(e&&t)return void this._logger.warn("Failed to dismiss active boundary context, cannot simultaneously dismiss boundary context with results and restore previous one.");const n=t||!e,i=o.toNullable((0,a.zG)(this._session.get(),re.toStarted,o.chain((e=>this._extractLatestResultContext(e))))),r=o.toNullable((0,a.zG)(this._session.get(),re.toStarted,o.chain((e=>this._extractLatestResultBoundaryContext(e))),o.alt((()=>this._extractInitialContext()))));this._session.modify(re.fold({starting:a.yR,contextless:a.yR,started:e=>n?Object.assign(Object.assign({},e),{mode:"ideation",activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending",isBoundary:!0,textRevision:o.some(e.textRevision),selection:o.none}),activeBoundaryContext:Object.assign(Object.assign({},e.activeBoundaryContext),{kind:"pending",isBoundary:!0,textRevision:o.some(e.textRevision),selection:o.none}),selectedRange:o.none,selectedText:o.none}):i&&r?Object.assign(Object.assign({},e),{mode:e.results.length?e.mode:"ideation",activeContext:i,activeBoundaryContext:r}):Object.assign(Object.assign({},e),{kind:"starting",activeContext:Object.assign(Object.assign({},e.activeContext),{selection:o.none,kind:"pending"}),activeBoundaryContext:void 0,selectedRange:o.none,selectedText:o.none})})),i&&r&&!n||this._getContext(void 0,void 0,n)}dispose(){this._subs.dispose()}_getContext(e,t,n=!1){var i,r;return Xe(this,void 0,void 0,(function*(){if(this._logger.debug("Getting context.",{data:e,fetchContextForHistoryCardId:t}),"contextless"===this._session.get().kind)return void this._logger.debug("Getting context for a contextless session, skipping.");try{yield ke(this._capiCheckingStatus.pipe(_.h((e=>"unknown"!==e&&"some_checks_in_progress"!==e))),1e4)}catch(e){this._params.monitoringService.notify((0,ne.L)({kind:"warn",source:"core",name:"waitForStableCAPICheckingStatusTimeout",data:null}))}this._setupCheetahAckHandler("getContext",(e=>{this._setupContextTimeout("getContext"),void 0!==t&&this._historyResultIdByGetContextMessageId.set(e,t),n&&this._contextMessageIdsTriggeredBySelectionChanges.add(e)}));const s=this._session.get();(0,ye.t)("cheetahGetContext",this._params.capiService.cheetahGetContext(null!=e?e:{generationMode:Ke(n?"rewrite":s.mode),selectedRange:o.toUndefined(s.selectedRange),outerContext:o.toUndefined(qe(s)),stateBlob:(0,a.zG)(re.toStarted(s),o.map((e=>e.activeContext)),o.fold(a.r5,(e=>this._stateBlobByContextId.get(e.id)))),previousText:!n&&"started"===s.kind&&s.results.length>0&&oe.x.isStandardCompletedResult(s.results[0])?He(s.results[0]):void 0,includeDisabledActions:this._params.selectionContextAvailability&&(null===(i=this._params.selectionContextAvailability.get())||void 0===i?void 0:i.contextUpdatesServer)&&(null===(r=this._params.selectionContextAvailability.get())||void 0===r?void 0:r.contextUpdatesClient)}),this._logger,(()=>this._params.monitoringService.notify((0,ne.L)({kind:"info",source:"core",name:"getContextSuccessful",data:null}))),(()=>{const e=ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome));this._session.modify(re.fold({starting:t=>Object.assign(Object.assign({},t),{error:o.some(e),kind:"contextless",nonContextualActions:this._skills.map((e=>q.createSkillAction(e)))}),contextless:t=>Object.assign(Object.assign({},t),{error:o.some(e)}),started:t=>Object.assign(Object.assign({},t),{error:o.some(e),inProgressResult:o.none})})),this._params.monitoringService.notify((0,ne.L)((0,ie.$E)()))}))}))}_handleCheetahSetContext(e){var t,n;return Xe(this,void 0,void 0,(function*(){this._logger.debug("Handling `cheetah:setContext`.",{message:e}),this._clearContextTimeout();const i=this._session.get(),r=(0,a.zG)(o.fromNullable(null===(t=e.context)||void 0===t?void 0:t.voiceProfileSettings),o.fold((()=>ze(e.context.voice,i,this._upstreamDialect.get())),(t=>Ue(t,e.context.voice,i,this._upstreamDialect.get())))),s={id:Y.Id.create(e.context.id),availableActions:De(Y.Id.create(e.context.id),e.context.availableActions,this._skills),userPromptAction:Le(e.context.promptAction,this._logger),quickRewriteAction:Ge(e.context.quickRewriteAction),intent:Ze(e.context.intent),documentOverview:$e(e.context.documentOverview),specialView:o.fromNullable(e.context.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?o.none:(0,a.zG)(g.Y(o.option)({text:i.selectedText,range:i.selectedRange})),textRevision:o.some(i.textRevision)},l=0===this._contextById.size;let c=e.progressMessage?Object.assign(Object.assign({},s),{kind:"pending",isBoundary:!1}):Object.assign(Object.assign({},s),{kind:"received",isBoundary:l||this._contextMessageIdsTriggeredBySelectionChanges.has(e.promptId)});if(this._shouldSkipContextUpdate(e))return void this._logger.debug("Skipping `cheetah:setContext` for missing history card.");const u=yield Je(c,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(n=this._params.selectionContextAvailability)||void 0===n?void 0:n.get());c=(0,a.zG)(o.fromEither(u),o.fold((()=>c),(t=>Object.assign(Object.assign({},c),{isBoundary:!0,selection:t,availableActions:De(Y.Id.create(e.context.id),e.context.availableActions,this._skills)})))),0===this._contextById.size&&Y.isReceived(c)&&(this._initialReceivedContext=c),this._contextById.set(c.id,c),this._stateBlobByContextId.set(c.id,e.context.stateBlob),this._bindContextToHistoryCardIfNeeded(e,c.id);const d=(0,a.zG)(i.writingExpertContext,o.chain((e=>he.getInitialResult(e))),j.bw((e=>{this._resultById.set(e.id,e),this._contextIdByResultId.set(e.id,c.id)})),o.fold((()=>[]),(e=>[e])));if(this._session.set(Object.assign(Object.assign({},i),{kind:"started",voiceProfile:r,activeContext:c,activeBoundaryContext:c.isBoundary?c:"started"===i.kind?i.activeBoundaryContext:c,inProgressResult:"started"===i.kind?(0,a.zG)(i.inProgressResult,o.map((e=>Object.assign(Object.assign({},e),{boundaryContextId:c.isBoundary?o.some(c.id):e.boundaryContextId})))):o.none,results:"started"===i.kind?i.results:d,detectedReferences:"started"===i.kind?i.detectedReferences:new Map,selectedRange:(0,a.zG)(u,v.fold((()=>i.selectedRange),(e=>(0,a.zG)(e,o.map((({range:e})=>e)))))),selectedText:(0,a.zG)(u,v.fold((()=>i.selectedText),(e=>(0,a.zG)(e,o.map((({text:e})=>e))))))})),(0,a.zG)(o.fromNullable(e.context.contextNotification),j.bw((({text:t})=>{this._pushNotification(ve.create("information",t,`contextNotification:${e.id}`,!0)),this._params.userActionTrackingService.trackContexNotification("context")}))),l&&ae.s.isQuickRewrite(i.mode)){const t=q.QuickRewriteActionValue.fromInput(Ge(e.context.quickRewriteAction));this._logger.debug("Handling initial `cheetah:setContext` for quick rewrite session, submitting quick rewrite action.",{session:i,message:e,quickRewriteAction:t}),this._submitAction(t)}}))}_shouldSkipContextUpdate(e){return(0,a.zG)(o.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),o.fold(a.jv,(e=>(0,a.zG)(re.toStarted(this._session.get()),o.map((e=>e.results)),o.fold(a.W8,(t=>!t.some((t=>t.id===e))))))))}_bindContextToHistoryCardIfNeeded(e,t){(0,a.zG)(o.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),o.filter((e=>(0,a.zG)(o.fromNullable(this._contextIdByResultId.get(e)),o.fold(a.W8,(e=>void 0===this._contextById.get(e)))))),j.bw((e=>this._contextIdByResultId.set(e,t))))}_handleCheetahSetUserState(e){this._logger.debug("Handling `cheetah:setUserState`.",{message:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{historyStatus:Pe(t,e.state.historyItems)})))}_getHistory(){this._logger.debug("Getting history."),void 0===this._historyAckHandler?(this._historyAckHandler=()=>{this._historyAckHandler=void 0,this._setupHistoryTimeout()},this._setupCheetahAckHandler("getHistory",this._historyAckHandler),this._session.lens("historyStatus").set(re.HistoryStatus.historyRequested),(0,ye.t)("cheetahGetHistory",this._params.capiService.cheetahGetHistory(),this._logger,(()=>this._params.monitoringService.notify((0,ne.L)({kind:"info",source:"core",name:"getHistorySuccessful",data:null}))),(()=>this._params.monitoringService.notify((0,ne.L)((0,ie.tD)()))))):this._logger.warn("Failed to get history, `cheetah:getHistory` request hasn't been ack'ed yet.")}_handleCheetahSetHistory(e){void 0!==this._historyAckHandler&&(this._removeCheetahAckHandler(this._historyAckHandler),this._historyAckHandler=void 0),this._clearHistoryTimeout();const t=this._session.get();"started"===t.kind?(0,a.zG)(e.cards,b.UI((e=>oe.x.History.createFromCard(e,void 0!==this._params.textEditorService.copyText))),b.GY,y.c2,o.fold((()=>this._session.lens("historyStatus").set(re.HistoryStatus.noHistory)),(e=>{e.forEach((e=>this._resultById.set(e.id,e))),this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending",textRevision:o.none,availableActions:[],selection:o.none}),historyStatus:re.HistoryStatus.historyRestored,results:[...t.results,...e],selectedRange:o.none,selectedText:o.none})),this._getContext(void 0,e[0].id)}))):this._logger.warn("Failed to handle `cheetah:setHistory`, session not started.")}_handleCheetahChunk(e){this._logger.debug("Handling `cheetah:chunk`.",{message:e});const t=this._session.get();if("started"!==t.kind)return void this._logger.warn("Failed to handle `cheetah:chunk`, session not started.");const n=oe.x.Id.create(e.promptId);(0,a.zG)(t.inProgressResult,o.filter(oe.x.isInProgressOngoing),o.filter((e=>oe.x.Id.eq.equals(e.id,n))),o.fold((()=>{const e=(0,a.zG)(t.inProgressResult,o.filter(oe.x.isInProgressOngoing),o.map((e=>e.id)),o.toNullable);this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"warn",source:"core",name:"unexpectedChunkReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:n})))}),(n=>{this._clearResultRelatedTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.some(Object.assign(Object.assign({},n),{text:n.text+e.token}))})),this._setupResultTimeout()})))}_handleCheetahResult(e){return Xe(this,void 0,void 0,(function*(){this._logger.debug("Handling `cheetah:result`.",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("Failed to handle `cheetah:result`, session not started.");const n=oe.x.Id.create(e.promptId);try{yield(0,a.zG)(t.inProgressResult,o.filter(oe.x.isInProgressOngoing),o.filter((e=>oe.x.Id.eq.equals(e.id,n))),o.fold((()=>{const e=(0,a.zG)(t.inProgressResult,o.filter(oe.x.isInProgressOngoing),o.map((e=>e.id)),o.toNullable);return this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"warn",source:"core",name:"unexpectedResultReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:n}))),Promise.resolve(void 0)}),(i=>Xe(this,void 0,void 0,(function*(){var r,s,l,c;if(this._clearResultRelatedTimeouts(),e.error||!e.text||""===e.text.plain){const i=e.error?ee.create(e.error):ee.createEmptyResultError();this._logger.warn("Received `cheetah:result` with error.",{resultId:n,errorReason:i.reason}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(i)}))}else if(e.text.interrupted)this._logger.debug("Received `cheetah:result` with interrupted text, skipping.",{session:t,message:e});else{let n,u,d,m;n="aiUsageAlert"===(null===(s=null===(r=e.context)||void 0===r?void 0:r.specialView)||void 0===s?void 0:s.kind)?oe.x.AIUsageNotification.fromInProgressResult(i,e.text.plain):Object.assign(Object.assign({},i),{text:e.text.plain,kind:"complete",timestamp:Date.now(),replacementDelta:oe.x.ResultDelta.createFromResultMessage(e),supportedActions:(0,a.zG)((c=i.source,(0,a.zG)(c,o.map((e=>e.actionValue.generatesTextType)),o.filter(j.FX(te.cX.Insertable)),o.fold((()=>x.cS),(()=>x.Sq(new Set([oe.x.SupportedAction.rephrase,oe.x.SupportedAction.insert])))))),x.$T(U.yv)(oe.x.SupportedAction.copy)),references:Ve(e),changesSummary:X(e)}),this._logger.debug("Received complete `cheetah:result`, saving complete result into history.",{session:t,message:e,result:n});let p=v.left(void 0);if(e.context){const r=e.context;d=r.voiceProfileSettings?Ue(r.voiceProfileSettings,r.voice,t,this._upstreamDialect.get()):ze(r.voice,t,this._upstreamDialect.get()),u={kind:"received",id:Y.Id.create(r.id),availableActions:De(Y.Id.create(e.context.id),r.availableActions,this._skills),userPromptAction:Le(r.promptAction,this._logger),intent:Ze(r.intent),documentOverview:$e(r.documentOverview),specialView:o.fromNullable(r.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?o.none:(0,a.zG)(i.boundaryContextId,o.chain((e=>(0,a.zG)(o.fromNullable(this._contextById.get(e)),o.chain((({selection:e})=>e)))))),isBoundary:!1,textRevision:(0,a.zG)((0,a.zG)(i.boundaryContextId,o.chain((e=>o.fromNullable(this._contextById.get(e)))),o.chain((({textRevision:e})=>e))))},p=yield Je(u,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(l=this._params.selectionContextAvailability)||void 0===l?void 0:l.get()),u=(0,a.zG)(o.fromEither(p),o.fold((()=>u),(e=>Object.assign(Object.assign({},u),{isBoundary:!0,selection:e,availableActions:De(Y.Id.create(r.id),r.availableActions,this._skills)})))),u.isBoundary&&(n=Object.assign(Object.assign({},n),{boundaryContextId:o.some(u.id)})),m=r.stateBlob,this._logger.debug("Received `cheetah:result` with context, will update voice profile and context accordingly.",{session:t,message:e,voiceProfile:d,context:u})}else this._logger.warn("Received `cheetah:result` without context.",{resultId:n.id}),d=t.voiceProfile,u=t.activeContext,m=this._stateBlobByContextId.get(t.activeContext.id);this._contextById.set(u.id,u),void 0!==m&&this._stateBlobByContextId.set(u.id,m),this._resultById.set(n.id,n),this._contextIdByResultId.set(n.id,u.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:d,activeContext:u,inProgressResult:o.none,results:[n,...t.results],selectedRange:(0,a.zG)(p,v.fold((()=>t.selectedRange),(e=>(0,a.zG)(e,o.map((({range:e})=>e)))))),selectedText:(0,a.zG)(p,v.fold((()=>t.selectedText),(e=>(0,a.zG)(e,o.map((({text:e})=>e))))))})),this._trackResultGenerationCompleted(n.id)}})))))}catch(e){const t=(0,be.N)(e);return this._logger.warn("Failed to handle `cheetah:result`.",{resultId:n,reason:t.message})}}))}_handleCheetahSearchReferencesResult(e){const t=this._session.get();if("started"===t.kind){const n=this._searchReferencesUrlsById.get(e.promptId);if(n){const i=e.references[0];i&&this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(n,o.some(Se.s.create(i)))}))}else this._logger.warn("Failed to handle `cheetah:searchReferencesResult`, no corresponding `cheetah:searchReferences` request.")}else this._logger.warn("Failed to handle `cheetah:searchReferencesResult`, session not started.")}_handleCheetahError(e){this._logger.debug("Handling `cheetah:error`.",{message:e}),this._clearAllTimeouts();const t=ee.create(e.error);this._logger.warn("Received `cheetah:error`.",{errorKind:e.error.kind}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("Handling upstream dialect change.",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const n=we.Dialect.Id.create(e);this._logger.debug("Dialect changed on upstream services, updating selected dialect on voice profile.",{session:t,selectedDialect:n}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:n})}))}}_handleCheetahAck(e){this._logger.debug("Handling `cheetah:ack`.",{message:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("Extracting `cheetah:ack` handler from queue and executing it.",{message:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===C.jK.SESSION_NOT_INITIALIZED){const t=(0,a.zG)(re.toStarted(this._session.get()),o.map((e=>this._stateBlobByContextId.get(e.activeContext.id))),o.toUndefined);this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._startSession(t),this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"warn",source:"core",name:"capiErrorHandled",data:e}}({capiError:e})))}else{const t=ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._params.monitoringService.notify((0,ne.L)((0,ie.Z9)({capiError:e})))}else this._params.monitoringService.notify((0,ne.L)((0,ie.Z9)({capiError:e})))}_submitAction(e,t,n,i,r,s){var l,c;this._logger.debug("Submitting action.",{actionValue:e,contextId:t,triggerContextId:n,boundaryContextId:i,previousText:r,selectedVoice:s});const u=this._session.get();if("started"===u.kind){const d=null!==(l=null!=t?t:null==e?void 0:e.contextId)&&void 0!==l?l:u.activeContext.id,p=null!=n?n:d,h=null!=i?i:u.activeBoundaryContext.id,f=(null!=r?r:void 0!==(null==e?void 0:e.contextId))?void 0:u.results.length>0&&oe.x.isStandardCompletedResult(u.results[0])?He(u.results[0]):void 0,g=this._stateBlobByContextId.get(d);if(void 0===g)return void this._logger.warn("Failed to submit action, cannot find state blob for context ID.",{contextId:d,triggerContextId:n});const v="aiUsageNotification"===(null===(c=u.results[0])||void 0===c?void 0:c.kind)?u.results.slice(1):u.results;this._session.set(Object.assign(Object.assign({},u),{results:v,historyStatus:re.HistoryStatus.restoreDisabled,activeContext:Object.assign(Object.assign({},u.activeContext),{kind:"pending"}),inProgressResult:o.isSome(e.generatesTextType)?o.some({kind:"inProgressPending",header:{label:q.isUserPromptActionValue(e)?e.arg.value:e.label,iconUrl:q.isUserPromptActionValue(e)||""===e.icon.right.trim()?o.none:o.some(e.icon.right),copiablePrompt:q.isUserPromptActionValue(e)&&""!==e.arg.value.trim()?o.some(e.arg.value):o.none},text:"",source:o.some({contextId:d,actionValue:e}),boundaryContextId:o.some(h)}):o.none,error:o.none})),this._setupCheetahAckHandler("action",(e=>{(0,a.zG)(re.toStarted(this._session.get()),o.chain((e=>e.inProgressResult)),o.filter((0,z.Kg)(oe.x.isInProgressPending,oe.x.isInProgressInterrupted)),o.fold((()=>(this._logger.debug("Received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping.",{ackId:e}),k.of(void 0))),(t=>{if(oe.x.isInProgressInterrupted(t))return this._logger.debug("Received `cheetah:ack` related to in-progress-interrupted result, sending `cheetah:interrupt`.",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._params.capiService.cheetahInterrupt({promptId:e});if(oe.x.isInProgressPending(t)){this._setupContextTimeout("action"),this._setupResultTimeout();const n=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:oe.x.Id.create(e)});return this._logger.debug("Received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing.",{ackId:e,inProgressResult:n}),this._resultById.set(n.id,n),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.some(n)}))),k.of(void 0)}(0,m.L0)(t)})))()}));const b=Object.assign({contextId:d,triggerContextId:p,actionId:e.id,args:q.isUserPromptActionValue(e)?[{name:e.arg.id,value:e.arg.value}]:(0,a.zG)(y.c2(e.args),o.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:g,previousText:f},s?{metadata:{selectedVoice:s}}:null),x=(0,a.zG)(e,o.fromPredicate(q.isUserPromptActionValue),o.fold((0,a.a9)(b),(e=>Object.assign(Object.assign({},b),{useReferences:o.toUndefined(e.useReferences),omitReferenceIds:o.toUndefined(e.omitReferenceIds)}))));this._logger.debug("Sending `cheetah:action` to CAPI.",{data:x}),(0,ye.t)("cheetahAction",this._params.capiService.cheetahAction(x),this._logger,(()=>this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"info",source:"core",name:"actionSuccessful",data:e}}({actionId:e.id})))),(()=>this._params.monitoringService.notify((0,ne.L)((0,ie.g4)({actionId:e.id})))))}else this._logger.warn("Failed to submit action, session not started.",{actionId:e.id})}_extractLatestResultContext(e){return this._extractContextFromResult(e,0)}_extractLatestResultBoundaryContext(e){return this._extractBoundaryContextFromResult(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResult(e,1)}_extractPreviousResultBoundaryContext(e){return this._extractBoundaryContextFromResult(e,1)}_extractContextFromResult(e,t){const n=(0,a.zG)(o.fromNullable(e.results[t]),o.map((e=>e.id)),o.chain((e=>o.fromNullable(this._contextIdByResultId.get(e)))),o.chain((e=>o.fromNullable(this._contextById.get(e)))));return o.isNone(n)&&this._logger.warn("Failed to extract context from result.",{resultIndex:t}),n}_extractBoundaryContextFromResult(e,t){return(0,a.zG)(o.fromNullable(e.results[t]),o.filter(oe.x.isComplete),o.chain((({boundaryContextId:e})=>e)),o.chain((e=>o.fromNullable(this._contextById.get(e)))),j.ew((()=>{this._logger.warn("Failed to extract boundary context from result.",{resultIndex:t})})))}_extractInitialContext(){return null!==this._initialReceivedContext?o.some(this._initialReceivedContext):(this._logger.warn("Failed to extract initial context."),o.none)}_setupResultTimeout(){this._clearResultTimeout(),this._resultTimeout=O.timer(this._resultTimeoutMs).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome)))}))),this._params.monitoringService.notify((0,ne.L)((0,ie.bE)()))}))}_setupContextTimeout(e){this._logger.debug("Setting up context timeout.",{sourceCommand:e}),this._clearContextTimeout(),this._contextTimeout=O.timer(this._contextTimeoutMs).subscribe((()=>{const t=ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._params.monitoringService.notify((0,ne.L)((0,ie.gW)({sourceCommand:e})))}))}_setupHistoryTimeout(){this._clearHistoryTimeout(),this._historyTimeout=O.timer(this._historyTimeoutMs).subscribe((()=>{const e=ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome));this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(e)}))),this._params.monitoringService.notify((0,ne.L)((0,ie.Ax)()))}))}_setupCheetahAckTimeout(e){this._logger.debug("Setting up `cheetah:ack` timeout.",{sourceCommand:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=O.timer(this._cheetahAckTimeoutMs).subscribe((()=>{const t=ee.createCriticalError((0,a.zG)(re.toStarting(this._session.get()),o.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._params.monitoringService.notify((0,ne.L)((0,ie.No)({sourceCommand:e})))}))}_clearResultTimeout(){var e;null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearHistoryTimeout(){var e;null===(e=this._historyTimeout)||void 0===e||e.unsubscribe(),this._historyTimeout=void 0}_clearCheetahAckTimeout(){var e;null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearResultRelatedTimeouts(){this._clearContextTimeout(),this._clearResultTimeout(),this._clearCheetahAckTimeout()}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearHistoryTimeout(),this._clearCheetahAckTimeout()}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}_removeCheetahAckHandler(e){this._cheetahAckHandlers=this._cheetahAckHandlers.filter((t=>t!==e)),0===this._cheetahAckHandlers.length&&this._clearCheetahAckTimeout()}}var nt=n(79662);const it="100.3.0";var rt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ot{constructor(e){this._params=e,this._commonProperties={version:it,cheetahClientProtocolVersion:nt.XU,clientType:this._params.lifecycleService.hostInfo.clientType,clientVersion:this._params.lifecycleService.hostInfo.clientVersion,environment:this._params.lifecycleService.hostInfo.environment,experience:this._params.experience}}logEvent(e){return rt(this,void 0,void 0,(function*(){return this._log(e.kind,e.source,e.name,e.data)}))}getLogger(e){return{debug:(t,...n)=>this._debug(e,t,...n),info:(t,n)=>this._info(e,t,n),warn:(t,n)=>this._warn(e,t,n),error:(t,n)=>this._error(e,t,n)}}_debug(e,t,...n){["dev","test"].includes(this._params.lifecycleService.hostInfo.environment)&&console.debug(`[${e}]`,t,...n)}_info(e,t,n){return["dev","test"].includes(this._params.lifecycleService.hostInfo.environment)&&console.info(`[${e}]`,t,n),this._log("info",e,t,n)}_warn(e,t,n){return["dev","test"].includes(this._params.lifecycleService.hostInfo.environment)&&console.warn(`[${e}]`,t,n),this._log("warn",e,t,n)}_error(e,t,n){return["dev","test"].includes(this._params.lifecycleService.hostInfo.environment)&&console.error(`[${e}]`,t,n),this._log("error",e,t,n)}_log(e,t,n,i){return rt(this,void 0,void 0,(function*(){if(!["prod","preprod","qa","dev"].includes(this._params.lifecycleService.hostInfo.environment))return console.debug(`Won't submit log for host environment "${this._params.lifecycleService.hostInfo.environment}".`,{logLevel:e,source:t,message:n,data:i});const r="info"===e||"prod"!==this._params.lifecycleService.hostInfo.environment?ot.DATA_TIER_INFREQUENT:ot.DATA_TIER_CONTINUOUS,o="prod"!==this._params.lifecycleService.hostInfo.environment?ot.RETENTION_DAYS_30:ot.RETENTION_DAYS_90;let a=!1;if(i)try{JSON.stringify(i)}catch(e){console.warn("Failed to JSON.stringify data.",{data:i},e),a=!0}try{const s=yield fetch(`${ot.FELOG_ENDPOINT}/log?datatier=${r}&retention=${o}`,{method:"POST",body:JSON.stringify(Object.assign(Object.assign({logLevel:e,source:t,message:n},i?a?{data:"JSON.stringify failure"}:{data:i}:{}),this._commonProperties))});if(!s.ok){const e=yield s.text();throw Error(e)}}catch(r){console.warn("Failed to submit log.",{logLevel:e,source:t,message:n,data:i},r)}}))}}ot.FELOG_ENDPOINT="https://f-log-assistant.grammarly.io",ot.DATA_TIER_CONTINUOUS="continuous",ot.DATA_TIER_INFREQUENT="infrequent",ot.RETENTION_DAYS_30=30,ot.RETENTION_DAYS_90=90;var at=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class st{constructor(e){this._params=e,this._logger=this._params.logService.getLogger(st.name),this._commonLabels={version:it,cheetahClientProtocolVersion:nt.XU,clientType:this._params.lifecycleService.hostInfo.clientType,clientVersion:this._params.lifecycleService.hostInfo.clientVersion,environment:this._params.lifecycleService.hostInfo.environment,experience:this._params.experience},this._markedMetricNames=new Set}report(e,t,n){return at(this,void 0,void 0,(function*(){if(!["prod","preprod","qa","dev"].includes(this._params.lifecycleService.hostInfo.environment))return this._logger.debug(`Won't report metric for host environment "${this._params.lifecycleService.hostInfo.environment}".`,{metric:e,startMarks:t,externalStartMarks:n});performance.mark(e.name),this._markedMetricNames.add(e.name);const i=Object.keys(this._commonLabels).map((e=>({key:e,value:this._commonLabels[e]}))).concat((0,a.zG)(o.fromNullable(e.labels),o.fold((()=>[]),(e=>Object.keys(e).map((t=>({key:t,value:e[t]}))))))),r=this._getDurationMetrics(null!=t?t:[],e.name,i).concat(this._getDurationMetrics(null!=n?n:[],e.name,i));try{const t=yield fetch(`${st.FEMETRICS_ENDPOINT}/batch/import`,{method:"POST",body:JSON.stringify([{name:`${e.name}_total`,type:"counter",value:1,labels:i},...r])});if(!t.ok){const e=yield t.text();throw Error(e)}}catch(t){this._params.monitoringService.notify((0,ne.L)((0,ie.Ld)({reason:(0,be.N)(t).message,metric:e})))}}))}_getDurationMetrics(e,t,n){return e.map((e=>{try{const i=performance.measure(`${e}_to_${t}`,e,t).duration;return{name:`${t}_duration_ms`,type:"histogram",value:i,labels:n.concat([{key:"startMark",value:e}])}}catch(n){const i=(0,be.N)(n);return void this._logger.warn(`Failed to measure '${e}' to '${t}'.`,{reason:i.message})}})).filter(Boolean)}dispose(){this._markedMetricNames.forEach((e=>{performance.clearMarks(e),performance.clearMeasures(e)}))}}st.FEMETRICS_ENDPOINT="https://assistant.femetrics.grammarly.io";const lt=st;class ct{constructor(e){this._params=e}notify(e){this._params.wrappedMonitoringService.notify(e),this._params.logService.logEvent(Object.assign(Object.assign({},e),{data:JSON.parse(e.jsonData)}))}}class ut{constructor(){this._notifications=new s.xQ,this.notifications=this._notifications.asObservable()}notify(e){this._notifications.next(e)}}var dt=n(93508);var mt=n(6273);class pt{constructor(e,t,n){this._capiService=e,this._genAIAvailability=t,this._logService=n,this._logger=this._logService.getLogger(pt.name)}trackResultInsert(e,t,n=!1){this._logger.debug("Tracking result insert.",{contextId:e,historyResultId:t,withVoiceProfile:n}),e||this._logger.warn("Tracking result insert without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.insert},e,t,{withVoiceProfile:n})}trackResultCopy(e,t,n=!1){this._logger.debug("Tracking result copy.",{contextId:e,historyResultId:t,withVoiceProfile:n}),e||this._logger.warn("Tracking result copy without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.copy},e,t,{withVoiceProfile:n})}trackResultOffensive(e,t){this._logger.debug("Tracking result as offensive.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result as offensive without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.offensive},e,t)}trackResultDismiss(e,t){this._logger.debug("Tracking result dismiss.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result dismiss without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.dismiss},e,t)}trackResultRephrase(e){this._logger.debug("Tracking result rephrase.",{contextId:e}),e||this._logger.warn("Tracking result rephrase without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.rephrase},e)}trackResultGenerationCompleted(e,t){this._logger.debug("Tracking result generation-complete.",{contextId:e,historyResultId:t}),e||this._logger.warn("Tracking result generation-complete without context ID."),this._trackUxInteraction({kind:"result",userAction:mt.Z.Result.UserAction.generationCompleted},e,t)}trackVoiceProfileOpen(e){this._logger.debug("Tracking voice profile open.",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?mt.Z.VoiceProfile.UserAction.open:mt.Z.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("Tracking voice profile skip."),this._trackUxInteraction({kind:"voiceProfile",userAction:mt.Z.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("Tracking actions open store."),this._trackUxInteraction({kind:"actions",userAction:mt.Z.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("Tracking actions as offensive.",{contextId:e}),e||this._logger.warn("Tracking actions as offensive context ID."),this._trackUxInteraction({kind:"actions",userAction:mt.Z.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("Tracking prompt search."),this._trackUxInteraction({kind:"prompt",userAction:mt.Z.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("Tracking usage info click."),this._trackUxInteraction({kind:"usageInfo",userAction:mt.Z.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("Tracking usage info hover."),this._trackUxInteraction({kind:"usageInfo",userAction:mt.Z.UsageInfo.UserAction.hover})}trackHistoryButtonView(){this._logger.debug("Tracking history button view."),this._trackUxInteraction({kind:"historyButton",userAction:mt.Z.HistoryButton.UserAction.view})}trackAssistantClose(){this._logger.debug("Tracking assistant close."),this._trackUxInteraction({kind:"assistant",userAction:mt.Z.Assistant.UserAction.close})}trackVoiceProfileRemoveTag(){this._logger.debug("Tracking voice profile remove tag."),this._trackUxInteraction({kind:"voiceProfile",userAction:mt.Z.VoiceProfile.UserAction.removeVoiceTag})}trackVoiceProfileKeepTag(){this._logger.debug("Tracking voice profile keep tag."),this._trackUxInteraction({kind:"voiceProfile",userAction:mt.Z.VoiceProfile.UserAction.keepVoiceTag})}trackAINotificationDismiss(e){this._logger.debug("Tracking AI notification dismiss.",{scope:e}),this._trackUxInteraction({kind:"aiUsageNotification",userAction:"document"===e?mt.Z.Notification.AIUsageUserAction.dontShowOnDocument:mt.Z.Notification.AIUsageUserAction.dontShowForever})}trackReadyToInteract(){this._logger.debug("Tracking ready to interact."),this._trackUxInteraction({kind:"assistant",userAction:mt.Z.Assistant.UserAction.readyToInteract})}trackMyVoiceCardToggle(e){this._logger.debug("Tracking my voice card toggle.",{isMyVoiceEnabled:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:e?mt.Z.VoiceProfile.UserAction.toggleToMyVoice:mt.Z.VoiceProfile.UserAction.toggleToNeutral})}trackContexNotification(e){this._logger.debug("Tracking context notification.",{source:e}),this._trackUxInteraction({kind:"context"===e?"contextNotification":"actionNotification",userAction:mt.Z.Notification.UserAction.view})}_trackUxInteraction(e,t,n,i={}){const r=mt.Z.getComponentId(e,t,n,i),o=mt.Z.getUserAction(e),a=this._genAIAvailability.get();h._.isUnavailable(a)?this._logger.debug(`Gen-AI ${a.kind}, skipping backend user_action tracking.`,{componentId:r,userAction:o,uxInteraction:e,contextId:t}):(this._logger.debug("Sending `user_action` to CAPI.",{componentId:r,userAction:o,uxInteraction:e,contextId:t}),(0,ye.t)("sendUserAction",this._capiService.user_action({componentId:r,userAction:o}),this._logger))}}var ht=n(83289);class ft{constructor(e){this._params=e,this._sub=new l.w,this._logger=this._params.logService.getLogger(ft.name),this._domain=p.h.create(o.none),this._state=p.h.create({}),this.stagingFeedbackFormData=this._state.view(),this.domain=this._domain.view(),this._sub.add(this._params.feedbackService.domain.subscribe((e=>this._domain.set(o.fromNullable(e))))),this._sub.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._sub.unsubscribe()}_handleUIAction(e){switch(e.kind){case ht.i.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case ht.i.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case ht.i.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);default:return}}_openFeedbackForm(e){this._params.routingViewModel.push({kind:"feedbackForm"}),this._state.set({source:e})}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),e)))}_submitFeedbackForm(e){this._params.routingViewModel.pop(),this._state.set({}),(0,ye.t)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._logger,void 0,(e=>this._params.monitoringService.notify((0,ne.L)(function(e){return{source:"feedback",kind:"error",name:"submitFeedbackFailed",data:e}}({reason:(0,be.N)(e).message})))))}}class gt{constructor(e,t,n,i=3e3,r=300,o=1){this._notificationService=e,this._assistantUIActions=t,this._activeView=n,this._notificationsDurationMs=i,this._mouseOutHoldBackDurationMs=r,this._maxNotificationsCountAtOnce=o,this._state=p.h.create([]),this._notificationsSubs=new Map,this._subs=new l.w,this._hovered=p.h.create(!1),this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe()),this._subs.add(this._removeVoiceTagNotification().subscribe()),this._subs.add(this._showServiceNotifications().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(b.hX((t=>t.id!==e))),this._hovered.set(!1)}hover(e){this._hovered.set(e)}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){e.persistent||this._notificationsSubs.set(e.id,O.timer(e.customTimeout||this._notificationsDurationMs).pipe(c.w((()=>this._hovered.get()?this._hovered.pipe(F.e(10),_.h((e=>!e)),R.q(1),c.w((()=>O.timer(this._mouseOutHoldBackDurationMs)))):u.of(null)))).subscribe((()=>this.dismiss(e.id)))),this._state.modify((0,a.ls)(b.QI(e),b.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(_.h((0,z.Kg)(ht.i.is(ht.i.Kind.feedbackFormSubmitButtonClick),ht.i.is(ht.i.Kind.reportOffensiveResultButtonClick),ht.i.is(ht.i.Kind.reportOffensiveActionsButtonClick),ht.i.is(ht.i.Kind.toneReportToneLikeButtonClick),ht.i.is(ht.i.Kind.toneReportToneDislikeButtonClick))),T.b((()=>this._showNotification(ve.create("feedbackSubmitted")))))}_removeVoiceTagNotification(){return this._assistantUIActions.pipe(_.h(ht.i.is(ht.i.Kind.voiceTagPopoverRemoveButtonClick)),T.b((()=>this._showNotification(ve.create("voiceTagRemoved")))))}_showServiceNotifications(){return this._notificationService.notifications.pipe(T.b((e=>this._showNotification(e))))}_clearNotificationsOnViewChange(){return this._activeView.view("kind").pipe(S.x(),T.b((()=>this.clearAll())))}}var vt=n(2844),bt=n(99877);function yt(e){switch(e){case bt.e.historyButtonActive:return o.some("historyButton");case bt.e.initialActionsList:return o.some("homeGenAIActionsList");case bt.e.referencesList:return o.some("genAIResultReferences");case bt.e.promptInputAndMenuContainer:return o.some("promptInput");case bt.e.followUpActionsList:return o.some("genAIResultFollowUpActionsList");case bt.e.appActionsList:return o.some("homeAppActionsList");case bt.e.creditsInfoButton:case bt.e.intentCard:case bt.e.historyButton:case bt.e.promptInput:case bt.e.promptMenuContent:case bt.e.skill:return o.none;default:(0,m.L0)(e)}}class xt{constructor(e){this._params=e,this._subs=new l.w,this._references=p.h.create(new Map),this._onboardingStep=p.h.create(o.none),this.onboardingStep=this._onboardingStep.view(),(0,a.zG)(this._params.onboardingService,o.map((e=>{this._subs.add(this._params.assistantUIActions.pipe(_.h(ht.i.is(ht.i.Kind.mount))).subscribe((({name:t,element:n})=>(0,a.zG)(yt(t),o.map((t=>{this._references.modify((e=>new Map(e).set(t,n))),e.notify({kind:"onboardingTargetMount",target:t})})))))),this._subs.add(this._params.assistantUIActions.pipe(_.h(ht.i.is(ht.i.Kind.unmount))).subscribe((({name:t})=>(0,a.zG)(yt(t),o.map((t=>{this._references.modify((e=>{const n=new Map(e);return n.delete(t),n})),e.notify({kind:"onboardingTargetUnmount",target:t})})))))),this._subs.add(vt.aj([this._references,N.D(e.onboardingStepRequest).pipe(I.U(o.fromNullable))]).pipe(I.U((([e,t])=>(0,a.zG)(t,o.chain((t=>(0,a.zG)(o.fromNullable(e.get(t.target)),o.map((e=>Object.assign(Object.assign({},t),{reference:e})))))))))).subscribe(d.wW(this._onboardingStep)))})))}notify(e){switch(e.kind){case"onboardingStepUnmount":(0,a.zG)(this._params.onboardingService,o.map((t=>t.notify({kind:"onboardingStepUnmount",stepId:e.stepId,reason:e.reason}))));break;case"onboardingStepMount":(0,a.zG)(this._params.onboardingService,o.map((t=>t.notify({kind:"onboardingStepMount",stepId:e.stepId}))));break;default:(0,m.L0)(e)}}dispose(){this._subs.unsubscribe()}}function kt(e){return"home"===e.kind||"thread"===e.kind}const St={legacyVoiceProfile:!0,voiceProfile:!0,feedbackForm:!0,skill:!0,toneReport:!0,settings:!0,plagiarism:!0,writingExpert:!0};function wt(e){return!0===St[e.kind]}var Ct;!function(e){e.eq=U.f7(((e,t)=>e.kind===t.kind))}(Ct||(Ct={}));var Et,_t,It,At=n(41398);!function(e){e.Slight="Slight",e.Moderate="Moderate",e.Strong="Strong",e.VeryStrong="Very strong"}(Et||(Et={})),function(e){e.On="on",e.Off="off"}(_t||(_t={})),function(e){e.positive="positive",e.negative="negative"}(It||(It={}));const Ot=L.contramap((e=>e.confidence))(L.getDualOrd(L.ordNumber)),Rt=L.contramap((e=>e===_t.Off||e!==_t.On&&(0,m.L0)(e)))(L.ordBoolean),Bt=L.contramap((({brandToneInfo:e,confidence:t})=>[(0,a.zG)(e,o.map((({status:e})=>e))),t]))(L.getTupleOrd(L.getDualOrd(o.getOrd(Rt)),L.getDualOrd(L.ordNumber)));var Mt;!function(e){e.isLoadedEmpty=e=>"loadedEmpty"===e.kind,e.isLoadedNonEmpty=e=>"loadedNonEmpty"===e.kind,e.isLoaded=(0,z.Kg)(e.isLoadedEmpty,e.isLoadedNonEmpty)}(Mt||(Mt={}));class Ft{constructor(e){var t;this._params=e,this._subscriptions=new l.w,this._toneAlertsSummary=p.h.create(o.none),this._loadingTimedOut=p.h.create(!1),this.state=p.h.combine(this._params.toneDetectorServiceInternal.state,this._toneAlertsSummary,this._params.userService.user.view((e=>(0,a.zG)(o.fromPredicate(de)(e),o.map((({institution:e,isPremium:t})=>({institutionName:(0,a.zG)(e,o.map((e=>e.name))),isUphookEligible:!t}))),o.getOrElse((()=>({institutionName:o.none,isUphookEligible:!1})))))),this._loadingTimedOut,((e,t,{institutionName:n,isUphookEligible:i},r)=>r?{kind:"loadedEmpty",brandToneInfo:o.none,loadingTimedOut:!0}:(0,a.zG)(e,o.fold((()=>({kind:"loading"})),(({tones:e,hidden:r,brandTonesEnabled:s,institutionLogo:l})=>(0,a.zG)(y.c2(e),o.filter((e=>!r)),o.fold((()=>({kind:"loadedEmpty",brandToneInfo:s?o.some({institutionName:n,institutionLogo:l}):o.none,loadingTimedOut:!1})),(e=>({kind:"loadedNonEmpty",tones:e,brandToneInfo:s?o.some({institutionName:n,institutionLogo:l}):o.none,uphookInfo:i?t:o.none}))))))))),this._subscriptions.add(this._params.assistantUIActions.pipe(_.h((0,z.Kg)(ht.i.isToneDetectorAction,ht.i.is(ht.i.Kind.actionBrickClick))),At.M(this.state)).subscribe((([e,t])=>this._handleUIAction(e,t)))),this._subscriptions.add(this._params.routingViewModel.activeView.view("kind").pipe(S.x(),_.h((e=>"toneReport"===e))).subscribe((()=>this._refreshToneAlertsSummary()))),this._subscriptions.add(this.state.pipe(w.P(Mt.isLoadedNonEmpty)).subscribe((()=>this._refreshToneAlertsSummary())));const n=O.timer(null!==(t=this._params.loadingTimeoutMs)&&void 0!==t?t:1e4).subscribe((()=>this._loadingTimedOut.set(!0)));this._subscriptions.add(n),this._subscriptions.add(this.state.pipe(w.P(Mt.isLoaded)).subscribe((()=>n.unsubscribe())))}dispose(){this._subscriptions.unsubscribe()}_refreshToneAlertsSummary(){ke(this._params.toneDetectorServiceInternal.getToneAlertsSummary()).then(d.wW(this._toneAlertsSummary))}_handleUIAction(e,t){switch(e.kind){case ht.i.Kind.toneReportToneLikeButtonClick:this._params.toneDetectorServiceInternal.submitToneFeedback(e.toneName,It.positive);break;case ht.i.Kind.toneReportToneDislikeButtonClick:this._params.toneDetectorServiceInternal.submitToneFeedback(e.toneName,It.negative);break;case ht.i.Kind.actionBrickClick:{const t=e.action;"regularAction"===t.kind&&q.isToneAction(t.action)&&this._params.routingViewModel.push({kind:"toneReport"});break}case ht.i.Kind.toneReportLoadedEmptyMount:Mt.isLoadedEmpty(t)&&this._params.lifecycleViewModel.onInteractionReady({kind:"tone-detector",success:!t.loadingTimedOut});break;case ht.i.Kind.toneReportLoadedNonEmptyMount:Mt.isLoadedNonEmpty(t)&&(this._params.lifecycleViewModel.onInteractionReady({kind:"tone-detector",success:!0}),this._params.trackingService.toneReportShown({tones:t.tones,brandTonesEnabled:o.isSome(t.brandToneInfo)}));break;case ht.i.Kind.toneReportBackToSuggestionsButtonClick:"toneReport"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop();break;case ht.i.Kind.toneReportFooterUphookPremiumButtonShow:this._params.uphookService.trackUphookShown("toneDetector");break;case ht.i.Kind.toneReportFooterUphookPremiumButtonClick:this._params.uphookService.trackUphookClicked("toneDetector"),this._params.uphookService.executeUphook("toneDetector");break;default:(0,m.L0)(e)}}}class Tt{constructor(e,t,n,i,r,s,l){this._session=e,this._activeView=t,this._genAIAvailability=n,this._toneDetectorViewModel=i,this._plagiarismViewModel=r,this._writingExpertViewModel=s,this._textEditorState=l,this._contextualActions=p.h.combine(this._session,this._activeView.view(o.fromPredicate(kt)),this._genAIAvailability,((e,t,n)=>(0,a.zG)(g.Y(o.option)({session:(0,a.zG)(e,o.chain(re.toStarted)),view:(0,a.zG)(t,o.map((e=>e.kind)))}),o.map((({session:e,view:t})=>"home"===t?e.activeBoundaryContext:"thread"===t?e.activeContext:(0,m.L0)(t))),o.map((t=>({loading:!(0,a.zG)(e,o.exists((e=>o.isSome(e.error))))&&"pending"===t.kind,actions:h._.isUnavailable(n)||o.exists((({kind:e})=>"aiUsageAlert"===e))(t.specialView)?[]:t.availableActions.filter((0,a.ff)(q.isSkillAction)),context:t})))))),this._toneAction=(0,a.zG)(this._toneDetectorViewModel,o.fold((()=>p.h.create(o.none)),(e=>e.state.view((0,a.ls)(o.fromPredicate(Mt.isLoadedNonEmpty),o.map((({tones:e})=>(0,a.zG)(e,y.YM,q.createToneAction)))))))),this._plagiarismAction=p.h.combine((0,a.zG)(this._plagiarismViewModel,o.fold((()=>p.h.create(o.none)),(e=>e.plagiarismAction))),this._textEditorState.view("textLength"),((e,t)=>(0,a.zG)(g.Y(o.option)({action:e,textLength:t}),o.filter((({textLength:e})=>e>0)),o.map((({action:e})=>e))))),this._writingExpertAction=p.h.combine((0,a.zG)(this._writingExpertViewModel,o.fold((()=>p.h.create(o.none)),(e=>e.writingExpertAction))),this._textEditorState.view("textLength"),((e,t)=>(0,a.zG)(g.Y(o.option)({action:e,textLength:t}),o.filter((({textLength:e})=>e>450)),o.map((({action:e})=>e))))),this._skillActions=this._session.view((e=>(0,a.zG)(e,o.chain(re.toStarted),o.map((e=>e.activeContext)),o.map((e=>e.availableActions)),o.alt((()=>(0,a.zG)(e,o.chain(re.toContextless),o.map((({nonContextualActions:e})=>e))))),o.fold((()=>[]),b.hX(q.isSkillAction))))),this.state=p.h.combine(this._contextualActions,this._toneAction,this._plagiarismAction,this._skillActions,this._writingExpertAction,((e,t,n,i,r)=>({contextualActions:e,toneAction:t,plagiarismAction:n,skillActions:i,writingExpertAction:r})))}}var Pt=n(87847),Nt=n(78674),jt=n(16118);function Ut(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}var zt=n(89894),Dt=n(53514),Lt=n(17138),Gt=n(8543),Zt=n(93986),Ht=n(95835),Vt=n(4870);const $t=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:Lt.I.Text.Base.Subdued}),i.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:Lt.I.Text.Base.Subdued}),i.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:Lt.I.Text.Base.Subdued}),i.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:Lt.I.Text.Base.Subdued,stroke:Lt.I.Text.Base.Subdued})),Kt=e=>i.createElement(Vt.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16"},e),i.createElement("path",{d:"M10.3009 10.6376C11.3878 10.4069 11.9799 9.817 12.2614 8.91408C11.0802 8.91408 10.1227 7.99306 10.1227 6.85694C10.1227 5.72082 11.0802 4.7998 12.2614 4.7998C13.4425 4.7998 14.4 5.66246 14.4 6.85694C14.4 8.05142 14.1624 11.0708 10.3009 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"}),i.createElement("path",{d:"M4.97826 10.6376C6.06509 10.4069 6.65721 9.817 6.93871 8.91408C5.75756 8.91408 4.80005 7.99306 4.80005 6.85694C4.80005 5.72082 5.75756 4.7998 6.93871 4.7998C8.11986 4.7998 9.07737 5.66246 9.07737 6.85694C9.07737 8.05142 8.83974 11.0708 4.97826 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"})),Wt=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"none"},e),i.createElement("g",{clipPath:"url(#a)"},i.createElement("path",{fill:"#FFC444",d:"M5.654 7.744a3.623 3.623 0 0 0-2.398-2.398.362.362 0 0 1 0-.692 3.623 3.623 0 0 0 2.398-2.398.362.362 0 0 1 .692 0 3.623 3.623 0 0 0 2.398 2.398.362.362 0 0 1 0 .692 3.623 3.623 0 0 0-2.398 2.398.362.362 0 0 1-.692 0"}),i.createElement("path",{fill:"#027E6F",d:"M6.207 13.111a.5.5 0 0 1-.353-.853l8.98-8.982c.36-.358.962-.017.84.475l-1.63 6.517a.5.5 0 0 0 .485.62h2.597a.5.5 0 0 1 .354.854l-8.981 8.982c-.359.358-.962.017-.839-.475l1.63-6.517a.5.5 0 0 0-.486-.62z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"a"},i.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"}))));var qt=n(94689),Qt=n(79378);const Yt="action-row-btn",Jt=i.forwardRef((function({icon:e,label:t,style:n,onClick:r},o){return i.createElement(Zt.z,{variant:"tertiary",onClick:r,name:"actionBrick",size:"large",style:[sn,n],className:Yt},(0,a.zG)(e,v.fold((e=>"more"===e?i.createElement($t,null):"plagiarism"===e?i.createElement(Kt,null):"writingExpert"===e?i.createElement(Wt,null):(0,m.L0)(e)),(e=>i.createElement("img",{src:e,style:{width:zt.ux.rem(Xt),height:zt.ux.rem(Xt)}})))),i.createElement(Gt.F.div,Object.assign({mount:o},$(t),{className:ln})))})),Xt=1.25,en=Dt.mh,tn=Dt.mh,nn=Dt.qp,rn=en+Xt+nn,on=tn,an=(0,Ht.Rv)(`inset 0 0 0 2px ${Qt.Z.BorderBrandDefault}`),sn={default:{fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),minHeight:zt.ux.rem(2.5),gap:zt.ux.rem(nn),padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(tn)} ${zt.ux.rem(Dt.x)} ${zt.ux.rem(en)}`,justifyContent:"flex-start",alignItems:"flex-start",color:Lt.I.Text.Base.Default,boxShadow:"none",borderRadius:0,$nest:an},hovered:{color:Lt.I.Text.Base.Default,boxShadow:"none",$nest:an},active:{color:Lt.I.Text.Base.Default,boxShadow:"none",$nest:an},icon:(0,qt.fx)(Xt)},ln=zt.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:zt.ux.rem(1.3125)});var cn;!function(e){e.isActionStore=function(e){return"actionStore"===e.kind},e.isSearchResults=function(e){return"searchResults"===e.kind}}(cn||(cn={}));class un{constructor(e,t,n,i,r,h,f,g,v){this._userActionTrackingService=f,this._focusPromptField=v,this._subs=new l.w,this._state=p.h.create(o.none),this._userTyped=new s.xQ,this._promptOrMenuFocused=new s.xQ,this._promptMenuActions=new s.xQ,this._promptMenuContainer=p.h.create(o.none),this._promptMenuContentContainer=o.none,this._cachedActionBricks=o.none,this.state=this._state.view(),this._subs.add(e.subscribe((e=>this._handleUIAction(e)))),this._subs.add(this._userTyped.pipe(Pt.D((e=>e.trim().length>0?O.timer(150):u.of(null))),I.U((e=>e.trim())),T.b((e=>{""===e&&this._promptMenuActions.next({kind:"close"})})),_.h((e=>""!==e)),_.h((()=>!g())),At.M(this._state.view(o.fold((()=>a.W8),(e=>e.filterPredicate)))),T.b((([e,t])=>this._promptMenuActions.next({kind:"showSearchResults",search:e,filterPredicate:t})))).subscribe()),this._subs.add(function(e,t,n,i,r,s,l){const d=i;return vt.aj([e.pipe(c.w((e=>"showSearchResults"===e.kind||"showActionStore"===e.kind?p.h.combine(t,d,r,n,s,((t,n,i,r,s)=>{const l=(0,a.zG)(t,o.fold((()=>[]),(e=>e.actions))),c=(0,a.zG)((0,a.zG)([s,n,i],b.oA).concat(r).concat(l.filter((0,a.ff)(q.isSkillAction))),b.hX(e.filterPredicate),y.c2);return(0,a.zG)("showSearchResults"===e.kind?(0,a.zG)(c,o.filter((()=>""!==e.search.trim()&&!(0,a.zG)(t,o.exists((e=>e.loading))))),o.chain((t=>function(e,t){return(0,a.zG)(e,b.DZ((e=>(0,a.zG)(function(e,t,n){const i=Ut(e),r=[...Ut(t),...(0,a.zG)(n,b.tS((e=>Ut(e))))],s=i.map((()=>null));let l=0;for(const e of r){if(l>=i.length)break;e.toLowerCase().includes(i[l].toLowerCase())&&(s[l]=0,++l)}return s.includes(null)?o.none:o.some(s.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}(t,e.searchLabel,e.searchTags),o.map((t=>({data:e,matchScore:t})))))),b.DY(L.contramap((({matchScore:e})=>e))(L.ordNumber)),b.UI((({data:e})=>e)),y.c2)}(t,e.search)))):"showActionStore"===e.kind?(0,a.zG)(c,o.filter((()=>!(0,a.zG)(t,o.exists((e=>e.loading)))))):(0,m.L0)(e),o.map((t=>({kind:"showSearchResults"===e.kind?"searchResults":"showActionStore"===e.kind?"actionStore":(0,m.L0)(e),actions:t,filterPredicate:e.filterPredicate}))))})):"close"===e.kind?u.of(o.none):(0,m.L0)(e))),dt.O(o.none)),l]).pipe(I.U((([e,t])=>(0,a.zG)(e,o.map((e=>Object.assign(Object.assign({},e),{promptMenuContainer:t})))))))}(this._promptMenuActions,t,n,i,r,h,this._promptMenuContainer).subscribe(d.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(Nt.b(100),_.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe(jt.G(),_.h((([e,t])=>o.isNone(e)&&o.isSome(t))),I.U((([e,t])=>t)),M.oA).subscribe((e=>{"actionStore"===e.kind?this._userActionTrackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._userActionTrackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(_.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks())))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case ht.i.Kind.mount:return void(e.name===bt.e.promptMenuContent?this._promptMenuContentContainer=o.some(e.element):e.name===bt.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(o.some(e.element)));case ht.i.Kind.unmount:return void(e.name===bt.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(o.none));case ht.i.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case ht.i.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case ht.i.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case ht.i.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case ht.i.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case ht.i.Kind.promptFieldKeyPressEscape:return e.menuOpened?this._promptMenuActions.next({kind:"close"}):void 0;case ht.i.Kind.collapsePromptMenuButtonClick:case ht.i.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case ht.i.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case ht.i.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionStore",filterPredicate:e.action.filterPredicate}):this._promptMenuActions.next({kind:"close"});case ht.i.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=o.none}_getActionBricks(){return(0,a.zG)(this._cachedActionBricks,o.getOrElse((()=>{const e=(0,a.zG)(this._promptMenuContentContainer,o.fold((()=>[]),(e=>b.nI(Array.from(e.querySelectorAll(".action-row-btn")).filter(H)))));return this._cachedActionBricks=o.some(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),n=Z((null===(e=o.toNullable(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,a.zG)(o.fromNullable(t.findIndex((e=>e===n))),j.bw((e=>{var n;e+1>=t.length?this._focusPromptField():null===(n=t[e+1])||void 0===n||n.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),n=Z((null===(e=o.toNullable(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,a.zG)(o.fromNullable(t.findIndex((e=>e===n))),j.bw((e=>{var n;e-1<0?this._focusPromptField():null===(n=t[e-1])||void 0===n||n.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var dn,mn=n(24209);!function(e){e.lensAllSuggestionFeedShortForm="lens-all-suggestions-feed-short-form",e.lensAllSuggestionFeed="lens-all-suggestions-feed",e.lensCorrectnessFeed="lens-correctness-feed",e.lensClarityFeed="lens-clarity-feed",e.lensDeliveryFeed="lens-delivery-feed",e.lensEngagementFeed="lens-engagement-feed",e.lensStyleGuideFeed="lens-style-guide-feed",e.plagiarismFeed="plagiarism-feed",e.writingExpertFeed="writing-expert-feed"}(dn||(dn={}));const pn={[dn.lensAllSuggestionFeed]:"All suggestions",[dn.lensAllSuggestionFeedShortForm]:"All suggestions",[dn.lensCorrectnessFeed]:"Correctness",[dn.lensClarityFeed]:"Clarity",[dn.lensDeliveryFeed]:"Delivery",[dn.lensEngagementFeed]:"Engagement",[dn.lensStyleGuideFeed]:"Style guide",[dn.plagiarismFeed]:"Plagiarism",[dn.writingExpertFeed]:"Writing Expert"};function hn(e){return Object.values(dn).includes(e)?o.some(e):o.none}const fn={shortForm:dn.lensAllSuggestionFeedShortForm,longForm:dn.lensAllSuggestionFeed};var gn=n(85321),vn=n(49143),bn=n(91224),yn=n(38194);var xn=n(64681),kn=n(92843);const Sn=()=>xn.k4();function wn(e){return(0,a.zG)(Sn().unwrap(e),(({items:e})=>e.size))}function Cn(e){return(0,a.zG)(Sn().unwrap(e),(({items:t})=>(0,a.zG)(function(e){return(0,a.zG)(Sn().unwrap(e),(({order:e})=>Bn(e)))}(e),b.UI((e=>o.fromNullable(t.get(e)))),b.oA)))}function En(e){return(0,a.zG)(Sn().unwrap(e),(({items:e,order:t})=>(0,a.zG)(t.focus,o.chain((t=>o.fromNullable(e.get(t)))))))}function _n(e){return(0,a.zG)(Sn().unwrap(e),(({order:e})=>(0,a.zG)(e.focus,o.map((()=>e.lefts.length)))))}function In(e){return(0,a.ls)(Sn().unwrap,(({items:t,order:n})=>({items:t,order:(0,a.zG)(n.focus,o.fold((()=>On(n.lefts.concat(n.rights),o.some(e))),(t=>function(e,t){const n=e(t.lefts.length);return On(Bn(t),o.some(n))}((()=>e),Rn(n.lefts,o.some(t),n.rights)))),o.getOrElse((()=>n)))})),Sn().wrap)}function An(e,t){return L.fromCompare(((n,i)=>{const r=e.get(n),o=e.get(i);return void 0!==r&&void 0!==o?t.compare(r,o):0}))}function On(e,t){return b.xb(e)||(0,a.zG)(t,o.exists((t=>b.dC(t,e))))?o.none:o.some((0,a.zG)(t,o.fold((()=>({lefts:e,focus:o.none,rights:[]})),(t=>({lefts:(0,a.zG)(e.slice(),b.ke(t)),focus:o.fromNullable(e[t]),rights:(0,a.zG)(e.slice(),b.md(t+1))})))))}function Rn(e,t,n){return{lefts:e,focus:t,rights:n}}function Bn(e){return e.lefts.concat(b.oA([e.focus])).concat(e.rights)}function Mn(e){const t=e.lefts.length,n=e.rights.length;return On(e.lefts.concat(e.rights),o.some(n>0?t:t-1))}function Fn(e){return On(e.lefts.concat(e.rights),o.none)}var Tn,Pn,Nn,jn,Un,zn,Dn,Ln,Gn,Zn,Hn,Vn,$n,Kn,Wn,qn,Qn,Yn,Jn,Xn,ei,ti,ni;function ii(e){var t;try{return"strongAlertRef"===e.type&&"known"===(null===(t=e.name)||void 0===t?void 0:t.kind)&&e.name.value===Gn.StrongAlertRefUpgradeHook||"longFormCard"===e.type&&e.behaviors.some((e=>{var t;return"behavior:strongAlertRef"===e.type&&"known"===(null===(t=e.name)||void 0===t?void 0:t.kind)&&e.name.value===Gn.StrongAlertRefUpgradeHook}))}catch(e){return!1}}!function(e){e.Click="click",e.SelectSliderChoice="selectSliderChoice",e.Focus="focus",e.CloseAssistant="closeAssistant"}(Tn||(Tn={})),function(e){e.Dismiss="dismiss",e.Fulfill="fulfill"}(Pn||(Pn={})),function(e){e.Ideation="ideation",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite",e.PushRewrite="pushRewrite"}(Nn||(Nn={})),function(e){e.FadeIn="fadeIn",e.FadeOut="fadeOut",e.SlideLeft="slideLeft",e.SlideRight="slideRight"}(jn||(jn={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Toggle="toggle",e.Yellow="yellow",e.Outlined="outlined",e.Link="link",e.DarkPrimary="darkPrimary",e.DarkSecondary="darkSecondary",e.GgoPrimary="ggoPrimary"}(Un||(Un={})),function(e){e.Round="round",e.Square="square"}(zn||(zn={})),function(e){e.Enabled="enabled",e.Disabled="disabled",e.Deselected="deselected",e.Selected="selected",e.Hidden="hidden"}(Dn||(Dn={})),function(e){e.CoreNeutral90="CoreNeutral90",e.CoreNeutral80="CoreNeutral80",e.CoreNeutral70="CoreNeutral70",e.CoreNeutral60="CoreNeutral60",e.CoreNeutral50="CoreNeutral50",e.CoreNeutral40="CoreNeutral40",e.CoreNeutral30="CoreNeutral30",e.CoreNeutral20="CoreNeutral20",e.CoreNeutral10="CoreNeutral10",e.CoreNeutral1="CoreNeutral1",e.CoreNeutral0="CoreNeutral0",e.CoreGreen70="CoreGreen70",e.CoreGreen60="CoreGreen60",e.CoreGreen50="CoreGreen50",e.CoreGreen40="CoreGreen40",e.CoreGreen30="CoreGreen30",e.CoreGreen20="CoreGreen20",e.CoreGreen10="CoreGreen10",e.CoreGreen1="CoreGreen1",e.CoreBlue70="CoreBlue70",e.CoreBlue60="CoreBlue60",e.CoreBlue50="CoreBlue50",e.CoreBlue40="CoreBlue40",e.CoreBlue30="CoreBlue30",e.CoreBlue20="CoreBlue20",e.CoreBlue10="CoreBlue10",e.CoreBlue1="CoreBlue1",e.CoreRed70="CoreRed70",e.CoreRed60="CoreRed60",e.CoreRed50="CoreRed50",e.CoreRed40="CoreRed40",e.CoreRed30="CoreRed30",e.CoreRed20="CoreRed20",e.CoreRed10="CoreRed10",e.CoreRed1="CoreRed1",e.CoreYellow80="CoreYellow80",e.CoreYellow70="CoreYellow70",e.CoreYellow60="CoreYellow60",e.CoreYellow50="CoreYellow50",e.CoreYellow40="CoreYellow40",e.CoreYellow30="CoreYellow30",e.CoreYellow20="CoreYellow20",e.CoreYellow10="CoreYellow10",e.CoreYellow1="CoreYellow1",e.CorePurple60="CorePurple60",e.CorePurple50="CorePurple50",e.CorePurple40="CorePurple40",e.CorePurple30="CorePurple30",e.CorePurple20="CorePurple20",e.CorePurple10="CorePurple10",e.CorePurple1="CorePurple1",e.CoreCyan60="CoreCyan60",e.CoreCyan50="CoreCyan50",e.CoreCyan40="CoreCyan40",e.CoreCyan30="CoreCyan30",e.CoreCyan20="CoreCyan20",e.CoreCyan10="CoreCyan10",e.CoreCyan1="CoreCyan1",e.CoreSky70="CoreSky70",e.CoreSky60="CoreSky60",e.CoreSky50="CoreSky50",e.CoreSky40="CoreSky40",e.CoreSky30="CoreSky30",e.CoreSky20="CoreSky20",e.CoreSky10="CoreSky10",e.CoreSky1="CoreSky1",e.CoreIndigo70="CoreIndigo70",e.CoreIndigo60="CoreIndigo60",e.CoreIndigo50="CoreIndigo50",e.CoreIndigo40="CoreIndigo40",e.CoreIndigo30="CoreIndigo30",e.CoreIndigo20="CoreIndigo20",e.CoreIndigo10="CoreIndigo10",e.CoreIndigo1="CoreIndigo1",e.CoreMagenta70="CoreMagenta70",e.CoreMagenta60="CoreMagenta60",e.CoreMagenta40="CoreMagenta40",e.CoreMagenta30="CoreMagenta30",e.CoreMagenta10="CoreMagenta10",e.CoreMagenta1="CoreMagenta1",e.CoreCoral60="CoreCoral60",e.CoreCoral50="CoreCoral50",e.CoreCoral40="CoreCoral40",e.CoreCoral30="CoreCoral30",e.CoreCoral10="CoreCoral10",e.CoreCoral1="CoreCoral1",e.CoreYellowBrand50="CoreYellowBrand50",e.CoreYellowBrand40="CoreYellowBrand40",e.CoreYellowBrand30="CoreYellowBrand30",e.CoreYellowBrand20="CoreYellowBrand20",e.CoreYellowBrand10="CoreYellowBrand10",e.CoreYellowBrand1="CoreYellowBrand1",e.CoreLime50="CoreLime50",e.CoreLime40="CoreLime40",e.CoreLime30="CoreLime30",e.CoreLime20="CoreLime20",e.CoreLime10="CoreLime10",e.CoreLime1="CoreLime1"}(Ln||(Ln={})),function(e){e.ButtonPrev="button:prev",e.ButtonNext="button:next",e.ButtonAccept="button:accept",e.ButtonDismiss="button:dismiss",e.StrongAlertRefBulkAccept="strongAlertRef:BulkAccept",e.StrongAlertRefBulkDismiss="strongAlertRef:BulkDismiss",e.StrongAlertRefBulkDismissBufferOuter="strongAlertRef:BulkDismissBufferOuter",e.StrongAlertRefUpgradeHook="strongAlertRef:UpgradeHook",e.StrongAlertRefConsolidatedLockedCard="strongAlertRef:ConsolidatedLockedCard",e.ButtonGoPremiumYellow="button:goPremiumYellow",e.AssistantCardToneInsights="assistantCard:toneInsights",e.AssistantCardPerformanceScore="assistantCard:performanceScore",e.AssistantFeedPerformanceScore="assistantFeed:performanceScore",e.ButtonPerformanceScore="button:performanceScore",e.GlobalPartPlagiarismWinFooter="globalPart:plagiarismWinFooter",e.GlobalPartPlagiarismWinHeader="globalPart:plagiarismWinHeader",e.GlobalPartWritingExpertWinFooter="globalPart:writingExpertWinFooter",e.GlobalPartWritingExpertWinHeader="globalPart:writingExpertWinHeader",e.GlobalPartPerformanceScoreCard="globalPart:performanceScoreCard",e.GlobalPartPerformanceScoreButton="globalPart:performanceScoreButton",e.GlobalPartWritingExpertState="globalPart:writingExpertState"}(Gn||(Gn={})),function(e){e.Asc="asc",e.Desc="desc"}(Zn||(Zn={})),function(e){e.EqualTo="equalTo",e.NotEqualTo="notEqualTo"}(Hn||(Hn={})),function(e){e.Default="default",e.Loading="loading"}(Vn||(Vn={})),function(e){e.Left="left",e.Center="center",e.Right="right"}($n||($n={})),function(e){e.Close="close",e.ArrowRight="arrow-right",e.ArrowLeft="arrow-left",e.Dictionary="dictionary",e.Gear="gear",e.Clarity="clarity",e.Correctness="correctness",e.Engagement="engagement",e.Delivery="delivery",e.Diamond="diamond",e.DiamondSmall="diamondSmall",e.Feedback="feedback",e.Sensitivity="sensitivity",e.ExternalLink="external-link",e.Sparkles="sparkles",e.Ignore="ignore",e.Info="info",e.Proofreader="proofreader",e.More="more",e.Mute="mute",e.Report="report",e.Controls="controls",e.Performance="performance",e.BulletList="bullet-list",e.Accept="accept",e.Copy="copy",e.GButtonSmall="gButtonSmall",e.NewSmall="newSmall",e.Edit="edit",e.User="user",e.Plagiarism="plagiarism",e.QuestionMark="questionMark",e.NewFeature="newFeature",e.Assistant="assistant",e.Warning="warning"}(Kn||(Kn={})),function(e){e.AllSuggestions="allSuggestions",e.Correctness="correctness",e.Clarity="clarity",e.Engagement="engagement",e.Delivery="delivery",e.StyleGuide="styleGuide",e.SmartGuidelines="smartGuidelines"}(Wn||(Wn={})),function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(qn||(qn={})),function(e){e.Radius0="Radius0",e.RadiusHalf="RadiusHalf",e.Radius1="Radius1",e.Radius2="Radius2",e.Radius3="Radius3"}(Qn||(Qn={})),function(e){e.D0="0",e.D0125="0.125",e.D025="0.25",e.D03125="0.3125",e.D0375="0.375",e.D05="0.5",e.D075="0.75",e.D1="1",e.D125="1.25"}(Yn||(Yn={})),function(e){e.Italic="italic",e.Bold="bold",e.StrikeoutHorizontal="strikeoutHorizontal",e.StrikeoutDiagonal="strikeoutDiagonal",e.Outline="outline"}(Jn||(Jn={})),function(e){e.Small="small",e.Regular="regular",e.Medium="medium",e.HeadingLevel1="headingLevel1",e.HeadingLevel3="headingLevel3",e.HeadingLevel4="headingLevel4"}(Xn||(Xn={})),function(e){e.Linear="linear",e.EaseIn="easeIn",e.EaseOut="easeOut",e.EaseInOut="easeInOut"}(ei||(ei={})),function(e){e.Auto="auto",e.Center="center",e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.TopCenter="topCenter",e.TopLeft="topLeft",e.TopRight="topRight",e.BottomCenter="bottomCenter",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight"}(ti||(ti={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(ni||(ni={}));const ri=U.MW({visibleAlerts:x.Eh(U.yv),emphasizedAlerts:x.Eh(U.yv)});class oi{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(oi.name),this._feedMounted=p.h.create(!1),this._subs.add((0,a.zG)(function(e,t){const n=e.pipe(yn.B()),i=n.pipe(I.U((0,a.ls)(o.chain((e=>En(e.collection))),o.map((({id:e})=>e)))),O.skipBy(o.getEq(U.yv))).pipe(c.w((()=>t.pipe(dt.O(null)))));return vt.aj([n,i]).pipe(I.U((([e,t])=>(0,a.zG)(e,o.map((({collection:e})=>({visibleAlerts:new Set(Array.from(Cn(e)).filter((t=>!ii(t.content)||(0,a.zG)(En(e),o.exists((e=>e.id===t.id))))).flatMap((e=>e.alertIds))),emphasizedAlerts:new Set(null!=t?t:(0,a.zG)(En(e),o.fold((()=>[]),(({alertIds:e})=>e))))})))))),O.skipBy(o.getEq(ri)))}(vt.aj([this._params.feedState,this._feedMounted]).pipe(I.U((([e,t])=>t?e:o.none))),this._params.resetEmphasizedAlerts),ai,T.b((e=>this._logger.debug("Received alert visibility changes.",e))),gn.zg((({changes:e,isReset:t})=>t?N.D(this._params.alertService.setAlertsVisibility(e)).pipe(R.q(1),vn.l(),bn.K((t=>u.of(function(e){return{kind:"error",source:"revision",name:"setAlertsVisibilityFailed",data:e}}({alertsVisibilityInfo:e,reason:(0,be.N)(t).message}))))):N.D(this._params.alertService.updateAlertsVisibility(e)).pipe(R.q(1),vn.l(),bn.K((t=>u.of(function(e){return{kind:"error",source:"revision",name:"updateAlertsVisibilityFailed",data:e}}({alertsVisibilityInfo:e,reason:(0,be.N)(t).message})))))))).subscribe((e=>this._params.monitoringService.notify((0,ne.L)(e)))))}notifyFeedMount(){this._feedMounted.set(!0)}notifyFeedUnmount(){this._feedMounted.set(!1)}dispose(){this._subs.unsubscribe()}}function ai(e){return e.pipe(O.skipBy(o.getEq(ri)),yn.B(),(e=>{const t=e.pipe(_.h(o.isNone),I.U((()=>({isReset:!0,changes:[]})))),n=e.pipe(dt.O(o.none),jt.G(),_.h((([e,t])=>o.isNone(e)&&o.isSome(t))),I.U((([e,t])=>t)),M.oA,I.U((e=>({isReset:!0,changes:(0,a.zG)(Array.from(e.visibleAlerts).filter((t=>!e.emphasizedAlerts.has(t))).map((e=>({alertId:e,visibility:"visible"}))).concat(Array.from(e.emphasizedAlerts).map((e=>({alertId:e,visibility:"emphasized"})))))})))),i=e.pipe(dt.O(o.none),jt.G(),_.h((([e,t])=>o.isNone(e)&&o.isSome(t))),c.w((([t,n])=>e.pipe(dt.O(n),M.oA,jt.G(),I.U((([e,t])=>{const n=x.e5(U.yv)(x.Lf(U.yv).concat(t.visibleAlerts,t.emphasizedAlerts))(x.Lf(U.yv).concat(e.visibleAlerts,e.emphasizedAlerts)),i=x.e5(U.yv)(e.emphasizedAlerts)(t.emphasizedAlerts),r=x.e5(U.yv)(t.emphasizedAlerts)(e.emphasizedAlerts),o=x.Lf(U.yv).concat(x.e5(U.yv)(e.visibleAlerts)(t.visibleAlerts),(0,a.zG)(r,x.hX((e=>t.visibleAlerts.has(e)))));return{isReset:!1,changes:[...Array.from(n).map((e=>({alertId:e,visibility:"hidden"}))),...Array.from(o).map((e=>({alertId:e,visibility:"visible"}))),...Array.from(i).map((e=>({alertId:e,visibility:"emphasized"})))]}}))))));return mn.T(t,n,i)}))}var si=n(80544),li=n(79692),ci=n(35214),ui=n(22690),di=n(40154),mi=n(85384),pi=n(73915),hi=n(55415),fi=n(71249),gi=n(59312),vi=((0,pi.S)((function(e){return Cr(e)})),(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).notify=yi(e),t.openSettings=xi(e),t.openLearnMore=ki(e),t.openPerformanceScore=Si(e),t.openToneDetector=wi(e),t.upgradeToPremium=Ci(e),t.showHighlights=Ei(e),t.hideHighlights=_i(e),t.openFeedback=Ii(e),t.openCreateSnippetModal=Ai(e),t.closeCard=Oi(e),t.nextCard=Ri(e),t.prevCard=Bi(e),t.removeRoot=Mi(e),t.removeAlerts=Fi(e),t.applyAlerts=Ti(e),t.selectAlternative=Pi(e),t.transition=Ni(e),t.openLink=ji(e),t.copyToClipboard=Ui(e),t.nativeOpenAssistant=zi(e),t.pushAssistantFeed=Di(e),t.popAssistantFeed=Li(e),t.focusAssistantCard=Gi(e),t.switchView=Zi(e),t.newRevision=Hi(e),t.highlightAlert=Vi(e),t.stopApplyingAlerts=$i(e),t.closePopover=Ki(e),t.interactPopover=qi(e),t.openGrammarlyGo=Yi(e),t.enablePlagiarismCheck=Ji(e),t.disablePlagiarismCheck=Xi(e),t.enableWritingExpertCheck=er(e),t.disableWritingExpertCheck=tr(e),t.nativeOpenUserSatisfactionFeedback=nr(e),t))}))),bi=es(Tn),yi=(0,pi.S)((function(e){return e.intersect(e.partial({sourceId:Oa(e)}))(e.struct({type:e.literal("notify"),userAction:bi(e)}))})),xi=(0,pi.S)((function(e){return e.struct({type:e.literal("openSettings")})})),ki=(0,pi.S)((function(e){return e.struct({type:e.literal("openLearnMore")})})),Si=(0,pi.S)((function(e){return e.struct({type:e.literal("openPerformanceScore")})})),wi=(0,pi.S)((function(e){return e.struct({type:e.literal("openToneDetector")})})),Ci=(0,pi.S)((function(e){return e.struct({type:e.literal("upgradeToPremium")})})),Ei=(0,pi.S)((function(e){return e.struct({type:e.literal("showHighlights")})})),_i=(0,pi.S)((function(e){return e.struct({type:e.literal("hideHighlights")})})),Ii=(0,pi.S)((function(e){return e.struct({type:e.literal("openFeedback")})})),Ai=(0,pi.S)((function(e){return e.struct({type:e.literal("openCreateSnippetModal"),snippetContent:e.string})})),Oi=(0,pi.S)((function(e){return e.struct({type:e.literal("closeCard")})})),Ri=(0,pi.S)((function(e){return e.struct({type:e.literal("nextCard")})})),Bi=(0,pi.S)((function(e){return e.struct({type:e.literal("prevCard")})})),Mi=(0,pi.S)((function(e){return e.struct({type:e.literal("removeRoot")})})),Fi=(0,pi.S)((function(e){return e.struct({type:e.literal("removeAlerts")})})),Ti=(0,pi.S)((function(e){return e.struct({type:e.literal("applyAlerts"),alternativeIndex:e.number})})),Pi=(0,pi.S)((function(e){return e.struct({type:e.literal("selectAlternative"),alternativeIndex:e.number})})),Ni=(0,pi.S)((function(e){return e.struct({type:e.literal("transition"),fromName:e.string,toName:e.string,animateFrom:rr(e),animateTo:rr(e)})})),ji=(0,pi.S)((function(e){return e.struct({type:e.literal("openLink"),url:e.string})})),Ui=(0,pi.S)((function(e){return e.struct({type:e.literal("copyToClipboard"),text:e.string})})),zi=(0,pi.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("nativeOpenAssistant")}))})),Di=(0,pi.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("pushAssistantFeed"),feedId:e.string}))})),Li=(0,pi.S)((function(e){return e.intersect(e.partial({fallbackFeed:Ea(e)}))(e.struct({type:e.literal("popAssistantFeed")}))})),Gi=(0,pi.S)((function(e){return e.struct({type:e.literal("focusAssistantCard"),cardId:e.string})})),Zi=(0,pi.S)((function(e){return e.struct({type:e.literal("switchView"),where:Oa(e),selected:$a(e)})})),Hi=(0,pi.S)((function(e){return e.struct({type:e.literal("newRevision")})})),Vi=(0,pi.S)((function(e){return e.struct({type:e.literal("highlightAlert"),highlightIndex:e.number})})),$i=(0,pi.S)((function(e){return e.struct({type:e.literal("stopApplyingAlerts")})})),Ki=(0,pi.S)((function(e){return e.struct({type:e.literal("closePopover"),rootPopoverId:Oa(e)})})),Wi=es(Pn),qi=(0,pi.S)((function(e){return e.struct({type:e.literal("interactPopover"),rootPopoverId:Oa(e),popoverViewId:Oa(e),interaction:Wi(e)})})),Qi=es(Nn),Yi=(0,pi.S)((function(e){return e.intersect(e.partial({alertId:e.number}))(e.struct({type:e.literal("openGrammarlyGo"),entryPoint:Qi(e)}))})),Ji=(0,pi.S)((function(e){return e.struct({type:e.literal("enablePlagiarismCheck")})})),Xi=(0,pi.S)((function(e){return e.struct({type:e.literal("disablePlagiarismCheck")})})),er=(0,pi.S)((function(e){return e.struct({type:e.literal("enableWritingExpertCheck")})})),tr=(0,pi.S)((function(e){return e.struct({type:e.literal("disableWritingExpertCheck")})})),nr=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeOpenUserSatisfactionFeedback")})})),ir=(0,pi.S)((function(e){return e.readonly(e.array(vi(e)))})),rr=es(jn),or=(0,pi.S)((function(e){return e.lazy("Behavior",(function(){return ar(e)}))})),ar=(0,pi.S)((function(e){var t;return e.sum("type")(((t={})["behavior:strongAlertRef"]=sr(e),t["behavior:animation:fadeIn"]=lr(e),t["behavior:animation:fadeOut"]=cr(e),t["behavior:popoverAnchor"]=ur(e),t["behavior:lifecycle"]=mr(e),t))})),sr=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("behavior:strongAlertRef"),id:Oa(e),alertIds:e.readonly(e.array(e.string)),onEmpty:ir(e)}))})),lr=(0,pi.S)((function(e){return e.struct({type:e.literal("behavior:animation:fadeIn"),id:Oa(e),timeCurve:Ya(e)})})),cr=(0,pi.S)((function(e){return e.struct({type:e.literal("behavior:animation:fadeOut"),id:Oa(e),timeCurve:Ya(e)})})),ur=(0,pi.S)((function(e){return e.lazy("BehaviorPopoverAnchor",(function(){return dr(e)}))})),dr=(0,pi.S)((function(e){return e.intersect(e.partial({view:za(e)}))(e.struct({type:e.literal("behavior:popoverAnchor"),id:Oa(e),positionHint:La(e)}))})),mr=(0,pi.S)((function(e){return e.struct({type:e.literal("behavior:lifecycle"),onMount:ir(e),onUnmount:ir(e)})})),pr=(0,pi.S)((function(e){return e.readonly(e.array(or(e)))})),hr=(0,pi.S)((function(e){return e.struct({topLeft:Ga(e),topRight:Ga(e),bottomRight:Ga(e),bottomLeft:Ga(e)})})),fr=es(Un),gr=es(zn),vr=es(Dn),br=es(Ln),yr=es(Gn),xr=(0,pi.S)((function(e){return e.intersect(e.partial({label:e.string}))(e.intersect(e.partial({description:e.string}))(e.struct({})))})),kr=(0,pi.S)((function(e){var t;return e.sum("kind")(((t={}).unknown=Sr(e),t.known=wr(e),t))})),Sr=(0,pi.S)((function(e){return e.struct({kind:e.literal("unknown"),value:e.string})})),wr=(0,pi.S)((function(e){return e.struct({kind:e.literal("known"),value:yr(e)})})),Cr=(0,pi.S)((function(e){return e.lazy("Content",(function(){return Er(e)}))})),Er=(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).text=_r(e),t.assistantFeed=Br(e),t.assistantCard=Fr(e),t.popoverStack=Pr(e),t.inlineCard=jr(e),t["gButton:default"]=zr(e),t["gButton:tone"]=Dr(e),t["gButton:proofit"]=Lr(e),t["gButton:get-started"]=Gr(e),t["gButton:plagiarism"]=Zr(e),t["gButton:writingExpert"]=Hr(e),t.gButton=Vr(e),t.proofitButton=$r(e),t.lensesSwitchPanel=Wr(e),t.strongAlertRef=qr(e),t.column=Yr(e),t.row=Xr(e),t.block=no(e),t.box=ro(e),t.scroll=ao(e),t.list=fo(e),t.selectableDropDownMenu=vo(e),t.dropDownMenuButton=bo(e),t.icon=So(e),t.image=wo(e),t.button=Co(e),t.sticker=_o(e),t.tooltip=Ao(e),t.clickableText=Ro(e),t.count=Bo(e),t.alertsCount=Mo(e),t.alternativeChoice=Po(e),t.slider=Lo(e),t.alternativeSlider=Vo(e),t.nativeSkillsModal=Ko(e),t.nativeSkillsList=Wo(e),t.nativeSkillsView=qo(e),t.nativeToneInsightsModal=Qo(e),t.nativeLearnMoreModal=Yo(e),t.nativeSettingsModal=Jo(e),t.nativeFeedbackModal=Xo(e),t.nativeGetStartedChecklistModal=ea(e),t.nativeProofitModal=ta(e),t.nativeKeyTakeawaysAssistantCard=na(e),t.nativeInlineCardContent=ia(e),t.nativePerformanceScoreButton=ra(e),t.viewStack=oa(e),t.nativeExperimentalGBConsistencyUpsellFooter=sa(e),t.radioButtonsGroup=ca(e),t.nativeExperimentalGBToneInsightsUpsellFooter=ua(e),t.collapsedCard=da(e),t.shortFormCard=pa(e),t.longFormCard=fa(e),t.progressBar=ba(e),t.horizontalRule=ya(e),t.globalPart=xa(e),t.globalPartPlaceholder=Sa(e),t))})),_r=(0,pi.S)((function(e){return e.intersect(e.partial({backgroundColor:br(e)}))(e.intersect(e.partial({outlineColor:br(e)}))(e.struct({type:e.literal("text"),id:Oa(e),meta:xr(e),size:Qa(e),text:e.string,textColor:br(e),format:e.readonly(e.array(qa(e)))})))})),Ir=es(Zn),Ar=(0,pi.S)((function(e){return e.struct({orderBy:e.string,direction:Ir(e)})})),Or=es(Hn),Rr=(0,pi.S)((function(e){return e.struct({property:e.string,condition:Or(e),value:e.number})})),Br=(0,pi.S)((function(e){return e.lazy("ContentAssistantFeed",(function(){return Mr(e)}))})),Mr=(0,pi.S)((function(e){return e.intersect(e.partial({footer:Cr(e)}))(e.intersect(e.partial({onEmpty:ir(e)}))(e.intersect(e.partial({onAssistantClose:ir(e)}))(e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("assistantFeed"),id:Oa(e),header:Cr(e),ordering:e.readonly(e.array(Ar(e))),filtering:e.readonly(e.array(Rr(e))),onRemove:ir(e)})))))})),Fr=(0,pi.S)((function(e){return e.lazy("ContentAssistantCard",(function(){return Tr(e)}))})),Tr=(0,pi.S)((function(e){return e.intersect(e.partial({properties:e.readonly(e.record(e.nullable(e.number)))}))(e.intersect(e.partial({footer:Cr(e)}))(e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("assistantCard"),id:Oa(e),meta:xr(e),child:Cr(e),onFocus:ir(e),onBlur:ir(e)}))))})),Pr=(0,pi.S)((function(e){return e.lazy("ContentPopoverStack",(function(){return Nr(e)}))})),Nr=(0,pi.S)((function(e){return e.struct({type:e.literal("popoverStack"),id:Oa(e),views:e.readonly(e.record(za(e))),selected:$a(e)})})),jr=(0,pi.S)((function(e){return e.lazy("ContentInlineCard",(function(){return Ur(e)}))})),Ur=(0,pi.S)((function(e){return e.intersect(e.partial({minWidth:Za(e)}))(e.intersect(e.partial({maxWidth:Za(e)}))(e.intersect(e.partial({behaviors:pr(e)}))(e.struct({type:e.literal("inlineCard"),id:Oa(e),meta:xr(e),child:Cr(e),onFocus:ir(e)}))))})),zr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:default"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Dr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:tone"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Lr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:proofit"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Gr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:get-started"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Zr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:plagiarism"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Hr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton:writingExpert"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Vr=(0,pi.S)((function(e){return e.struct({type:e.literal("gButton"),id:Oa(e),meta:xr(e),actions:ir(e)})})),$r=(0,pi.S)((function(e){return e.struct({type:e.literal("proofitButton"),id:Oa(e),meta:xr(e),actions:ir(e)})})),Kr=(0,pi.S)((function(e){return e.struct({id:Oa(e),meta:xr(e),kind:Ra(e),label:e.string,onClickActions:ir(e)})})),Wr=(0,pi.S)((function(e){return e.struct({type:e.literal("lensesSwitchPanel"),id:Oa(e),meta:xr(e),lensSwitchButtons:e.readonly(e.array(Kr(e)))})})),qr=(0,pi.S)((function(e){return e.lazy("ContentStrongAlertRef",(function(){return Qr(e)}))})),Qr=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("strongAlertRef"),id:Oa(e),alertIds:e.readonly(e.array(e.string)),onEmpty:ir(e),child:Cr(e)}))})),Yr=(0,pi.S)((function(e){return e.lazy("ContentColumn",(function(){return Jr(e)}))})),Jr=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({behaviors:pr(e)}))(e.struct({type:e.literal("column"),id:Oa(e),children:e.readonly(e.array(Cr(e)))})))})),Xr=(0,pi.S)((function(e){return e.lazy("ContentRow",(function(){return eo(e)}))})),eo=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({spacing:Wa(e)}))(e.intersect(e.partial({behaviors:pr(e)}))(e.struct({type:e.literal("row"),id:Oa(e),left:e.readonly(e.array(Cr(e))),right:e.readonly(e.array(Cr(e))),verticalAlign:Xa(e)}))))})),to=(0,pi.S)((function(e){return e.struct({vertical:Ka(e),horizontal:Ka(e)})})),no=(0,pi.S)((function(e){return e.lazy("ContentBlock",(function(){return io(e)}))})),io=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({fraction:e.number}))(e.intersect(e.partial({spacing:Wa(e)}))(e.intersect(e.partial({innerSpacing:to(e)}))(e.intersect(e.partial({horizontalAlign:_a(e)}))(e.intersect(e.partial({verticalAlign:Xa(e)}))(e.intersect(e.partial({maxLines:e.number}))(e.struct({type:e.literal("block"),id:Oa(e),parts:e.readonly(e.array(Cr(e)))}))))))))})),ro=(0,pi.S)((function(e){return e.lazy("ContentBox",(function(){return oo(e)}))})),oo=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({padding:Wa(e)}))(e.intersect(e.partial({borderRadius:hr(e)}))(e.intersect(e.partial({backgroundColor:br(e)}))(e.intersect(e.partial({minWidth:Za(e)}))(e.intersect(e.partial({behaviors:pr(e)}))(e.struct({type:e.literal("box"),id:Oa(e),child:Cr(e)})))))))})),ao=(0,pi.S)((function(e){return e.lazy("ContentScroll",(function(){return so(e)}))})),so=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("scroll"),id:Oa(e),child:Cr(e),maxHeight:Za(e)}))})),lo=(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).text=co(e),t.icon=uo(e),t))})),co=(0,pi.S)((function(e){return e.struct({type:e.literal("text"),text:e.string})})),uo=(0,pi.S)((function(e){return e.struct({type:e.literal("icon"),icon:Ia(e)})})),mo=(0,pi.S)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.struct({id:Oa(e),meta:xr(e),label:lo(e),onClickActions:ir(e)}))})),po=(0,pi.S)((function(e){return e.lazy("ContentListItem",(function(){return ho(e)}))})),ho=(0,pi.S)((function(e){return e.intersect(e.partial({behaviors:pr(e)}))(e.intersect(e.partial({tooltip:e.string}))(e.struct({id:Oa(e),meta:xr(e),label:Cr(e),actions:ir(e),secondaryButtons:e.readonly(e.array(mo(e)))})))})),fo=(0,pi.S)((function(e){return e.lazy("ContentList",(function(){return go(e)}))})),go=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({itemFocusedColor:br(e)}))(e.intersect(e.partial({itemHoveredColor:br(e)}))(e.struct({type:e.literal("list"),id:Oa(e),meta:xr(e),items:e.readonly(e.array(po(e)))}))))})),vo=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.intersect(e.partial({selectedItem:Oa(e)}))(e.intersect(e.partial({placeholder:e.string}))(e.struct({type:e.literal("selectableDropDownMenu"),id:Oa(e),meta:xr(e),onSelectActions:ir(e),select:Va(e)}))))})),bo=(0,pi.S)((function(e){return e.intersect(e.partial({name:kr(e)}))(e.struct({type:e.literal("dropDownMenuButton"),id:Oa(e),meta:xr(e),icon:Ia(e),onClickActions:ir(e),menu:Fa(e)}))})),yo=(0,pi.S)((function(e){var t;return e.sum("kind")(((t={}).known=xo(e),t.url=ko(e),t))})),xo=(0,pi.S)((function(e){return e.struct({kind:e.literal("known"),name:Aa(e)})})),ko=(0,pi.S)((function(e){return e.intersect(e.partial({size:Ka(e)}))(e.struct({kind:e.literal("url"),name:e.string,url:e.string}))})),So=(0,pi.S)((function(e){return e.intersect(e.partial({backgroundColor:br(e)}))(e.struct({type:e.literal("icon"),id:Oa(e),meta:xr(e),source:yo(e)}))})),wo=(0,pi.S)((function(e){return e.intersect(e.partial({backgroundColor:br(e)}))(e.intersect(e.partial({borderRadius:Za(e)}))(e.struct({type:e.literal("image"),id:Oa(e),meta:xr(e),name:kr(e),url:e.string,width:Za(e),height:Za(e)})))})),Co=(0,pi.S)((function(e){return e.lazy("ContentButton",(function(){return Eo(e)}))})),Eo=(0,pi.S)((function(e){return e.intersect(e.partial({tooltip:e.string}))(e.intersect(e.partial({horizontalAlign:_a(e)}))(e.intersect(e.partial({behaviors:pr(e)}))(e.struct({type:e.literal("button"),id:Oa(e),meta:xr(e),name:kr(e),kind:fr(e),state:vr(e),label:Cr(e),actions:ir(e),shape:gr(e)}))))})),_o=(0,pi.S)((function(e){return e.lazy("ContentSticker",(function(){return Io(e)}))})),Io=(0,pi.S)((function(e){return e.struct({type:e.literal("sticker"),id:Oa(e),meta:xr(e),name:kr(e),label:Cr(e),child:Cr(e),stickerColor:br(e),stickerReverseColor:br(e),onClickActions:ir(e)})})),Ao=(0,pi.S)((function(e){return e.lazy("ContentTooltip",(function(){return Oo(e)}))})),Oo=(0,pi.S)((function(e){return e.struct({type:e.literal("tooltip"),id:Oa(e),meta:xr(e),name:kr(e),text:e.string,child:Cr(e),alignment:Ja(e)})})),Ro=(0,pi.S)((function(e){return e.struct({type:e.literal("clickableText"),id:Oa(e),meta:xr(e),name:kr(e),onClickActions:ir(e),text:e.string,size:Qa(e),textColor:br(e),format:e.readonly(e.array(qa(e)))})})),Bo=(0,pi.S)((function(e){return e.intersect(e.partial({textColor:br(e)}))(e.struct({type:e.literal("count"),id:Oa(e),meta:xr(e),value:e.string,backgroundColor:br(e)}))})),Mo=(0,pi.S)((function(e){return e.intersect(e.partial({backgroundColor:br(e)}))(e.intersect(e.partial({outlineColor:br(e)}))(e.struct({type:e.literal("alertsCount"),id:Oa(e),meta:xr(e),size:Qa(e),textColor:br(e),format:e.readonly(e.array(qa(e)))})))})),Fo=(0,pi.S)((function(e){return e.lazy("ContentAlternativeChoiceAlterna",(function(){return To(e)}))})),To=(0,pi.S)((function(e){return e.struct({label:Cr(e),preview:Cr(e)})})),Po=(0,pi.S)((function(e){return e.lazy("ContentAlternativeChoice",(function(){return No(e)}))})),No=(0,pi.S)((function(e){return e.struct({type:e.literal("alternativeChoice"),id:Oa(e),meta:xr(e),alternatives:e.readonly(e.array(Fo(e)))})})),jo=(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).icon=zo(e),t))})),Uo=(0,pi.S)((function(e){var t;return e.sum("kind")(((t={}).known=xo(e),t.url=ko(e),t))})),zo=(0,pi.S)((function(e){return e.intersect(e.partial({backgroundColor:br(e)}))(e.struct({type:e.literal("icon"),id:Oa(e),source:Uo(e)}))})),Do=(0,pi.S)((function(e){return e.struct({id:Oa(e),icon:jo(e),label:e.string,actions:ir(e)})})),Lo=(0,pi.S)((function(e){return e.struct({type:e.literal("slider"),id:Oa(e),meta:xr(e),segmentSize:Za(e),fillColor:br(e),choices:e.readonly(e.array(Do(e)))})})),Go=(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).icon=zo(e),t))})),Zo=(0,pi.S)((function(e){return e.lazy("ContentAlternativeSliderChoice",(function(){return Ho(e)}))})),Ho=(0,pi.S)((function(e){return e.struct({id:Oa(e),icon:Go(e),label:e.string,actions:ir(e),preview:Cr(e)})})),Vo=(0,pi.S)((function(e){return e.lazy("ContentAlternativeSlider",(function(){return $o(e)}))})),$o=(0,pi.S)((function(e){return e.struct({type:e.literal("alternativeSlider"),id:Oa(e),meta:xr(e),segmentSize:Za(e),fillColor:br(e),choices:e.readonly(e.array(Zo(e)))})})),Ko=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeSkillsModal"),id:Oa(e)})})),Wo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeSkillsList"),id:Oa(e),onSelect:ir(e)})})),qo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeSkillsView"),id:Oa(e)})})),Qo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeToneInsightsModal"),id:Oa(e)})})),Yo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeLearnMoreModal"),id:Oa(e)})})),Jo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeSettingsModal"),id:Oa(e)})})),Xo=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeFeedbackModal"),id:Oa(e)})})),ea=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeGetStartedChecklistModal"),id:Oa(e),onComplete:ir(e)})})),ta=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeProofitModal"),id:Oa(e)})})),na=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeKeyTakeawaysAssistantCard"),id:Oa(e)})})),ia=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeInlineCardContent"),id:Oa(e),onDetailsClick:ir(e)})})),ra=(0,pi.S)((function(e){return e.struct({type:e.literal("nativePerformanceScoreButton"),id:Oa(e)})})),oa=(0,pi.S)((function(e){return e.lazy("ContentViewStack",(function(){return aa(e)}))})),aa=(0,pi.S)((function(e){return e.struct({type:e.literal("viewStack"),id:Oa(e),views:e.readonly(e.record(Cr(e))),selected:$a(e)})})),sa=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeExperimentalGBConsistencyUpsellFooter"),id:Oa(e)})})),la=(0,pi.S)((function(e){return e.struct({id:Oa(e),meta:xr(e),label:e.string,onSelect:ir(e)})})),ca=(0,pi.S)((function(e){return e.struct({type:e.literal("radioButtonsGroup"),id:Oa(e),meta:xr(e),options:e.readonly(e.array(la(e)))})})),ua=(0,pi.S)((function(e){return e.struct({type:e.literal("nativeExperimentalGBToneInsightsUpsellFooter"),id:Oa(e)})})),da=(0,pi.S)((function(e){return e.lazy("ContentCollapsedCard",(function(){return ma(e)}))})),ma=(0,pi.S)((function(e){return e.intersect(e.partial({quickActions:Cr(e)}))(e.struct({type:e.literal("collapsedCard"),id:Oa(e),meta:xr(e),child:Cr(e)}))})),pa=(0,pi.S)((function(e){return e.lazy("ContentShortFormCard",(function(){return ha(e)}))})),ha=(0,pi.S)((function(e){return e.struct({type:e.literal("shortFormCard"),id:Oa(e),child:Cr(e)})})),fa=(0,pi.S)((function(e){return e.lazy("ContentLongFormCard",(function(){return ga(e)}))})),ga=(0,pi.S)((function(e){return e.struct({type:e.literal("longFormCard"),id:Oa(e),collapsedContent:Cr(e),fullContent:Cr(e),behaviors:pr(e),feedProperties:Ca(e)})})),va=es(Vn),ba=(0,pi.S)((function(e){return e.intersect(e.partial({pinPointValue:Ta(e)}))(e.intersect(e.partial({borderColor:br(e)}))(e.intersect(e.partial({height:Za(e)}))(e.struct({type:e.literal("progressBar"),id:Oa(e),meta:xr(e),backgroundColor:br(e),fillColor:br(e),value:Ta(e),state:va(e)}))))})),ya=(0,pi.S)((function(e){return e.struct({type:e.literal("horizontalRule"),id:Oa(e),meta:xr(e)})})),xa=(0,pi.S)((function(e){return e.lazy("ContentGlobalPart",(function(){return ka(e)}))})),ka=(0,pi.S)((function(e){return e.struct({type:e.literal("globalPart"),id:Oa(e),content:Cr(e),name:kr(e)})})),Sa=(0,pi.S)((function(e){return e.lazy("ContentGlobalPartPlaceholder",(function(){return wa(e)}))})),wa=(0,pi.S)((function(e){return e.intersect(e.partial({child:Cr(e)}))(e.struct({type:e.literal("globalPartPlaceholder"),id:Oa(e),globalPartId:Oa(e)}))})),Ca=(0,pi.S)((function(e){return e.readonly(e.record(e.nullable(e.number)))})),Ea=(0,pi.S)((function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({feedId:e.string}))})),_a=es($n),Ia=(0,pi.S)((function(e){var t;return e.sum("type")(((t={}).icon=So(e),t))})),Aa=es(Kn),Oa=(0,pi.S)((function(e){return e.string})),Ra=es(Wn),Ba=(0,pi.S)((function(e){return e.intersect(e.partial({icon:Ia(e)}))(e.struct({id:Oa(e),meta:xr(e),text:e.string,onClickActions:ir(e)}))})),Ma=(0,pi.S)((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({items:e.readonly(e.array(Ba(e)))}))})),Fa=(0,pi.S)((function(e){return e.struct({meta:xr(e),label:e.string,sections:e.readonly(e.array(Ma(e)))})})),Ta=(0,pi.S)((function(e){return e.number})),Pa=(0,pi.S)((function(e){var t;return e.sum("kind")(((t={}).component=Na(e),t.gButton=ja(e),t.nativeComponent=Ua(e),t))})),Na=(0,pi.S)((function(e){return e.struct({kind:e.literal("component"),id:Oa(e)})})),ja=(0,pi.S)((function(e){return e.struct({kind:e.literal("gButton")})})),Ua=(0,pi.S)((function(e){return e.struct({kind:e.literal("nativeComponent"),knownName:yr(e)})})),za=(0,pi.S)((function(e){return e.lazy("PopoverView",(function(){return Da(e)}))})),Da=(0,pi.S)((function(e){return e.intersect(e.partial({onShow:ir(e)}))(e.intersect(e.partial({onDismiss:ir(e)}))(e.intersect(e.partial({onFulfill:ir(e)}))(e.struct({id:Oa(e),rootPopoverId:Oa(e),anchor:Pa(e),child:Cr(e)}))))})),La=es(qn),Ga=es(Qn),Za=(0,pi.S)((function(e){return e.number})),Ha=(0,pi.S)((function(e){return e.struct({id:Oa(e),meta:xr(e),label:e.string,onClickActions:ir(e)})})),Va=(0,pi.S)((function(e){return e.struct({meta:xr(e),label:e.string,items:e.readonly(e.array(Ha(e)))})})),$a=(0,pi.S)((function(e){return e.string})),Ka=es(Yn),Wa=(0,pi.S)((function(e){return e.struct({top:Ka(e),right:Ka(e),bottom:Ka(e),left:Ka(e)})})),qa=es(Jn),Qa=es(Xn),Ya=es(ei),Ja=es(ti),Xa=es(ni);function es(e){var t=Object.keys(e).map((function(t){return e[t]})),n=t[0],i=t.slice(1);return(0,pi.S)((function(e){return e.literal.apply(e,(0,gi.ev)([n],i,!1))}))}var ts,ns,is,rs,os,as,ss,ls,cs,us,ds,ms,ps,hs,fs,gs,vs,bs,ys,xs,ks,Ss,ws,Cs,Es,_s,Is=["proofitButton","newRevision","gButton:default","gButton:tone","gButton:proofit","gButton:get-started","gButton:plagiarism","gButton:writingExpert","nativePerformanceScoreButton","globalPart","enableWritingExpertCheck","disableWritingExpertCheck"],As=n(18208);function Os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Rs(e){if(Array.isArray(e))return e}function Bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ms(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Fs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Bs(e,t,n[t])}))}return e}function Ps(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ns(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function js(e,t){return Rs(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||zs(e,t)||Fs()}function Us(e){return function(e){if(Array.isArray(e))return Os(e)}(e)||Ms(e)||zs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){if(e){if("string"==typeof e)return Os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Os(e,t):void 0}}function Ds(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Ls(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gs(e){return Is.includes(e.type)}function Zs(e){switch(e){case"row":return"block";case"button":case"box":return"inline";default:throw new Error("Unsupported component")}}function Hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.isStrongAlertRefComponent=function(e){return"child"in e},e.isStrongAlertRefBehavior=function(e){return!("child"in e)}}(ts||(ts={})),function(e){e.isStrongAlertRef=function(e){return"strongAlertRef"===e.type},e.create=function(e,t,n){return{type:"strongAlertRef",alertIds:t,child:e,onEmpty:n,id:xs.from("strongAlertRef")}}}(ns||(ns={})),function(e){e.isLongFormCard=function(e){return"longFormCard"===e.type},e.create=function(e,t,n){return{type:"longFormCard",fullContent:e,collapsedContent:t,id:xs.from("longFormCard"),behaviors:[rs.StrongAlertRef.create(n,[])],feedProperties:{}}}}(is||(is={})),function(e){e.isStrongAlertRef=function(e){return"behavior:strongAlertRef"===e.type},function(e){e.create=function(e,t){return{id:xs.from("behavior:strongAlertRef"),type:"behavior:strongAlertRef",alertIds:e,onEmpty:t}};e.eq=pi.n(mi.z2)(sr)}(e.StrongAlertRef||(e.StrongAlertRef={})),e.isPopoverAnchor=function(e){return"behavior:popoverAnchor"===e.type},function(e){e.create=function(e,t){return{type:"behavior:popoverAnchor",id:e,positionHint:t}};e.nonEmpty=function(e){return!!e.view}}(e.PopoverAnchor||(e.PopoverAnchor={}))}(rs||(rs={})),function(e){e.create=function(e,t,n,i,r){return{type:"row",left:e,right:t,spacing:n,verticalAlign:i,id:xs.from("row"),behaviors:r?[rs.PopoverAnchor.create(r,qn.Top)]:void 0}},e.isRow=function(e){return"row"===e.type}}(os||(os={})),function(e){e.create=function(e){return{type:"column",children:e,id:xs.from("column")}}}(as||(as={})),function(e){var t=e.Type="block";e.create=function(e,n,i){for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return{type:t,name:ks.unknown(e),parts:o,spacing:n,innerSpacing:i,id:xs.from(e)}},e.isBlock=function(e){return e.type===t},e.hasOnlyTextParts=function(e){return e.parts.every(ls.isText)}}(ss||(ss={})),function(e){var t=e.Type="text";e.create=function(e,n,i,r,o,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return{type:t,text:e,size:n,format:i,textColor:r,backgroundColor:o,outlineColor:a,id:xs.from(t),meta:s}},e.isText=function(e){return e.type===t}}(ls||(ls={})),function(e){e.create=function(e,t){return{label:e,preview:t}}}(cs||(cs={})),function(e){e.create=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return{type:"alternativeChoice",alternatives:n,id:xs.from("alternativeChoice"),meta:e}}}(us||(us={})),function(e){e.create=function(e,t){return{type:"viewStack",id:xs.from("ViewStack"),views:t,selected:e}}}(ds||(ds={})),function(e){var t=e.Type="button";!function(e){e.isTransitionAction=function(e){return"transition"===e.type},e.isApplyAlertsAction=function(e){return"applyAlerts"===e.type},e.createSelectAlternativeAction=function(e){return{type:"selectAlternative",alternativeIndex:e}}}(e.Action||(e.Action={})),e.isButton=function(e){return"button"===e.type},e.create=function(e,n,i,r,o,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zn.Square,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=xs.from(e);return{type:t,id:c,name:ks.unknown(e),tooltip:o,kind:r,state:Dn.Enabled,label:{type:ss.Type,name:ks.unknown(""),parts:[ls.create(n,Xn.Regular,[],Ln.CoreNeutral0,void 0,void 0)],spacing:a,id:xs.from("label-button-"+c)},actions:i,shape:s,meta:l}},e.createIcon=function(e,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zn.Square,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=xs.from(e),c="icon-button-"+e;return{type:t,id:l,name:ks.unknown(e),tooltip:o,kind:r,state:Dn.Enabled,label:{type:ss.Type,name:ks.unknown(c),spacing:hs.create("0","0.25","0","0.25"),parts:[ps.create(n,void 0)],id:xs.from(c)},actions:i,shape:a,meta:s}}}(ms||(ms={})),function(e){var t=e.Type="icon";!function(e){e.createKnown=function(e){return{kind:"known",name:e}},e.createUrl=function(e,t,n){return{kind:"url",name:t,url:e,size:n}}}(e.Source||(e.Source={})),e.create=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:t,source:e,backgroundColor:n,id:xs.from(t),meta:i}}}(ps||(ps={})),function(e){e.create=function(e,t,n,i){return{top:e,bottom:n,left:i,right:t}}}(hs||(hs={})),function(e){e.create=function(e,t){return{vertical:t,horizontal:e}}}(fs||(fs={})),function(e){var t=e.Type="count";e.create=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return{type:"count",backgroundColor:n,value:e,id:xs.from(t),meta:i,textColor:r}}}(gs||(gs={})),function(e){!function(e){e.create=function(e,t,n){return{type:"sliderChoice",id:xs.from("slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n}}}(e.Choice||(e.Choice={})),e.create=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"slider",segmentSize:e,fillColor:t,choices:n,id:xs.from("slider"),meta:i}}}(vs||(vs={})),function(e){!function(e){e.create=function(e,t,n,i){return{id:xs.from("alternative-slider-choice-"+t.toLowerCase()),icon:e,label:t,actions:n,preview:i}}}(e.Choice||(e.Choice={})),e.create=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:"alternativeSlider",segmentSize:e,fillColor:t,choices:n,id:xs.from("alternativeSlider"),meta:i}}}(bs||(bs={})),function(e){e.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"list",items:e,id:xs.from("list"),meta:t}},function(e){e.create=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{id:xs.from("listItem"),label:e,behaviors:n,actions:t,secondaryButtons:i,meta:r}}}(e.Item||(e.Item={}))}(ys||(ys={})),function(e){e.from=function(e){return e+"#"+As.fg(6)}}(xs||(xs={})),function(e){e.unknown=function(e){return{kind:"unknown",value:e}}}(ks||(ks={})),function(e){e.create=function(e,t,n){return{type:"popoverStack",id:e,views:n,selected:t}},e.createView=function(e,t,n,i){return{id:e,rootPopoverId:t,child:n,anchor:{kind:"component",id:i||As.fg(3)}}}}(Ss||(Ss={})),function(e){var t=e.Type="globalPart";e.create=function(e,n,i){return{type:t,id:e,content:n,name:ks.unknown(i)}},e.isGlobalPart=function(e){return e.type===t}}(ws||(ws={})),function(e){var t=e.Type="globalPartPlaceholder";e.create=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xs.from(t),i=arguments.length>2?arguments[2]:void 0;return{type:t,id:n,globalPartId:e,child:i}},e.isGlobalPartPlaceholder=function(e){return e.type===t}}(Cs||(Cs={})),function(e){var t,n=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=Us(r).concat([e.id]);switch(i){case t.PreOrder:return n(e,o),B(e,n,i,o);case t.PostOrder:return B(e,n,i,o),n(e,o);default:(0,m.vE)(i)}},i=function(e){var n,i=arguments;return Ds(this,(function(r){switch(r.label){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:t.PreOrder,[5,Ls(p(e,n,[]))];case 1:return r.sent(),[2]}}))},r=function(e,t,n,i){var r=i;return Es.forEach(e,(function(e,n){return r=t(r,e,n)}),n),r},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Es.TreeTraversal.PreOrder,r=!0,a=!1,s=void 0;try{for(var l,c=i(e,n)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(u.type===t)return o.some(u)}}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return o.none},l=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(i){case t.PreOrder:return(0,a.zG)(n(e),(function(e){return E(e,n,i)}));case t.PostOrder:return(0,a.zG)(E(e,n,i),o.map(n));default:(0,m.vE)(i)}},c=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(i){case t.PreOrder:return(0,a.zG)(e,o.fromPredicate(n),o.chain((function(e){return(0,a.zG)(_(e,n,i),o.map((function(t){return Ts({},e,t)})))})));case t.PostOrder:return(0,a.zG)(_(e,n,i),o.chain((function(t){return o.fromPredicate(n)(Ts({},e,t))})));default:(0,m.vE)(i)}},u=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;switch(i){case t.PreOrder:return(0,a.zG)(n(e),o.chain((function(e){return(0,a.zG)(I(e,n,i),o.map((function(t){return Ts({},e,t)})))})));case t.PostOrder:return(0,a.zG)(I(e,n,i),o.chain((function(t){return n(Ts({},e,t))})));default:(0,m.vE)(i)}},d=function(e){return c(e,(0,z.ff)(C),t.PostOrder)},p=function(e){var n,i,r,o=arguments;return Ds(this,(function(a){switch(a.label){case 0:switch(n=o.length>1&&void 0!==o[1]?o[1]:t.PreOrder,i=o.length>2&&void 0!==o[2]?o[2]:[],r=Us(i).concat([e.id]),n){case t.PreOrder:return[3,1];case t.PostOrder:return[3,4]}return[3,7];case 1:return[4,e];case 2:return a.sent(),[5,Ls(f(e,n,r))];case 3:return a.sent(),[3,8];case 4:return[5,Ls(f(e,n,r))];case 5:return a.sent(),[4,e];case 6:return a.sent(),[3,8];case 7:(0,m.vE)(n),a.label=8;case 8:return[2]}}))},h=function(e){var n,i,r,o=arguments;return Ds(this,(function(a){switch(a.label){case 0:n=o.length>1&&void 0!==o[1]?o[1]:t.PreOrder,i=o.length>2?o[2]:void 0,r=0,a.label=1;case 1:return r<e.length?[5,Ls(p(e[r],n,i))]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))},f=function(e){var n,i,r,o,a,s,l,c,u=arguments;return Ds(this,(function(d){switch(d.label){case 0:switch(n=u.length>1&&void 0!==u[1]?u[1]:t.PreOrder,i=u.length>2?u[2]:void 0,e.type){case"column":return[3,1];case"assistantCard":return[3,3];case"popoverStack":return[3,8];case"strongAlertRef":return[3,10];case"row":return[3,12];case"block":return[3,15];case"box":case"scroll":case"inlineCard":case"shortFormCard":return[3,17];case"globalPart":return[3,19];case"globalPartPlaceholder":return[3,21];case"list":return[3,23];case"button":return[3,25];case"alternativeChoice":return[3,27];case"alternativeSlider":return[3,32];case"assistantFeed":return[3,37];case"viewStack":return[3,42];case"collapsedCard":return[3,44];case"longFormCard":return[3,49];case"sticker":return[3,52];case"tooltip":return[3,55];case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return[3,57]}return[3,58];case 1:return[5,Ls(h(e.children,n,i))];case 2:return d.sent(),[3,59];case 3:return null==e.footer?[3,5]:[5,Ls(p(e.footer,n,i))];case 4:return d.sent(),[3,6];case 5:null,d.label=6;case 6:return[5,Ls(p(e.child,n,i))];case 7:return d.sent(),[3,59];case 8:return[5,Ls(h(Object.values(e.views).map((function(e){return e.child})),n,i))];case 9:return d.sent(),[3,59];case 10:return[5,Ls(p(e.child,n,i))];case 11:return d.sent(),[3,59];case 12:return[5,Ls(h(e.left,n,i))];case 13:return d.sent(),[5,Ls(h(e.right,n,i))];case 14:return d.sent(),[3,59];case 15:return[5,Ls(h(e.parts,n,i))];case 16:return d.sent(),[3,59];case 17:return[5,Ls(p(e.child,n,i))];case 18:return d.sent(),[3,59];case 19:return[5,Ls(p(e.content,n,i))];case 20:return d.sent(),[3,59];case 21:return e.child?[5,Ls(p(e.child,n,i))]:[2];case 22:return d.sent(),[3,59];case 23:return[5,Ls(h(e.items.map((function(e){return e.label})),n,i))];case 24:return d.sent(),[3,59];case 25:return[5,Ls(p(e.label,n,i))];case 26:return d.sent(),[3,59];case 27:r=0,d.label=28;case 28:return r<e.alternatives.length?(o=e.alternatives[r],a=o.label,s=o.preview,[5,Ls(h([a,s],n,i))]):[3,31];case 29:d.sent(),d.label=30;case 30:return r++,[3,28];case 31:return[3,59];case 32:l=0,d.label=33;case 33:return l<e.choices.length?(c=e.choices[l].preview,[5,Ls(p(c,n,i))]):[3,36];case 34:d.sent(),d.label=35;case 35:return l++,[3,33];case 36:return[3,59];case 37:return null==e.footer?[3,39]:[5,Ls(p(e.footer,n,i))];case 38:return d.sent(),[3,40];case 39:null,d.label=40;case 40:return[5,Ls(p(e.header,n,i))];case 41:return d.sent(),[3,59];case 42:return[5,Ls(h(Object.values(e.views),n,i))];case 43:return d.sent(),[3,59];case 44:return null==e.quickActions?[3,46]:[5,Ls(p(e.quickActions,n,i))];case 45:return d.sent(),[3,47];case 46:null,d.label=47;case 47:return[5,Ls(p(e.child,n,i))];case 48:return d.sent(),[3,59];case 49:return[5,Ls(p(e.collapsedContent,n,i))];case 50:return d.sent(),[5,Ls(p(e.fullContent,n,i))];case 51:return d.sent(),[3,59];case 52:return[5,Ls(p(e.child,n,i))];case 53:return d.sent(),[5,Ls(p(e.label,n,i))];case 54:return d.sent(),[3,59];case 55:return[5,Ls(p(e.child,n,i))];case 56:return d.sent(),[3,59];case 57:return[2];case 58:if(Gs(e))return[2];(0,m.vE)(e),d.label=59;case 59:return[2]}}))};!function(e){e.PreOrder="PreOrder",e.PostOrder="PstOrder"}(t=e.TreeTraversal||(e.TreeTraversal={})),e.forEach=n,e.traverse=i,e.reduce=r,e.findFirst=s,e.findFirstWithPredicate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Es.TreeTraversal.PreOrder,r=!0,a=!1,s=void 0;try{for(var l,c=i(e,n)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(t(u))return o.some(u)}}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return o.none};var g=e.over=function(e,n,i){var r,s=Rs(r=n)||Ms(r)||zs(r)||Fs(),l=s[0],c=s.slice(1);return fi.xb(c)&&l===e.id?i(e):O(e,a.Q1,t.PreOrder,(function(t){return e.id===l&&t.id===c[0]?g(t,c,i):o.some(t)}))};e.map=l,e.filter=c,e.filterMap=u,e.compact=d;var x=e.getAlertRefs=function(e){switch(e.type){case"alternativeChoice":case"alternativeSlider":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"box":case"slider":case"text":case"clickableText":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":return o.none;case"shortFormCard":return x(e.child);case"longFormCard":return(0,a.zG)(e.behaviors,b.hX(rs.isStrongAlertRef),y.nI);case"strongAlertRef":return o.some([e]);case"inlineCard":return(0,a.zG)((0,a.zG)(e.behaviors,o.fromNullable,o.chain((0,a.ls)(b.hX(rs.isStrongAlertRef),y.nI))));case"list":return(0,a.zG)(e.items,b.UI((function(e){return(0,a.zG)(e.behaviors,o.fromNullable,o.chain((0,a.ls)(fi.hX(rs.isStrongAlertRef),y.nI)))})),o.sequenceArray,o.map(y.xH));default:if(Gs(e))return o.none;(0,m.vE)(e)}},k=(e.getAlertIds=(0,a.ls)(x,o.chain((0,a.ls)(b.tS(hi.ei("alertIds")),y.c2))),e.getAllAlertIds=function(e){return r(e,(function(e,t){return(0,a.zG)(Es.getAlertIds(t),o.map((function(t){return e.concat(t)})),o.getOrElse((function(){return e})))}),t.PreOrder,[])},e.getSDUIId=function(e){return o.fromNullable(e.id)},e.setPopoverView=function(e,t){return l(e,(function(e){switch(e.type){case"box":case"row":case"button":return(0,a.zG)(o.fromNullable(e.behaviors),o.chain(b.Ew(rs.isPopoverAnchor)),o.fold((0,a.a9)(e),(function(n){var i=n.view,r=Ns(n,["view"]);return(0,a.zG)(o.fromNullable(i),o.fold((function(){return(0,a.zG)(t,o.filter((function(e){return"component"===e.anchor.kind&&e.anchor.id===r.id})),o.fold((0,a.a9)(e),(function(t){return Ps(Ts({},e),{behaviors:[Ps(Ts({},r),{view:t})]})})))}),(function(n){return(0,a.zG)(t,o.filter((function(e){return hi.Xy(e.anchor,n.anchor)})),o.fold((function(){return Ps(Ts({},e),{behaviors:[r]})}),(function(t){return t.rootPopoverId===n.rootPopoverId&&t.id===n.id?e:Ps(Ts({},e),{behaviors:[Ps(Ts({},r),{view:t})]})})))})))})));default:return e}}))},e.setGlobalPartPlaceholderContent=function(e,t){return l(e,(function(e){return"globalPartPlaceholder"===e.type?(0,a.zG)(t(e.globalPartId),o.fold((function(){return e}),(function(t){return Ps(Ts({},e),{child:t.content})}))):e}))},e.removeStrongAlertRef=function(e){return function(t){var n=(0,a.zG)(t,b.UI((function(e){return e.alertIds})),b.xH,(function(e){return new Set(e)})),i=(0,a.zG)(t,y.hX(ts.isStrongAlertRefComponent)),r=(0,a.zG)(t,y.hX(ts.isStrongAlertRefBehavior));return(0,a.zG)(u(e,S(n,i,r)),o.chain(d))}},function(e,t){var n;return Ps(Ts({},e),{behaviors:null===(n=e.behaviors)||void 0===n?void 0:n.map((function(e){return"behavior:strongAlertRef"===e.type?Ps(Ts({},e),{alertIds:e.alertIds.filter((function(e){return!t.has(e)}))}):e}))})}),S=function(e,t,n){return function(i){switch(i.type){case"alternativeChoice":case"alternativeSlider":case"box":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"slider":case"text":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"clickableText":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeGetStartedChecklistModal":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":return o.some(i);case"shortFormCard":return S(e,t,n)(i.child);case"longFormCard":return o.some(Ps(Ts({},i),{behaviors:i.behaviors.map((function(t){return rs.isStrongAlertRef(t)?Ps(Ts({},t),{alertIds:t.alertIds.filter((function(t){return!e.has(t)}))}):t}))}));case"strongAlertRef":return(0,a.zG)(t,o.exists((function(e){return e.some((function(e){return w.equals(i,e)}))})))?o.none:o.some(Ps(Ts({},i),{alertIds:i.alertIds.filter((function(t){return!e.has(t)}))}));case"inlineCard":return i.behaviors&&i.behaviors.some((function(e){return rs.isStrongAlertRef(e)&&(0,a.zG)(n,o.exists((function(t){return t.some((function(t){return rs.StrongAlertRef.eq.equals(e,t)}))})))}))?o.none:o.some(k(i,e));case"list":var r=i.items.filter((function(e){return!e.behaviors||!e.behaviors.some((function(e){return rs.isStrongAlertRef(e)&&(0,a.zG)(n,o.exists((function(t){return t.some((function(t){return rs.StrongAlertRef.eq.equals(e,t)}))})))}))}));return 0===r.length?o.none:o.some(Ps(Ts({},i),{items:r.map((function(t){return k(t,e)}))}));default:if(Gs(i))return o.some(i);(0,m.vE)(i)}}},w=(e.switchViewStack=function(e,t,n){return(0,a.zG)(g(e,t,(function(e){return"viewStack"!==e.type&&"popoverStack"!==e.type||null==e.views[n]?o.some(e):o.some(Ps(Ts({},e),{selected:n}))})),o.fold((function(){return e}),a.yR))},e.toContentMap=function(e){return Es.reduce(e,(function(e,t,n){return e[t.id]={content:t,path:n},e}),t.PreOrder,{})},e.eq=pi.n(mi.z2)(Cr)),C=e.isEmpty=function(e){if(null==e)return!0;switch(e.type){case"column":return b.xb(e.children);case"assistantCard":return null==e.child&&null==e.footer;case"box":case"scroll":case"strongAlertRef":case"collapsedCard":case"inlineCard":case"shortFormCard":case"globalPartPlaceholder":case"tooltip":return null==e.child;case"row":return b.xb(e.left)&&b.xb(e.right);case"block":return b.xb(e.parts);case"list":return b.xb(e.items);case"button":return null==e.label;case"alternativeChoice":return b.xb(e.alternatives);case"alternativeSlider":return b.xb(e.choices);case"assistantFeed":return null==e.header&&null==e.footer;case"sticker":return null==e.label&&null==e.child;case"viewStack":return hi.Qr(e.views);case"longFormCard":return null==e.fullContent;case"globalPart":return null==e.content;case"count":case"alertsCount":case"icon":case"image":case"slider":case"text":case"clickableText":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"popoverStack":return!1;default:if(Gs(e))return!1;(0,m.vE)(e)}};e.isSwitchViewAction=function(e){return"switchView"===e.type};e.bulkSwitchView=function(e,t,n){var i=null!=n?n:Es.toContentMap(e);return t.reduce((function(e,t){var n=t.selected,r=t.where;return(0,a.zG)(i[r],o.fromNullable,o.map(hi.ei("path")),o.fold((function(){return e}),(function(t){return Es.switchViewStack(e,t,n)})))}),e)},e.getCardPropsForFeed=function(e){return e.filtering.filter((function(e){return e.condition===Hn.EqualTo})).reduce((function(e,t){return Ps(Ts({},e),Bs({},t.property,t.value))}),{})};var E=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return O(e,n,i,l)},_=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return O(e,n,i,c)},I=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder;return O(e,n,i,u)},A=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,r=arguments.length>3?arguments[3]:void 0;return(0,a.zG)(e,b.u4(new Array,(function(e,t){return(0,a.zG)(r(t,n,i),o.fold(a.Q1,(function(t){return e.push(t)}))),e})))},O=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,r=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return(0,a.zG)(A(e.children,n,i,r),(function(t){return Ps(Ts({},e),{children:t})}),o.some);case"assistantCard":var s=(0,a.zG)(o.fromNullable(e.footer),o.chain((function(e){return r(e,n,i)})),o.getOrElse((function(){})));return(0,a.zG)(r(e.child,n,i),o.map((function(t){return Ps(Ts({},e),{child:t,footer:s})})));case"strongAlertRef":case"scroll":case"inlineCard":case"shortFormCard":case"box":case"tooltip":return(0,a.zG)(r(e.child,n,i),o.map((function(t){return Ps(Ts({},e),{child:t})})));case"row":var l=A(e.right,n,i,r),c=A(e.left,n,i,r);return o.some(Ps(Ts({},e),{left:c,right:l}));case"block":return(0,a.zG)(A(e.parts,n,i,r),(function(t){return Ps(Ts({},e),{parts:t})}),o.some);case"list":return(0,a.zG)(e.items,b.UI((function(e){return(0,a.zG)(r(e.label,n,i),o.map((function(t){return Ps(Ts({},e),{label:t})})))})),b.hX(o.isSome),b.UI(j.MH),(function(t){return Ps(Ts({},e),{items:t})}),o.some);case"button":return(0,a.zG)(r(e.label,n,i),o.map((function(t){return Ps(Ts({},e),{label:t})})));case"alternativeChoice":return(0,a.zG)(e.alternatives,b.UI((function(e){return(0,a.zG)([r(e.label,n,i),r(e.preview,n,i)],o.sequenceArray,o.map((function(e){return e})),o.map((function(t){var n=js(t,2),i=n[0],r=n[1];return Ps(Ts({},e),{label:i,preview:r})})))})),b.hX(o.isSome),b.UI(j.MH),(function(t){return Ps(Ts({},e),{alternatives:t})}),o.some);case"alternativeSlider":return(0,a.zG)(e.choices,b.UI((function(e){return(0,a.zG)(r(e.preview,n,i),o.map((function(t){return Ps(Ts({},e),{preview:t})})))})),b.hX(o.isSome),b.UI(j.MH),(function(t){return Ps(Ts({},e),{choices:t})}),o.some);case"assistantFeed":return(0,a.zG)(o.fromNullable(e.footer),o.chain((function(e){return r(e,n,i)})),o.map((function(t){return Ps(Ts({},e),{footer:t})})),o.alt((function(){return o.some(e)})),o.chain((function(e){return(0,a.zG)(r(e.header,n,i),o.map((function(t){return Ps(Ts({},e),{header:t})})))})));case"popoverStack":return(0,a.zG)(Object.keys(e.views),b.u4({},(function(t,s){return(0,a.zG)(r(e.views[s].child,n,i),o.fold((function(){return delete t[s],t}),(function(n){return t[s]=Ps(Ts({},e.views[s]),{child:n}),t})))})),(function(t){return Ps(Ts({},e),{views:t})}),o.some);case"viewStack":return(0,a.zG)(Object.keys(e.views),b.u4({},(function(t,s){return(0,a.zG)(r(e.views[s],n,i),o.fold((function(){return delete t[s],t}),(function(e){return t[s]=e,t})))})),(function(t){return Ps(Ts({},e),{views:t})}),o.some);case"collapsedCard":var u=(0,a.zG)(o.fromNullable(e.quickActions),o.chain((function(e){return r(e,n,i)})),o.getOrElse((function(){})));return(0,a.zG)(r(e.child,n,i),o.map((function(t){return Ps(Ts({},e),{child:t,quickActions:u})})));case"longFormCard":return(0,a.zG)(r(e.fullContent,n,i),o.chain((function(t){return(0,a.zG)(r(e.collapsedContent,n,i),o.map((function(n){return Ps(Ts({},e),{fullContent:t,collapsedContent:n})})))})));case"sticker":return(0,a.zG)(r(e.child,n,i),o.chain((function(t){return(0,a.zG)(r(e.label,n,i),o.map((function(n){return Ps(Ts({},e),{child:t,label:n})})))})));case"globalPart":return(0,a.zG)(r(e.content,n,i),o.map((function(t){return Ps(Ts({},e),{content:t})})));case"globalPartPlaceholder":return e.child?(0,a.zG)(r(e.child,n,i),o.map((function(t){return Ps(Ts({},e),{child:t})}))):o.some(e);case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return o.some(e);default:if(Gs(e))return o.some(e);(0,m.vE)(e)}},R=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;return e.forEach((function(e){return n(e,i,r,o)}))},B=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.PreOrder,o=arguments.length>3?arguments[3]:void 0;switch(e.type){case"column":return R(e.children,i,r,o);case"assistantCard":return null!=e.footer&&n(e.footer,i,r,o),n(e.child,i,r,o);case"popoverStack":return R(Object.values(e.views).map((function(e){return e.child})),i,r,o);case"strongAlertRef":case"box":case"scroll":case"inlineCard":case"shortFormCard":case"tooltip":return n(e.child,i,r,o);case"row":return R(e.left,i,r,o),R(e.right,i,r,o);case"block":return R(e.parts,i,r,o);case"list":return R(e.items.map((function(e){return e.label})),i,r,o);case"button":return n(e.label,i,r,o);case"alternativeChoice":return e.alternatives.forEach((function(e){var t=e.label,n=e.preview;return R([t,n],i,r,o)}));case"alternativeSlider":return e.choices.forEach((function(e){var t=e.preview;return n(t,i,r,o)}));case"assistantFeed":return null!=e.footer&&n(e.footer,i,r,o),n(e.header,i,r,o);case"viewStack":return R(Object.values(e.views),i,r,o);case"collapsedCard":return null!=e.quickActions&&n(e.quickActions,i,r,o),n(e.child,i,r,o);case"longFormCard":return n(e.collapsedContent,i,r,o),n(e.fullContent,i,r,o);case"sticker":return n(e.label,i,r,o),n(e.child,i,r,o);case"globalPart":return n(e.content,i,r,o);case"globalPartPlaceholder":return e.child?n(e.child,i,r,o):void 0;case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return;default:if(Gs(e))return;(0,m.vE)(e)}},M=(e.Functor={map:function(e,n){return l(e,n,t.PreOrder)}},e.checkForGlobalPartWithPlaceholder=function(e){return ws.isGlobalPart(e)?(0,a.zG)(s(e,"globalPartPlaceholder"),o.fold((function(){return v.right(e)}),(function(t){return v.left(new Error("globalPart can not contain globalPartPlaceholder. globalPartPlaceholder (id: ".concat(t.id,") found in globalPart (id: ").concat(e.id,")")))}))):v.right(e)}),F=pi.n(di.z2)(Cr);e.dslRootParser=(0,a.ls)(F.decode,v.mapLeft((function(e){return new Error(di.ii(e))})),v.chain(M))}(Es||(Es={})),function(e){!function(e){e.eq=U.yv,e.show=ui._3;e.from=function(e){return"".concat(e)}}(e.AlertId||(e.AlertId={})),function(e){var t;!function(e){e.eq=U.yv,e.show=ui._3;e.from=function(e){return"".concat(e)}}(t=e.Id||(e.Id={}));var n=e.eqId=U.Uz((function(e){return e.id}))(t.eq),i=e.eqContent=U.Uz((function(e){return e.content}))(Es.eq),r=e.eqAlerts=U.Uz((function(e){return e.alertIds}))(b.Eh(U.yv)),o=e.eqInvalid=U.Uz((function(e){return Boolean(e.invalid)}))(U.vD),a=e.eq=(0,ci.fold)(U.uZ())([n,i,r,o]),s=e.show={show:function(e){return"SDUI Item [".concat(Boolean(e.invalid)?"invalid":"valid","] #(").concat(e.id," ").concat(0===e.alertIds.length?"":"with alertIds:"+e.alertIds.join(", "),")")}};e.eqShow=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Hs(e,t,n[t])}))}return e}({},a,s)}(e.Item||(e.Item={}))}(_s||(_s={}));class Vs{constructor(e){var t,n;this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(Vs.name),this._autofocusNextLongFormCardOnApplyOrDismiss=p.h.create(!0),this._autofocusNextLongFormCardOnAlertRefEmpty=p.h.create(!1),this._focusFirstCard=new s.xQ,this.autofocusNextLongFormCardOnApplyOrDismiss=this._autofocusNextLongFormCardOnApplyOrDismiss.view(),this.autofocusNextLongFormCardOnAlertRefEmpty=this._autofocusNextLongFormCardOnAlertRefEmpty.view(),this.focusFirstCard=this._focusFirstCard.asObservable(),this._subs.add(null===(t=this._params.autofocusNextLongFormCardOnAlertRefEmpty)||void 0===t?void 0:t.subscribe(d.wW(this._autofocusNextLongFormCardOnAlertRefEmpty))),this._subs.add(null===(n=this._params.autofocusNextLongFormCardOnApplyOrDismiss)||void 0===n?void 0:n.subscribe(d.wW(this._autofocusNextLongFormCardOnApplyOrDismiss)));const i=this._params.activeFeed.pipe(M.oA,I.U((e=>e.id===dn.lensAllSuggestionFeedShortForm&&0===wn(e.collection))),S.x(),_.h(a.yR)),r=this._params.activeFeed.pipe(B.T(1),O.skipBy(o.getEq(U.Uz((e=>e.id))(_s.Item.Id.eq))));this._subs.add(mn.T(r,i).pipe(c.w((()=>this._params.relevantInboundCAPIMessages.pipe(_.h(J.JS.Finished.is),c.w((()=>this._params.sduiEventsSettled.pipe(_.h(a.yR),R.q(1)))),si.QV(li.E),At.M(this._params.activeFeed),_.h((([e,t])=>o.isSome(t)&&wn(t.value.collection)>0&&o.isNone(En(t.value.collection)))),R.q(1))))).subscribe((()=>{this._logger.debug("Autofocusing first card."),this._focusFirstCard.next(null)})))}dispose(){this._subs.unsubscribe()}}var $s=n(2768);const Ks=/^.*(@(Short|Long)).*$/;class Ws{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(Ws.name),this._disposed=new s.xQ,this._sduiFeedManagerLifecycleOnFeedEmpty(),this._sduiFeedManagerLifecycleOnFeedRemoved(),this._sduiFeedManagerLifecycleOnAlertsRefEmpty()}_sduiFeedManagerLifecycleOnAlertsRefEmpty(){this._subs.add(this._params.sduiManagerProxy.onAlertsRefEmpty.subscribe((e=>(0,a.zG)(this._params.feedManager.feed.get(),o.chain((e=>En(e.collection))),o.filter((t=>t.id===e.sduiRootId)),j.bw((()=>{const t=this._params.autofocusManager.autofocusNextLongFormCardOnAlertRefEmpty.get(),n=e.emptyStrongAlertRef.onEmpty.filter((e=>"nextCard"!==e.type&&"prevCard"!==e.type||t));this._logger.debug("Handling alerts ref empty.",{actions:e.emptyStrongAlertRef.onEmpty,patchedActions:n,itemId:e.sduiId,autofocusNextCardOnAlertRefEmptyEnabled:t}),n.length>0&&this._processActions(n,e.sduiId,e.emptyStrongAlertRef.alertIds,e.sduiId)}))))))}_sduiFeedManagerLifecycleOnFeedEmpty(){this._subs.add(this._params.feedManager.onFeedEmpty.subscribe((e=>{var t;"assistantFeed"===e.content.type?this._processActions(null!==(t=e.content.onEmpty)&&void 0!==t?t:[],e.id,[],e.id):this._params.monitoringService.notify((0,ne.L)({kind:"warn",source:"revision",name:"sduiFeedOnEmptyDSLActionsSkipped",data:null}))})))}_sduiFeedManagerLifecycleOnFeedRemoved(){this._subs.add(this._params.feedManager.onFeedRemove.subscribe((e=>{"assistantFeed"===e.content.type?this._processActions(e.content.onRemove,e.id,e.alertIds,e.content.id):this._params.monitoringService.notify((0,ne.L)({kind:"warn",source:"revision",name:"sduiFeedOnRemoveDSLActionsSkipped",data:null}))})))}_switchViewWithinFocusedItem(e){(0,a.zG)(this._params.feedManager.feed.get(),o.chain((e=>En(e.collection))),o.filter((t=>e.sduiRootId!==t.id)),j.bw((t=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t.id})))))}_switchViewWithinCurrentFeed(e){(0,a.zG)(this._params.feedManager.feed.get(),o.filter((({id:t})=>e.sduiRootId!==t)),j.bw((({id:t})=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t})))))}_onAssistantClose(){(0,a.zG)(this._params.feedManager.feed.get(),o.chain((e=>o.fromNullable(this._params.feedManager.feeds.get().get(e.id)))),j.bw((e=>{var t,n,i;(null!==(n=null===(t=e.content.onAssistantClose)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>0&&this._processActions(null!==(i=e.content.onAssistantClose)&&void 0!==i?i:[],e.id,e.alertIds,e.content.id)})))}_processActions(e,t,n,i){const r=e.some((e=>"notify"===e.type&&e.userAction===Tn.Click)),o=e.some((e=>"nextCard"===e.type||"prevCard"===e.type))&&r,a=e.some((e=>"removeRoot"===e.type))&&r,s=this._params.autofocusManager.autofocusNextLongFormCardOnApplyOrDismiss.get(),l=a&&!o&&s,c=a?e.filter((e=>"nextCard"!==e.type&&"prevCard"!==e.type||s)):e,u=l?[{type:"nextCard"}].concat(e):c;this._logger.debug("Processing SDUI actions.",{actions:e,patchedActions:u,itemId:t,alertIdsInScope:n,sourceId:i,autofocusNextCardOnApplyOrDismissEnabled:s}),u.forEach((r=>{var a;switch(r.type){case"notify":{const e=null!==(a=r.sourceId)&&void 0!==a?a:i,t=((e,t)=>{const n=e.match(Ks);return null!==n?e.replace(n[1],"shortForm"===t?"@Short":"@Long"):e})(e,this._params.feedForm.get());e!==t&&this._logger.debug("Patched user action component ID.",{componentId:e,patchedComponentId:t}),this._subscribeToCommand(this._params.capiService.user_action({userAction:r.userAction,componentId:t}),(t=>function(e){return{kind:"error",source:"revision",name:"sduiUserActionFailed",data:e}}({componentId:e,userAction:r.userAction,reason:(0,be.N)(t).message})));break}case"applyAlerts":{const e=n.map((e=>({alertId:e,alternativeIndex:r.alternativeIndex})));this._subscribeToCommand((()=>this._params.alertService.applyAlerts(e)),(t=>function(e){return{kind:"error",source:"revision",name:"applyAlertsFailed",data:e}}({applyAlertsInfo:e,reason:(0,be.N)(t).message})));break}case"removeAlerts":{const t=e.some((e=>"applyAlerts"===e.type)),i=n.map((e=>({alertId:e,removalReason:t?"alertApplied":"other"})));this._subscribeToCommand((()=>this._params.alertService.removeAlerts(i)),(e=>function(e){return{kind:"error",source:"revision",name:"removeAlertsFailed",data:e}}({removeAlertsInfo:i,reason:(0,be.N)(e).message})),(()=>this._params.sduiManagerProxy.pushRemovedAlerts([n.map(_s.AlertId.from),"removeAlerts"])));break}case"removeRoot":this._params.sduiManagerProxy.pushRemovedRoot([t,"removeRoot"]);break;case"pushAssistantFeed":this._params.feedManager.pushFeed(r.feedId,r.cardId);break;case"popAssistantFeed":this._params.feedManager.popFeed(r.fallbackFeed);break;case"positionedClick":case"focusAssistantCard":this._params.feedManager.focusCard("focusAssistantCard"===r.type?_s.Item.Id.from(r.cardId):t);break;case"prevCard":this._params.feedManager.focusPrev(!o);break;case"nextCard":this._params.feedManager.focusNext(!o);break;case"switchView":{const e={where:r.where,selected:r.selected,sduiRootId:t};this._params.sduiManagerProxy.pushSwitchView(e),this._switchViewWithinFocusedItem(e),this._switchViewWithinCurrentFeed(e);break}case"highlightAlert":return this._params.setEmphasizedAlerts([n[0]]);case"hoverStateChanged":return;case"hideHighlights":case"showHighlights":case"selectAlternative":case"transition":break;case"openLink":this._subscribeToCommand((()=>this._params.lifecycleService.openUrl(r.url)),(e=>function(e){return{kind:"error",source:"revision",name:"sduiCardOpenLinkFailed",data:e}}({reason:(0,be.N)(e).message})));break;case"upgradeToPremium":this._subscribeToCommand((()=>this._params.uphookService.executeUphook("advancedIssues")),(e=>function(e){return{kind:"error",source:"revision",name:"upgradeToPremiumFailed",data:e}}({reason:(0,be.N)(e).message})));break;case"copyToClipboard":this._subscribeToCommand((()=>this._params.textEditorService.copyText(r.text)),(e=>function(e){return{kind:"error",source:"revision",name:"sduiCardCopyTextFailed",data:e}}({reason:(0,be.N)(e).message})));break;case"enablePlagiarismCheck":this._params.plagiarismService.enablePlagiarismChecks();break;case"disablePlagiarismCheck":this._params.plagiarismService.disablePlagiarismChecks();break;case"enableWritingExpertCheck":this._params.writingExpertService.enableWritingExpertChecks();break;case"disableWritingExpertCheck":this._params.writingExpertService.disableWritingExpertChecks();break;case"nativeOpenAssistant":case"openCreateSnippetModal":case"newRevision":case"interactPopover":case"closePopover":case"closeCard":case"openGrammarlyGo":case"openToneDetector":case"stopApplyingAlerts":case"openSettings":case"openFeedback":case"openPerformanceScore":case"nativeOpenUserSatisfactionFeedback":case"openLearnMore":this._logger.warn("Processing unsupported SDUI action, this is a no-op.",{actionType:r.type});break;default:(0,m.L0)(r)}}))}processActions(e,t,n,i){this._processActions(e,t,null!=n?n:[],null!=i?i:t)}dispose(){this._onAssistantClose(),this._disposed.next(void 0),this._disposed.complete(),this._subs.unsubscribe()}_subscribeToCommand(e,t,n=a.Q1){try{N.D(e()).pipe(R.q(1),$s.R(this._disposed)).subscribe(n,(e=>this._params.monitoringService.notify((0,ne.L)(t(e)))))}catch(e){this._params.monitoringService.notify((0,ne.L)(t(e)))}}}function qs(e){return null!=e}var Qs,Ys,Js=n(93756),Xs=n(16782),el=n(95300),tl=n(67434),nl=n(95399),il=n(95574),rl=n(43675);function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ol(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ol(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(e,t,n){return{entries:e,latestChangeDiff:t,diffVersion:n+1}}function cl(e){return t=>{const n=ul(t.content);return!o.isNone(n)&&e.reduce(((e,t)=>!1===e?e:(0,a.zG)(n,o.chain((e=>o.fromNullable(e[t.property]))),o.fold((()=>t.condition===Hn.NotEqualTo),(e=>t.condition===Hn.EqualTo?e===t.value:e!==t.value)))),!0)}}function ul(e){try{for(const t of Es.traverse(e)){if("longFormCard"===t.type)return o.some(t.feedProperties);if("assistantCard"===t.type&&t.properties)return o.some(t.properties)}return o.none}catch(e){return o.none}}function dl(e,t,n){const i=(0,a.zG)(e,Ys.get(_s.Item.Id.from(t)),o.chain((e=>"assistantFeed"===e.content.type?o.some(e.content.filtering):o.none)),o.fold((()=>a.jv),cl));return(0,a.zG)(e,Ys.reduce([],((e,t)=>i(t)&&t.alertIds.some((e=>n.has(e)))?[...e,t]:e)),b.DY(L.getDualOrd(L.fromCompare(((e,t)=>{const i=e.alertIds.filter((e=>n.has(e))).length,r=t.alertIds.filter((e=>n.has(e))).length;if(i!==r){return i-r>0?1:-1}{const n=t.alertIds.length-e.alertIds.length;return n>0?1:n<0?-1:0}})))),b.YM,o.map((e=>e.id)))}!function(e){var t=function(e,t){return function(n){return Array.from(n.entries.values()).reduce((function(e,n){return t(e,n)}),e)}},n=function(e,t){return rl.yi(_s.Item.eq)(e,t)},i=function(e){var t=e.added,n=void 0===t?new Map:t,i=e.updated,r=void 0===i?new Map:i,o=e.removed,a=void 0===o?new Map:o,s=new Map,l=kn.v.fromMutation((function(e){a.forEach((function(t,n){e.set(n,Js.t$(t))})),n.forEach((function(t,n){e.has(n)?s.set(n,"sdui item add overlaps with sdui item remove: toAdd(".concat(_s.Item.show.show(t)," overlapWith(").concat(Js.ZN(_s.Item.show,_s.Item.show).show(e.get(n)),"))")):e.set(n,Js.F2(t))})),r.forEach((function(t,n){var i=sl(t,2),r=i[0],o=i[1];e.has(n)?s.set(n,"sdui item update overlaps with unexpected sdui item add/remove: toUpdate(".concat(_s.Item.show.show(o),") overlapWith(").concat(Js.ZN(_s.Item.show,_s.Item.show).show(e.get(n)),"))")):e.set(n,Js.Hk(r,o))}))}));return s.size>0?v.left({recovered:l,rejected:s}):v.right(l)};e.iso=xn.k4(),e.empty={entries:new Map,latestChangeDiff:kn.v.empty(),diffVersion:0};e.get=function(e){return function(t){return o.fromNullable(t.entries.get(e))}},e.find=function(e){return t(o.none,(function(t,n){return(0,a.zG)(t,o.alt((function(){return o.fromPredicate(e)(n)})))}))},e.reduce=t;e.size=function(e){return e.entries.size};e.diff=function(e,t){return 0===e.diffVersion?il.MH(i({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:n(e.entries,t.entries)},e.diffFromEntries=n,e.applyDiff=function(e){return function(t){var n=rl.QT(rl.kH.createStrict(_s.Item.eqShow),t.entries,e);return(0,a.zG)(n,v.bimap((function(n){var i=kn.v.fromMutation((function(t){(0,a.zG)(e,kn.v.forEach((function(e,i){return!n.rejected.has(i)&&t.set(i,Js.t$(e))}),(function(e,i,r){return!n.rejected.has(r)&&t.set(r,Js.Hk(e,i))}),(function(e,i){return!n.rejected.has(i)&&t.set(i,Js.F2(e))})))}));return{recovered:ll(n.recovered,i,t.diffVersion),rejected:n.rejected}}),(function(n){return ll(n,e,t.diffVersion)})))}},e.applyDiffLoose=function(e){return function(t){var n=rl.QT(rl.kH.createLoose(_s.Item.eqShow),t.entries,e);return(0,a.zG)(n,v.bimap((function(n){return{recovered:ll(n.recovered,e,t.diffVersion),rejected:n.rejected}}),(function(n){return ll(n,e,t.diffVersion)})))}},e.createDiff=i,e.toJSON=function(e){return{entries:Array.from(e.entries),latestChangeDiff:kn.v.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}};e.diffShow=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){al(e,t,n[t])}))}return e}({},kn.v.getShow(_s.Item.Id.show,_s.Item.show));!function(e){var t=e.showMapKeys={show:function(e){return null==e?"None":Array.from(e.keys()).join(", ")}};e.show={show:function(e){return"added: ".concat(t.show(e.added),"\n        \n removed: ").concat(t.show(e.removed),"\n updated: ").concat(t.show(e.removed))}},e.isEmpty=function(e){var t=e.added,n=e.updated,i=e.removed;return!(null!=t&&0!==t.size||null!=n&&0!==n.size||null!=i&&0!==i.size)}}(e.InternalDiff||(e.InternalDiff={})),function(e){var t=e.empty=function(){return{added:new Map,updated:new Map,removed:new Map}};e.fromState=function(e){return Qs.reduce(t(),e)}}(e.MutableInternalDiff||(e.MutableInternalDiff={}))}(Qs||(Qs={})),function(e){!function(e){e.show=kn.v.getShow(ui._3,_s.Item.show),e.empty=kn.v.empty}(e.Diff||(e.Diff={}));e.empty=Qs.iso.wrap(Qs.empty);e.get=function(e){return(0,a.ls)(Qs.iso.unwrap,Qs.get(e))},e.reduce=function(e,t){return(0,a.ls)(Qs.iso.unwrap,Qs.reduce(e,t))},e.diff=function(e,t){return Qs.diff(Qs.iso.unwrap(e),Qs.iso.unwrap(t))},e.isEmpty=function(e){return 0===Qs.iso.unwrap(e).entries.size},e.find=function(e){return(0,a.ls)(Qs.iso.unwrap,Qs.find(e))},e.size=function(){return(0,a.ls)(Qs.iso.unwrap,Qs.size)},e.sduiRoots=function(){return(0,a.ls)(Qs.iso.unwrap,(function(e){return Array.from(e.entries.keys())}))}}(Ys||(Ys={}));const ml={show:e=>`[${e.id} - ${wn(e.collection)} items - focus at ${o.getShow(ui._3).show((0,a.zG)(En(e.collection),o.map((e=>e.id))))}]`};class pl{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(pl.name),this._focusCommandsQueue=[],this._evalFocusCommand=new Xs.t(1),this._feedStack=new el.X([]),this._feed=p.h.create(o.none),this._feeds=p.h.create(new Map),this._sduiItemsCollectionDiff=new s.xQ,this.onFeedRemove=new s.xQ,this.onFeedEmpty=new s.xQ,this.feed=this._feed.view(),this.feeds=this._feeds.view(),this._subs.add(this._updateFeeds()),this._subs.add(this._updateActiveFeed()),this._subs.add(this.feed.subscribe((e=>this._logger.debug("Feed state changed.",o.getShow(ml).show(e))))),this._subs.add(this.feeds.subscribe((e=>this._logger.debug("Feeds changed.",Array.from(e.keys()))))),this._subs.add(this._params.sduiItemsCollectionDiff.subscribe(this._sduiItemsCollectionDiff))}pushFeed(e,t,n){const i=this._feedStack.getValue(),r=(0,a.zG)(o.fromNullable(t),o.filter((t=>hl(this._params.sduiItemsCollection.get(),e,t))),o.alt((()=>n?dl(this._params.sduiItemsCollection.get(),e,n):o.none))),s=(0,a.zG)(this._feed.get(),o.chain((e=>En(e.collection))),o.map((e=>e.id))),l=(0,a.zG)(i,b.YM,o.map((({feedId:e})=>({feedId:e,itemIdToFocus:s}))));this._logger.debug("Pushing feed.",{feedId:e,itemIdToFocus:r}),this._feedStack.next(gl(i).concat(b.oA([l])).concat({feedId:_s.Item.Id.from(e),itemIdToFocus:r}))}replaceFeed(e,t,n){const i=(0,a.zG)(o.fromNullable(t),o.filter((t=>hl(this._params.sduiItemsCollection.get(),e,t))),o.alt((()=>n?dl(this._params.sduiItemsCollection.get(),e,n):o.none)));this._logger.debug("Replacing feed.",{feedId:e,itemIdToFocus:i}),this._feedStack.next(b.Ss(gl(this._feedStack.getValue()),{feedId:_s.Item.Id.from(e),itemIdToFocus:i}))}popFeed(e){const t=this._feedStack.getValue();this._logger.debug("Popping feed.",{fallbackFeed:e}),t.length>1?this._feedStack.next(gl(t)):(0,a.zG)(o.fromNullable(e),o.fold((()=>{this._logger.warn("Popped feed with less than 2 feeds in the feed stack and no fallback feed, this is a no-op.")}),(e=>{this.pushFeed(_s.Item.Id.from(e.feedId),e.cardId),this._logger.debug(`Popped feed with less than 2 feeds in the feed stack. Switching to fallback feed. ${JSON.stringify(e)}`)})))}isFeedEmpty(e){return this.feed.pipe(c.w((0,a.ls)(o.filter((t=>t.id===e.id)),o.fold((()=>this._params.sduiItemsCollection.view((0,a.ls)(Ys.find(cl(e.content.filtering)),o.isNone))),(e=>u.of(0===wn(e.collection)))))),S.x())}focusFirst(){this._logger.debug("Focusing first card on feed."),this._focusCommandsQueue.push({kind:"focusFirst"}),this._evalFocusCommand.next()}focusCard(e){this._logger.debug("Focusing card on feed.",{itemId:e}),this._focusCommandsQueue.push({kind:"focusCard",itemId:e}),this._evalFocusCommand.next()}focusNext(e){this._logger.debug("Focusing next card on feed.",{fallbackToPrev:e}),this._focusCommandsQueue.push({kind:"focusNext",fallbackToPrev:null!=e&&e}),this._evalFocusCommand.next()}focusPrev(e){this._logger.debug("Focusing previous card on feed.",{fallbackToNext:e}),this._focusCommandsQueue.push({kind:"focusPrev",fallbackToNext:null!=e&&e}),this._evalFocusCommand.next()}dispose(){this._subs.unsubscribe()}_updateActiveFeed(){return this._getActiveFeedMeta().pipe(O.skipBy(o.getEq(vl)),c.w(o.fold((()=>u.of(o.none)),(({ordering:e,filtering:t,feedId:n,itemIdToFocus:i})=>{const r=this._getFeedItemsAndChanges(cl(t)).pipe(I.U((e=>({kind:"sduiChange",diff:e})))),s=(0,a.zG)(i,o.fold((()=>P.E),(e=>u.of({kind:"focusCard",itemId:e})))),l=(m=e,d=(0,ci.fold)(L.getMonoid())(m.map((e=>(0,a.zG)(L.ordNumber,L.contramap((0,a.ls)(ul,o.chain((t=>o.fromNullable(t[e.orderBy]))),o.fold((()=>Number.MAX_VALUE),(t=>e.direction===Zn.Asc?t:-1*t)))))))),L.contramap((e=>e.content))(d));var d,m;return mn.T(r,s,this._evalFocusCommand.pipe(dt.O(null),c.w((()=>N.D(this._focusCommandsQueue.splice(0)))))).pipe(tl.R(((e,t)=>{return(0,a.zG)(e,"sduiChange"===t.kind?function(e,t,n=!1){return(0,a.ls)(Sn().unwrap,(i=>(0,a.zG)(e,kn.v.reduce({items:new Map(i.items),added:new Set,removed:new Set},((e,t,n)=>(e.removed.add(n),e)),((e,t,n,i)=>(e.items.set(i,n),e)),((e,t,n)=>(e.items.set(n,t),e.added.add(n),e))),(({items:e,added:r,removed:s})=>{const l=(0,a.zG)(i.order.focus,o.exists((e=>s.has(e)))),c=(0,a.zG)(Bn(i.order).concat(Array.from(r)),b.hX((e=>!s.has(e)||(0,a.zG)(i.order.focus,o.exists((t=>t===e))))),b.DY(An(e,t))),u=(0,a.zG)(i.order.focus,o.fold((()=>Rn((0,a.zG)(c,b.hX((e=>!s.has(e)))),o.none,[])),(e=>(0,a.zG)(On(c,o.some(c.indexOf(e))),l?o.chain(n?Fn:Mn):a.yR,o.getOrElse((()=>Rn((0,a.zG)(c,b.hX((e=>!s.has(e)))),o.none,[])))))));return s.forEach((t=>e.delete(t))),{items:e,order:u}}))),Sn().wrap)}(t.diff,l,!this._params.autofocusNextCard(n)):a.yR,"focusNext"===t.kind?(r=t.fallbackToPrev,e=>(0,a.zG)(Sn().unwrap(e),(({order:e})=>0===e.rights.length&&r?e.lefts.length-1:e.lefts.length+1),(t=>(0,a.zG)(e,In(t))))):a.yR,"focusPrev"===t.kind?(i=t.fallbackToNext,e=>(0,a.zG)(Sn().unwrap(e),(({order:e})=>0===e.lefts.length&&i?e.lefts.length+1:e.lefts.length-1),(t=>(0,a.zG)(e,In(t))))):a.yR,"focusCard"===t.kind?In(Cn(e).findIndex((e=>e.id===t.itemId))):a.yR,"focusFirst"===t.kind?In((0,a.zG)(Cn(e),(e=>1===e.length?0:e.findIndex((e=>!ii(e.content)))))):a.yR);var i,r}),Sn().wrap({items:new Map,order:Rn([],o.none,[])})),I.U((e=>o.some({id:n,collection:e}))))}))),T.b((e=>this._emitOnFeedEmptyIfNewFeedIsEmpty(e,this._feed.get())))).subscribe(d.wW(this._feed))}_getFeedItemsAndChanges(e){return nl.z(u.of(this._params.sduiItemsCollection.view((t=>kn.v.fromMutation((n=>{(0,a.zG)(t,Ys.reduce(n,((t,n)=>{try{return e(n)?t.set(n.id,Js.F2(n)):t}catch(e){return t}})))})))).get()),this._sduiItemsCollectionDiff.pipe(I.U(kn.v.filter((t=>e(t)),((t,n)=>e(n)),(t=>e(t))))))}_getActiveFeedMeta(){return this._feedStack.pipe(I.U(b.Z$),c.w(o.fold((()=>u.of(o.none)),(e=>this._feeds.pipe(I.U(Ee.P5(_s.Item.Id.eq)(e.feedId)),I.U(o.map((t=>({ordering:t.content.ordering,filtering:t.content.filtering,feedId:e.feedId,itemIdToFocus:e.itemIdToFocus})))))))),O.shareReplay({bufferSize:1,refCount:!0}))}_updateFeeds(){return this._sduiItemsCollectionDiff.pipe(I.U((e=>{const t=new Map(this._feeds.get());return(0,a.zG)(e,kn.v.forEach((e=>{fl(e)&&(t.delete(e.id),(0,a.zG)(this._feed.get(),o.map((e=>e.id)),o.filter((t=>t===e.id)),o.map((()=>this.onFeedRemove.next(e)))))}),((e,n)=>{fl(n)&&t.set(n.id,n)}),(e=>{fl(e)&&t.set(e.id,e)}))),t}))).subscribe(d.wW(this._feeds))}_emitOnFeedEmptyIfNewFeedIsEmpty(e,t){(0,a.zG)(g.Y(o.option)({currentFeed:t,newFeed:e}),o.filter((({currentFeed:e,newFeed:t})=>e.id===t.id&&wn(e.collection)>0&&0===wn(t.collection))),o.chain((({currentFeed:e})=>o.fromNullable(this._feeds.get().get(e.id)))),o.map((e=>this.onFeedEmpty.next(e))))}}function hl(e,t,n){return(0,a.zG)(e,Ys.get(_s.Item.Id.from(t)),o.chain((e=>"assistantFeed"===e.content.type?o.some(e.content.filtering):o.none)),o.map(cl),o.chain((t=>(0,a.zG)(e,Ys.get(_s.Item.Id.from(n)),o.filter(t)))),o.isSome)}function fl(e){return"assistantFeed"===e.content.type}function gl(e){return(0,a.zG)(e,b.S1,o.getOrElse((()=>[])))}const vl=U.MW({feedId:_s.Item.Id.eq,itemIdToFocus:o.getEq(_s.Item.Id.eq),filtering:b.Eh(U.MW({property:U.yv,value:U.lr,condition:U.yv})),ordering:b.Eh(U.MW({orderBy:U.yv,direction:U.yv}))});class bl extends pl{constructor(e){super(e),this._selectedAlertId=p.h.create(null),this._initialForm=null,this.allSuggestionsFeed=this.feeds.view((e=>(0,a.zG)(o.fromNullable(e.get(_s.Item.Id.from("longForm"===this._initialForm?dn.lensAllSuggestionFeed:dn.lensAllSuggestionFeedShortForm)))))),this._initialForm=e.initialForm,this._subs.add(e.selectedAlertId.subscribe(d.wW(this._selectedAlertId))),this._subs.add(this._getCardToFocusOnActiveAlertChange().subscribe((e=>this.focusCard(e))))}pushFeed(e,t,n){super.pushFeed(_s.Item.Id.from(e),t,null!=n?n:(0,a.zG)(o.fromNullable(this._selectedAlertId.get()),o.fold((()=>{}),(e=>new Set([e])))))}replaceFeed(e,t,n){super.replaceFeed(_s.Item.Id.from(e),t,null!=n?n:(0,a.zG)(o.fromNullable(this._selectedAlertId.get()),o.fold((()=>{}),(e=>new Set([e])))))}popFeed(e){super.popFeed(null!=e?e:(0,a.zG)(this.allSuggestionsFeed.get(),o.map((e=>({feedId:e.id}))),o.toUndefined))}_getCardToFocusOnActiveAlertChange(){return this._selectedAlertId.pipe(_.h(qs),I.U((e=>(0,a.zG)(this.feed.get(),o.chain((t=>{var n;return o.fromNullable(null===(n=Cn(t.collection).find((t=>t.alertIds.includes(_s.AlertId.from(e)))))||void 0===n?void 0:n.id)}))))),M.oA)}}class yl{constructor(e){this._params=e,this._disposed=new s.xQ,this._plagiarismChecksEnabled=p.h.create(!1),this.plagiarismChecksEnabled=this._plagiarismChecksEnabled.view()}enablePlagiarismChecks(){N.D(this._params.capiService.toggle_checks({checks:{plagiarism:!0}})()).pipe(R.q(1),$s.R(this._disposed)).subscribe((()=>this._plagiarismChecksEnabled.set(!0)),(e=>function(e){return{kind:"error",source:"revision",name:"enablePlagiarismCheckFailed",data:e}}({reason:(0,be.N)(e).message})))}disablePlagiarismChecks(){N.D(this._params.capiService.toggle_checks({checks:{plagiarism:!1}})()).pipe(R.q(1),$s.R(this._disposed)).subscribe((()=>this._plagiarismChecksEnabled.set(!1)),(e=>function(e){return{kind:"error",source:"revision",name:"disablePlagiarismCheckFailed",data:e}}({reason:(0,be.N)(e).message})))}dispose(){this._disposed.next(void 0),this._disposed.complete()}}class xl{constructor(e){this._params=e,this._subs=new l.w,this._premiumSuggestionsUphookFocused=p.h.create(!1),this._subs.add(this._focusPremiumSuggestionsUphook()),this._subs.add(this._trackPremiumSuggestionsUphookAvailability()),this._subs.add(this._premiumSuggestionsUphookFocused.subscribe((e=>{var t,n;return null===(n=null===(t=this._params.uphookService)||void 0===t?void 0:t.notifyPremiumSuggestionsUphookFocusChanged)||void 0===n?void 0:n.call(t,e)}))),this._subs.add(this._params.routingViewModel.activeView.view((e=>"home"!==e.kind)).subscribe((()=>this._premiumSuggestionsUphookFocused.set(!1))))}onFocusedItemMount(e){this._premiumSuggestionsUphookFocused.set(ii(e.content))}_focusPremiumSuggestionsUphook(){var e;return(null!==(e=this._params.uphookService.requestFocusPremiumSuggestionsUphook)&&void 0!==e?e:P.E).subscribe((()=>{this._params.routingViewModel.has({kind:"home"})&&(this._params.routingViewModel.popUntil((e=>"home"===e.kind)),(0,a.zG)(this._params.feedManager.feed.get(),o.chain((({collection:e})=>this._findUphookItem(e))),o.map((e=>this._params.feedManager.focusCard(e.id)))))}))}_trackPremiumSuggestionsUphookAvailability(){return this._params.feedManager.feed.view(o.exists((e=>o.isSome(this._findUphookItem(e.collection))))).subscribe((e=>{var t,n;return null===(n=null===(t=this._params.uphookService)||void 0===t?void 0:t.notifyPremiumSuggestionsUphookAvailabilityChanged)||void 0===n?void 0:n.call(t,e)}))}_findUphookItem(e){return(0,a.zG)(Cn(e),"shortForm"===this._params.feedFormViewModel.state.get().feedForm?b.dF((e=>ii(e.content))):b.Ew((e=>ii(e.content))))}dispose(){this._subs.unsubscribe()}}var kl,Sl,wl,Cl,El,_l,Il,Al=n(69935),Ol=n(17343),Rl=n(36919),Bl=n(44212),Ml=n(17160),Fl=n(19429),Tl=n(81670),Pl=n(42040),Nl=n(46680),jl=n(32243);function Ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ll(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ul(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){var t;!function(e){!function(e){e.create=function(e){return e.toString()}}(e.Id||(e.Id={}))}(e.RawSduiItem||(e.RawSduiItem={})),function(e){e.Add="sdui_add",e.Remove="sdui_remove",e.Update="sdui_update"}(t=e.SduiEventKind||(e.SduiEventKind={})),e.isSduiEvent=function(e){return e.kind===t.Add||e.kind===t.Remove||e.kind===t.Update}}(kl||(kl={})),El=Sl||(Sl={}),(Cl=El.EmptyMessage||(El.EmptyMessage={})).fromItem=function(e){return e.alertIds,Ll(e,["alertIds"])},Cl.show={show:function(e){var t=e.sduiId,n=e.sduiRootId;return JSON.stringify({sduiId:t,sduiRootId:n})}},(El.EmptyItem||(El.EmptyItem={})).isRootItem=function(e){return e.sduiId===e.sduiRootId},function(e){e.fromSDUI=function(e){return function(i){return Es.reduce(i.content,(function(r,s){return(0,a.zG)(r,o.chain((function(t){return(0,a.zG)(s,Es.getAlertIds,o.chain(e),o.map(n(t)),o.alt((function(){return r})))})),o.alt((function(){return(0,a.zG)(s,Es.getAlertRefs,o.chain(t(i.id,e)))})))}),Es.TreeTraversal.PreOrder,o.none)}};var t=function(e,t){return function(i){return i.reduce((function(i,r){return(0,a.zG)(i,o.map((function(e){return(0,a.zG)(r.alertIds,t,o.fold((function(){return e}),n(e)))})),o.alt((function(){return o.some({emptyStrongAlertRef:r,sduiId:e,sduiRootId:e,alertIds:new Set((0,a.zG)(r.alertIds,t,o.getOrElse((0,a.a9)(fi.cS))))})})))}),o.none)}},n=(e.fromStrongAlertRef=function(e){return function(t,n){return(0,a.zG)(e(t.alertIds),o.map((function(e){return{sduiRootId:n,sduiId:_s.Item.Id.from(t.id),emptyStrongAlertRef:t,alertIds:new Set(e)}})))}},e.fromStrongAlertRefBehavior=function(e){return function(t,n,i){return(0,a.zG)(e(t.alertIds),o.map((function(e){return{sduiRootId:i,sduiId:n,emptyStrongAlertRef:t,alertIds:new Set(e)}})))}},e.show={show:function(e){return"StrAlertRef.Item: { sduiId: ".concat(e.sduiId,", sduiRootId: ").concat(e.sduiRootId,", alertIds: [").concat(Array.from(e.alertIds.values()).join(", "),"]}")}},e.addAlertIds=function(e){return function(t){return t.forEach((function(t){return e.alertIds.add(t)})),e}})}(_l=El.Item||(El.Item={})),function(e){e.iso=xn.k4(),e.empty=function(){return{alertRefMapping:new Map}},e.size=function(e){return e.alertRefMapping.size},e.show={show:function(e){return Array.from(e.alertRefMapping.entries()).map((function(e){var t=Gl(e,2),n=t[0],i=t[1];return"".concat(n,": [\n").concat(i.map(_l.show.show).join("\n"),"\n]")})).join("\n")}};var t=function(e){return function(t){return(0,a.zG)(t.alertRefMapping.get(e),o.fromNullable)}},n=(e.get=function(e){return function(n){return(0,a.zG)(t(e)(n),o.map(fi.UI((function(e){return Dl(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){zl(e,t,n[t])}))}return e}({},e),{alertIds:new Set(e.alertIds)})}))))}},e.updateWithRemovedAlerts=function(e){return function(n){return(0,a.zG)(e,b.tS((function(e){return(0,a.zG)(n,t(e),o.map(fi.hX((function(t){return t.alertIds.delete(e)&&0===t.alertIds.size}))),o.fold((function(){return[]}),(function(t){return n.alertRefMapping.delete(e),t.map(Sl.EmptyMessage.fromItem)})))})))}},e.add=function(e,t){return function(i){ts.isStrongAlertRefBehavior(e.emptyStrongAlertRef)?(0,a.zG)(_l.fromStrongAlertRefBehavior(t)(e.emptyStrongAlertRef,e.sduiId,e.sduiRootId),j.bw(n(i))):Es.forEach(e.emptyStrongAlertRef,(0,a.ls)(function(e,t){return function(n){return(0,a.zG)(n,Es.getAlertRefs,o.fold((0,a.a9)(b.cS),b.DZ((function(i){return ts.isStrongAlertRefBehavior(i)?_l.fromStrongAlertRefBehavior(t)(i,_s.Item.Id.from(n.id),e):_l.fromStrongAlertRef(t)(i,e)}))))}}(e.sduiRootId,t),fi.UI(n(i))),Es.TreeTraversal.PostOrder)}},function(e){var t=i(e);return function(e){e.alertIds.forEach((function(n){return t(n,[e])}))}}),i=function(e){return function(t,n){var i=e.alertRefMapping.get(t);e.alertRefMapping.set(t,null!=i?i.concat(n):n)}};e.remove=function(e){return function(n){return(0,a.zG)(Array.from(e.alertIds.keys()),fi.u4(new Array,(function(r,s){return(0,a.zG)(n,t(s),o.map(fi.hX((function(t){return t.sduiRootId!==e.sduiRootId}))),o.fold((function(){r.push("failed to remove SDUI by alertId ".concat(s,", alertRefMapping doesn't contain alertId ").concat(s))}),(function(e){return function(e){return function(t,n){0===n.length?e.alertRefMapping.delete(t):i(e)(t,n)}}(n)(s,e)}))),r})))}}}(Il||(Il={})),(wl=El.Collection||(El.Collection={})).empty=function(){return Il.iso.wrap(Il.empty())},wl.size=function(e){return(0,a.zG)(Il.iso.unwrap(e),Il.size)},wl.show={show:function(e){return(0,a.zG)(Il.iso.unwrap(e),Il.show.show)}},wl.get=function(e){return function(t){return(0,a.zG)(Il.iso.unwrap(t),Il.get(e))}},wl.add=function(e,t){return function(n){return(0,a.zG)(Il.iso.unwrap(n),Il.add(e,t))}},wl.remove=function(e){return function(t){return(0,a.zG)(Il.iso.unwrap(e),Il.remove(t))}},wl.updateWithRemovedAlerts=function(e){return function(t){return(0,a.zG)(Il.iso.unwrap(t),Il.updateWithRemovedAlerts(e))}};var Kl=(0,a.ls)(fi.UI(_s.AlertId.from),o.some),Wl=function(e,t,n,i,r,s,l,u){var d=e.pipe(At.M(n),T.b((function(e){var t=$l(e,1),n=$l(t[0],2),i=n[0],r=n[1];l.trace("[Optimistic update] emptyAlertsRefReasonTuple > Removed alerts. Reason: ".concat(r,", removedAlertIds: [").concat(i.join(", "),"]"))})),I.U((function(e){var t=$l(e,2),n=$l(t[0],2),i=n[0],r=n[1],o=t[1];return[(0,a.zG)(o,ql(l),Sl.Collection.updateWithRemovedAlerts(i)),r]})),T.b((function(e){var t=$l(e,2),n=t[0],i=t[1];return l.trace("[Optimistic update] emptyAlertsRefReasonTuple > Reason: ".concat(i," found emptyAlertsRef: [").concat(n.map(Sl.EmptyMessage.show.show).join(", "),"]"))})),c.w((function(e){var t=$l(e,2),n=t[0],i=t[1];return(0,a.zG)(n,b.UI((function(e){return[e,i]})),(function(e){return N.D(e)}))})),yn.B()),m=d.pipe(_.h((function(e){var t=$l(e,1)[0];return Sl.EmptyItem.isRootItem(t)})),I.U((function(e){var t=$l(e,2),n=t[0],i=t[1];return Ql.toRemovedEvent(i)(kl.RawSduiItem.Id.create(n.sduiRootId))}))),p=t.pipe(I.U((function(e){var t=$l(e,2),n=t[0],i=t[1];return Ql.toRemovedEvent(i)(kl.RawSduiItem.Id.create(n))}))),h=mn.T(m,p),f=d.pipe(_.h((function(e){var t=$l(e,1)[0];return!Sl.EmptyItem.isRootItem(t)})),At.M(n),I.U((function(e){var t=$l(e,2),n=$l(t[0],2),i=n[0],r=n[1],s=t[1],l=kl.RawSduiItem.Id.create(i.sduiRootId);return(0,a.zG)(Ys.get(_s.Item.Id.from(i.sduiRootId))(s),o.chain((function(e){return Es.removeStrongAlertRef(e.content)([i.emptyStrongAlertRef])})),o.fold((function(){return Ql.toRemovedEvent(r)(kl.RawSduiItem.Id.create(i.sduiRootId))}),(function(e){return Ql.toUpdatedEvent(r)(e,l)})))}))),g=i.pipe(Rl.f(u),_.h(fi.Od),I.U((0,a.ls)(y.vM((function(e){return e.sduiRootId})),jl.AO,b.UI((function(e){var t=$l(e,2),n=t[0],i=t[1];return i.forEach((function(e){return r.switchView(e)})),Jl.of(n,"switchView")(o.chain((function(e){return(0,a.zG)(Es.bulkSwitchView(e,i.map((function(e){return{where:e.where,selected:e.selected,type:"switchView"}}))),o.some)})))}))))),v=vt.aj([r.activePopoverView,n.pipe(I.U(Ys.sduiRoots()))]).pipe(I.U((function(e){var t=$l(e,2),n=t[0];return t[1].map((function(e){return Jl.of(e,"switchView")(o.chain((function(e){return Es.setPopoverView(e,n)})))}))}))),x=s.globalPartsAvailable.pipe(_.h(a.yR),c.w((function(){return n})),I.U(Ys.sduiRoots()),I.U((function(e){return e.map((function(e){return Jl.of(e,"capi")(o.chain((function(e){return Es.setGlobalPartPlaceholderContent(e,s.getGlobalPartById)})))}))})));return{emptyAlertsRefReasonTuple:d,optimisticRemoveSDUIEvent:h,emptyStrongAlertRefUpdate:f,viewStackUpdates:g,activePopoverUpdates:v,globalPartPlaceholderUpdates:x}};function ql(e){return Ys.reduce(Sl.Collection.empty(),(function(t,n){return(0,a.zG)(Sl.Item.fromSDUI(Kl)(n),o.fold((function(){return e.trace("SDUI item ".concat(_s.Item.show.show(n)," does not contain AlertRef, skipping it"))}),(function(e){return Sl.Collection.add(e,Kl)(t)})),(function(e){return t}))}))}var Ql,Yl,Jl,Xl,ec,tc,nc=function(e){return e.kind==kl.SduiEventKind.Update},ic=function(e){return e.kind==kl.SduiEventKind.Remove};function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.fromSource=function(e){return function(t){return Vl(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Hl(e,t,n[t])}))}return e}({},t),{source:e})}},e.toRemovedEvent=function(e){return function(t){return{kind:kl.SduiEventKind.Remove,sduiRootId:t,source:e,rev:0}}},e.toUpdatedEvent=function(e){return function(t,n){return{kind:kl.SduiEventKind.Update,sdui:t,sduiRootId:n,source:e,rev:0}}},e.show={show:function(e){return"SduiRootId: ".concat(e.sduiRootId,", Kind: ").concat(e.kind,", Source: ").concat(e.source)}}}(Ql||(Ql={})),function(e){e.CAPI="capi",e.TextChange="textChange",e.RemoveAlertsSDUIAction="removeAlerts",e.RemoveRootSDUIAction="removeRoot",e.RemoveDuplicate="removeDuplicate",e.SwitchView="switchView"}(Yl||(Yl={})),function(e){e.of=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(i){return{kind:"sdui_lazy_update",toContent:i,sduiRootId:_s.Item.Id.from(e),rev:n,source:t}}}}(Jl||(Jl={})),(ec=Xl||(Xl={})).iso=function(){return xn.k4()},ec.empty=function(){return{sduiQueue:new Map}},ec.removeAllBySduiId=function(e){return function(t){return(0,a.zG)(Xl.toQueueValuesArray(t),fi.hX((function(t){return 0===t.id.indexOf("".concat(e.event.sduiRootId,"_"))})),(function(e){return Xl.removeItems(e)(t),e}))}},ec.removeEarlierItemsBySduiId=function(e){return function(t){return(0,a.zG)(Xl.toQueueValuesArray(t),fi.hX((function(t){return 0===t.id.indexOf("".concat(e.event.sduiRootId,"_"))&&t.order<e.order})),(function(e){return Xl.removeItems(e)(t),e}))}},ec.addItem=function(e){return function(t){t.sduiQueue.set(e.id,e)}},ec.removeItems=function(e){return function(t){e.forEach((function(e){return t.sduiQueue.delete(e.id)}))}},ec.toQueueValuesArray=function(e){return Array.from(e.sduiQueue.values())},function(e){var t,n,i,r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i=0,(n="QueueCounter")in(t=r)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i;e.show={show:function(e){return Array.from(Xl.iso().unwrap(e).sduiQueue.entries()).map((function(e){var t=oc(e,2),n=t[0],i=t[1];return"".concat(n," - { id: ").concat(i.id," sduiRootId: ").concat(i.event.sduiRootId,", kind: ").concat(i.event.kind)})).join(";\n")}};!function(e){var t;!function(e){e.from=function(e){return"".concat(e)}}(t=e.Id||(e.Id={}));e.fromEvent=function(e){return{id:t.from("".concat(e.sduiRootId,"_").concat(++r.QueueCounter)),order:r.QueueCounter,event:e}}}(e.Item||(e.Item={}));e.empty=function(){return Xl.iso().wrap(Xl.empty())},e.removeAllBySduiId=function(e){return function(t){return(0,a.zG)(Xl.iso().unwrap(t),Xl.removeAllBySduiId(e))}},e.addItem=function(e){return function(t){return(0,a.zG)(Xl.iso().unwrap(t),Xl.addItem(e))}},e.removeItems=function(e){return function(t){return(0,a.zG)(Xl.iso().unwrap(t),Xl.removeItems(e))}},e.removeEarlierItemsBySduiId=function(e){return function(t){return(0,a.zG)(Xl.iso().unwrap(t),Xl.removeEarlierItemsBySduiId(e))}},e.toQueueValuesArray=function(e){return(0,a.zG)(Xl.iso().unwrap(e),Xl.toQueueValuesArray)}}(tc||(tc={}));var ac=n(77843);function sc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lc(this,"activePopoverStack",void 0),lc(this,"activePopoverView",void 0),lc(this,"_state",void 0),this._state=p.h.create({dsl:o.none,revision:-1}),this.activePopoverStack=this._state.view("dsl"),this.activePopoverView=this.activePopoverStack.view(o.chain((function(e){return o.fromNullable(e.views[e.selected])})))}var t,n,i;return t=e,(n=[{key:"getInteractionActions",value:function(e,t,n){return(0,a.zG)(this._state.get(),(function(e){return e.dsl}),o.filter((function(n){return n.id===e&&n.selected===t})),o.map((function(e){return e.views[e.selected]})),o.fold((function(){return[]}),(function(e){switch(n){case Pn.Fulfill:return e.onFulfill||[];case Pn.Dismiss:return e.onDismiss||[];default:(0,m.L0)(n)}})))}},{key:"addPopover",value:function(e,t){this._state.modify((function(n){var i=void 0!==t&&n.revision>t,r=void 0!==t&&n.revision===t,s=(0,a.zG)(n.dsl,o.exists((function(t){return t.id===e.id}))),l=!o.isNone(n.dsl);return i||s||r&&l?n:{dsl:o.some(e),revision:null!=t?t:n.revision}}))}},{key:"removePopover",value:function(e,t){this._state.modify((function(n){var i=void 0!==t&&n.revision>t,r=(0,a.zG)(n.dsl,o.exists((function(t){return t.id===e})));return i||!r?n:{dsl:o.none,revision:null!=t?t:n.revision}}))}},{key:"switchView",value:function(e){this._state.modify((function(t){return(0,a.zG)(t.dsl,o.filter((function(t){return t.id===e.sduiRootId})),o.map((function(t){return Es.bulkSwitchView(t,[{where:e.where,selected:e.selected,type:"switchView"}])})),o.filter((function(e){return"popoverStack"===e.type})),o.fold((function(){return t}),(function(e){return{dsl:o.some(e),revision:t.revision}})))}))}}])&&sc(t.prototype,n),i&&sc(t,i),e}();function uc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mc,pc=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dc(this,"_globalPartsState",p.h.create(new Map)),dc(this,"_subs",new E.w.Keeper),dc(this,"globalPartsAvailable",this._globalPartsState.view((function(e){return 0!==e.size}))),dc(this,"getGlobalPartById",(function(e){return o.fromNullable(n._globalPartsState.get().get(_s.Item.Id.from(e)))})),this._subs.push(t.pipe(I.U((function(e){return Ys.reduce(new Map,(function(e,t){return"globalPart"===t.content.type&&e.set(t.id,t.content),e}))(e)}))).subscribe(d.wW(this._globalPartsState)))}var t,n,i;return t=e,(n=[{key:"dispose",value:function(){this._subs.dispose()}}])&&uc(t.prototype,n),i&&uc(t,i),e}();function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){vc(e,t,n[t])}))}return e}function yc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function xc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.create=function(e,t){return{card:e,parentStrongAlertRef:t}},e.isAssistantCardContent=function(e){return"assistantCard"===e.card.type},e.isInlineCardContent=function(e){return"inlineCard"===e.card.type}}(mc||(mc={}));var kc,Sc,wc=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cc,r=this;fc(this,e),vc(this,"alertIdResolver",void 0),vc(this,"popoverManager",void 0),vc(this,"_state",void 0),vc(this,"state",void 0),vc(this,"globalPartManager",void 0),vc(this,"_onAlertsRefEmpty",void 0),vc(this,"_removedAlerts",void 0),vc(this,"_removedRoot",void 0),vc(this,"_switchView",void 0),vc(this,"_sessionEvents",void 0),vc(this,"_reviseSduiQueue",void 0),vc(this,"_flush",void 0),vc(this,"_flushViewSwitch",void 0),vc(this,"_subs",void 0),vc(this,"_log",void 0),vc(this,"loadItems",void 0),vc(this,"_arrayToDiff",void 0),vc(this,"findFirstCardWithContent",void 0),vc(this,"notifyAlertsChanged",void 0),vc(this,"onSessionStarted",void 0),vc(this,"onFirstCheckingFinished",void 0),vc(this,"_processEvents",void 0),vc(this,"_getAllAlertsIdsFromEvent",void 0),vc(this,"_getAlertsIdsFromAlertRef",void 0),vc(this,"_getAlertsIdsFromDSL",void 0),vc(this,"_resolveAlertIds",void 0),vc(this,"_hasAllAlerts",void 0),vc(this,"_toInternalDiff",void 0),vc(this,"_preserveViewStackForCAPIUpdates",void 0),vc(this,"_normalizeSDUIEvents",void 0),vc(this,"_toSDUIItem",void 0),vc(this,"_emitDomainEvent",void 0),vc(this,"_debugLogState",void 0),vc(this,"_getBufferObs",void 0),this.alertIdResolver=n,this.popoverManager=i,this._state=p.h.create(Qs.empty),this.state=this._state.view((function(e){return Qs.iso.wrap(e)})),this.globalPartManager=new pc(this.state),this._onAlertsRefEmpty=new s.xQ,this._removedAlerts=new s.xQ,this._removedRoot=new s.xQ,this._switchView=new s.xQ,this._sessionEvents=new s.xQ,this._reviseSduiQueue=new s.xQ,this._flush=new s.xQ,this._flushViewSwitch=new s.xQ,this._subs=new E.w.Keeper,this._log=Pl.C8.Logging.getLogger("SDUIManager",Nl.i.TRACE,Nl.T.Manager.getColor()),this.loadItems=function(e){var t=(0,a.zG)(e,b.uK((function(e){return"popoverStack"===e.content.type}))),n=t.right,i=t.left;n.forEach((function(e){var t=e.content;"popoverStack"===t.type&&r.popoverManager.addPopover(t)})),(0,a.zG)(i,b.UI((function(e){return yc(bc({},e),{invalid:!0})})),r._arrayToDiff,Qs.applyDiff,Fl.UI(Tl.T.recover((function(e){return r._log.debug("conflicts on diff apply",e)}))),(function(e){return r._state.modify(e)}))},this._arrayToDiff=function(e){return kn.v.fromMutation((function(t){return b.UI((function(e){t.set(e.id,Js.F2(e))}))(e)}))},this.findFirstCardWithContent=function(e){return(0,a.zG)(r.state.get(),Ys.get(e),o.map((function(e){var t=e.content;return Es.reduce(t,(function(e,t){return(0,a.zG)(e,v.fold((function(e){return"strongAlertRef"===t.type?v.left(o.some(t)):"assistantCard"===t.type||"inlineCard"===t.type?v.right(mc.create(t,e)):v.left(e)}),v.right))}),Es.TreeTraversal.PreOrder,v.left(o.none))})),o.chain(o.fromEither))},this.notifyAlertsChanged=function(){return r._reviseSduiQueue.next()},this.onSessionStarted=function(){return r._sessionEvents.next(Sc.Start)},this.onFirstCheckingFinished=function(){return r._sessionEvents.next(Sc.FirstCheckingFinished)},this._processEvents=function(e){return function(t,n){var i=(0,a.zG)(n,v.fold((function(n){return(0,a.zG)(tc.toQueueValuesArray(t),fi.hX(e))}),(function(n){if(n.kind===kl.SduiEventKind.Remove){r._log.debug("[IN - ".concat(n.kind,", {id: ").concat(n.sduiRootId,"}] removeAllBySduiId"));var i=tc.Item.fromEvent(n);return tc.removeAllBySduiId(i)(t),[i]}var o=tc.Item.fromEvent(n);return e(o)?(r._log.debug("[IN - ".concat(o.event.kind," {sduiRootId: ").concat(o.event.sduiRootId,", id: ").concat(o.id," refs: ").concat(JSON.stringify(Es.getAlertIds(o.event.sdui)),"}, ] hasAllAlerts")),[o]):(tc.addItem(o)(t),r._log.debug("[IN - ".concat(o.event.kind," {sduiRootId: ").concat(o.event.sduiRootId,", id: ").concat(o.id," refs: ").concat(JSON.stringify(Es.getAlertIds(o.event.sdui)),"}] add to queue, [queue]: ").concat(tc.show.show(t))),[])})),(function(e){return r._log.debug("[completeItems] ".concat(e.map((function(e){return e.id})).join(", "),", [queue]: ").concat(tc.show.show(t))),tc.removeItems(e)(t),e.forEach((function(e){return tc.removeEarlierItemsBySduiId(e)(t)})),e}),fi.UI(hi.ei("event")));return yc(bc({},t),{completeEvents:i})}},this._getAllAlertsIdsFromEvent=function(e,t){return(0,a.ls)((function(e){return e.sdui}),r._getAlertsIdsFromDSL(e,t))},this._getAlertsIdsFromAlertRef=function(e,t){return function(n){return(0,a.zG)(n,Es.getAlertIds,j.ew((function(){return t===kc.Silent?{}:r._log.debug("Provided SDUI dsl doesn't contain alertIds array. StrongAlertRef: ".concat(JSON.stringify({id:n.id,type:n.type,name:n.name,alertIds:n.alertIds})))})),o.fold((function(){return[]}),a.yR),r._resolveAlertIds(e,t))}},this._getAlertsIdsFromDSL=function(e,t){return function(n){return(0,a.zG)(n,Es.getAllAlertIds,(function(e){return Array.from(new Set(e))}),(function(e){return b.xb(e)?(r._log.trace("Provided SDUI dsl doesn't contain any alertIds references. DSL id: ".concat(n.id)),e):e}),r._resolveAlertIds(e,t))}},this._resolveAlertIds=function(e,t){return function(n){return(0,a.zG)(n,b.UI((function(n){return(0,a.zG)(_s.AlertId.from(n),e,j.ew((function(){return t===kc.Silent?{}:r._log.error("Alert with raw id ".concat(n,", can not be found. It was either deleted or was not added yet."))})))})),b.vP(o.option))}},this._hasAllAlerts=function(e,t){return(0,a.ls)(r._getAllAlertsIdsFromEvent(e,t),o.isSome)},this._toInternalDiff=function(e){return function(t){var n=xc(t,2),i=n[0],s=n[1],l=Qs.MutableInternalDiff.empty();return(0,a.zG)(i,y.u4(l,(function(t,n){return n.kind===kl.SduiEventKind.Remove?r._handleSDUIRemove(n,s,t):(0,a.zG)(r._getAllAlertsIdsFromEvent(e,kc.Silent)(n),o.map(r._toSDUIItem(n)),o.fold((function(){return r._log.trace(Cc.internalDiffParsingError([Es.getAllAlertIds(n.sdui).join(", "),n.sduiRootId]))}),(function(e){var i=n.kind;switch(i){case kl.SduiEventKind.Add:r._handleSDUIAdd(e,n.rev,s,t);break;case kl.SduiEventKind.Update:r._handleSDUIUpdate(e,s,t);break;default:(0,m.vE)(i)}})),(function(e){return t}))})))}},this._preserveViewStackForCAPIUpdates=function(e){return(0,a.zG)(e,y.UI((function(e){return e.kind!==kl.SduiEventKind.Update||e.source!==Yl.CAPI?e:Jl.of(e.sduiRootId,e.source,e.rev)(o.fold((function(){return o.some(e.sdui)}),(0,a.ls)(Es.toContentMap,(function(t){return(0,a.zG)(t,Object.values,fi.DZ((function(e){var t=e.content;return"viewStack"===t.type?o.some({type:"switchView",where:t.id,selected:t.selected}):o.none})),(function(n){return Es.bulkSwitchView(e.sdui,n,t)}))}),o.some)))})))},this._normalizeSDUIEvents=function(e){var t=xc(e,2),n=t[0],i=t[1];return(0,a.zG)(n,b.DZ((function(e){return"sdui_lazy_update"!==e.kind?o.some(e):r._handleSDUILazyUpdate(e,i)})))},this._toSDUIItem=function(e){return function(t){return{id:_s.Item.Id.from(e.sduiRootId),content:e.sdui,alertIds:t}}},this._emitDomainEvent=function(e){r._log.debug("internalDiff",Qs.InternalDiff.show.show(e)),(0,a.zG)(e,Qs.createDiff,Tl.T.recover((function(e){return r._log.debug("conflicts on diff creating",e)})),(function(e){return r._log.debug("SDUIItemsCollectionDiff",Qs.diffShow.show(e)),e}),Qs.applyDiff,Fl.UI(Tl.T.recover((function(e){return r._log.debug("conflicts on diff apply",e)}))),(function(e){return r._state.modify(e)}))},this._debugLogState=function(e){return r._log.debug("[SDUIManagerState] (SDUIItemsCollection)","_latestChangeDiff: ".concat(Qs.diffShow.show(e.latestChangeDiff),",\n _entriesIds: ").concat(Qs.InternalDiff.showMapKeys.show(e.entries),"}"))},this._getBufferObs=function(){return{bufferObsForSDUIEvents:mn.T(ac.F(100).pipe(dt.O(0)),r._flush),bufferObsForViewSwitchEvents:mn.T(ac.F(100).pipe(dt.O(0)),r._flushViewSwitch)}},this._subs.push(this.globalPartManager);var l=t.pipe(I.U(Ql.fromSource(Yl.CAPI))),c=this._getBufferObs(),u=c.bufferObsForSDUIEvents,d=c.bufferObsForViewSwitchEvents,h=Wl(this._removedAlerts.asObservable(),this._removedRoot.asObservable(),this.state,this._switchView.asObservable(),this.popoverManager,this.globalPartManager,this._log,d),f=h.emptyAlertsRefReasonTuple,g=h.optimisticRemoveSDUIEvent,x=h.emptyStrongAlertRefUpdate,k=h.viewStackUpdates,S=h.activePopoverUpdates,w=h.globalPartPlaceholderUpdates,C=mn.T(l,g,x).pipe(T.b((function(e){return r._log.debug("Received SDUI event: ".concat(Ql.show.show(e)," from: ").concat(e.source))})),tl.R((function(e,t){var n=t.source;switch(n){case Yl.RemoveAlertsSDUIAction:case Yl.RemoveRootSDUIAction:case Yl.RemoveDuplicate:case Yl.TextChange:return t.kind===kl.SduiEventKind.Remove&&e.optRemovedSDUIRootIds.add(t.sduiRootId),yc(bc({},e),{event:o.some(t)});case Yl.CAPI:return(0,a.zG)(t,o.fromPredicate((function(t){return e.optRemovedSDUIRootIds.has(t.sduiRootId)})),j.bw((function(t){return e.optRemovedSDUIRootIds.delete(t.sduiRootId)})),o.chain(o.fromPredicate((0,z.Kg)(nc,ic))),o.fold((function(){return yc(bc({},e),{event:o.some(t)})}),(function(t){return t.kind===kl.SduiEventKind.Remove?yc(bc({},e),{event:o.none}):yc(bc({},e),{event:o.some(yc(bc({},t),{kind:kl.SduiEventKind.Add}))})})));case Yl.SwitchView:return yc(bc({},e),{event:o.some(t)});default:(0,m.vE)(n)}}),{optRemovedSDUIRootIds:new Set,event:o.none}),I.U(hi.ei("event")),M.oA,I.U(v.right)),A=(0,a.ls)(hi.ei("event"),this._hasAllAlerts(this.alertIdResolver,kc.Silent)),O=mn.T(C,this._reviseSduiQueue.pipe(I.U(v.left))).pipe(tl.R(this._processEvents(A),yc(bc({},tc.empty()),{completeEvents:[]})),I.U(hi.ei("completeEvents"))),R=mn.T(O,k,S,w).pipe(Rl.f(u),I.U((function(e){return b.xH(e)})),_.h(b.Od)),B=R.pipe(I.U(this._preserveViewStackForCAPIUpdates),At.M(this._state),I.U(this._normalizeSDUIEvents),_.h(b.Od)),F=this._sessionEvents.pipe(_.h((function(e){return e===Sc.Start})),At.M(this._state),I.U((function(e){var t=xc(e,2);t[0];return t[1]})),_.h((function(e){return e.entries.size>0})),I.U(Qs.MutableInternalDiff.fromState((function(e,t){var n=yc(bc({},t),{invalid:!0});return _s.Item.eq.equals(t,n)||e.updated.set(t.id,[t,n]),e})))),P=this._sessionEvents.pipe(_.h((function(e){return e===Sc.FirstCheckingFinished})),At.M(this._state),I.U((function(e){var t=xc(e,2);t[0];return t[1]})),_.h((function(e){return e.entries.size>0})),I.U(Qs.MutableInternalDiff.fromState((function(e,t){var n;return null!==(n=t.invalid)&&void 0!==n&&n&&e.removed.set(t.id,t),e})))),N=mn.T(F,P);this._subs.push(this._state.pipe(T.b(this._debugLogState)).subscribe(),f.subscribe((function(e){var t=xc(e,1)[0];return r._onAlertsRefEmpty.next(t)})),B.pipe(At.M(this._state),I.U(this._toInternalDiff(this.alertIdResolver)),_.h((0,a.ff)(Qs.InternalDiff.isEmpty)),I.U(this._emitDomainEvent)).subscribe(),N.subscribe(this._emitDomainEvent))}var t,n,i;return t=e,n=[{key:"onAlertsRefEmpty",get:function(){return this._onAlertsRefEmpty.asObservable()}},{key:"pushRemovedRoot",value:function(e){this._removedRoot.next(e)}},{key:"pushRemovedAlerts",value:function(e){this._removedAlerts.next(e)}},{key:"pushSwitchView",value:function(e){this._switchView.next(e)}},{key:"flush",value:function(){this._flush.next(),this._flushViewSwitch.next(),this._flush.next()}},{key:"resolveStrongAlertRefAlerts",value:function(e){var t=this;return(0,a.zG)(this._getAlertsIdsFromAlertRef(this.alertIdResolver,kc.Error)(e),j.ew((function(){return t._log.debug("Alert ids from the provided component were not removed, because AlertIds for the provided DSL was not resolved. SDUI content ".concat(JSON.stringify({id:e.id,type:e.type,name:e.name,alertIds:e.alertIds})))})))}},{key:"_handleSDUIAdd",value:function(e,t,n,i){var r=this;return"popoverStack"===e.content.type?(this.popoverManager.addPopover(e.content,t),Qs.MutableInternalDiff.empty()):((0,a.zG)(n,Qs.get(e.id),o.fold((function(){if((0,m.kG)(!i.updated.has(e.id),"SDUI item can not be in the diff.updated until it gets to the collection",(function(){return Qs.InternalDiff.show.show(i)+Qs.diffShow.show(Qs.diff(Qs.empty,n))})),i.removed.has(e.id))return r._log.trace(Cc.actionOnRemovedItem([e.id,"added"]));i.added.set(e.id,e)}),(function(t){if((0,m.kG)(!i.added.has(e.id),"SDUI item can not be in the diff.added when it is already in the collection",(function(){return Qs.InternalDiff.show.show(i)+Qs.diffShow.show(Qs.diff(Qs.empty,n))})),i.removed.has(e.id))return r._log.trace(Cc.actionOnRemovedItem([e.id,"added"]));i.updated.set(e.id,[t,e])}))),i)}},{key:"_handleSDUIUpdate",value:function(e,t,n){var i=this;return(0,a.zG)(t,Qs.get(e.id),o.fold((function(){return(0,m.kG)(!n.updated.has(e.id),"SDUI item can not be in the diff.updated until it gets to the collection"+Qs.InternalDiff.show.show(n)+Qs.diffShow.show(Qs.diff(Qs.empty,t))),n.removed.has(e.id)?i._log.trace(Cc.actionOnRemovedItem([e.id,"updated"])):n.added.has(e.id)?(i._log.trace(Cc.updateIdMissingFound([e.id])),void n.added.set(e.id,e)):i._log.error(Cc.updateIdMissingNotFound([e.id]))}),(function(r){return(0,m.kG)(!n.added.has(e.id),"SDUI item can not be in the diff.added when it is already in the collection"+Qs.InternalDiff.show.show(n)+Qs.diffShow.show(Qs.diff(Qs.empty,t))),n.removed.has(e.id)?i._log.trace(Cc.actionOnRemovedItem([e.id,"update"])):_s.Item.eq.equals(r,e)?i._log.trace(Cc.updateItemsAreEqual([e.id])):void n.updated.set(e.id,[r,e])}))),n}},{key:"_handleSDUIRemove",value:function(e,t,n){var i=this,r=_s.Item.Id.from(e.sduiRootId);return this.popoverManager.removePopover(r,e.rev),(0,a.zG)(t,Qs.get(r),o.fold((function(){if((0,m.kG)(!n.updated.has(r),"SDUI item can not be in the diff.updated until it gets to the collection"+Qs.InternalDiff.show.show(n)+Qs.diffShow.show(Qs.diff(Qs.empty,t))),!n.added.has(r))return i._log.trace(Cc.removeIdMissingNotFound([r]));i._log.trace(Cc.removeIdMissingFound([r])),n.added.delete(r)}),(function(e){(0,m.kG)(!n.added.has(e.id),"SDUI item can not be in the diff.added when it is already in the collection"+Qs.InternalDiff.show.show(n)+Qs.diffShow.show(Qs.diff(Qs.empty,t))),n.updated.delete(r)?i._log.trace(Cc.idRemovedFrom([r,"diff.updated"])):(0,a.Q1)(),n.removed.set(r,e)}))),n}},{key:"_handleSDUILazyUpdate",value:function(e,t){var n=this;return(0,a.zG)(t,Qs.get(e.sduiRootId),j.ew((function(){return n._log.trace("SDUI Item with sduiRootId ".concat(e.sduiRootId,"  was not found"))})),o.fold((function(){return e.toContent(o.none)}),(function(t){var i=t.content;return(0,a.zG)(e.toContent(o.some(i)),o.filter((function(e){return!Es.eq.equals(e,i)})),j.ew((function(){return n._log.trace("SDUI Update event ".concat(JSON.stringify(e)," will be skipped, because the new DSL is the same as an old one"))})))})),o.map((function(t){return{kind:kl.SduiEventKind.Update,sdui:t,sduiRootId:kl.RawSduiItem.Id.create(e.sduiRootId),rev:e.rev,source:e.source}})))}},{key:"dispose",value:function(){this._subs.dispose()}}],n&&gc(t.prototype,n),i&&gc(t,i),e}(),Cc={removeIdMissingFound:function(e){var t=xc(e,1)[0];return"[Remove] SDUI item with ID ".concat(t," was found in the added messages. Removing it.")},removeIdMissingNotFound:function(e){var t=xc(e,1)[0];return"[Remove] It is not possible to remove SDUI item with ID ".concat(t,". It is missing from SDUIItemsCollectionInternal and diff.add, probably it was deleted earlier. Skipping the message")},idRemovedFrom:function(e){var t=xc(e,2),n=t[0],i=t[1];return"[Remove] SDUI item with ID ".concat(n," is going to be removed. ").concat(i," contains the item with ID ").concat(n," too. Remove ").concat(n," from ").concat(i)},actionOnRemovedItem:function(e){var t=xc(e,2),n=t[0],i=t[1];return"[".concat(i,"] It is not possible to ").concat(i," SDUI item with ID ").concat(n,". Because it was already removed. Skipping the ").concat(i,".")},viewStackUpdateIdMissing:function(e){var t=xc(e,1)[0];return"[ViewStackUpdate] SDUI item with ID ".concat(t," was found. Skipping the update.")},updateIdMissingFound:function(e){var t=xc(e,1)[0];return"[Update] SDUI item with ID ".concat(t," was found in added messages. Updating it in added messages")},updateIdMissingNotFound:function(e){var t=xc(e,1)[0];return"[Update] It is not possible to update SDUI item with ID ".concat(t,". It is missing from SDUIItemsCollectionInternal and diff.added, probably it was deleted earlier. Skipping the message")},updateItemsAreEqual:function(e){var t=xc(e,1)[0];return"[Update] Received sdui item (sduiId: ".concat(t,") is the same as in the state. Skipping the update message")},internalDiffMissingAlertsIds:function(){return"missing AlertIDs"},internalDiffParsingError:function(e){var t=xc(e,2),n=t[0],i=t[1];return"toInternalDiff, either can not resolve ".concat(n," for ").concat(i," or id of the sdui item is missing . The item will be skipped")}};!function(e){e.Silent="Silent",e.Error="Error"}(kc||(kc={})),function(e){e.Start="Start",e.FirstCheckingFinished="FirstCheckingFinished"}(Sc||(Sc={}));var Ec=n(71078),_c=n(19125);class Ic{constructor(e){this._logService=e,this._logger=this._logService.getLogger(Ic.name),this._alertIds=new Set}hasAlert(e){return this._alertIds.has(e)}processChanges(e){for(const t of e)(0,Ec.BG)(t)?this._alertIds.add(t.alertId):(0,Ec.nq)(t)?this._alertIds.delete(t.alertId):(0,m.L0)(t);e.length>0&&this._logger.debug("Alert collection change.",new Set(this._alertIds))}}class Ac{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(Ac.name),this._longFormCardMessageCount=0,this._sduiEvents=new s.xQ,this._alertCollection=new Ic(this._params.logService),this._sduiManager=p.h.create(new wc(this._sduiEvents.asObservable(),o.fromPredicate((e=>this._alertCollection.hasAlert(e))))),this._state=p.h.create(this._sduiManager.get().state.get()),this._sduiReset=new s.xQ,this.sduiReset=this._sduiReset.asObservable(),this.state=this._state.view(),this.onAlertsRefEmpty=(0,a.zG)(this._sduiManager.view((e=>e.onAlertsRefEmpty)),Al.B()),this.sduiEventsSettled=this._sduiEvents.pipe(dt.O(null),c.w((()=>O.timer(500).pipe(Ol.h(!0),dt.O(!1)))),S.x(),O.shareReplay({bufferSize:1,refCount:!1})),this._subs.add(this._processAlertChanges()),this._subs.add(this._processInboundSDUIMessages()),this._subs.add(this._sduiManager.pipe(c.w((e=>e.state))).subscribe(d.wW(this._state))),this._subs.add(this._sduiEvents.pipe(Rl.f(this._sduiEvents.pipe(Nt.b(0)))).subscribe((e=>{const t=e.filter((e=>e.kind===kl.SduiEventKind.Add)),n=e.filter((e=>e.kind===kl.SduiEventKind.Update)),i=e.filter((e=>e.kind===kl.SduiEventKind.Remove));(t.length>0||n.length>0||i.length>0)&&this._logger.debug(`Received SDUI events - insertions: [${t.map((e=>e.sduiRootId)).join(",")}] - updates: [${n.map((e=>e.sduiRootId)).join(",")}] - removals: [${i.map((e=>e.sduiRootId)).join(",")}]`)})))}pushRemovedRoot(e){this._sduiManager.get().pushRemovedRoot(e),this._sduiManager.get().flush()}pushRemovedAlerts([e,t]){this._sduiManager.get().pushRemovedAlerts([e,t])}pushSwitchView(e){this._sduiManager.get().pushSwitchView(e)}dispose(){this._subs.unsubscribe(),this._sduiManager.get().dispose()}_parseSDUIMessage(e){const t=null!=e&&"object"==typeof e&&"behaviors"in e&&"type"in e&&"longFormCard"===e.type,n=!t||this._longFormCardMessageCount%100==0;return t&&this._longFormCardMessageCount++,n?Es.dslRootParser(e):v.right(e)}_processInboundSDUIMessages(){var e;const t=e=>(0,a.zG)(this._parseSDUIMessage(e.sdui),v.mapLeft((t=>(this._params.monitoringService.notify((0,ne.L)(function(e){return{kind:"error",source:"revision",name:"sduiDSLParseFailed",data:e}}({sduiRootId:e.sduiRootId,reason:(0,be.N)(t).message}))),t))),o.fromEither);return N.D(this._params.sduiItemCollectionChanges).pipe(Bl.u(),_.h(Oc),I.U((e=>(0,_c.tC)(e)?(0,a.zG)(e,t,o.map((t=>({kind:kl.SduiEventKind.Add,sdui:t,sduiRootId:kl.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,_c.Y9)(e)?(0,a.zG)(e,t,o.map((t=>({kind:kl.SduiEventKind.Update,sdui:t,sduiRootId:kl.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,_c.zi)(e)?o.some({kind:kl.SduiEventKind.Remove,sduiRootId:kl.RawSduiItem.Id.create(e.sduiRootId),rev:0}):(0,_c.Zb)(e)?(this._sduiReset.next(void 0),this._sduiManager.modify((e=>(e.dispose(),new wc(this._sduiEvents.asObservable(),o.fromPredicate((e=>this._alertCollection.hasAlert(e))))))),o.none):void(0,m.L0)(e))),M.oA,null!==(e=this._params.sduiEventTransformer)&&void 0!==e?e:a.yR).subscribe(this._sduiEvents)}_processAlertChanges(){return N.D(this._params.alertCollectionChanges).pipe(Ml.e(0),Bl.u()).subscribe((e=>{this._alertCollection.processChanges(e);const t=e.reduce(((e,t)=>{var n;return(0,Ec.nq)(t)&&"textChange"===t.reason&&e.set("textChange",(null!==(n=e.get("textChange"))&&void 0!==n?n:[]).concat(_s.AlertId.from(t.alertId))),e}),new Map);e.length>0&&(this._sduiManager.get().notifyAlertsChanged(),t.size>0&&this._logger.debug("Optimistically removing alerts.",t),t.forEach(((e,t)=>this.pushRemovedAlerts([e,t]))))}))}}function Oc(e){return"sduiItemAdd"!==e.kind&&"sduiItemUpdate"!==e.kind||!function(e,t=new Set(["inlineCard"])){return!(null==e||"object"!=typeof e||!("type"in e)||"string"!=typeof e.type||!t.has(e.type))}(e.sdui)}function Rc(e){return e.pipe(dt.O(Ys.empty),jt.G(),I.U((([e,t])=>Ys.diff(e,t))))}var Bc=n(71032);const Mc="long-form-suggestion-card",Fc="long-form-lens",Tc="feed-order",Pc="short-form-feed-order",Nc=(0,a.ls)(tl.R(((e,t)=>{var n;const i=[],r=new Map(e.updatedLongFormFeeds),s=new Set(e.longFormFeedFilteringValues),l=e=>{const t=(n=r.values(),s=e,(0,a.zG)(Array.from(n),b.DZ((e=>(0,a.zG)("assistantFeed"===e.sdui.type?o.some(e.sdui):o.none,o.map((e=>{return t=e,n=s,Object.assign(Object.assign({},t),{filtering:[...t.filtering,{property:Fc,value:n,condition:Hn.NotEqualTo}]});var t,n})),o.map((t=>Object.assign(Object.assign({},e),{kind:kl.SduiEventKind.Update,sdui:t}))))))));var n,s;t.forEach((e=>r.set(e.sduiRootId,e))),i.push(...t)};if(t.kind===kl.SduiEventKind.Add||t.kind===kl.SduiEventKind.Update)if(ii(t.sdui))"longFormCard"===t.sdui.type?i.push(Object.assign(Object.assign({},t),{sdui:Uc(t.sdui)})):"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type&&i.push(Object.assign(Object.assign({},t),{sdui:Object.assign(Object.assign({},t.sdui),{child:Uc(t.sdui.child)})}));else if("longFormCard"===t.sdui.type||"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type){const e=null!==(n=("longFormCard"===t.sdui.type?t.sdui.feedProperties:"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type?t.sdui.child.feedProperties:{})[Fc])&&void 0!==n?n:void 0;void 0===e||s.has(e)||l(e),"longFormCard"===t.sdui.type?i.push(Object.assign(Object.assign({},t),{sdui:zc(t.sdui)})):"strongAlertRef"===t.sdui.type&&"longFormCard"===t.sdui.child.type&&i.push(Object.assign(Object.assign({},t),{sdui:Object.assign(Object.assign({},t.sdui),{child:zc(t.sdui.child)})}))}else if("assistantFeed"===t.sdui.type&&t.sdui.id===String(dn.lensAllSuggestionFeed)){const e=kl.RawSduiItem.Id.create(dn.lensAllSuggestionFeedShortForm);i.push(t,Object.assign(Object.assign({},t),{sduiRootId:e,sdui:Dc(e,t.sdui)}))}else"assistantFeed"===t.sdui.type&&(0,a.zG)(function(e,t){var n;const i=e.filtering.find(jc);if(i){const r=Array.from(t).filter((e=>e!==i.value));return o.some({sdui:Object.assign(Object.assign({},e),{filtering:[...e.filtering.filter((e=>!jc(e))),...r.map((e=>({property:Fc,value:e,condition:Hn.NotEqualTo})))]}),filteringValue:null!==(n=null==i?void 0:i.value)&&void 0!==n?n:null})}return o.none}(t.sdui,e.longFormFeedFilteringValues),o.map((({sdui:e,filteringValue:n})=>{const o=!s.has(n);s.add(n),o&&l(n),r.set(t.sduiRootId,Object.assign(Object.assign({},t),{sdui:e})),i.push(Object.assign(Object.assign({},t),{sdui:e}))})));else t.sduiRootId===String(dn.lensAllSuggestionFeed)?i.push(t,Object.assign(Object.assign({},t),{sduiRootId:kl.RawSduiItem.Id.create(dn.lensAllSuggestionFeedShortForm)})):t.kind===kl.SduiEventKind.Remove?r.delete(t.sduiRootId):(0,m.L0)(t);return{events:i.length>0?i:[t],longFormFeedFilteringValues:s,updatedLongFormFeeds:r}}),{events:[],longFormFeedFilteringValues:new Set(b.w6(0,6)),updatedLongFormFeeds:new Map}),Bc.b((({events:e})=>N.D(e))));function jc(e){return e.property===Fc&&e.condition===Hn.EqualTo}const Uc=e=>Object.assign(Object.assign({},e),{feedProperties:Object.assign(Object.assign({},e.feedProperties),{[Mc]:1,[Tc]:Number.MIN_SAFE_INTEGER,[Pc]:Number.MAX_SAFE_INTEGER})}),zc=e=>Object.assign(Object.assign({},e),{feedProperties:Object.assign(Object.assign({},e.feedProperties),{[Pc]:e.feedProperties[Tc]})});function Dc(e,t){return Object.assign(Object.assign({},t),{id:e,ordering:[{orderBy:Pc,direction:Zn.Asc},...t.ordering.filter((e=>e.orderBy!==Tc))]})}const Lc=I.U((e=>{if(e.kind!==kl.SduiEventKind.Add&&e.kind!==kl.SduiEventKind.Update||"assistantFeed"!==e.sdui.type||e.sdui.id!==String(dn.writingExpertFeed))return e;{const t=e.sdui.onRemove;return Object.assign(Object.assign({},e),{sdui:Object.assign(Object.assign({},e.sdui),{onRemove:t.some((e=>"popAssistantFeed"===e.type))?t:t.concat({type:"popAssistantFeed"})})})}}));class Gc{constructor(e){this._params=e,this._disposed=new s.xQ,this._writingExpertChecksEnabled=p.h.create(!1),this.writingExpertChecksEnabled=this._writingExpertChecksEnabled.view()}enableWritingExpertChecks(){N.D(this._params.capiService.toggle_checks({checks:{writing_expert_check:!0}})()).pipe(R.q(1),$s.R(this._disposed)).subscribe((()=>this._writingExpertChecksEnabled.set(!0)),(e=>function(e){return{kind:"error",source:"revision",name:"enableWritingExpertCheckFailed",data:e}}({reason:(0,be.N)(e).message})))}disableWritingExpertChecks(){N.D(this._params.capiService.toggle_checks({checks:{writing_expert_check:!1}})()).pipe(R.q(1),$s.R(this._disposed)).subscribe((()=>this._writingExpertChecksEnabled.set(!1)),(e=>function(e){return{kind:"error",source:"revision",name:"disableWritingExpertCheckFailed",data:e}}({reason:(0,be.N)(e).message})))}dispose(){this._disposed.next(void 0),this._disposed.complete()}}class Zc{constructor(e){this._subs=new l.w,this._state=p.h.create({firstCheckingFinished:!1,sduiEventsSettledOnce:!1}),this._firstCheckingFinishedAndSduiEventsSettledTimedOut=p.h.create(!1),this.firstCheckingFinishedAndSduiEventsSettled=this._state.view((e=>e.firstCheckingFinished&&e.sduiEventsSettledOnce)),this.firstCheckingFinishedAndSduiEventsSettledTimedOut=this._firstCheckingFinishedAndSduiEventsSettledTimedOut.view(),this._subs.add(e.sduiEventsSettled.pipe(_.h(a.yR)).subscribe((()=>this._state.lens("sduiEventsSettledOnce").set(!0)))),this._subs.add(e.lastFinishedMessage.subscribe((()=>this._state.lens("firstCheckingFinished").set(!0))));const t=O.timer(1e4).subscribe((()=>this._firstCheckingFinishedAndSduiEventsSettledTimedOut.set(!0)));this._subs.add(t),this._subs.add(this.firstCheckingFinishedAndSduiEventsSettled.pipe(_.h(a.yR)).subscribe((()=>t.unsubscribe())))}dispose(){this._subs.unsubscribe()}}const Hc={[dn.lensAllSuggestionFeed]:"all-suggestions",[dn.lensAllSuggestionFeedShortForm]:"all-suggestions",[dn.lensCorrectnessFeed]:"correctness",[dn.lensClarityFeed]:"clarity",[dn.lensDeliveryFeed]:"delivery",[dn.lensEngagementFeed]:"engagement",[dn.lensStyleGuideFeed]:"style-guide",[dn.plagiarismFeed]:"plagiarism",[dn.writingExpertFeed]:"writing-expert"};function Vc(e){return(0,a.zG)(hn(e.id),o.map((e=>Hc[e])))}class $c{constructor(e){this._params=e,this._feedForm=p.h.create(this._params.supportedForms[0]),this.state=p.h.combine(this._feedForm,this._params.feedManager.feeds,((e,t)=>({feedForm:e,supportedForms:(0,a.zG)(new Set(this._params.supportedForms),x.hX((e=>t.has(_s.Item.Id.from(fn[e])))))})))}onToggleFeedForm(e){this._feedForm.set(e);const t=this._params.feedManager.feed.get();this._params.tracking.feedFormChanged(e,(0,a.zG)(t,o.chain(Vc),o.toNullable),(0,a.zG)(t,o.map((e=>wn(e.collection))),o.toNullable));const n=(0,a.zG)(t,o.chain((e=>En(e.collection))));this._params.feedManager.replaceFeed("longForm"===e?dn.lensAllSuggestionFeed:dn.lensAllSuggestionFeedShortForm,(0,a.zG)(n,o.fold((()=>{}),(e=>e.id))),(0,a.zG)(n,o.chain((e=>Es.getAlertIds(e.content))),o.fold((()=>{}),(e=>new Set(e)))))}}class Kc{constructor(e){this._params=e,this._subs=new l.w,this._outcomeScores=p.h.create(o.none),this.lenses=p.h.combine(this._outcomeScores,this._params.feedManager.feeds,((e,t)=>{const n=(0,a.zG)(t,Ee.UI((e=>e.id)));return(0,a.zG)([dn.lensAllSuggestionFeed,dn.lensCorrectnessFeed,dn.lensClarityFeed,dn.lensEngagementFeed,dn.lensDeliveryFeed,dn.lensStyleGuideFeed],b.hX((e=>n.has(_s.Item.Id.from(e)))),b.UI((t=>({lensId:t,label:pn[t],percent:(0,a.zG)(e,o.fold((()=>0),(e=>e[t])))}))),(e=>new Map(e.map((e=>[e.lensId,e])))))})),this._subs.add(this._params.lastFinishedMessage.subscribe((({outcomeScores:e})=>this._outcomeScores.modify((t=>{var n,i,r,s,l,c,u,d,m,p,h,f;const g=(0,a.zG)(t,o.getOrElse((()=>({}))));return o.some({[dn.lensAllSuggestionFeed]:null!==(i=null!==(n=null==e?void 0:e.GeneralScore)&&void 0!==n?n:g[dn.lensAllSuggestionFeed])&&void 0!==i?i:0,[dn.lensClarityFeed]:null!==(s=null!==(r=null==e?void 0:e.Clarity)&&void 0!==r?r:g[dn.lensClarityFeed])&&void 0!==s?s:0,[dn.lensCorrectnessFeed]:null!==(c=null!==(l=null==e?void 0:e.Correctness)&&void 0!==l?l:g[dn.lensCorrectnessFeed])&&void 0!==c?c:0,[dn.lensEngagementFeed]:null!==(d=null!==(u=null==e?void 0:e.Engagement)&&void 0!==u?u:g[dn.lensEngagementFeed])&&void 0!==d?d:0,[dn.lensDeliveryFeed]:null!==(p=null!==(m=null==e?void 0:e.Tone)&&void 0!==m?m:g[dn.lensDeliveryFeed])&&void 0!==p?p:0,[dn.lensStyleGuideFeed]:null!==(f=null!==(h=null==e?void 0:e["Style guide"])&&void 0!==h?h:g[dn.lensStyleGuideFeed])&&void 0!==f?f:0})})))))}onToggleLens(e){const t=(0,a.zG)(this._params.feedManager.feed.get(),o.map((e=>e.id)),o.exists((t=>t===e)));this._params.tracking.feedLensButtonClicked(Hc[e]);const n=(0,a.zG)(this._params.feedManager.feed.get(),o.chain((e=>En(e.collection))),o.fold((()=>{}),(e=>e.id)));t?this._params.feedManager.replaceFeed(dn.lensAllSuggestionFeed,n):this._params.feedManager.replaceFeed(e,n)}dispose(){this._subs.unsubscribe()}}var Wc;function qc(e){return"assistantCard"===e.content.type?o.some(e.content):"strongAlertRef"===e.content.type&&"assistantCard"===e.content.child.type?o.some(e.content.child):"strongAlertRef"===e.content.type&&"longFormCard"===e.content.child.type&&"assistantCard"===e.content.child.fullContent.type?o.some(e.content.child.fullContent):"longFormCard"===e.content.type&&"assistantCard"===e.content.fullContent.type?o.some(e.content.fullContent):o.none}!function(e){const t=[];e.notifyFeedUnmount=function(){t.forEach((e=>e()))},e.registerFeedUnmountHandler=function(e){return t.push(e),e},e.unregisterFeedUnmountHandler=function(e){const n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1)}}(Wc||(Wc={}));class Qc{constructor(e){this._params=e,this._subs=new l.w,this._focusedItem=p.h.create(o.none),this._feedReset=p.h.create(!1),this._feedItemRendered=new s.xQ,this.isAllSuggestionsFeedEnabled=p.h.create(this._params.isAllSuggestionsFeedEnabled),this.feed=this._params.feedManager.feed.view(),this.feedReset=this._feedReset.view(),this._subs.add(this._params.sduiReset.pipe(c.w((()=>O.timer(5e3).pipe(Ol.h(!1),dt.O(!0))))).subscribe(d.wW(this._feedReset))),this._subs.add(this._trackFeedShows().subscribe())}_interactionReady(e){const t=this._params.feedFormViewModel.state.view("feedForm").get(),n=(0,a.zG)(this.feed.get(),o.chain(Vc),o.getOrElseW((()=>"unknown")));this._params.lifecycleViewModel.onInteractionReady({kind:"revision",feedForm:t,feedName:n,success:e})}processActions(e,t,n,i){this._params.feedActionService.processActions(e,t.id,n.alertRefs,i)}_onFocusedItemMount(e){(0,a.zG)(this._focusedItem.get(),o.filter((t=>t.id!==e.id)),o.chain((e=>(0,a.zG)(qc(e),o.map((t=>({actions:t.onBlur,item:e,sourceId:t.id})))))),o.map((({actions:e,item:t,sourceId:n})=>this._params.feedActionService.processActions(e,t.id,void 0,n)))),(0,a.zG)(qc(e),o.map((t=>({actions:t.onFocus,item:e,sourceId:t.id}))),o.map((({actions:e,item:t,sourceId:n})=>this._params.feedActionService.processActions(e,t.id,void 0,n)))),this._params.premiumSuggestionsUphookManager.onFocusedItemMount(e),this._focusedItem.set(o.some(e)),this._interactionReady(!0)}onItemMount(e,t){e&&this._onFocusedItemMount(t),this._feedItemRendered.next()}onFeedMount(){const e=Wc.registerFeedUnmountHandler((()=>{Wc.unregisterFeedUnmountHandler(e),this._params.alertVisibilityManager.notifyFeedUnmount(),(0,a.zG)(this._focusedItem.get(),o.chain((e=>(0,a.zG)(qc(e),o.map((t=>({actions:t.onBlur,item:e,sourceId:t.id})))))),o.map((({actions:e,item:t,sourceId:n})=>this._params.feedActionService.processActions(e,t.id,void 0,n))))}));this._params.alertVisibilityManager.notifyFeedMount()}onSuccessStateMount(){(0,a.zG)(this.feed.get(),o.chain(Vc),o.map((e=>this._params.tracking.feedSuccessStateShown(e,"applied")))),this._interactionReady(!0),this._feedItemRendered.next()}onEmptyStateMount(e){(0,a.zG)(this.feed.get(),o.chain(Vc),o.map((e=>this._params.tracking.feedSuccessStateShown(e,"nothingToCheck")))),this._interactionReady(!e),e||this._feedItemRendered.next()}dispose(){this._subs.unsubscribe()}_trackFeedShows(){return this.feed.pipe(M.oA,I.U(Vc),M.oA,S.x(),c.w((e=>this._feedItemRendered.pipe(R.q(1),Ol.h(e))))).pipe(T.b((e=>{this._params.tracking.feedLensShown(e)})))}}function Yc(e){const t=new l.w,n=e.feedManager.feeds.view((t=>o.fromNullable(t.get(e.feedId))));return t.add(e.entryPointClicked.pipe(T.b((()=>e.routingViewModel.push(e.view))),c.w((()=>e.canExecuteEntryPointAction().pipe(R.q(1)))),M.oA).subscribe((t=>e.feedActionService.processActions(t.content.actions,t.id,t.alertIds,t.content.id)))),t.add(e.feedManager.feed.pipe(I.U((e=>{var t;return null===(t=o.toNullable(e))||void 0===t?void 0:t.id})),jt.G(),_.h((([t,n])=>t===e.feedId&&n!==e.feedId&&e.routingViewModel.activeView.get().kind===e.view.kind))).subscribe((()=>e.routingViewModel.pop()))),t.add(e.routingViewModel.has(e.view).pipe(jt.G(),_.h((([e,t])=>e&&!t)),c.w((()=>e.feedManager.feed.pipe(R.q(1),I.U((e=>{var t;return null===(t=o.toNullable(e))||void 0===t?void 0:t.id}))))),_.h((t=>t===e.feedId))).subscribe((()=>(0,a.zG)(n.get(),o.map((t=>e.feedActionService.processActions([{type:"popAssistantFeed"},e.sduiDisableCheckAction],t.id,t.alertIds,t.content.id))))))),t.add({unsubscribe:()=>{e.routingViewModel.has(e.view).get()&&(0,a.zG)(n.get(),o.map((t=>e.feedActionService.processActions([e.sduiDisableCheckAction],t.id,t.alertIds,t.content.id))))}}),t}function Jc(e,t){return e.pipe(I.U(kn.v.filter(t,t,t)),_.h((e=>!kn.v.isEmpty(e))),I.U(kn.v.reduce(o.none,((e,t)=>o.none),((e,t,n)=>o.some(n)),((e,t)=>o.some(t)))),O.skipBy(o.getEq(_s.Item.eq)))}var Xc,eu=n(44586);function tu(e){return new eu.y((t=>{const n=new l.w,i=new s.xQ;let r=o.none;return n.add(e.asyncCheckFinishedMessage.pipe(_.h((t=>t.check===e.asyncCheckType))).subscribe((t=>{r=o.some(e.extractScore(t)),i.next(t)}))),n.add(e.asyncChecksEnabled.pipe(S.x(),c.w((t=>t?mn.T(e.textUpdated.pipe(I.U((()=>o.some({checking:!0,lastScore:r})))),i.pipe(I.U((t=>e.extractScore(t))),I.U((e=>o.some({checking:!1,lastScore:o.some(e)}))))).pipe(dt.O(o.some({checking:!0,lastScore:r}))):u.of(o.none))),O.skipBy(o.getEq(U.MW({checking:U.vD,lastScore:o.getEq(e.scoreEq)})))).subscribe(t)),()=>n.unsubscribe()}))}function nu(e){return"gButton:plagiarism"===e.content.type}class iu{constructor(e){this._params=e,this._subs=new l.w,this._sourceCount=p.h.create(o.none),this._citationDropdown=p.h.create(o.none),this._plagiarismEntryPoint=p.h.create(o.none),this._plagiarismFeed=this._params.feedManager.feeds.view((e=>o.fromNullable(e.get(_s.Item.Id.from(dn.plagiarismFeed))))),this._checkingState=p.h.create(o.none),this.plagiarismAction=this._params.isPlagiarismEnabled?this._plagiarismEntryPoint.view(o.map((()=>q.createPlagiarismAction()))):p.h.create(o.none),this.state=this._params.isPlagiarismEnabled?p.h.combine(this._checkingState,this._sourceCount,this._citationDropdown,((e,t,n)=>(0,a.zG)(e,o.map((({checking:e,lastScore:i})=>({checking:e,originality:i,sourceCount:t,citationDropdown:n})))))):p.h.create(o.none),this._subs.add(Jc(this._params.sduiItemsCollectionDiff,nu).subscribe((e=>this._plagiarismEntryPoint.set(e)))),this._subs.add(Yc({feedManager:this._params.feedManager,feedActionService:this._params.feedActionService,routingViewModel:this._params.routingViewModel,entryPointClicked:this._params.assistantUIActions.pipe(_.h((0,z.W9)(ht.i.is(ht.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&q.isPlagiarismAction(e.action.action))))),canExecuteEntryPointAction:()=>this._params.userViewModel.isPremium.get()?this._plagiarismEntryPoint.pipe(_.h(o.isSome),R.q(1)):u.of(o.none),feedId:_s.Item.Id.from(dn.plagiarismFeed),sduiDisableCheckAction:{type:"disablePlagiarismCheck"},view:{kind:"plagiarism"}})),this._subs.add(tu({asyncCheckType:"plagiarism",extractScore:e=>e.outcomeScores.Originality,asyncChecksEnabled:this._params.plagiarismChecksEnabled,asyncCheckFinishedMessage:this._params.lastAsyncCheckFinishedMessage,textUpdated:this._params.textUpdated,scoreEq:U.lr}).subscribe((e=>this._checkingState.set(e)))),this._subs.add(this._plagiarismFeed.view(o.chain((e=>{var t,n;for(const i of Es.traverse(e.content))if("tooltip"===i.type){const e=null===(n=null===(t=/from (?<sources>\d+) sources on the web/.exec(i.text))||void 0===t?void 0:t.groups)||void 0===n?void 0:n.sources;if(void 0!==e)return(0,a.zG)(o.fromNullable(Number.parseInt(e,10)),o.filter((e=>Number.isSafeInteger(e))))}return o.none}))).subscribe((e=>this._sourceCount.set(e)))),this._subs.add(this._plagiarismFeed.view(o.chain((e=>{var t;for(const n of Es.traverse(e.content))if("selectableDropDownMenu"===n.type&&"citation-style"===(null===(t=n.name)||void 0===t?void 0:t.value))return o.some(n);return o.none}))).subscribe((e=>this._citationDropdown.set(e))))}onUphookShow(){this._params.uphookService.trackUphookShown("plagiarism")}onUphookClick(){this._params.uphookService.trackUphookClicked("plagiarism"),this._params.uphookService.executeUphook("plagiarism")}onUphookDismiss(){this._params.uphookService.trackUphookDismissed("plagiarism"),this.seeAllSuggestions()}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}onCitationDropdownSelect(e,t){(0,a.zG)(this._plagiarismFeed.get(),o.map((n=>this._params.feedActionService.processActions(e,n.id,n.alertIds,t))))}dispose(){this._subs.unsubscribe()}}class ru{constructor(e){this._params=e,this._subs=new l.w,this._state=p.h.create({allSuggestionsCount:0,activeFeedSuggestionCount:0,allSuggestionsEmpty:!0,someSuggestionsAddressed:!1}),this.state=this._state.view();const t=p.h.combine(this._params.isAllSuggestionsFeedEnabled,this._params.feedManagerProxy.allSuggestionsFeed,((e,t)=>e?t:o.none));this._subs.add(t.pipe(c.w(o.fold((()=>u.of(0)),(e=>{const t=cl(e.content.filtering);return this._params.sduiItemsCollection.pipe(I.U(Ys.reduce(0,((e,n)=>t(n)?e+1:e))))})))).subscribe(d.wW(this._state.lens("allSuggestionsCount")))),this._subs.add(p.h.combine(this._params.isAllSuggestionsFeedEnabled,this._params.feedManagerProxy.allSuggestionsFeed,this._params.feedManagerProxy.feed,((e,t,n)=>(0,a.zG)(n,o.chain((n=>{var i;return n.id!==(null===(i=o.toNullable(t))||void 0===i?void 0:i.id)||e?o.some(n):o.none}))))).view(o.fold((()=>0),(e=>wn(e.collection)))).subscribe(d.wW(this._state.lens("activeFeedSuggestionCount")))),this._subs.add(t.pipe(c.w(o.fold((()=>u.of(!0)),(e=>this._params.feedManagerProxy.isFeedEmpty(e)))),S.x()).subscribe((e=>{this._state.lens("allSuggestionsEmpty").set(e),e||this._state.lens("someSuggestionsAddressed").set(!1)})))}onSuggestionAddressed(){this._state.lens("someSuggestionsAddressed").set(!0)}dispose(){this._subs.unsubscribe()}}function ou(e){return"gButton:writingExpert"===e.content.type}function au(e){return"globalPart"===e.content.type&&"known"===e.content.name.kind&&e.content.name.value===Gn.GlobalPartWritingExpertState}!function(e){e.isIdle=e=>"idle"===e,e.isLoadingEvaluation=e=>"loadingEvaluation"===e,e.isLoadingSuggestions=e=>"loadingSuggestions"===e}(Xc||(Xc={}));class su{constructor(e){this._params=e,this._subs=new l.w,this._writingExpertEntryPoint=p.h.create(o.none),this._checkingState=p.h.create(o.none),this._writingExpertState=p.h.create(o.none),this._writingExpertFeed=this._params.feedManager.feeds.view((e=>o.fromNullable(e.get(_s.Item.Id.from(dn.writingExpertFeed))))),this.writingExpertAction=this._params.isWritingExpertEnabled?p.h.combine(this._writingExpertEntryPoint,this._params.userViewModel.isPremium,((e,t)=>(0,a.zG)(e,o.filter((()=>t)),o.map((()=>q.createWritingExpertAction()))))):p.h.create(o.none),this._state=p.h.create(o.none),this.state=this._state.view(),this.emptyOrErrorState=this._params.isWritingExpertEnabled?this._writingExpertState.view():p.h.create(o.none),this._subs.add(Jc(this._params.sduiItemsCollectionDiff,ou).subscribe((e=>this._writingExpertEntryPoint.set(e)))),this._subs.add(Jc(this._params.sduiItemsCollectionDiff,au).subscribe((e=>this._writingExpertState.set(e)))),this._subs.add(Yc({feedManager:this._params.feedManager,feedActionService:this._params.feedActionService,routingViewModel:this._params.routingViewModel,entryPointClicked:this._params.assistantUIActions.pipe(_.h((0,z.W9)(ht.i.is(ht.i.Kind.actionBrickClick),(e=>"regularAction"===e.action.kind&&q.isWritingExpertAction(e.action.action))))),canExecuteEntryPointAction:()=>this._writingExpertEntryPoint.pipe(_.h(o.isSome),R.q(1)),feedId:_s.Item.Id.from(dn.writingExpertFeed),sduiDisableCheckAction:{type:"disableWritingExpertCheck"},view:{kind:"writingExpert"}})),this._subs.add(tu({asyncCheckType:"writing_expert_check",extractScore:()=>null,asyncChecksEnabled:this._params.writingExpertChecksEnabled,asyncCheckFinishedMessage:this._params.lastAsyncCheckFinishedMessage,textUpdated:this._params.textUpdated,scoreEq:U.w4}).subscribe((e=>this._checkingState.set(e)))),this._params.isWritingExpertEnabled&&this._subs.add(p.h.combine(this._checkingState,this._writingExpertFeed,((e,t)=>(0,a.zG)(e,o.map((e=>{const n=function(e){return(0,a.zG)(e,o.chain((e=>o.fromNullable(e.content.footer))),o.chain((e=>{for(const t of Es.traverse(e))if("text"===t.type&&t.text.length>0)return o.some({title:"Let's engage your audience",subTitle:t.text});return o.none})))}(t);return{checking:!0===e.checking?o.isSome(n)?"loadingSuggestions":"loadingEvaluation":"idle",evaluationResult:n}}))))).subscribe((e=>this._state.set(e)))),this._subs.add(this._params.routingViewModel.activeView.view("kind").pipe(S.x(),jt.G(),T.b((([e,t])=>{"home"===e&&"writingExpert"===t&&this.submitWritingExpertFeedback(C.Ln.FEED_OPENED),"writingExpert"===e&&this.submitWritingExpertFeedback(C.Ln.FEED_CLOSED)}))).subscribe())}submitWritingExpertFeedback(e){(0,ye.t)("submitWritingExpertFeedback",this._params.capiService.feedback({type:C.Fj.WritingExpert,weStage:e}))}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}tryAgain(){this.submitWritingExpertFeedback(C.Ln.TRY_AGAIN)}dispose(){this._subs.unsubscribe()}}function lu(e){var t,n;const i=new l.w,r=e.logService.getLogger(lu.name),o=new s.xQ,u=null!==(t=e.sduiService.supportedForms)&&void 0!==t?t:["shortForm","longForm"],d=new s.xQ,m=new s.xQ,p=new Ac({sduiItemCollectionChanges:d,alertCollectionChanges:m,monitoringService:e.monitoringService,sduiEventTransformer:(0,a.ls)(Nc,Lc),logService:e.logService}),h=new s.xQ;i.add(p.state.pipe(Rc).subscribe(h));const f=new yl({capiService:e.capiService}),g=new Gc({capiService:e.capiService}),v=new bl({sduiItemsCollection:p.state,sduiItemsCollectionDiff:h,selectedAlertId:e.alertService.selectedAlertId,initialForm:u[0],autofocusNextCard:e=>e===dn.lensAllSuggestionFeedShortForm,logService:e.logService}),b=new Vs({autofocusNextLongFormCardOnAlertRefEmpty:e.sduiService.autofocusNextLongFormCardOnAlertRefEmpty,autofocusNextLongFormCardOnApplyOrDismiss:e.sduiService.autofocusNextLongFormCardOnApplyOrDismiss,activeFeed:v.feed,relevantInboundCAPIMessages:e.capiService.relevantInboundCAPIMessages,sduiEventsSettled:p.sduiEventsSettled,logService:e.logService});i.add(b.focusFirstCard.subscribe((()=>v.focusFirst())));const y=new $c({supportedForms:u,feedManager:v,tracking:e.trackingService}),x=new Ws({feedManager:v,sduiManagerProxy:p,capiService:e.capiService,alertService:e.alertService,plagiarismService:f,writingExpertService:g,textEditorService:e.textEditorService,monitoringService:e.monitoringService,lifecycleService:e.lifecycleService,uphookService:e.uphookService,autofocusManager:b,feedForm:y.state.view("feedForm"),logService:e.logService,setEmphasizedAlerts:e=>o.next(new Set(e))}),k=null!==(n=e.defaultFeed)&&void 0!==n?n:v.allSuggestionsFeed.pipe(M.oA,R.q(1),I.U((e=>e.id)));i.add(k.subscribe((e=>{r.debug("Pushing default feed.",{feedId:e}),v.pushFeed(e)})));const S=new oi({feedState:v.feed,resetEmphasizedAlerts:o,alertService:e.alertService,monitoringService:e.monitoringService,logService:e.logService}),w=new xl({feedManager:v,routingViewModel:e.routingViewModel,uphookService:e.uphookService,feedFormViewModel:y}),C=new Kc({feedManager:v,lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.Finished.is)),tracking:e.trackingService}),E=new Qc({isAllSuggestionsFeedEnabled:e.isAllSuggestionsFeedEnabled,feedManager:v,feedActionService:x,alertVisibilityManager:S,premiumSuggestionsUphookManager:w,feedFormViewModel:y,sduiReset:p.sduiReset,tracking:e.trackingService,lifecycleViewModel:e.lifecycleViewModel}),A=new Zc({lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.Finished.is)),sduiEventsSettled:p.sduiEventsSettled}),O=new ru({isAllSuggestionsFeedEnabled:E.isAllSuggestionsFeedEnabled,feedManagerProxy:v,sduiItemsCollection:p.state}),B=N.D(e.textEditorService.textUpdated),F=e.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.AsyncCheckFinished.is)),P=new iu({uphookService:e.uphookService,feedManager:v,sduiItemsCollectionDiff:h,feedActionService:x,routingViewModel:e.routingViewModel,userViewModel:e.userViewModel,assistantUIActions:e.assistantUIActions,textUpdated:B,lastAsyncCheckFinishedMessage:F,isPlagiarismEnabled:e.isPlagiarismEnabled,plagiarismChecksEnabled:f.plagiarismChecksEnabled}),j=new su({feedManager:v,feedActionService:x,sduiItemsCollectionDiff:h,routingViewModel:e.routingViewModel,userViewModel:e.userViewModel,assistantUIActions:e.assistantUIActions,textUpdated:B,lastAsyncCheckFinishedMessage:F,isWritingExpertEnabled:e.isWritingExpertEnabled,writingExpertChecksEnabled:g.writingExpertChecksEnabled,capiService:e.capiService});return i.add(e.lifecycleViewModel.isVisuallyReady.pipe(_.h(Boolean),R.q(1),c.w((()=>mn.T(N.D(e.sduiService.sduiItemCollectionChanges).pipe(T.b((e=>d.next(e)))),N.D(e.alertService.alertCollectionChanges).pipe(T.b((e=>m.next(e)))))))).subscribe()),{viewModels:{feed:E,feedLens:C,feedForm:y,checkingState:A,suggestionCount:O,plagiarism:P,writingExpert:j},dispose:()=>{i.unsubscribe(),b.dispose(),w.dispose(),O.dispose(),P.dispose(),j.dispose(),f.dispose(),C.dispose(),A.dispose(),S.dispose(),x.dispose(),v.dispose(),p.dispose()}}}class cu{constructor(e){this._params=e,this._subs=new l.w,this._subs.add(this._params.assistantUIActions.subscribe((e=>{if(e.kind===ht.i.Kind.settingsButtonClick)return"withView"===this._params.options.kind?this._params.routingViewModel.push({kind:"settings"}):this._params.options.onClick(e.buttonRect)})))}getView(){return"withView"===this._params.options.kind?o.some(this._params.options.getView()):o.none}dispose(){this._subs.unsubscribe()}}class uu{constructor(e,t,n,i,r){this._assistantUIActions=e,this._router=t,this._monitoringService=n,this._logService=i,this._skillService=r,this._subs=new l.w,this._logger=this._logService.getLogger(uu.name),this._state=p.h.create(o.none),this.state=this._state.view(),this._skillService&&this._subs.add(this._skillService.skillRequests.subscribe((e=>{e.close?(this._onSkillClosed(),this._state.set(o.none)):e.size&&this._state.modify(o.map((t=>Object.assign(Object.assign({},t),{size:e.size}))))}))),this._subs.add(this._assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case ht.i.Kind.actionBrickClick:if("regularAction"===e.action.kind&&q.isSkillAction(e.action.action)){const t=e.action.action.skill;this._onSkillOpened(),this._state.set(o.some({skill:t,status:"loading",size:{width:416,height:245}}))}break;case ht.i.Kind.mount:e.name===bt.e.skill&&(0,ye.t)("initSkill",(0,a.zG)((0,a.zG)(this._state.get(),k.Yo((()=>new Error("Cannot init Skill. No Skill state available.")))),k.tS((t=>this._skillService?(0,a.zG)(this._skillService.initSkill(t.skill,e.element),k.UI((e=>Object.assign(Object.assign({},t),{size:e})))):k.t$(new Error("Cannot init Skill. No `SkillService` available."))))),this._logger,(e=>this._state.set(o.some(Object.assign(Object.assign({},e),{status:"ready"})))),(e=>{this._state.modify(o.map((e=>Object.assign(Object.assign({},e),{status:"error"})))),this._monitoringService.notify((0,ne.L)(function(e){return{kind:"error",source:"skill",name:"initSkillFailed",data:e}}({skillId:(0,a.zG)(this._state.get(),o.map((e=>e.skill.id)),o.toNullable),reason:(0,be.N)(e).message})))}));break;case ht.i.Kind.unmount:if(e.name===bt.e.skill&&!this._router.has({kind:"skill"}).get()){const e=this._state.get();(0,ye.t)("terminateSkill",(0,a.zG)(e,k.Yo((()=>new Error("Cannot terminate Skill. No Skill state available."))),k.tS((e=>this._skillService?(0,a.zG)(this._skillService.terminateSkill(e.skill),k.UI((()=>e))):k.t$(new Error("Cannot terminate Skill. No `SkillService` available."))))),this._logger,(()=>this._state.set(o.none)),(t=>{this._monitoringService.notify((0,ne.L)(function(e){return{kind:"error",source:"skill",name:"terminateSkillFailed",data:e}}({skillId:(0,a.zG)(this._state.get(),o.map((e=>e.skill.id)),o.toNullable),reason:(0,be.N)(t).message}))),this._state.get()===e&&this._state.set(o.none)}))}}}_onSkillOpened(){this._router.push({kind:"skill"})}_onSkillClosed(){"skill"===this._router.activeView.get().kind&&this._router.pop()}}class du{constructor(e){this._params=e,this._subscriptions=new E.w.Keeper,this._logger=this._params.logService.getLogger(du.name),this._state=p.h.create(o.none),this.state=this._state.view(),this.getToneAlertsSummary=()=>this._params.externalService.getToneAlertsSummary(),this._subscriptions.push(this._params.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.TonesResult.is)).subscribe((e=>this._handleTonesResultMessage(e))))}submitToneFeedback(e,t){const n=t===It.positive?C.y_.EMOTION_LIKE:t===It.negative?C.y_.EMOTION_DISLIKE:(0,m.L0)(t);(0,ye.t)("submitToneFeedback",this._params.capiService.feedback({emotion:e,type:n,subtype:C.e3.Inline}),this._logger)}_handleTonesResultMessage(e){const t=!0===e.brandTonesEnabled;this._state.set(o.some({tones:(0,a.zG)(e.emotions,(0,fi.UI)((({name:e,emojiId:t,confidence:n,brandToneLabel:i,brandToneDescription:r})=>({name:e,emojiId:t,confidence:n,brandToneInfo:void 0!==i?o.some({status:pu(i),description:o.fromNullable(r)}):o.none}))),mu,b.DY(t?Bt:Ot)),hidden:!0===e.hidden,brandTonesEnabled:t,institutionLogo:o.fromNullable(e.institutionLogo)}))}dispose(){this._subscriptions.dispose()}}function mu(e){const t=e.reduce(((e,t)=>e+t.confidence),0);return e.map((e=>{let n;return n=e.confidence<.25?Et.Slight:e.confidence<.5?Et.Moderate:e.confidence/t>.5?Et.VeryStrong:Et.Strong,Object.assign(Object.assign({},e),{prevalence:n})}))}function pu(e){switch(e){case"on":return _t.On;case"off":return _t.Off;default:return(0,m.L0)(e)}}var hu,fu,gu=n(80800);function vu(e){return{source:"userSurvey",kind:"error",name:"submitSurveyFailed",data:e}}!function(e){let t;!function(e){let t;!function(e){e.Rating="rating",e.Feedback="feedback",e.Completed="completed",e.Closed="closed"}(t=e.Type||(e.Type={})),e.isOpen=e=>e!==t.Closed,e.toCAPIStage=e=>{switch(e){case t.Rating:return gu.v0.Survey.Data.OpenAnswerScoreSurvey.scoreStage;case t.Feedback:case t.Closed:case t.Completed:return gu.v0.Survey.Data.OpenAnswerScoreSurvey.submitStage;default:(0,m.L0)(e)}}}(t=e.Stage||(e.Stage={}))}(hu||(hu={}));class bu{constructor(e){this._params=e,this._subs=new E.w.Keeper,this._logger=this._params.logService.getLogger(bu.name),this._activeSurvey=p.h.create(o.none),this.activeSurvey=this._activeSurvey.view(),this._init()}dispose(){this._subs.dispose()}submitSurveyResult(e){(0,ye.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:e.rating,stage:hu.Stage.toCAPIStage(e.stage),open_answer:o.getOrElse((()=>""))(e.openAnswer),detailed_placement:e.detailedPlacement,type:e.type}),this._logger,void 0,(()=>this._params.monitoringService.notify((0,ne.L)(vu({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement})))))}dismissSurvey(e){(0,ye.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:"declined",stage:hu.Stage.toCAPIStage(e.stage),detailed_placement:e.detailedPlacement,type:e.type}),this._logger,void 0,(()=>this._params.monitoringService.notify((0,ne.L)(vu({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement})))))}_init(){this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(_.h(J.JS.ShowSurvey.is)).subscribe((e=>this._handleShowSurvey(e))))}_handleShowSurvey(e){(0,a.zG)(e.survey,o.fromPredicate((e=>e.placement===gu.v0.Survey.Data.BaseSurvey.Placement.ggo)),o.chain((e=>"open_answer_score"===e.type?o.some(e):o.none)),o.chain((e=>{var t;return"string"==typeof e.detailed_placement&&2===(null===(t=e.detailed_placement)||void 0===t?void 0:t.split(":").length)?o.some({survey:e,detailedPlacement:e.detailed_placement}):o.none})),o.chain((({survey:e,detailedPlacement:t})=>{const[n,i]=t.split(":"),r=Math.abs(Number.parseInt(i,10));return Number.isNaN(r)?o.none:o.some({survey:e,detailedPlacement:t,sessionId:n,resultId:oe.x.Id.create(r)})})),o.fold((()=>this._params.monitoringService.notify((0,ne.L)(function(e){return{source:"userSurvey",kind:"warn",name:"unexpectedSurveyFormatReceived",data:e}}({surveyType:e.survey.type,surveyPlacement:e.survey.placement,surveyDetailedPlacement:e.survey.detailed_placement})))),(({survey:e,detailedPlacement:t,resultId:n})=>{this._activeSurvey.modify((()=>o.some({placement:e.placement,title:e.title,detailedPlacement:t,type:gu.v0.Survey.Data.OpenAnswerScoreSurvey.type,resultId:n,maxScore:e.max_score,boxText:o.fromNullable(e.box_text),ratingLabels:e.score_labels,acknowledgmentTitle:o.fromNullable(e.acknowledgment_title),acknowledgment:o.fromNullable(e.acknowledgment),skipOpenAnswerFrom:e.skip_open_answer_from,openAnswer:o.fromNullable({placeholder:e.open_answer.placeholder,maxLen:e.open_answer.max_len,minLen:o.fromNullable(e.open_answer.min_len)})})))})))}}!function(e){e.empty={activeSurvey:o.none,stage:hu.Stage.Type.Rating,transitionStage:hu.Stage.Type.Rating,rating:o.none,errors:o.none,openAnswer:o.none}}(fu||(fu={}));class yu{constructor(e){this._params=e,this._state=p.h.create(fu.empty),this._subs=new l.w,this._stageTimeoutClear=void 0,this.state=this._state.view(),this._updateStageAfterTransition(),this._subscribeToActiveSurvey(),this._subs.add(this._params.assistantUIActions.subscribe((e=>{(0,z.Kg)(ht.i.isSurveyAction,ht.i.isSurveyImplicitDismissAction)(e)&&this._handleUIAction(e)})))}get _activeSurvey(){return this.state.get().activeSurvey}_subscribeToActiveSurvey(){this._subs.add(this._params.userSurveyService.activeSurvey.subscribe((e=>{(0,a.zG)(e,o.map((e=>{(0,a.zG)(this._activeSurvey,o.fold((()=>this._updateActiveSurvey(e)),(t=>{t.detailedPlacement!==e.detailedPlacement&&this._updateActiveSurvey(e)})))})))})))}_updateActiveSurvey(e){this._state.set(Object.assign(Object.assign({},fu.empty),{activeSurvey:o.some(e)}))}_handleUIAction(e){switch(e.kind){case ht.i.Kind.surveySubmitButtonClick:case ht.i.Kind.surveyKeyPressShiftEnter:this._onSurveyCompleted();break;case ht.i.Kind.surveyCancelButtonClick:case ht.i.Kind.surveyCloseButtonClick:this._onDismissExplicitly();break;case ht.i.Kind.surveyOpenAnswerChange:this._onOpenAnswerChange(e.openAnswer);break;case ht.i.Kind.surveyRatingSelectionChange:this._onRatingSelectionChange(e.rating);break;case ht.i.Kind.promptSubmitButtonClick:case ht.i.Kind.actionBrickClick:case ht.i.Kind.resultCardInsertButtonClick:case ht.i.Kind.resultCardRephraseButtonClick:case ht.i.Kind.resultCardHeaderClick:case ht.i.Kind.resultCardDismissButtonClick:this._onDismissImplicitly();break;default:(0,m.L0)(e)}}_onRatingSelectionChange(e){(0,a.zG)(this._activeSurvey,o.map((e=>e.skipOpenAnswerFrom)),o.map((t=>{e<t?this._state.modify((t=>Object.assign(Object.assign({},t),{rating:o.some(e),transitionStage:hu.Stage.Type.Feedback}))):this._state.modify((t=>Object.assign(Object.assign({},t),{rating:o.some(e),transitionStage:hu.Stage.Type.Completed}))),this._reportCompleting()})))}_onOpenAnswerChange(e){(0,a.zG)(this._activeSurvey,o.chain((({openAnswer:e})=>e)),o.map((({maxLen:t})=>{e.length<=t&&this._state.modify((t=>Object.assign(Object.assign({},t),{openAnswer:o.some(e),errors:o.none})))})))}_onSurveyCompleted(){(0,a.zG)(this._activeSurvey,o.chain((({openAnswer:e})=>e)),o.chain((({minLen:e})=>e)),o.fold((()=>this._complete()),(e=>{(0,a.zG)(this._state.get().openAnswer,o.fold((()=>this._setOpenAnswerError("This field is required.")),(t=>{t.length<e?this._setOpenAnswerError(e>0?`Please enter at least ${e} characters.`:"This field is required."):this._complete()})))})))}_complete(){this._reportCompleting(),this._state.lens("transitionStage").set(hu.Stage.Type.Completed)}_reportCompleting(){(0,a.zG)(this._activeSurvey,o.chain((e=>(0,a.zG)(this._state.get().rating,o.map((t=>({survey:e,rating:t})))))),o.map((({survey:e,rating:t})=>this._params.userSurveyService.submitSurveyResult({rating:t,openAnswer:this._state.get().openAnswer,placement:e.placement,detailedPlacement:e.detailedPlacement,stage:this.state.get().stage,type:e.type}))))}_setOpenAnswerError(e){this._state.lens("errors").set(o.some({openAnswerError:o.some(e)}))}_onDismissExplicitly(){(0,a.zG)(this._activeSurvey,o.map((e=>{const t=this.state.get().stage;t===hu.Stage.Type.Rating&&this._params.userSurveyService.dismissSurvey({placement:e.placement,detailedPlacement:e.detailedPlacement,type:e.type,stage:t})}))),this._state.lens("transitionStage").set(hu.Stage.Type.Closed)}_onDismissImplicitly(){this._state.lens("transitionStage").set(hu.Stage.Type.Closed)}_updateStageAfterTransition(){this._subs.add(this._state.subscribe((e=>{this._clearStageTimeout(),this._stageTimeoutClear=setTimeout((()=>{this._state.lens("stage").set(e.transitionStage)}),xu[e.transitionStage])})))}_clearStageTimeout(){void 0!==this._stageTimeoutClear&&(clearTimeout(this._stageTimeoutClear),this._stageTimeoutClear=void 0)}dispose(){this._subs.unsubscribe(),this._clearStageTimeout()}}const xu={[hu.Stage.Type.Rating]:0,[hu.Stage.Type.Feedback]:300,[hu.Stage.Type.Completed]:0,[hu.Stage.Type.Closed]:0};var ku;!function(e){e.set=function(e,t){return n=>Object.assign(Object.assign({},n),{[e]:t})}}(ku||(ku={}));class Su{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(Su.name),this._state=p.h.create({stagingNewVoiceProfile:o.none,stagingVoiceProfile:o.none}),this.state=this._state.view(),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case ht.i.Kind.headerGoBackButtonClick:return this._handleGoBack(e.goBackFrom);case ht.i.Kind.headerVoiceButtonClick:return this._openVoiceProfile("toolbar");case ht.i.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case ht.i.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case ht.i.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case ht.i.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case ht.i.Kind.styleToggleClick:return this._selectStyle(e.id);case ht.i.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,a.zG)(e.role,o.map((e=>e.id))));case ht.i.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case ht.i.Kind.voiceProfileTabChange:return this._switchNewVoiceProfileTab(e.profileName);case ht.i.Kind.voiceTagPopoverRemoveButtonClick:return this._removeVoiceTag(e);case ht.i.Kind.voiceTagPopoverClose:return this._closeVoiceTagPopover();case ht.i.Kind.voiceTagPopoverKeepButtonClick:return this._keepVoiceTagPopover();case ht.i.Kind.voiceTagClick:return this._toggleVoiceTag(e);case ht.i.Kind.voiceDialectDropdownSelectionChange:return this._selectNewVoiceDialect(e.dialect.id);case ht.i.Kind.voiceRoleDropdownSelectionChange:return this._selectNewVoiceRole(e.role.id);case ht.i.Kind.voiceSelectionsSaveButtonClick:return this._saveNewVoiceSelections();case ht.i.Kind.voiceSelectionsCancelButtonClick:return this._cancelNewVoiceSelectionChanges();case ht.i.Kind.voiceSelectionsEditButtonClick:return this._editNewVoiceSelections();case ht.i.Kind.promptFieldKeyPressEscape:case ht.i.Kind.headerCloseButtonClick:return this._trySaveNewProfileIfChanged();default:return}}_handleGoBack(e){"voiceProfile"!==e.kind&&"legacyVoiceProfile"!==e.kind||(0,a.zG)(this._params.genAISessionService.get(),o.chain((e=>re.toStarted(e.session.get()))),o.map((e=>{"newVoiceProfile"===e.voiceProfile.kind?(this._trySaveNewProfileIfChanged(),this._state.lens("stagingNewVoiceProfile").set(o.none)):"legacyVoiceProfile"===e.voiceProfile.kind&&this._state.lens("stagingVoiceProfile").set(o.none)})))}_createVoiceProfile(e){var t;return"newVoiceProfile"===e.kind?ku.set("stagingNewVoiceProfile",o.some({selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles,activeTagId:o.none,activeProfileName:o.fromNullable(null===(t=e.profiles.find((e=>e.selected)))||void 0===t?void 0:t.name),stagingSelections:o.none})):ku.set("stagingVoiceProfile",o.some({selectedStyle:e.selectedStyle,selectedTonesPerStyle:e.selectedTonesPerStyle,selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,needsSetup:e.needsSetup}))}_openVoiceProfile(e){(0,a.zG)(this._params.genAISessionService.get(),o.chain((e=>re.toStarted(e.session.get()))),o.map((t=>{this._params.userActionTrackingService.trackVoiceProfileOpen(e),this._params.routingViewModel.push({kind:"newVoiceProfile"===t.voiceProfile.kind?"voiceProfile":"legacyVoiceProfile"}),this._state.modify(this._createVoiceProfile(t.voiceProfile))})))}_closeVoiceProfile(){this._params.userActionTrackingService.trackVoiceProfileSkip(),this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(o.none)}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(o.none),(0,a.zG)(e,o.map((e=>{const t=o.toNullable(this._params.genAISessionService.get());t&&(0,ye.t)("setVoiceProfile",t.setVoiceProfile(e),this._logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(o.map((n=>{return Object.assign(Object.assign({},n),{selectedTonesPerStyle:(0,a.zG)(n.selectedTonesPerStyle,t?(i=we.Style.Id.eq,(e,t)=>n=>(0,a.zG)(n,Ee.cq(i)(e,(0,a.ls)(o.some,t)),o.getOrElse((()=>(0,a.zG)(n,Ee.ZQ(i)(e,t(o.none)))))))(n.selectedStyle,o.fold((()=>new Set([e])),x.$T(we.Tone.Id.eq)(e))):(0,a.ls)(Ee.cq(we.Style.Id.eq)(n.selectedStyle,x.Od(we.Tone.Id.eq)(e)),o.getOrElse((()=>n.selectedTonesPerStyle))))});var i})))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(o.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(o.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(o.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_editNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:o.some({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole})})))}_cancelNewVoiceSelectionChanges(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:o.none})))}_saveNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{selectedDialect:(0,a.zG)(e.stagingSelections,o.fold((()=>e.selectedDialect),(e=>e.selectedDialect))),selectedRole:(0,a.zG)(e.stagingSelections,o.fold((()=>e.selectedRole),(e=>e.selectedRole))),stagingSelections:o.none})))}_selectNewVoiceRole(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,a.zG)(t.stagingSelections,o.map((t=>Object.assign(Object.assign({},t),{selectedRole:o.some(e)}))))})))}_selectNewVoiceDialect(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,a.zG)(t.stagingSelections,o.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))})))}_updateNewProfileStateIfAny(e){this._state.lens("stagingNewVoiceProfile").modify(o.map(e))}_keepVoiceTagPopover(){this._params.userActionTrackingService.trackVoiceProfileKeepTag(),this._closeVoiceTagPopover()}_closeVoiceTagPopover(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{activeTagId:o.none})))}_toggleVoiceTag({tagName:e,sectionName:t,profileName:n}){this._updateNewProfileStateIfAny((i=>Object.assign(Object.assign({},i),{activeTagId:o.toNullable(i.activeTagId)===Ce.createId({tagName:e,sectionName:t,profileName:n})?o.none:o.some(Ce.createId({tagName:e,sectionName:t,profileName:n}))})))}_removeVoiceTag({tagName:e,profileName:t,sectionName:n}){this._params.userActionTrackingService.trackVoiceProfileRemoveTag(),this._updateNewProfileStateIfAny((i=>Object.assign(Object.assign({},i),{profiles:(0,a.zG)(i.profiles,b.UI((i=>i.name===t?Object.assign(Object.assign({},i),{sections:i.sections.map((t=>t.name===n?Object.assign(Object.assign({},t),{tags:t.tags.filter((t=>t.name!==e))}):t))}):i)))})))}_switchNewVoiceProfileTab(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeProfileName:o.some(e)})))}_trySaveNewProfileIfChanged(){(0,a.zG)(g.Y(o.option)({editedVoiceProfile:this._state.view("stagingNewVoiceProfile").get(),sessionVoiceProfile:(0,a.zG)(this._params.genAISessionService.get(),o.chain((e=>re.toStarted(e.session.get()))),o.map((e=>e.voiceProfile)),o.chain(we.toNewVoiceProfile))}),o.filter((({editedVoiceProfile:e,sessionVoiceProfile:t})=>!we.NewSelections.eqByRoleDialectProfileAndIsEnabledByDefault.equals(e,t))),o.map((({editedVoiceProfile:e})=>{const t=o.toNullable(this._params.genAISessionService.get());t&&(0,ye.t)("setNewVoiceProfile",t.setNewVoiceProfile({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles}),this._logger)})))}}var wu,Cu=n(24713);function Eu(e,t){return(0,a.zG)(re.toStarted(e),o.chain((e=>(0,a.zG)(function(e){return(0,a.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),y.nI)}(t),o.map(b.DZ((t=>{var n;return null!==(n=e.detectedReferences.get(t))&&void 0!==n?n:o.none}))),o.chain(y.c2)))))}!function(e){e.eq=v.getEq(U.yv,oe.x.Id.eq),e.card=function(e){return v.right(e)},e.uiItem=function(e){return v.left(e)},e.toCard=function(e){return o.fromEither(e)},e.toUIItem=function(e){return(0,a.zG)(e,v.fold(o.some,(()=>o.none)))}}(wu||(wu={}));var _u,Iu,Au=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},Ou=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t;!function(e){e.make=function(e){return{kind:"regularAction",action:e}}}(t=e.RegularAction||(e.RegularAction={}))}(_u||(_u={})),function(e){e.create=function(){return{textBox:"",selectedAction:o.none,promptAutofocusToken:0,cardsState:{hoveredCard:o.none,focusedCard:o.none},reportMenuVisible:o.none,referencesVisibility:new Map,detectedReferences:o.none,overrideCardVoice:new Map}}}(Iu||(Iu={}));class Ru{constructor(e){this._params=e,this._subs=new l.w,this._logger=this._params.logService.getLogger(Ru.name),this._state=p.h.create(Iu.create()),this._reportMenuVisibleDebounced=p.h.create(o.none),this._disposed=new s.xQ,this._genAISession=p.h.create(o.none),this._genAIPromptsFulfilled=p.h.create(0),this._paramsStateDeps=p.h.combine(this._params.userService.user,this._params.genAIAvailability,this._genAISession,this._params.routingViewModel.activeView,((e,t,n,i)=>({user:e,genAIAvailability:t,genAISession:n,activeView:i}))),this.state=p.h.combine(this._state,this._paramsStateDeps,this._reportMenuVisibleDebounced,this._params.textIsEmpty,((e,t,n,i)=>{var{cardsState:r,reportMenuVisible:s,textBox:l}=e,c=Ou(e,["cardsState","reportMenuVisible","textBox"]),u=t.user,d=t.genAIAvailability,m=t.genAISession;return Object.assign(Object.assign({},c),{textBox:l,user:u,userCanSignIn:!de(u)&&!!this._params.userService.signIn,genAIAvailability:d,genAISession:m,userPromptAction:(0,a.zG)(m,o.chain(re.toStarted),o.chain((e=>e.activeContext.userPromptAction)),o.map((e=>Object.assign(Object.assign({},e),{arg:Object.assign(Object.assign({},e.arg),{kind:"string",label:(0,a.zG)(i,o.fold((()=>""),(0,z.RN)("Try Write an ode to the em dash","Try Is it persuasive?")))})})))),activeCards:new Set((0,a.zG)([r.hoveredCard,(0,a.zG)(r.focusedCard,o.alt((()=>(0,a.zG)(n,o.chain(wu.toCard)))))],b.oA)),canScroll:o.isNone(s)})})),this._subs.add(this.state.subscribe((e=>this._logger.debug("Assistant view model state updated.",e)))),this._subs.add(this._params.genAISessionService.pipe(c.w(o.fold((()=>u.of(o.none)),(e=>e.session.view(o.some))))).subscribe(d.wW(this._genAISession))),this._params.hasRevision||this._subs.add(this._showErrorOnSessionStart().subscribe()),this._subs.add(this._updateGenAIPromptsFulfilled().subscribe(d.wW(this._genAIPromptsFulfilled))),this._subs.add(mn.T(this._state.view("reportMenuVisible").pipe(M.oA,I.U(o.some)),this._state.view("reportMenuVisible").pipe(O.skipBy(o.getEq(wu.eq)),Nt.b(250),_.h(o.isNone))).subscribe(d.wW(this._reportMenuVisibleDebounced))),this._subs.add(this._params.routingViewModel.activeView.subscribe((()=>this._state.modify((0,a.ls)(ku.set("reportMenuVisible",o.none),ku.set("cardsState",{hoveredCard:o.none,focusedCard:o.none})))))),this._subs.add(this._params.assistantUIActions.subscribe((e=>{this._handleUIAction(e)}))),this._subs.add(this._params.userService.user.subscribe((e=>this._handleUserUpdate(e))))}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}getContextById(e){var t,n;return null!==(n=null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t?void 0:t.getContextById(e))&&void 0!==n?n:o.none}dispose(){this._disposed.next(null),this._disposed.complete(),this._subs.unsubscribe()}_showErrorOnSessionStart(){return mn.T(this._genAISession.view((0,a.ls)(o.chain(re.toStarting),o.chain((e=>e.error)),o.map((()=>this._params.routingViewModel.replace({kind:"error"}))))))}_updateGenAIPromptsFulfilled(){return mn.T(this._genAISession.view((0,a.ls)(o.chain(re.toStarted),o.map((e=>e.results.length)))).pipe(M.oA,tl.R(((e,t)=>({lastResultsCount:t,promptsFulfilled:e.promptsFulfilled+(t>e.lastResultsCount?1:0)})),{lastResultsCount:0,promptsFulfilled:0}),Cu.j("promptsFulfilled")))}_handleUIAction(e){var t,n,i,r;switch(e.kind){case ht.i.Kind.headerCloseButtonClick:return void this._onClose(e);case ht.i.Kind.headerGoBackButtonClick:case ht.i.Kind.radioOptionsCancelButtonClick:return this._goBack();case ht.i.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case ht.i.Kind.actionBrickClick:return this._trackActionClick(e),this._executeAction(e.action);case ht.i.Kind.actionBrickMount:return this._trackActionMount(e);case ht.i.Kind.actionBrickShow:return this._trackActionShow(e);case ht.i.Kind.promptSubmitButtonClick:return this._go(o.none);case ht.i.Kind.userPromptSubmit:return this._go(o.some(e.prompt));case ht.i.Kind.radioOptionsSubmitButtonClick:return this._submitSelectedAction({selectedRadioOption:e.selectedOption});case ht.i.Kind.generateStopButtonClick:return this._stop();case ht.i.Kind.resultCardInsertButtonClick:return this._insert(e.result,e.selectedVoice);case ht.i.Kind.resultCardCopyButtonClick:return this._copy(e.result,e.selectedVoice);case ht.i.Kind.resultCardCopyToClipboard:return null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t?void 0:t.trackResultCopy(e.result.id,e.selectedVoice===oe.x.GeneratedTextVoice.user);case ht.i.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result,e.selectedVoice);case ht.i.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case ht.i.Kind.errorCardDismissButtonClick:return this._dismissError();case ht.i.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case ht.i.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case ht.i.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case ht.i.Kind.creditsInfoHover:return this._params.userActionTrackingService.trackUsageInfoHover();case ht.i.Kind.creditsInfoClick:return this._onCreditsInfoClick();case ht.i.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case ht.i.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case ht.i.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case ht.i.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case ht.i.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case ht.i.Kind.regenerateWithoutReferenceButtonClick:return this._regenerateWithoutReference(e.result,e.referenceId,e.selectedVoice);case ht.i.Kind.mount:return this._handleMount(e);case ht.i.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case ht.i.Kind.promptFieldKeyPressEnter:return this._checkForGenAIUnavailableError(),"ready"!==e.fieldReadyState||h._.isUnavailable(this.state.view("genAIAvailability").get())?void 0:e.text.trim().length>0?this._go(o.none):this._tryInsertLatestResult();case ht.i.Kind.restoreHistoryButtonClick:return this._handleHistoryButtonClick();case ht.i.Kind.removeSelectionContextClick:return null===(n=o.toNullable(this._params.genAISessionService.get()))||void 0===n?void 0:n.dismissActiveBoundaryContext("thread"===this._params.routingViewModel.activeView.get().kind);case ht.i.Kind.selectionContextInteraction:return this._params.textEditorService.setContextHighlight(e.range,e.visibility);case ht.i.Kind.signInButtonClick:return null===(r=(i=this._params.userService).signIn)||void 0===r?void 0:r.call(i);case ht.i.Kind.actionsMount:return void(0,a.zG)(this._genAISession.get(),o.map((e=>e.error)),o.map((e=>{const t=o.isNone(e);this._logger.debug("Actions mounted for the first time, notifying gen-ai interaction ready.",{success:t}),this._params.lifecycleViewModel.onInteractionReady({kind:"gen-ai",success:t})})));default:return}}_handleHistoryButtonClick(){(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.map((e=>o.isSome(e.inProgressResult)||e.results.length>0)),o.map((e=>{var t;e?this._params.routingViewModel.push({kind:"thread"}):(null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.restoreHistory(),this._subs.add(this._genAISession.view(o.chain(re.toStarted)).pipe(M.oA,_.h((e=>void 0!==e.results.find(oe.x.isHistory))),R.q(1)).subscribe((()=>this._params.routingViewModel.push({kind:"thread"})))))})))}_handleMount(e){if(e.name===bt.e.creditsInfoButton){de(this._params.userService.user.get())?this._subscribeToCommand((()=>this._params.uphookService.trackUphookShown("grammarlyGoPrompts")),(e=>(0,ie.ix)({reason:(0,be.N)(e).message}))):this._params.monitoringService.notify((0,ne.L)((0,ie.ix)({reason:"User is logged out, there should be no uphook"})))}else e.name===bt.e.historyButtonActive&&this._params.userActionTrackingService.trackHistoryButtonView()}_handleUserUpdate(e){me(e)?this._params.routingViewModel.replace({kind:"signedOut"}):de(e)&&"signedOut"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"home"})}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>o.some(e):o.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>o.some(e):o.filter((t=>t!==e)))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((n=>Object.assign(Object.assign({},n),{reportMenuVisible:t?o.some(e):(0,a.zG)(n.reportMenuVisible,o.filter((t=>!wu.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},n.cardsState),{hoveredCard:(0,a.zG)(wu.toCard(e),o.fold((()=>n.cardsState.hoveredCard),(e=>t?n.cardsState.hoveredCard:(0,a.zG)(n.cardsState.hoveredCard,o.filter((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((n=>new Map(n).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((n=>{var i;const r=new Map(n),o=(null!==(i=n.get(e))&&void 0!==i?i:t)===oe.x.GeneratedTextVoice.generic?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic;return r.set(e,o),this._params.userActionTrackingService.trackMyVoiceCardToggle(o===oe.x.GeneratedTextVoice.user),r}))}_onClose(e){ht.i.is(ht.i.Kind.headerCloseButtonClick)(e)&&this._params.userActionTrackingService.trackAssistantClose(),this._params.lifecycleViewModel.onClose()}_goBack(){"followUpPrompt"===this._params.routingViewModel.activeView.get().kind&&this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.none,textBox:""}))),this._params.routingViewModel.pop()}_updateTextBox(e){this._state.lens("textBox").set(e),this._searchReferences(e)}_executeAction(e){var t;if("regularAction"===e.kind)if(e.action.disabled)(0,a.zG)(e.action.notificationOnAttempt,o.map((e=>{this._params.notificationService.notify(ve.create("information",e,void 0,void 0,5e3)),this._params.userActionTrackingService.trackContexNotification("action")})));else if(q.isFollowUpQuestionActionInput(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedAction:o.some(t)}))),this._params.routingViewModel.push({kind:"followUpPrompt",inputType:W.match({radio:()=>"radio",string:()=>"string"})(e.action.args[0])})}else q.isQuickActionInput(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.none,textBox:""}))),null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e.action,o.toUndefined(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):(0,z.Kg)(q.isSkillAction,q.isToneAction,q.isPlagiarismAction,q.isWritingExpertAction)(e.action)||(0,m.L0)(e.action);else"allResults"===e.kind?this._checkForGenAIUnavailableError():"go"===e.kind?this._go(o.none):(0,m.L0)(e)}_trackActionClick(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonClicked(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.moreActionsButtonClicked(e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,m.L0)(e.action)}_trackActionMount(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonRendered(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.actionButtonRendered("Show more","more",e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,m.L0)(e.action)}_trackActionShow(e){"regularAction"===e.action.kind?this._params.tracking.actionButtonShown(e.action.action.label,e.action.action.id,e.placement,e.position,this._genAIPromptsFulfilled.get()):"allResults"===e.action.kind?this._params.tracking.actionButtonShown("Show more","more",e.placement,e.position,this._genAIPromptsFulfilled.get()):"go"===e.action.kind||(0,m.L0)(e.action)}_handleAIUsageNotificationOnPromptSubmit(){(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.chain((e=>e.activeContext.specialView)),o.filter((e=>"aiUsageAlert"===e.kind)),o.map((()=>this._params.userActionTrackingService.trackAINotificationDismiss("document"))))}_checkForGenAIUnavailableError(){(0,a.zG)(this._params.genAISessionService.get(),o.map((e=>e.session.get())),o.chain((e=>e.error)),o.map((()=>{this._params.notificationService.notify(ve.create("information","Generative AI features are temporarily unavailable."))})))}_go(e){var t;o.isSome(e)?(this._handleAIUsageNotificationOnPromptSubmit(),null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e.value,o.toUndefined(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):o.isSome(this._state.get().selectedAction)?this._submitSelectedAction({textBox:this._state.get().textBox}):(this._handleAIUsageNotificationOnPromptSubmit(),this._submitUserPromptAction())}_stop(){var e,t;return Au(this,void 0,void 0,(function*(){yield null===(t=null===(e=o.toNullable(this._params.genAISessionService.get()))||void 0===e?void 0:e.stopInProgressResult())||void 0===t?void 0:t();(0,a.zG)(this._genAISession.get(),o.fold(a.jv,re.fold({starting:a.jv,contextless:a.jv,started:e=>0===e.results.length})))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}))}_insert(e,t){(0,ye.t)("insertText",this._params.textEditorService.insertText((0,Re.l)((0,a.zG)(e.replacementDelta,v.fold(a.yR,(e=>t===oe.x.GeneratedTextVoice.user?e.user:e.generic))),"")),this._logger,(()=>{var n;return null===(n=o.toNullable(this._params.genAISessionService.get()))||void 0===n?void 0:n.trackResultInsert(e.id,t===oe.x.GeneratedTextVoice.user)}),(t=>this._params.monitoringService.notify((0,ne.L)((0,ie.Kf)({resultId:e.id,reason:(0,be.N)(t).message})))))}_copy(e,t){this._subscribeToCommand((()=>this._params.textEditorService.copyText((0,Re.l)((0,a.zG)(e.replacementDelta,v.fold(a.yR,(e=>t===oe.x.GeneratedTextVoice.user?e.user:e.generic))),""))),(t=>(0,ie.Nu)({resultId:e.id,reason:(0,be.N)(t).message})),(()=>{var n,i;return null===(i=null===(n=o.toNullable(this._params.genAISessionService.get()))||void 0===n?void 0:n.trackResultCopy)||void 0===i?void 0:i.call(n,e.id,t===oe.x.GeneratedTextVoice.user)}))}_subscribeToCommand(e,t,n=a.Q1){try{N.D(e()).pipe(R.q(1),$s.R(this._disposed)).subscribe(n,(e=>this._params.monitoringService.notify((0,ne.L)(t(e)))))}catch(e){this._params.monitoringService.notify((0,ne.L)(t(e)))}}_tryInsertLatestResult(){(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.map((e=>e.results)),o.chain(b.YM),o.filter(oe.x.isStandardCompletedResult),o.map((e=>this._insert(e,(0,a.zG)(this._lastResultSelectedVoice(),o.getOrElse((()=>oe.x.GeneratedTextVoice.generic)))))))}_onPromptFieldKeyPressEscape(e){e.menuOpened||(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.chain((e=>e.inProgressResult)),o.fold((()=>this._onClose(e)),(()=>this._stop())))}_rephrase(e,t){var n;null===(n=o.toNullable(this._params.genAISessionService.get()))||void 0===n||n.regenerateResult(e.id,{omitReferenceIds:o.none},t)}_dismissResult(e){var t;null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,a.zG)(t.reportMenuVisible,o.filter((t=>!wu.eq.equals(t,wu.card(e.id))))),cardsState:{hoveredCard:(0,a.zG)(t.cardsState.hoveredCard,o.filter((t=>t!==e.id))),focusedCard:(0,a.zG)(t.cardsState.hoveredCard,o.filter((t=>t!==e.id)))}})));(0,a.zG)(this._genAISession.get(),o.fold(a.jv,re.fold({starting:a.jv,contextless:a.jv,started:e=>0===e.results.length&&o.isNone(e.inProgressResult)})))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}_dismissError(){var e;null===(e=o.toNullable(this._params.genAISessionService.get()))||void 0===e||e.dismissError()}_reportOffensiveResult(e){var t;null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.trackResultOffensive(e.id)}_reportOffensiveActions(){var e;null===(e=o.toNullable(this._params.genAISessionService.get()))||void 0===e||e.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoClick(){this._params.userActionTrackingService.trackUsageInfoClick();de(this._params.userService.user.get())?(this._subscribeToCommand((()=>this._params.uphookService.trackUphookClicked("grammarlyGoPrompts")),(e=>(0,ie.ol)({reason:(0,be.N)(e).message}))),this._subscribeToCommand((()=>this._params.uphookService.executeUphook("grammarlyGoPrompts")),(e=>(0,ie.ol)({reason:(0,be.N)(e).message})))):this._params.monitoringService.notify((0,ne.L)((0,ie.ol)({reason:"User is logged out, there should be no uphook"})))}_submitSelectedAction(e){(0,a.zG)(this._state.get().selectedAction,o.chain((t=>(0,a.zG)(t.args[0],W.match({string:()=>{var n;return(0,a.zG)(o.fromNullable(null===(n=e.textBox)||void 0===n?void 0:n.trim()),o.filter((e=>e.length>0)),o.map((e=>q.FollowUpQuestionActionValue.fromTextInput(t,e))))},radio:()=>(0,a.zG)(o.fromNullable(e.selectedRadioOption),o.map((e=>q.FollowUpQuestionActionValue.fromRadioInput(t,e))))})))),o.map((e=>{var t;this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:o.none,textBox:""}))),null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t||t.submitAction(e,o.toUndefined(this._lastResultSelectedVoice())),o.isSome(e.generatesTextType)&&(this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"}))})))}_lastResultSelectedVoice(){return(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.map((e=>e.results)),o.chain(b.YM),o.chain((e=>o.fromNullable(this._state.lens("overrideCardVoice").view((t=>t.get(e.id))).get()))))}_submitUserPromptAction(){(0,a.zG)(this._state.get().textBox.trim(),o.fromPredicate((e=>""!==e)),o.chain((e=>(0,a.zG)(this._genAISession.get(),o.chain(re.toStarted),o.chain((t=>(0,a.zG)(t.activeContext.userPromptAction,o.map((n=>({text:e,session:t,userPromptAction:n}))))))))),o.map((({text:e,session:t,userPromptAction:n})=>{var i;this._state.lens("textBox").set(""),null===(i=o.toNullable(this._params.genAISessionService.get()))||void 0===i||i.submitAction(q.UserPromptActionValue.fromInput(n,e,(0,a.zG)(Eu(t,e),o.map(b.DZ((e=>(0,a.zG)(e.url,o.map((t=>({url:t,referenceId:e.id}))))))),o.chain(y.nI)),o.none),o.toUndefined(this._lastResultSelectedVoice())),this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"})})))}_popFollowUpPromptViews(){for(;"followUpPrompt"===this._params.routingViewModel.activeView.get().kind;)this._params.routingViewModel.pop()}_regenerateWithoutReference(e,t,n){var i;null===(i=o.toNullable(this._params.genAISessionService.get()))||void 0===i||i.regenerateResult(e.id,{omitReferenceIds:o.some([t])},n)}_searchReferences(e){(0,a.zG)(function(e){return(0,a.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),y.nI)}(e),o.map((e=>e.forEach((e=>{var t;return null===(t=o.toNullable(this._params.genAISessionService.get()))||void 0===t?void 0:t.searchReferences(e)})))))}}var Bu=n(40649),Mu=n(5165),Fu=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Tu{constructor(e){this._params=e,this._sub=new l.w,this._isVisuallyReady=p.h.create(!1),this._heightBehavior=p.h.create({kind:"fitContent",maxHeight:Mu.Z3}),this._widthBehavior=p.h.create({kind:"fitContent",minWidth:Mu.wU,maxWidth:Mu.jy}),this._dragBehavior=p.h.create({kind:"notDraggable"}),this._size=p.h.create(null),this._focusState=p.h.create({isFocused:!0}),this._interactionReadyStateByFeature=new Map,this.isVisuallyReady=this._isVisuallyReady.view(),this.heightBehavior=this._heightBehavior.view(),this.widthBehavior=this._widthBehavior.view(),this.dragBehavior=this._dragBehavior.view(),this.size=this._size.view(),this._onStart(),this._sub.add(this._params.lifecycleService.sizeBehavior.subscribe((e=>{var t;this._heightBehavior.set("fitContent"===e.heightBehavior.kind?{kind:e.heightBehavior.kind,maxHeight:null!==(t=e.heightBehavior.maxHeight)&&void 0!==t?t:Mu.Z3,height:e.heightBehavior.height}:{kind:e.heightBehavior.kind}),this._widthBehavior.set(function(e){var t,n,i,r;return"fitContent"===e.widthBehavior.kind?{kind:e.widthBehavior.kind,minWidth:null!==(t=e.widthBehavior.minWidth)&&void 0!==t?t:(r=e.widthBehavior.maxWidth,null!==r&&r<Mu.wU?r:Mu.wU),maxWidth:null!==(n=e.widthBehavior.maxWidth)&&void 0!==n?n:(i=e.widthBehavior.minWidth,i&&i>Mu.jy?i:Mu.jy)}:{kind:e.widthBehavior.kind}}(e))}))),this._sub.add(this._params.lifecycleService.dragBehavior.subscribe(d.wW(this._dragBehavior))),this._sub.add(this._focusState.pipe(Nt.b(100),Bu.g("isFocused")).subscribe((e=>{ke(this._params.lifecycleService.focusStateChanged(e)).catch((t=>this._params.monitoringService.notify((0,ne.L)((0,ie.B$)({focusState:e,reason:(0,be.N)(t).message})))))})))}_onStart(){return Fu(this,void 0,void 0,(function*(){try{const e=yield ke(this._params.lifecycleService.starting());this._params.metricService.report({name:"assistant_lifecycle_starting",labels:void 0},void 0,e)}catch(e){this._params.monitoringService.notify((0,ne.L)((0,ie.pA)({reason:(0,be.N)(e).message})))}}))}onVisuallyReady(e){return Fu(this,void 0,void 0,(function*(){try{const t=yield ke(this._params.lifecycleService.visuallyReady(e));this._params.metricService.report({name:"assistant_lifecycle_visually_ready",labels:void 0},["assistant_lifecycle_starting"],t),this._isVisuallyReady.set(!0)}catch(e){this._params.monitoringService.notify((0,ne.L)((0,ie.o9)({reason:(0,be.N)(e).message})))}}))}onInteractionReady(e){return Fu(this,void 0,void 0,(function*(){if(!this._interactionReadyStateByFeature.has(e.kind))try{this._interactionReadyStateByFeature.set(e.kind,"pending");const t=yield ke(this._params.lifecycleService.interactionReady(e));this._interactionReadyStateByFeature.set(e.kind,"fulfilled"),yield this._params.metricService.report(function(e){return{name:"assistant_lifecycle_interaction_ready",labels:{feature:"gen-ai"===e.kind?"gen_ai":"revision"===e.kind?`revision_${e.feedForm}_${e.feedName}`:"tone-detector"===e.kind?"tone_detector":(0,m.L0)(e),success:e.success?"true":"false"}}}(e),["assistant_lifecycle_starting","assistant_lifecycle_visually_ready"],t)}catch(t){"pending"===this._interactionReadyStateByFeature.get(e.kind)&&this._interactionReadyStateByFeature.delete(e.kind),this._params.monitoringService.notify((0,ne.L)((0,ie.Qw)({interactionReadyInfo:e,reason:(0,be.N)(t).message})))}}))}onReadyToDrag(e){return Fu(this,void 0,void 0,(function*(){if("draggable"===this._dragBehavior.get().kind)try{const t=yield ke(this._params.lifecycleService.readyToDrag(e));this._params.metricService.report({name:"assistant_lifecycle_ready_to_drag",labels:void 0},["assistant_lifecycle_starting"],t)}catch(e){this._params.monitoringService.notify((0,ne.L)((0,ie.IL)({reason:(0,be.N)(e).message})))}}))}onFocusStateChange(e){this._focusState.set(e)}onSizeChange(e){this._size.set({width:e.width,height:e.height})}onClose(){return Fu(this,void 0,void 0,(function*(){try{yield new Promise((e=>setTimeout(e))),yield this._params.lifecycleService.close()}catch(e){this._params.monitoringService.notify((0,ne.L)((0,ie.CN)({reason:(0,be.N)(e).message})))}}))}dispose(){this._sub.unsubscribe()}}class Pu{constructor(e,t){this._initialViewStack=e,this._viewEq=t,this._viewStack=p.h.create(this._initialViewStack),this.activeView=this._viewStack.view(y.YM)}push(e){this._viewStack.modify((t=>this._viewEq.equals(e,t[0])?t:y.QI(e,t)))}pop(){this._viewStack.modify((0,a.ls)(y.pW,(([e,t])=>(0,a.zG)(y.c2(t),o.getOrElse((()=>[e]))))))}popUntil(e){this._viewStack.modify((t=>{const n=t.findIndex(e);return(0,a.zG)(n>=0?o.some(n):o.some(0),o.chain((e=>y.c2(t.slice(e)))),o.getOrElse((()=>t)))}))}replace(e){this._viewStack.modify((t=>(0,a.zG)(y.QI(e,y.Gb(t)))))}has(e){return this._viewStack.view((t=>void 0!==t.find((t=>this._viewEq.equals(t,e)))))}}class Nu{constructor(e){this._subs=new l.w,this._state=p.h.create({hasBeenNonEmpty:o.none,textLength:o.none}),this.state=this._state.view(),this._subs.add(N.D(e.textEditorService.trimmedTextLength).subscribe((e=>{const t=0===e;this._state.modify((n=>({hasBeenNonEmpty:t?n.hasBeenNonEmpty:o.some(!0),textLength:o.some(e)})))})))}dispose(){this._subs.unsubscribe()}}var ju=n(52528);class Uu{constructor(e){this._params=e,this.isGrammarlyInstitutionMember=this._params.userService.user.view(ue),this.isPremium=this._params.userService.user.view(pe)}}function zu(e){var t,n;const i=new ot({lifecycleService:e.lifecycleService,experience:e.kind}),r=i.getLogger(zu.name),g=new ct({wrappedMonitoringService:e.monitoringService,logService:i});r.debug("Creating assistant view models.");const v="revision"===e.kind?p.h.create({kind:h._.Kind.disabled}).view():e.genAIAvailabilityService.availability,x=new l.w,k=new s.xQ,w=new lt({lifecycleService:e.lifecycleService,monitoringService:g,experience:e.kind,logService:i}),C=new pt(e.capiService,v,i),E="revision"!==e.kind?p.h.create(o.some(new tt(Object.assign(Object.assign({},e),{genAIStartSessionOptions:e.genAIStartSessionOptions,genAIAvailability:v,userActionTrackingService:C,selectionContextAvailability:null===(t=e.selectionContextAvailabilityService)||void 0===t?void 0:t.availability,metricService:w,monitoringService:g,logService:i})))):p.h.create(o.none),_=p.h.create(o.none);x.add(E.pipe(c.w(o.fold((()=>u.of(o.none)),(e=>e.session.view(o.some))))).subscribe(d.wW(_))),"revision"!==e.kind&&x.add(_.subscribe((t=>{var n;return null===(n=e.notifyGenAISessionStateChanged)||void 0===n?void 0:n.call(e,(0,a.zG)(t,o.chain((e=>"contextless"===e.kind?o.none:o.some({kind:e.kind,mode:e.mode,resultCount:"started"===e.kind?e.results.length:0})))))})));const A=new ut;x.add(E.view(o.map((e=>e.registerNotificationHandler((e=>A.notify(e)))))).subscribe());const R=new Tu({lifecycleService:e.lifecycleService,monitoringService:g,metricService:w}),B=new Pu(function(e,t){var n,i,r;const a=null===(r=null===(i=null===(n=null==e?void 0:e.session)||void 0===n?void 0:n.get)||void 0===i?void 0:i.call(n))||void 0===r?void 0:r.mode;return y.Ss(b.oA(["toneReport"===t?o.some({kind:"toneReport"}):o.none,"pushRewrite"===a||"quickRewrite"===a?o.some({kind:"thread"}):o.none]),{kind:"home"})}(o.toNullable(E.get()),function(e){if("revision"!==e.kind&&"genAIAndRevision"!==e.kind)return;switch(e.initialView){case void 0:return;case"toneReport":return e.toneDetectorService?e.initialView:void 0;default:(0,m.L0)(e.initialView)}}(e)),Ct.eq),T=new ju.e(null!==(n=e.theme)&&void 0!==n?n:p.h.create(f.u)),P=function(e){var t;return Object.assign(e,{trimmedTextLength:N.D(null!==(t=e.trimmedTextLength)&&void 0!==t?t:N.D(e.textUpdated).pipe(F.e(500),dt.O(null),c.w((()=>e.getText({start:0,end:Number.MAX_SAFE_INTEGER})())),I.U(o.fromEither),M.oA,I.U((e=>e.trim().length)))).pipe(S.x(),O.shareReplay({bufferSize:1,refCount:!0}))})}(e.textEditorService),j=new Nu({textEditorService:P}),U=new Su({assistantUIActions:k,userActionTrackingService:C,genAISessionService:E,routingViewModel:B,logService:i}),z=new ft({assistantUIActions:k,feedbackService:e.feedbackService,monitoringService:g,routingViewModel:B,logService:i}),D=o.fromNullable("revision"!==e.kind&&"genAIAndRevision"!==e.kind||!e.toneDetectorService?void 0:new du({externalService:e.toneDetectorService,capiService:e.capiService,logService:i})),L=(0,a.zG)(D,o.map((t=>new Ft({assistantUIActions:k,toneDetectorServiceInternal:t,userService:e.userService,trackingService:e.trackingService,uphookService:e.uphookService,routingViewModel:B,lifecycleViewModel:R})))),G=new Uu({userService:e.userService}),Z=(0,a.zG)(o.fromNullable("genAI"!==e.kind?Object.assign(Object.assign({},e),{isAllSuggestionsFeedEnabled:"genAIAndWritingExpert"!==e.kind,isPlagiarismEnabled:"genAIAndWritingExpert"!==e.kind&&e.isPlagiarismEnabled,isWritingExpertEnabled:"genAIAndWritingExpert"===e.kind||e.isWritingExpertEnabled,monitoringService:g}):void 0),o.map((t=>lu(Object.assign(Object.assign({},t),{routingViewModel:B,userViewModel:G,uphookService:e.uphookService,assistantUIActions:k,logService:i,lifecycleViewModel:R}))))),H=(0,a.zG)(Z,o.map((e=>e.viewModels))),V=new Ru({assistantUIActions:k,lifecycleViewModel:R,routingViewModel:B,genAIAvailability:v,monitoringService:g,genAISessionService:E,textEditorService:P,userActionTrackingService:C,uphookService:e.uphookService,userService:e.userService,notificationService:A,logService:i,hasRevision:o.isSome(H),textIsEmpty:j.state.view("textLength").view(o.map((e=>0===e))),tracking:e.trackingService}),$=new Tt(_,B.activeView,v,L,(0,a.zG)(H,o.map((e=>e.plagiarism))),(0,a.zG)(H,o.map((e=>e.writingExpert))),j.state),K=new un(k,$.state.view("contextualActions"),$.state.view("skillActions"),$.state.view("toneAction"),$.state.view("plagiarismAction"),$.state.view("writingExpertAction"),C,(()=>o.isSome(V.state.get().selectedAction)),(()=>V.focusPromptField())),W=new gt(A,k,B.activeView),q=new bu({capiService:e.capiService,monitoringService:g,logService:i}),Q=new yu({userSurveyService:q,assistantUIActions:k}),Y=new uu(k,B,g,i,"revision"!==e.kind?e.skillService:void 0);"revision"!==e.kind&&e.selectionContextAvailabilityService&&e.selectionContextAvailabilityService.augment((e=>p.h.combine(e,B.activeView,((e,t)=>kt(t)?e:{contextUpdatesClient:!1,contextUpdatesServer:!1}))));const J=(0,a.zG)(o.fromNullable("revision"===e.kind||"genAIAndRevision"===e.kind?e.settingsOptions:void 0),o.map((e=>new cu({assistantUIActions:k,routingViewModel:B,options:e})))),X=new xt({assistantUIActions:k,onboardingService:o.fromNullable(e.onboardingService)});return{experience:e.kind,lifecycle:R,assistant:V,textEditor:j,promptActions:$,promptMenu:K,notifications:W,voiceProfile:U,feedbackForm:z,userSurvey:Q,skill:Y,theme:T,settings:J,revision:H,toneDetector:L,onboarding:X,routing:B,user:G,logger:r,notify:t=>{var n;null===(n=e.notifyAssistantUIAction)||void 0===n||n.call(e,t),k.next(t)},dispose:()=>{var t,n,i,a;r.debug("Disposing of assistant view models."),null===(t=e.dispose)||void 0===t||t.call(e),x.unsubscribe(),null===(n=o.toNullable(Z))||void 0===n||n.dispose(),j.dispose(),V.dispose(),K.dispose(),W.dispose(),null==U||U.dispose(),z.dispose(),Q.dispose(),Y.dispose(),w.dispose(),X.dispose(),null===(i=o.toNullable(L))||void 0===i||i.dispose(),null===(a=o.toNullable(E.get()))||void 0===a||a.dispose()}}}(0,m.L0)(void 0);var Du=n(55162),Lu=n(69470),Gu=n(45578);const Zu=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:Du.Green30},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"})),Hu=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"25",viewBox:"0 0 24 25",fill:"none"},e),i.createElement("path",{d:"M11.9995 11.7307V16.681M11.9995 8.41401V8.43051M20.25 12.5005C20.25 17.0571 16.5562 20.751 11.9995 20.751C7.4429 20.751 3.74902 17.0571 3.74902 12.5005C3.74902 7.94388 7.4429 4.25 11.9995 4.25C16.5562 4.25 20.25 7.94388 20.25 12.5005Z",stroke:"#7CF4D8",strokeLinecap:"round",strokeLinejoin:"round"})),Vu=r.UI.Node.make((({state:e,notify:t})=>i.createElement(Gt.F.div,{className:Ku,"data-id":e.pipe(I.U((({id:e})=>e))),onMouseOver:t({kind:"mouseOver"}),onMouseOut:t({kind:"mouseOut"})},e.pipe(I.U((e=>{switch(e.kind){case"feedbackSubmitted":return i.createElement(i.Fragment,null,i.createElement(Zu,{className:Wu}),i.createElement("div",null,"Thanks for the feedback!"));case"voiceTagRemoved":return i.createElement(i.Fragment,null,i.createElement(Zu,{className:Wu}),i.createElement("div",null,"Removed"));case"information":return i.createElement(i.Fragment,null,i.createElement(Hu,{className:qu}),i.createElement("div",null,e.text));default:return(0,m.L0)(e)}}))),e.pipe(I.U((({id:e})=>i.createElement(Gu.x,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e})}))))))),$u=zt.ux.keyframes({from:{transform:`translateY(${zt.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),Ku=zt.ux.style({background:Du.BlueGray100,color:Lt.I.Text.Base.Inverse,borderRadius:zt.ux.rem(Lu.xB+Lu.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${zt.ux.rem(Dt.qp)} ${zt.ux.rem(Dt.qp)}`,gap:zt.ux.rem(Dt.qp),fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),animation:`${$u} 0.1s ease-in`}),Wu=zt.ux.style(Object.assign({},(0,qt.fx)(1.5))),qu=zt.ux.style({minWidth:"auto"}),Qu=r.UI.List.make(b.bw,Vu),Yu=r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:Xu},e.content))),Ju=r.UI.Knot.make(Yu,{content:Qu}),Xu=zt.ux.style({display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.x),transition:"top 0.1s ease-in"});var ed,td=n(27995);!function(e){e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick",e.unmount="unmount",e.other="other"}(ed||(ed={}));const nd=r.UI.Node.make((({view:e,notify:t})=>i.createElement(Gt.F.Fragment,null,e("step").pipe(I.U(o.fold(a.gn,(e=>i.createElement(td.J2,{key:String(e.stepId),"data-testid":`onboarding-${String(e.stepId)}`,reference:e.reference,placement:e.placement,offset:e.offset,containerPadding:e.containerPadding,title:e.title,body:e.body,onClose:n=>t({kind:"onboardingStepUnmount",stepId:e.stepId,reason:n in ed?ed[n]:ed.other})(),onMount:t({kind:"onboardingStepMount",stepId:e.stepId})}))))))));var id=n(15073),rd=n(90845),od=n(9223),ad=n(16882),sd=n(24435);const ld=i.createContext({notifyUnmount:a.Q1}),cd=e=>i.createElement(Vt.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:Qt.Z.BrandGreen60},e),i.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),ud=e=>i.createElement(Vt.a1,Object.assign({width:"32",height:"32",fill:Lt.I.Text.Base.Subdued,viewBox:"0 0 32 32"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"}));var dd=n(31542),md=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const pd="#161719",hd="#646B81",fd=e=>{var{children:t,style:n,name:r}=e,a=md(e,["children","style","name"]);const[s,l]=i.useState(null),c=i.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),l(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]),u=i.useContext(id.u.Context);return i.useEffect((()=>{const e=u.subscribe((e=>{s&&id.u.setRootCssVar(s,o.some(e))}));return()=>e.unsubscribe()}),[s]),i.createElement(i.Fragment,null,i.createElement("iframe",Object.assign({},a,{style:Object.assign({},n),onLoad:c,srcDoc:"<html><body></body></html>","data-testid":r})),s&&(0,dd.createPortal)(t,s))},gd=1.375,vd=({fitContentHeight:e,text:t,ariaLabel:n,onChange:r,placeholder:o,disabled:a,className:s,onFocus:l,onBlur:c,onKeyDownEnter:u,autofocus:d,onKeyDownArrowUp:m,onKeyDownArrowDown:p,onKeyDownShiftEnter:h,theme:f})=>{var g,v,b,y,x,k,S,w,C,E,_,I,A,O,R,B,M,F,T,P,N,j,U,z,D,L,G,Z,H,V,$;const K=gd*(o?o.length:1)+(null!==(v=null===(g=null==f?void 0:f.paddingRems)||void 0===g?void 0:g.top)&&void 0!==v?v:0)+(null!==(y=null===(b=null==f?void 0:f.paddingRems)||void 0===b?void 0:b.bottom)&&void 0!==y?y:0),[W,q]=i.useState({kind:"rem",value:K}),[Q,Y]=i.useState(null);return i.useEffect((()=>{Q&&void 0!==d&&(Q.focus(),Q.selectionStart=t.length,Q.selectionEnd=t.length)}),[d,Q]),i.useLayoutEffect((()=>{if(""===t)q({kind:"rem",value:K});else{const e=null==Q?void 0:Q.scrollHeight;q(e?{kind:"px",value:e}:{kind:"rem",value:K})}}),[t,Q,o]),i.createElement(fd,{className:s,style:{height:e?"rem"===W.kind?zt.ux.rem(W.value):zt.ux.px(W.value):void 0,maxHeight:(null==f?void 0:f.maxHeightRems)?zt.ux.rem(f.maxHeightRems):"none",minHeight:(null==f?void 0:f.minHeightRems)?zt.ux.rem(f.minHeightRems):"none"},title:`${n} container`,name:"textarea-iframe"},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${zt.ux.rem(Lu.xB)};\n        overflow-y: auto;\n        padding: ${zt.ux.rem(null!==(k=null===(x=null==f?void 0:f.paddingRems)||void 0===x?void 0:x.top)&&void 0!==k?k:0)} ${zt.ux.rem(null!==(w=null===(S=null==f?void 0:f.paddingRems)||void 0===S?void 0:S.right)&&void 0!==w?w:0)} ${zt.ux.rem(null!==(E=null===(C=null==f?void 0:f.paddingRems)||void 0===C?void 0:C.bottom)&&void 0!==E?E:0)} ${zt.ux.rem(null!==(I=null===(_=null==f?void 0:f.paddingRems)||void 0===_?void 0:_.left)&&void 0!==I?I:0)};\n        width: 100%;\n        height: 100%;\n        border: none;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${null!==(A=null==f?void 0:f.fontSize)&&void 0!==A?A:zt.ux.rem(.875)};\n        font-weight: 400;\n        color: ${null!==(O=null==f?void 0:f.color)&&void 0!==O?O:pd};\n      }\n      .textarea::placeholder {\n        color: ${hd};\n      }\n      .textarea:placeholder-shown {\n        padding: ${(null==f?void 0:f.placeholderPaddingRems)?`${zt.ux.rem(null!==(B=null===(R=f.placeholderPaddingRems)||void 0===R?void 0:R.top)&&void 0!==B?B:0)} ${zt.ux.rem(null!==(F=null===(M=f.placeholderPaddingRems)||void 0===M?void 0:M.right)&&void 0!==F?F:0)} ${zt.ux.rem(null!==(P=null===(T=f.placeholderPaddingRems)||void 0===T?void 0:T.bottom)&&void 0!==P?P:0)} ${zt.ux.rem(null!==(j=null===(N=f.placeholderPaddingRems)||void 0===N?void 0:N.left)&&void 0!==j?j:0)}`:`${zt.ux.rem(null!==(z=null===(U=null==f?void 0:f.paddingRems)||void 0===U?void 0:U.top)&&void 0!==z?z:0)} ${zt.ux.rem(null!==(L=null===(D=null==f?void 0:f.paddingRems)||void 0===D?void 0:D.right)&&void 0!==L?L:0)} ${zt.ux.rem(null!==(Z=null===(G=null==f?void 0:f.paddingRems)||void 0===G?void 0:G.bottom)&&void 0!==Z?Z:0)} ${zt.ux.rem(null!==(V=null===(H=null==f?void 0:f.paddingRems)||void 0===H?void 0:H.left)&&void 0!==V?V:0)}`};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${zt.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${hd};\n      }\n      `.replace(/\s/g,"")}}),i.createElement("div",{className:"container"},i.createElement("textarea",{"aria-label":n,className:"textarea",style:{lineHeight:null!==($=null==f?void 0:f.lineHeight)&&void 0!==$?$:zt.ux.rem(gd)},value:t,ref:Y,onChange:e=>r(e.target.value),placeholder:1===(null==o?void 0:o.length)?o[0]:void 0,disabled:a,onFocus:()=>null==l?void 0:l(),onBlur:()=>null==c?void 0:c(),onKeyDown:e=>{var t;u&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),u()):"ArrowUp"===e.key&&m&&(bd(t=e.currentTarget)&&0===t.selectionStart)?(e.preventDefault(),e.stopPropagation(),m()):"ArrowDown"===e.key&&p&&function(e){return bd(e)&&e.selectionStart===e.value.length}(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),p()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==h||h())}}),((null==o?void 0:o.length)||0)>1&&""===t?i.createElement("div",{className:"placeholder",style:{lineHeight:zt.ux.rem(gd)}},(o||[]).map(((e,t)=>i.createElement(i.Fragment,{key:t},e,i.createElement("br",null))))):null))};function bd(e){return e.selectionStart===e.selectionEnd}const yd="goBtn",xd="stopBtn",kd={top:Dt.x,right:3.5*Dt.qp,bottom:Dt.x,left:Dt.qp},Sd={top:Dt.x,right:Dt.qp,bottom:Dt.x,left:Dt.qp},wd=zt.ux.style({display:"flex",position:"relative",alignItems:"flex-start",padding:0,gap:zt.ux.rem(Dt.F2),justifyContent:"space-between"}),Cd=zt.ux.style({flexGrow:1,paddingTop:zt.ux.rem(Dt.F2+Dt.W9)}),Ed=zt.ux.style({width:zt.ux.percent(100),border:"none"}),_d={position:"absolute",bottom:zt.ux.rem(Dt.x),right:zt.ux.rem(Dt.qp)},Id=(0,qt.dD)(_d,xd),Ad=(0,qt.dD)(Object.assign(Object.assign({},_d),{$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:Du.BlueGray30}}}}}),yd),Od=zt.ux.joinClasses([yd,zt.ux.style(Ad)]),Rd=zt.ux.joinClasses([xd,zt.ux.style(Id)]),Bd=r.UI.Node.make((({state:e,notify:t})=>{const{notifyUnmount:n}=i.useContext(ld),{onMount:r}=(0,sd.F)((0,a.ls)(T.b((e=>t({kind:ht.i.Kind.mount,name:bt.e.promptInput,element:e})())),od.x((()=>n({kind:ht.i.Kind.unmount,name:bt.e.promptInput})))));return i.createElement(Gt.F.div,{className:wd,mount:r},i.createElement(Gt.F.div,{className:Cd},e.pipe(I.U((({placeholder:e,kind:n,text:r,autofocusToken:a})=>i.createElement(vd,{text:r,theme:{paddingRems:kd,placeholderPaddingRems:Sd,maxHeightRems:20,minHeightRems:2},ariaLabel:"custom prompt",className:Ed,placeholder:"ready"===n?o.toUndefined(e):void 0,fitContentHeight:!0,autofocus:a,onChange:e=>t({kind:ht.i.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:t({kind:ht.i.Kind.promptFieldKeyPressEnter,text:r,fieldReadyState:n}),onFocus:t({kind:ht.i.Kind.promptFieldFocusChange,focused:!0}),onBlur:t({kind:ht.i.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:t({kind:ht.i.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:t({kind:ht.i.Kind.promptFieldKeyPressArrowDown})}))))),e.pipe(I.U((({kind:e,text:n,genAIAvailability:r})=>h._.isUnavailable(r)?null:"waitingForResult"===e?i.createElement(Zt.z,{variant:"tertiary",className:Rd,onClick:t({kind:ht.i.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},i.createElement(ud,null)):"ready"===e&&""!==n.trim()?i.createElement(Zt.z,{variant:"tertiary",className:Od,onClick:t({kind:ht.i.Kind.promptSubmitButtonClick,text:n}),disabled:""===n.trim()||h._.isUnavailable(r),name:"promptSend",compact:!0,size:"large"},i.createElement(cd,null)):null))))}));var Md=n(85089),Fd=n(80334);function Td(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}var Pd=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Nd=i.createContext({scrollableContainer:p.h.create(o.none),registerIntersectionObserver:()=>({dispose:a.Q1}),scrolling:p.h.create(!1),isDefault:!0}),jd=i.forwardRef((function(e,t){var{children:n,className:r,onScroll:a,style:s}=e,l=Pd(e,["children","className","onScroll","style"]);const c=i.useMemo((()=>p.h.create(o.none)),[]),u=i.useMemo((()=>new Map),[]),m=i.useCallback((e=>{const t=Array.from(u.entries());for(const[n,{observers:i}]of t)u.set(n,{intersectionObserver:zd(e,n,i),observers:i})}),[u]),h=i.useCallback(((e,t,n)=>{var i,r;const a=u.get(e),s=null!==(i=null==a?void 0:a.observers)&&void 0!==i?i:new Map;s.set(t,n);const l=null!==(r=null==a?void 0:a.intersectionObserver)&&void 0!==r?r:zd(o.toNullable(c.get()),e,s);return u.set(e,{intersectionObserver:l,observers:s}),l.observe(t),{dispose:()=>{const n=u.get(e);n&&(n.intersectionObserver.unobserve(t),n.observers.delete(t),0===n.observers.size&&(n.intersectionObserver.disconnect(),u.delete(e)))}}}),[u]);i.useEffect((()=>()=>{u.forEach((e=>{Array.from(e.observers.keys()).forEach((t=>{e.intersectionObserver.unobserve(t)})),e.observers.clear(),e.intersectionObserver.disconnect()})),u.clear()}),[]);const f=i.useMemo((()=>p.h.create(0)),[]),g=i.useMemo((()=>p.h.create(!1)),[]),v=i.useMemo((()=>d.Hl(f.pipe(B.T(1)),100,!0).pipe(dt.O(!1),T.b(d.wW(g)))),[f,g]);rd.P.useSubscriptionTo(v);const b=i.useMemo((()=>({scrollableContainer:c,registerIntersectionObserver:h,scrolling:g,isDefault:!1})),[c,h,g]),y=i.useMemo((()=>p.h.create(o.none)),[]),x=i.useMemo((()=>p.h.create(o.none)),[]),k=i.useMemo((()=>vt.aj([Dd(c,y),Dd(c,x)]).pipe(I.U((([e,t])=>({topOverflow:e,bottomOverflow:t}))),dt.O({topOverflow:!1,bottomOverflow:!1}),O.skipBy(U.MW({topOverflow:U.vD,bottomOverflow:U.vD})))),[y,x,c]);return i.createElement(Gt.F.div,Object.assign({},l,{className:zt.ux.joinClasses([Ud,r]),"data-role":"scroll",mount:Td([t,e=>{m(e),c.set(o.fromNullable(e))}]),onScroll:e=>{var t,n;null==a||a(e),f.set(null!==(n=null===(t=o.toNullable(c.get()))||void 0===t?void 0:t.scrollTop)&&void 0!==n?n:0)},style:s,"data-overflow-top":k.pipe(I.U((e=>e.topOverflow))),"data-overflow-bottom":k.pipe(I.U((e=>e.bottomOverflow)))}),i.createElement("div",{style:{margin:0,display:"none"},ref:e=>y.set(o.fromNullable(e)),"aria-hidden":!0}),i.createElement(Nd.Provider,{value:b},n),i.createElement("div",{style:{margin:0,display:"none"},ref:e=>x.set(o.fromNullable(e)),"aria-hidden":!0}))})),Ud=zt.ux.style({position:"relative",overflowY:"auto"});function zd(e,t,n){return new IntersectionObserver((e=>e.forEach((e=>{var t;return null===(t=n.get(e.target))||void 0===t?void 0:t(e)}))),{root:e,rootMargin:t})}function Dd(e,t){return p.h.combine(e,t,((e,t)=>(0,a.zG)(g.g(o.option)(e,t),o.map((([e,t])=>function(e,t){const n={root:e,rootMargin:"0px",threshold:[0,1]};return Md.n(t,n).pipe(_.h(fi.Od),I.U((e=>1!==e[0].intersectionRatio)),dt.O(t.offsetHeight>e.offsetHeight))}(e,t)))))).pipe(M.oA,c.w(a.yR),Fd.h(u.of(!0)))}var Ld=n(92262);const Gd=()=>{const{registerIntersectionObserver:e,isDefault:t}=i.useContext(Nd),n=i.useRef([]),r=i.useRef(new s.xQ),o=i.useRef(r.current.pipe(F.e(0),si.QV(Ld.Z),T.b((()=>{n.current=n.current.reduce(((e,t)=>(t.ref.isConnected?e.push(t):t.disposable.dispose(),e)),[])}))).subscribe());return i.useEffect((()=>function(){o.current.unsubscribe(),n.current.forEach((({disposable:e})=>e.dispose()))}),[]),{refCallback:i.useCallback(((i,o)=>a=>{if(a)if(i(),t)o();else{const t=e("",a,(e=>{e.isIntersecting&&(o(),t.dispose())}));n.current.push({ref:a,disposable:t}),r.current.next()}}),[e,t])}},Zd=()=>i.createElement("div",{role:"separator",className:zt.ux.style({position:"relative",width:"100%"})},i.createElement("div",{className:zt.ux.style({position:"absolute",bottom:0,left:zt.ux.rem(rn),right:zt.ux.rem(on),borderBottom:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`})})),Hd=r.UI.Node.make((({view:e,notify:t})=>{const{refCallback:n}=Gd();return i.createElement(Gt.F.div,{className:Vd,"data-testid":"action-store"},e("actionGroups").pipe(I.U((e=>{let r=-1;return e.map((({label:e,actions:o})=>i.createElement("section",{key:e,className:$d},e.trim().length>0&&i.createElement("h1",{className:Kd},e),o.map((({label:e,icon:o,action:a},s)=>(r++,i.createElement(i.Fragment,{key:e},0!==s&&i.createElement(Zd,null),i.createElement(Jt,{key:e,label:e,icon:o,onClick:t({kind:ht.i.Kind.actionBrickClick,action:a,position:r,placement:"allActions"}),ref:n(t({kind:ht.i.Kind.actionBrickMount,action:a,position:r,placement:"allActions"}),t({kind:ht.i.Kind.actionBrickShow,action:a,position:r,placement:"allActions"}))}))))))))}))))})),Vd=zt.ux.style({padding:`${zt.ux.rem(2.25)} 0 ${zt.ux.rem(1)} 0`,display:"flex",flexDirection:"column"}),$d=zt.ux.style({display:"flex",flexDirection:"column"}),Kd=zt.ux.style({margin:0,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:700,padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`});var Wd=n(54001);const qd=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:Lt.I.Text.Base.Subdued,strokeMiterlimit:"4.25735"})),Qd="brick",Yd=(0,qt.dD)({padding:`0 ${zt.ux.rem(Dt.x)} 0 ${zt.ux.rem(Dt.F2)}`},Qd),Jd={display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)},Xd=(0,qt.dD)({minHeight:zt.ux.rem(1.75),fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),color:Du.BlueGray80},Qd),em=(0,qt.dD)({minHeight:zt.ux.rem(2),fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),color:Lt.I.Text.Base.Default},Qd),tm=(0,qt.dD)({boxShadow:`inset 0 0 0 ${zt.ux.rem(.125)} ${Qt.Z.BrandGreen60}`},Qd),nm=(0,qt.dD)({boxShadow:"none",color:Du.NeutralGray70,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{color:Qt.Z.BlueGray80,boxShadow:`inset 0 0 0 1px ${Qt.Z.BlueGray40}`,backgroundColor:Qt.Z.BlueGray5}}},Qd),im={textAlign:"left",whiteSpace:"initial",lineHeight:zt.ux.rem(1.125),margin:`${zt.ux.rem(.25)} 0 ${zt.ux.rem(.25)} 0`},rm=Object.assign({},(0,qt.fx)(1.5)),om=zt.ux.joinClasses([Qd,zt.ux.style(Yd)]),am=zt.ux.style(Jd),sm=(zt.ux.style(Xd),zt.ux.style(em)),lm=zt.ux.style(tm),cm=(zt.ux.style(nm),zt.ux.style(im)),um=(zt.ux.style(rm),zt.ux.style(rm)),dm=zt.ux.style(rm),mm=zt.ux.style(rm),pm=(0,Wd.xb)(Zt.z),hm="actionBrick",fm=i.forwardRef((function({action:e,label:t,icon:n,onClick:r},o){return i.createElement(pm,Object.assign({variant:"secondary",onClick:r,name:"actionBrick"},(0,Wd.Sh)(hm,om,"go"===e.kind?lm:null,sm)),i.createElement("div",{className:am,ref:o},(0,a.zG)(n,v.fold((e=>{switch(e){case"go":return i.createElement(qd,{className:um});case"plagiarism":return i.createElement(Kt,{className:dm});case"writingExpert":return i.createElement(Wt,{className:mm});default:return(0,m.L0)(e)}}),(e=>i.createElement("img",{src:e,style:{width:20,height:20}})))),i.createElement("span",Object.assign({className:cm},$(t)))))})),gm=r.UI.Node.make((({notify:e,state:t})=>{const{refCallback:n}=Gd();return i.createElement(Gt.F.Fragment,null,t.pipe(I.U((({action:t,label:r,icon:o,position:a,placement:s})=>i.createElement(fm,{action:t,label:r,icon:o,onClick:e({kind:ht.i.Kind.actionBrickClick,action:t,position:a,placement:s}),ref:n(e({kind:ht.i.Kind.actionBrickMount,action:t,position:a,placement:s}),e({kind:ht.i.Kind.actionBrickShow,action:t,position:a,placement:s}))})))))})),vm=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{refCallback:r}=Gd();return i.createElement(Gt.F.div,{className:xm,"data-testid":"search-results"},e.goAction,i.createElement(Gt.F.div,{className:Sm},t("actions").pipe(I.U((e=>e.map((({label:e,icon:t,action:o},a)=>i.createElement(i.Fragment,{key:e},0!==a&&i.createElement(Zd,null),i.createElement(Jt,{key:e,label:e,icon:t,onClick:n({kind:ht.i.Kind.actionBrickClick,action:o,position:a,placement:"search"}),ref:r(n({kind:ht.i.Kind.actionBrickMount,action:o,position:a,placement:"search"}),n({kind:ht.i.Kind.actionBrickShow,action:o,position:a,placement:"search"}))})))))))))})),bm=r.UI.Union.asOption(r.UI.Composite.make(r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:km},e.action))),gm)),ym=r.UI.Knot.make(vm,{goAction:bm}),xm=zt.ux.style({background:"transparent",display:"flex",flexDirection:"column",alignItems:"flex-start"}),km=zt.ux.style({padding:`${zt.ux.rem(9*Dt.W9)} ${zt.ux.rem(Dt.qp)} 0 ${zt.ux.rem(Dt.qp)}`}),Sm=zt.ux.style({display:"flex",flexDirection:"column",width:"100%",marginTop:zt.ux.rem(7*Dt.W9)}),wm=r.UI.Union.make("kind",{none:r.UI.Node.empty,searchResults:ym,actionStore:Hd}),Cm=r.UI.Knot.make(r.UI.Grid.make((({slots:e,notify:t})=>i.createElement(i.Fragment,null,i.createElement(Zt.z,{variant:"tertiary",compact:!0,style:Im,onClick:t({kind:ht.i.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small"},i.createElement(Vt.JO.Arrow,{direction:Vt.n4.down})),i.createElement(jd,{className:_m},i.createElement("div",{ref:e=>e&&t({kind:ht.i.Kind.mount,name:bt.e.promptMenuContent,element:e})(),onKeyDown:e=>{"ArrowDown"===e.key?t({kind:ht.i.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&t({kind:ht.i.Kind.promptMenuKeyPressArrowUp})()}},e.content))))),{content:wm}),Em=r.UI.Union.asOption(Cm),_m=zt.ux.style({$nest:{'&[data-role="scroll"]':{borderBottom:`0.5px solid ${Lt.I.Border.Base.Subdued}`}}}),Im={default:{position:"absolute",top:zt.ux.rem(Dt.x),right:zt.ux.rem(Dt.x),zIndex:1}},Am=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:r,rect:s}=rd.P.useRectWatcher(),{notifyUnmount:l}=i.useContext(ld),{ref:c,onMount:u}=(0,sd.F)((0,a.ls)(T.b((e=>n({kind:ht.i.Kind.mount,name:bt.e.promptInputAndMenuContainer,element:e})())),od.x((()=>l({kind:ht.i.Kind.unmount,name:bt.e.promptInputAndMenuContainer})))));return i.createElement(Gt.F.div,{className:Mm,"data-testid":"prompt-container"},i.createElement(Gt.F.div,{mount:u,className:Fm,"data-expanded":t("menuExpanded"),onKeyUp:t("menuExpanded").pipe(I.U((e=>t=>{"Escape"===t.key&&n({kind:ht.i.Kind.promptFieldKeyPressEscape,menuOpened:e})()}))),onFocus:()=>{var e;return n({kind:ht.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.toNullable(c.get()))||void 0===e?void 0:e.contains(Z(document)))||!1})()},onBlur:()=>{var e;return n({kind:ht.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.toNullable(c.get()))||void 0===e?void 0:e.contains(Z(document)))||!1})()}},e.promptStudioMenu,i.createElement("div",{ref:r},e.promptField)),vt.aj([s,t("menuExpanded")]).pipe(I.U((([e,t])=>(0,a.zG)(e,o.filter((()=>t)),o.fold(a.gn,(({height:e})=>i.createElement("div",{className:Tm,style:{height:e},role:"presentation"}))))))))})),Om=r.UI.Knot.make(Am,{promptField:Bd,promptStudioMenu:Em}),Rm=r.UI.Union.asOption(Om),Bm=Dt.mh,Mm=zt.ux.style({position:"relative",margin:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)} ${zt.ux.rem(Bm)} ${zt.ux.rem(Dt.mh)}`}),Fm=zt.ux.style({background:Lt.I.Background.Base.Default,boxShadow:ad.H8.boxShadow,border:ad.H8.border,borderRadius:zt.ux.rem(Lu.xB+Lu.fe),$nest:{"&[data-expanded='true']":{boxShadow:ad.q_.boxShadow,border:ad.q_.border,position:"absolute",bottom:0,width:"100%",display:"grid",gridTemplateRows:"1fr auto",zIndex:10}}}),Tm=zt.ux.style({opacity:0,pointerEvents:"none",visibility:"hidden"});var Pm=n(33498),Nm=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const jm="data-card",Um=e=>{var{children:t,style:n}=e,r=Nm(e,["children","style"]);return i.createElement(Gt.F.article,Object.assign({[jm]:!0,className:(0,Pm.D)(n).pipe(I.U((e=>zt.ux.style({display:"flex",flexDirection:"column",color:Lt.I.Text.Base.Default,padding:zt.ux.rem(Dt.mh)},e))))},r),t)};var zm=n(97329),Dm=n(19962);function Lm(e,t=!1){return i.useMemo((()=>e.pipe(c.w(o.fold((()=>u.of(o.none)),(e=>{return(t?(n=e,new eu.y((e=>{const t=new zm.default((t=>{e.next(Dm.UL.fromRectLike(t[0].contentRect))}));return t.observe(n),()=>t.disconnect()}))):Md.YC(e)).pipe(dt.O(e),I.U((()=>o.some(e.getBoundingClientRect()))));var n}))))),[e])}var Gm=n(12271);function Zm(e,t){const n=i.useMemo((()=>vt.aj([t.pipe(M.oA,I.U((e=>o.fromNullable(G(e,3)))),M.oA),e.pipe(O.skipBy(o.getEq(U.w4)))]).pipe(F.e(0),I.U(Gm.li),T.b((e=>{e.scrollTop=e.scrollHeight-e.clientHeight})))),[t]);rd.P.useSubscriptionTo(n)}const Hm="primaryBtn",Vm="rephraseBtn",$m="reportBtn";var Km=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Wm=e=>{var{isActive:t,children:n,onHovered:r,onFocused:o,onCopy:a,style:s}=e,l=Km(e,["isActive","children","onHovered","onFocused","onCopy","style"]);const c=i.useRef(null);return i.createElement(Um,Object.assign({},l,{mount:c,style:Object.assign(Object.assign({},Qm),s),"data-active":t,onMouseEnter:()=>null==r?void 0:r(!0),onMouseLeave:()=>null==r?void 0:r(!1),onFocus:()=>{var e;return null==o?void 0:o((null===(e=c.current)||void 0===e?void 0:e.contains(Z(document)))||!1)},onBlur:()=>{var e;return null==o?void 0:o((null===(e=c.current)||void 0===e?void 0:e.contains(Z(document)))||!1)},onCopy:a}),n)},qm={backgroundColor:Lt.I.Background.Base.Default},Qm={backgroundColor:"transparent",gap:zt.ux.rem(Dt.x),padding:zt.ux.rem(Dt.mh),$nest:{[`& ${(0,qt.s4)(Hm,qt.Ki)}`]:{fontSize:zt.ux.rem(.875)},[`& ${(0,qt.s4)(Vm,qt.Ki)}`]:{fontSize:zt.ux.rem(.875)},"&:focus, &:hover":Object.assign({},qm),"&[data-active='true']":Object.assign({},qm)}};var Ym=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Jm="prompt-result",Xm="data-card-type",ep=e=>{var{header:t,footer:n,isActive:r,onHovered:o,onFocused:a,onCopy:s,body:l,style:c}=e,u=Ym(e,["header","footer","isActive","onHovered","onFocused","onCopy","body","style"]);return i.createElement(Wm,Object.assign({},u,{[Xm]:Jm,isActive:r,onHovered:o,onFocused:a,style:c,onCopy:s}),t,l,n)};var tp=n(13713);const np=(0,Wd.xb)(jd),ip=e=>{var t;const n=i.useMemo((()=>{var t;return null!==(t=e.menuRef)&&void 0!==t?t:u.of(o.none)}),[e.menuRef]),r=i.useMemo((()=>{var t;return null!==(t=e.scrollContentToBottomToken)&&void 0!==t?t:u.of(o.none)}),[e.scrollContentToBottomToken]),{onMount:s,ref:l}=rd.P.useElWatcher(),{onMount:c,ref:d}=rd.P.useElWatcher();Zm(r,d);const m=Lm(l),h=Lm(n),f=i.useMemo((()=>p.h.create(!1)),[]),g=i.useMemo((()=>d.pipe(I.U(o.fold((()=>{f.set(!1)}),(e=>{f.set(e.scrollTop>0)}))))),[d]),v=i.useMemo((()=>e.onRectChange?m.pipe(M.oA,I.U((t=>{var n;null===(n=e.onRectChange)||void 0===n||n.call(e,t)}))):P.E),[m]),b=i.useMemo((()=>{var t;return vt.aj([h,m,e.heightBehavior,null!==(t=e.menuVerticalMargin)&&void 0!==t?t:u.of(void 0)]).pipe(I.U((([e,t,n,i])=>(0,a.zG)(e,o.fold((()=>({sentinelHeight:void 0,menuMaxHeight:void 0})),(e=>{if("fitContent"===n.kind){const t=e.height+(null!=i?i:0);return{sentinelHeight:Math.min(n.maxHeight,t),menuMaxHeight:n.maxHeight-(null!=i?i:0)}}return{sentinelHeight:void 0,menuMaxHeight:(0,a.zG)(t,o.fold(a.r5,(e=>Math.max(e.height-(null!=i?i:0),0))))}}))))),dt.O({sentinelHeight:void 0,menuMaxHeight:void 0}))}),[h,m]),y=i.useMemo((()=>n.pipe(M.cp((e=>b.pipe(T.b((({menuMaxHeight:t})=>{e.style.setProperty("max-height",`${t}px`)}))))))),[b,n]);return rd.P.useSubscriptionTo(g),rd.P.useSubscriptionTo(b),rd.P.useSubscriptionTo(y),rd.P.useSubscriptionTo(v),i.createElement(tp.l.Provider,{value:{portalContainer:l}},i.createElement(Gt.F.div,{dir:"ltr","data-testid":"assistant",role:"dialog","aria-label":"Grammarly Assistant","data-dragging":e.dragBehavior.pipe(I.U((e=>"draggable"===e.kind&&e.isDragging))),tabIndex:0,onFocus:e.onFocus,onBlur:e.onBlur,className:zt.ux.joinClasses([ap,e.containerClassName]),style:vt.aj([e.heightBehavior,e.widthBehavior]).pipe(I.U((([e,t])=>Object.assign(Object.assign({},"fitContainer"===e.kind?{height:"100%"}:{maxHeight:e.maxHeight,height:e.height}),"fitContainer"===t.kind?{width:"100%"}:{minWidth:t.minWidth,maxWidth:t.maxWidth})))),mount:t=>{var n;s(t),null===(n=e.onMountContainer)||void 0===n||n.call(e,t)}},i.createElement(Gt.F.header,{className:vt.aj([f,e.dragBehavior]).pipe(I.U((([e,t])=>lp(e,"draggable"===t.kind)))),"aria-label":"Grammarly Assistant Header",mount:e.onMountHeader},e.header),i.createElement("div",{className:up,"data-testid":"notifications"},i.createElement(Gt.F.div,{className:f.view((0,z.RN)(pp,mp))},e.notifications)),i.createElement(np,{mount:c,className:zt.ux.joinClasses([cp,e.contentClassName]),onScroll:e=>f.set(e.currentTarget.scrollTop>0),style:(null!==(t=e.canScrollContent)&&void 0!==t?t:u.of(!0)).pipe(I.U((0,z.RN)("auto","hidden")),I.U((e=>({overflowY:e})))),role:"main"},e.content),i.createElement("footer",{className:zt.ux.joinClasses([hp,e.footerClassName])},e.footer),i.createElement(Gt.F.Fragment,null,b.pipe(I.U((({sentinelHeight:e})=>e?i.createElement("div",{key:"sentinel",className:fp,role:"presentation",style:{height:e}}):null)))),e.onboarding))},rp="header",op="content",ap=zt.ux.style({overflow:"hidden",fontFamily:"Inter, sans-serif",padding:0,margin:0,borderRadius:"inherit",display:"grid",gridTemplateColumns:"1fr 0",gridTemplateRows:"auto 0 1fr auto",gridTemplateAreas:'"header sentinel" "notifications sentinel" "content sentinel" "footer sentinel"',background:Lt.I.Background.Base.Default,$nest:{[`&:has(.${rp} [role=button][data-hovered=true])`]:{$nest:{[`.${rp}`]:{background:"inherit"}}},"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${op}`]:{pointerEvents:"none"},[`.${rp}`]:{pointerEvents:"none",background:Qt.Z.ButtonBackgroundTertiaryActive}}}}}),sp={minWidth:0},lp=(e,t)=>zt.ux.joinClasses([rp,zt.ux.style(Object.assign(Object.assign({},sp),{gridArea:"header",display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",height:zt.ux.rem(3),gap:zt.ux.rem(Dt.x),padding:`0 ${zt.ux.rem(Dt.x)} 0 ${zt.ux.rem(Dt.mh)}`,boxSizing:"border-box",clipPath:e?"inset(0 0 -5px 0)":void 0,boxShadow:e?ad.H8.boxShadow:void 0,borderBottom:e?ad.H8.border:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`,zIndex:e?1:void 0,cursor:t?"grab":void 0,position:"relative","--grammarly-app-region":"drag",$nest:{button:{"--grammarly-app-region":"no-drag"},"&:hover":{background:t?Qt.Z.ButtonBackgroundTertiaryHover:void 0}}}))]),cp=zt.ux.joinClasses([op,zt.ux.style(Object.assign(Object.assign({},sp),{gridArea:"content",$nest:{"& [data-card] + [data-card]":{borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`},'& [data-card-type="prompt-result"] + [data-card-type="prompt-result"]':{borderTop:0,position:"relative",$nest:{"&::before":{content:"''",position:"absolute",top:0,left:zt.ux.rem(1),right:zt.ux.rem(1),borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`}}}}}))]),up=zt.ux.style({position:"relative",gridArea:"notifications"}),dp={zIndex:1e3,position:"absolute",right:zt.ux.rem(Dt.x),marginLeft:zt.ux.rem(Dt.x)},mp=zt.ux.style(Object.assign(Object.assign({},dp),{top:0})),pp=zt.ux.style(Object.assign(Object.assign({},dp),{top:zt.ux.rem(Dt.F2)})),hp=zt.ux.style(Object.assign(Object.assign({},sp),{gridArea:"footer",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"})),fp=zt.ux.style({gridArea:"sentinel",visibility:"hidden"});function gp(e){return"focus"===e.kind}function vp(e){return"mount"===e.kind}function bp(e){return"headerMount"===e.kind}function yp(e){return"rectChange"===e.kind}const xp=r.UI.Grid.make((({slots:e,notify:t,view:n})=>{const r=i.useContext(id.u.Context);return i.createElement(ip,{key:"assistant-container",onFocus:t({kind:"focus",focused:!0}),onBlur:t({kind:"focus",focused:!1}),heightBehavior:n("heightBehavior"),widthBehavior:n("widthBehavior"),dragBehavior:n("dragBehavior"),menuRef:n("menuRef"),menuVerticalMargin:r.pipe(I.U((e=>(1+Bm)*e))),scrollContentToBottomToken:n("scrollContentToBottomToken"),canScrollContent:n("canScrollContent"),onMountContainer:e=>{e&&t({kind:"mount",element:e})()},onMountHeader:e=>{e&&t({kind:"headerMount",element:e})()},onRectChange:e=>{e&&t({kind:"rectChange",rect:e})()},header:e.header,content:e.content,footer:e.footer,notifications:e.notifications,onboarding:e.onboarding})}));var kp=n(72004);const Sp=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),i.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),wp=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),i.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),Cp=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})),i.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),i.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})))),Ep=(e,t)=>(0,Wd.Sh)(Ip,e===t&&Ap),_p=zt.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:zt.ux.rem(Dt.mh),paddingRight:zt.ux.rem(Dt.mh)}),Ip=zt.ux.style({width:zt.ux.rem(5),height:zt.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:zt.ux.rem(Dt.x),borderRadius:zt.ux.rem(Lu.HP),fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:Lt.I.Background.Base.Subdued}}}),Ap=zt.ux.style({backgroundColor:Du.Blue10,$nest:{"&:hover":{backgroundColor:Du.Blue10}}}),Op=zt.ux.style(Object.assign({},(0,qt.fx)(1.5))),Rp="submitBtn",Bp={padding:zt.ux.rem(Dt.mh),gap:zt.ux.rem(Dt.mh)},Mp={color:Lt.I.Text.Base.Default,fontWeight:700,fontSize:zt.ux.rem(1.25),lineHeight:zt.ux.rem(1.5),margin:0},Fp={border:`${zt.ux.px(1)} solid ${Du.NeutralGray20}`,borderRadius:zt.ux.rem(Lu.xB),padding:`${zt.ux.rem(Dt.x+Dt.yC)} ${zt.ux.rem(Dt.x)}`,height:zt.ux.rem(8)},Tp={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${zt.ux.rem(Dt.W9)} ${zt.ux.rem(Dt.x)} 0 0`,minWidth:zt.ux.rem(1),minHeight:zt.ux.rem(1)},"& label":{color:Lt.I.Text.Base.Default,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)}}},Pp=Object.assign({width:zt.ux.percent(100)},(0,qt.dD)({fontSize:zt.ux.rem(.875)},Rp)),Np={display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.x)},jp=Bp,Up=zt.ux.style(Mp),zp=zt.ux.style(Fp),Dp=zt.ux.style(Tp),Lp=(zt.ux.style({fontWeight:700}),zt.ux.joinClasses([Rp,zt.ux.style(Pp)])),Gp=zt.ux.style(Np),Zp=(0,Wd.xb)((({selectedScore:e,onSelectScore:t})=>i.createElement("div",{className:_p},i.createElement("div",Object.assign({},Ep(kp.x.Mood.dissatisfied,e),{onClick:()=>t(kp.x.Mood.dissatisfied)}),i.createElement(Sp,{className:Op}),"I dislike it"),i.createElement("div",Object.assign({},Ep(kp.x.Mood.ok,e),{onClick:()=>t(kp.x.Mood.ok)}),i.createElement(wp,{className:Op}),"Its OK"),i.createElement("div",Object.assign({},Ep(kp.x.Mood.satisfied,e),{onClick:()=>t(kp.x.Mood.satisfied)}),i.createElement(Cp,{className:Op}),"I like it!")))),Hp=(0,Wd.xb)(vd),Vp=r.UI.Node.make((({state:e,view:t,notify:n})=>{const r="domainCheckbox"+As.fg(5);return i.createElement(Um,{style:jp},i.createElement("h1",{className:Up},"How do you like Grammarly?"),i.createElement(Zp,{selectedScore:t("formData").pipe(I.U((e=>e.mood))),onSelectScore:e=>n({kind:ht.i.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),i.createElement(Hp,{ariaLabel:"tell us why",className:zp,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(I.U((({message:e})=>null!=e?e:""))),onChange:e=>n({kind:ht.i.Kind.feedbackFormChange,feedbackData:{message:e}})()}),e.pipe(I.U((({formData:e,domain:t,source:s})=>i.createElement("div",{className:Gp},(0,a.zG)(t,o.fold(a.gn,(t=>i.createElement("div",{className:Dp},i.createElement("input",{type:"checkbox",id:r,checked:void 0!==e.domain,onChange:n({kind:ht.i.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),i.createElement("label",{htmlFor:r},"Include the domain ",i.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,a.zG)(o.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:s}):null),o.fold((()=>i.createElement(Zt.z,{disabled:!0,className:Lp,onClick:a.Q1},"Submit")),(e=>i.createElement(Zt.z,{disabled:!1,className:Lp,onClick:n({kind:ht.i.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))})),$p=e=>i.createElement(Vt.a1,{className:e.className,viewBox:"0 0 20 20",width:20,height:20},i.createElement("path",{d:"M8.58541 3.37143C9.36646 2.59038 10.6328 2.59038 11.4138 3.37143L16.6283 8.5859C17.4094 9.36695 17.4094 10.6333 16.6283 11.4143L11.4138 16.6288C10.6328 17.4098 9.36646 17.4098 8.58541 16.6288L3.37094 11.4143C2.58989 10.6333 2.58989 9.36695 3.37094 8.5859L8.58541 3.37143ZM11.4371 6.25011C11.4371 5.4562 10.7935 4.81261 9.99962 4.81261C9.20571 4.81261 8.56212 5.4562 8.56212 6.25011V10.6251C8.56212 11.3163 9.04996 11.8936 9.70011 12.0314C9.04996 12.1692 8.56212 12.7464 8.56212 13.4376C8.56212 14.2315 9.20571 14.8751 9.99962 14.8751C10.7935 14.8751 11.4371 14.2315 11.4371 13.4376C11.4371 12.7464 10.9493 12.1692 10.2991 12.0314C10.9493 11.8936 11.4371 11.3163 11.4371 10.6251V6.25011Z",fill:"#D31332",stroke:"#D31332"})),Kp=({options:e,onSubmit:t,onCancel:n})=>{const[r,s]=i.useState(o.none),[l,c]=i.useState(!1);return i.createElement(Gt.F.form,{id:"radioOptionsForm",onSubmit:e=>{(0,a.zG)(r,o.fold((()=>c(!0)),t)),e.preventDefault()},className:zt.ux.style(Wp)},i.createElement("fieldset",{className:Xp,style:{borderColor:l?Du.Red60:"transparent"}},(0,a.zG)(e,b.UI((e=>i.createElement("span",{key:e,className:qp},i.createElement("input",{type:"radio",id:e,value:e,name:e,checked:(0,a.zG)(r,o.filter((t=>t===e)),o.isSome),onChange:()=>{c(!1),s(o.some(e))},style:{margin:`0 ${zt.ux.rem(.5)} 0 0`}}),i.createElement("label",{htmlFor:e},e)))))),l&&i.createElement("div",{className:Jp},i.createElement($p,{className:Yp})," Make a selection"),i.createElement("div",{className:Qp},i.createElement(Zt.z,{type:"submit",form:"radioOptionsForm",name:"submitSelectedRadioOption",style:{default:Wp}},"Submit"),"",i.createElement(Zt.z,{variant:"tertiary",onClick:n,name:"cancelRadioOptionSelection",style:{default:Wp}},"Cancel")))},Wp={fontSize:zt.ux.rem(.875)},qp=zt.ux.style({display:"inline-flex",alignItems:"center"}),Qp=zt.ux.style({paddingTop:zt.ux.rem(.5)}),Yp=zt.ux.style({minWidth:"unset",minHeight:"unset"}),Jp=zt.ux.style({color:Du.Red60,lineHeight:zt.ux.rem(1.5)}),Xp=zt.ux.style({marginLeft:`calc(-1 * ${zt.ux.rem(.25)})`,padding:zt.ux.rem(.25),display:"flex",flexDirection:"column",gap:zt.ux.rem(.5),width:"fit-content",border:"1px solid transparent",borderRadius:zt.ux.rem(.25),margin:0}),eh=r.UI.Node.make((({view:e,notify:t})=>i.createElement(Um,{style:nh,"data-testid":"follow-up-prompt"},i.createElement(Gt.F.div,{className:ih},i.createElement(Gt.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),i.createElement(Gt.F.span,Object.assign({},$(e("header"))))),i.createElement(Gt.F.div,null,e("hintsHeader")),e("hintsItems").pipe(I.U((0,a.ls)(b.UI((e=>i.createElement("li",{key:e},e))),y.c2,o.fold(a.gn,(e=>i.createElement("ul",{key:"action-followup-radio-list",className:rh},e)))))),e("radioOptions").pipe(I.U(o.fold(a.gn,(e=>i.createElement(Kp,{key:"radioOptions",options:e,onSubmit:e=>t({kind:ht.i.Kind.radioOptionsSubmitButtonClick,selectedOption:e})(),onCancel:t({kind:ht.i.Kind.radioOptionsCancelButtonClick})})))))))),th=r.UI.Union.asOption(eh),nh={fontWeight:400,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),padding:`${zt.ux.rem(Dt.qp)} ${zt.ux.rem(Dt.mh)} ${zt.ux.rem(1.5)} ${zt.ux.rem(Dt.mh)}`,borderBottom:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`},ih=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),padding:`${zt.ux.rem(Dt.x)} 0`}),rh=zt.ux.style({padding:`0 0 0 ${zt.ux.rem(Dt.sD+Dt.yC)}`,margin:0}),oh=({children:e,style:t})=>i.createElement(Gt.F.h1,{className:(0,Pm.D)(t).pipe(I.U((e=>zt.ux.style({color:Lt.I.Text.Base.Default,margin:0,padding:`0 0 ${zt.ux.rem(Dt.x)} 0`,fontWeight:700,fontSize:zt.ux.rem(1),lineHeight:zt.ux.rem(1.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},e))))},e);var ah=n(37869),sh=n(82900),lh=n(74923),ch=n(18775),uh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,sh._)(this,e),(0,ch._)(this,"_capacity",void 0),(0,ch._)(this,"_start",void 0),(0,ch._)(this,"_allowOverflow",void 0),(0,ch._)(this,"_nextId",void 0),this._capacity=t,this._start=n,this._allowOverflow=i,this._nextId=n}return(0,lh._)(e,[{key:"id",get:function(){return this._nextId}},{key:"newId",value:function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new m.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e}},{key:"reset",value:function(){this._nextId=this._start}}]),e}(),dh=n(91961);const mh=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#646B81",stroke:"#646B81",strokeWidth:2,d:"m7 7 1 1.333L9 7z"}))));var ph=n(44361);const hh={border:`1px solid ${Lt.I.Background.Neutral.Default}`,borderRadius:zt.ux.rem(Lu.xB),width:zt.ux.rem(15),height:zt.ux.rem(2),boxSizing:"border-box",position:"relative"},fh={padding:`${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:zt.ux.rem(Dt.F2)},gh={fontWeight:400,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),color:Lt.I.Text.Base.Default},vh={padding:zt.ux.rem(Dt.F2),background:"white",boxShadow:ad.H8.boxShadow,border:ad.H8.border,borderRadius:zt.ux.rem(Lu.xB),width:zt.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:zt.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},bh={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),color:Lt.I.Text.Base.Default,padding:`${zt.ux.rem(.1875)} ${zt.ux.rem(Dt.qp)}`,borderRadius:zt.ux.rem(Lu.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:Du.Blue0}}},yh=zt.ux.style(hh),xh=zt.ux.style(fh),kh=zt.ux.style(gh),Sh=zt.ux.style(vh),wh=zt.ux.style(bh),Ch=new uh(999999);function Eh({label:e,selection:t,className:n,menuClassName:r,placeholder:o,options:a,optionsGroupLabel:l,onSelectionChange:c,renderOption:u}){const[d,m]=i.useState(!1),p=i.useRef(Ch.newId().toString()),h=i.useRef(Ch.newId().toString()),f=i.useRef(null),[g,v]=i.useState(null),[b,y]=i.useState(null),{styles:x,attributes:k}=(0,ah.D)(g,b,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),S=i.useMemo((()=>new s.xQ),[]),w=i.useMemo((()=>S.pipe(Nt.b(100),_.h((e=>!e)),T.b((()=>{m(!1)})))),[S,m]);return rd.P.useSubscriptionTo(w),i.createElement("div",Object.assign({},(0,Wd.Sh)(yh,n),{ref:v}),i.createElement("button",{ref:f,className:xh,onClick:()=>{var e;m(!0),S.next(!0),null===(e=f.current)||void 0===e||e.focus()},onFocus:()=>{m(!0),S.next(!0)},onBlur:()=>S.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":p.current,"aria-expanded":d,"aria-labelledby":h.current},i.createElement("div",{id:h.current,className:kh},t?u?u(t):e(t):o),i.createElement(mh,null)),d&&i.createElement("div",Object.assign({ref:y,style:x.popper},k.popper,{className:zt.ux.joinClasses([Sh,r]),onFocus:()=>S.next(!0),onBlur:()=>S.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:p.current},l?i.createElement("header",{className:_h,role:"presentation"},l):null,a.map(((t,n)=>{const r=e(t);return i.createElement("li",{key:n,"aria-label":r,role:"option"},i.createElement("button",{className:wh,onClick:(0,ph.m)((()=>{c(t),m(!1)}))},u?u(t):e(t)))})))))}const _h=zt.ux.style({padding:zt.ux.rem(Dt.x),paddingRight:zt.ux.rem(Dt.mh),fontSize:zt.ux.rem(.75),lineHeight:"1.5em",color:Lt.I.Text.Base.Subdued});var Ih=n(12444),Ah=n(13444),Oh=function(e){var t=e.parentKey,n=e.from,r=e.transition,o=e.to,a=e.onAnimationEnd,s=e.renderContent,l=Rh(r.animateFrom,"from"),c=Rh(r.animateTo,"to"),u=l.needFullWidth||c.needFullWidth;return i.createElement("div",{className:zt.ux.joinClasses([Mh,u?Fh:""])},n&&i.createElement("div",{onAnimationEnd:function(){return a(r.fromName)},className:zt.ux.joinClasses(l.className)},s(n,"from-".concat(t),[])),i.createElement("div",{onAnimationEnd:function(){return a(r.toName)},className:zt.ux.joinClasses(c.className)},s(o,"to-".concat(t),[])))};function Rh(e,t){switch(e){case"fadeOut":return{className:[Ph],needFullWidth:!1};case"fadeIn":return{className:[jh],needFullWidth:!1};case"slideLeft":return{className:zh(t,"left"),needFullWidth:!0};case"slideRight":return{className:zh(t,"right"),needFullWidth:!0};default:return{className:[],needFullWidth:!1}}}var Bh,Mh=zt.ux.style({position:"relative",overflow:"hidden"}),Fh=zt.ux.style({width:"100%"}),Th=zt.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}}),Ph=zt.ux.style({position:"absolute",opacity:0,visibility:"hidden",animation:"".concat(Th," ").concat(zt.ux.seconds(.3)," ease-out")}),Nh=zt.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),jh=zt.ux.style({animation:"".concat(Nh," ").concat(zt.ux.seconds(.3)," ease-out")}),Uh=function(e){return"calc(".concat(e,"px * var(--cardWidth))")},zh=function(e,t){var n="to"===e?0:"".concat(Uh("left"===t?-1:1)),i="from"===e?0:"".concat(Uh("left"===t?1:-1)),r=zt.ux.keyframes({from:{transform:"translateX(".concat(i,")"),visibility:"visible"},to:{transform:"translateX(".concat(n,")"),visibility:"from"===e?"hidden":"visible"}}),o=zt.ux.style({position:"absolute",left:0,right:0,visibility:"hidden"}),a=zt.ux.style({position:"from"===e?"absolute":"relative",animation:"".concat(r," ").concat(zt.ux.seconds(.3)," ease-out")});return"from"===e?[o,a]:[a]},Dh=n(88056);!function(e){e.Context=i.createContext(Dh.Y.invariantContent("AlertRefState"))}(Bh||(Bh={}));function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Gh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zh(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Hh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Gh(e,t,n[t])}))}return e}function Vh(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $h(e){return function(e){if(Array.isArray(e))return e}(e)||Zh(e)||Wh(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kh(e){return function(e){if(Array.isArray(e))return Lh(e)}(e)||Zh(e)||Wh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wh(e,t){if(e){if("string"==typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lh(e,t):void 0}}var qh=function(e){var t=e.content,n=e.prevContent,r=e.transitions,s=e.designSystem,l=e.notify,c=e.onMount,u=e.onAnimationEnd,d=e.sduiRootId,h=e.longFormCardState,f=void 0===h?{viewKind:"collapsed"}:h,g=function(e){return"name"in e},v=function(e){return(0,a.zG)(e,b.UI((function(e){return"applyAlerts"===e.type&&0===e.alternativeIndex?{type:"applyAlerts",alternativeIndex:S.get()}:"selectAlternative"===e.type?(S.set(e.alternativeIndex),e):e})))},x=function(e,t,n,c,d){return function(p){return(0,a.zG)(e,o.fromNullable,o.chain(y.nI),o.map((function(e){var h=$h(e),f=h[0],g=h.slice(1);switch(f.type){case"behavior:strongAlertRef":return x(g,t,n,c,d)((function(e){return i.createElement(s.strongAlertRef,{key:"".concat(t,"-strongAlertRef"),alertIds:f.alertIds,children:p(Vh(Hh({},e),{alertRefs:f.alertIds}))})}));case"behavior:animation:fadeIn":case"behavior:animation:fadeOut":return x(g,t,n,c,d)((function(e){return i.createElement(s.animation,Vh(Hh({key:"".concat(t,"-animation")},f),{children:p(e)}))}));case"behavior:popoverAnchor":return x(g,t,n,c,d)((function(e){return(0,a.zG)(o.some(f),o.filter(rs.PopoverAnchor.nonEmpty),o.fold((function(){return p(e)}),(function(o){var c=o.id,d=o.positionHint,m=o.view;return i.createElement(s.popoverAnchor,{key:"".concat(t,"-popoverAnchor"),inlineWrapper:"inline"===Zs(n),positionHint:d,popover:C(m.child,m.id,r,u,e),children:p(e),onShow:function(){return(0,a.zG)(m.onShow,(function(t){return l(c,t||[],e)}))}})})))}));case"behavior:lifecycle":return x(g,t,n,c,d)((function(e){return i.createElement(s.lifecycle,{key:"".concat(t,"-lifecycle"),children:p(Hh({},e)),onMountHandler:I(e)(f.onMount,c),onUnmountHandler:I(e)(f.onUnmount,c)})}));default:(0,m.vE)(f)}})),o.getOrElse((0,a.a9)(p(d))))}},k=new Map,S=p.h.create(0),C=function(e,t,n,r,c){var u=g(e)?n.find((function(t){return t.toName===e.name.value})):void 0;if(void 0!==u){var d=k.get(u.fromName);return i.createElement(Oh,{key:Qh(t,e),parentKey:t,renderContent:function(e,t){return C(e,Qh(t,e),[],a.Q1,c)},onAnimationEnd:r,from:d,to:e,transition:u})}return x(function(e){return"behaviors"in e}(e)?e.behaviors:void 0,Qh(t,e),e.type,e.id,c)((function(c){switch(e.type){case"text":return i.createElement(s.text,Hh({key:Qh(t,e)},e));case"clickableText":return i.createElement(s.clickableText,Vh(Hh({},e),{key:Qh(t,e),name:e.name.value,textView:s.text,onClick:I(c)(e.onClickActions,e.id)}));case"button":var u=C(e.label,t,n,r,c);return i.createElement(Gt.F.Fragment,{key:Qh(t,e)},S.view((function(n){return i.createElement(s.button[e.kind],{key:Qh(t,e),id:e.id,text:u,name:e.name.value,state:e.name.value===Gn.ButtonAccept&&-1===n?Dn.Hidden:e.state,tooltip:e.tooltip,shape:e.shape,verticalAlign:"block"===e.label.type||"row"===e.label.type?e.label.verticalAlign:void 0,meta:e.meta,horizontalAlign:e.horizontalAlign,onClick:I(c)(e.actions,e.id)})})));case"alternativeChoice":return i.createElement(Gt.F.Fragment,{key:Qh(t,e)},S.view((function(n){return i.createElement(s.alternativeChoice,{key:Qh(t,e),id:e.id,designSystem:s,content:e.alternatives,activeIndex:n,notify:I(c),meta:e.meta})})));case"icon":return E(e.source,e.backgroundColor,Qh(t,e));case"image":return i.createElement(s.imageSized,Hh({key:Qh(t,e)},e));case"count":return i.createElement(s.count,Hh({key:Qh(t,e)},e));case"block":return i.createElement(s.block,Vh(Hh({key:Qh(t,e)},e),{children:e.parts.map((function(e,i){return C(e,Qh(t,{id:i.toString()}),n,r,c)}))}));case"row":return i.createElement(s.row,Vh(Hh({key:Qh(t,e)},e),{left:e.left.map((function(e,i){return C(e,Qh(t,{id:i.toString()}),n,r,c)})),right:e.right.map((function(e,i){return C(e,Qh(t,{id:i.toString()}),n,r,c)}))}));case"column":return i.createElement(s.column,Vh(Hh({key:Qh(t,e)},e),{children:e.children.map((function(e,i){return C(e,Qh(t,{id:i.toString()}),n,r,c)}))}));case"slider":return i.createElement(s.slider,Hh({key:Qh(t,e),designSystem:s,onChoiceSelected:I(c)},e));case"alternativeSlider":return i.createElement(s.alternativeSlider,Hh({key:Qh(t,e),designSystem:s,activeAltIndex:S.view(),notify:I(c)},e));case"strongAlertRef":var d=Vh(Hh({},c),{alertRefs:e.alertIds});return i.createElement(s.strongAlertRef,Vh(Hh({key:t},e),{children:C(e.child,t,n,r,d)}));case"scroll":return i.createElement(s.scroll,Hh({key:Qh(t,e),children:C(e.child,t,n,r,c)},e));case"box":return i.createElement(s.box,Hh({key:Qh(t,e),children:C(e.child,t,n,r,c)},e));case"list":return i.createElement(s.list,Hh({key:Qh(t,e),onSelect:function(e){var t=function(e,t){return e&&0!==e.length?(0,a.zG)(e,b.YM,o.map((function(e){switch(e.type){case"behavior:strongAlertRef":return Vh(Hh({},t),{alertRefs:e.alertIds});case"behavior:animation:fadeIn":case"behavior:animation:fadeOut":case"behavior:popoverAnchor":case"behavior:lifecycle":return t;default:(0,m.vE)(e)}})),o.getOrElse((function(){return t}))):t}(e.behaviors,c);return I(t)(e.actions,e.id)()},onClick:function(t){return I(c)([{type:"positionedClick",source:e.type,sourcePosition:t.clickPoint}],e.id)()},renderItem:function(o,a){var l=Qh(t,e)+"."+a.toString(),u=C(o.label,t,n,r,c);return x(o.behaviors,l,e.type,e.id,c)((function(e){return i.createElement(s.listItem,{key:l,id:o.id,label:u,tooltip:o.tooltip,behaviors:o.behaviors,secondaryButtons:o.secondaryButtons.map((function(t){return Vh(Hh({},t),{onClick:I(e)(t.onClickActions,t.id)})})),designSystem:s,meta:o.meta})}))}},e));case"alertsCount":return i.createElement(s.alertsCount,Hh({key:Qh(t,e),textView:s.text},e));case"assistantCard":return i.createElement(s.assistantCard,Vh(Hh({key:Qh(t,e)},e),{child:C(e.child,t,n,r,c),footer:e.footer?C(e.footer,t,n,r,c):null}));case"nativeSkillsModal":return i.createElement(s.nativeSkillsModal,Hh({key:Qh(t,e)},e));case"nativeSkillsList":return i.createElement(s.nativeSkillsList,Hh({key:Qh(t,e),designSystem:s,notify:function(){return l(e.id,e.onSelect,c)}},e));case"nativeSkillsView":return i.createElement(s.nativeSkillsView,Hh({key:Qh(t,e)},e));case"nativeToneInsightsModal":return i.createElement(s.nativeToneInsightsModal,Hh({key:Qh(t,e)},e));case"nativeLearnMoreModal":return i.createElement(s.nativeLearnMoreModal,Hh({key:Qh(t,e)},e));case"nativeSettingsModal":return i.createElement(s.nativeSettingsModal,Hh({key:Qh(t,e)},e));case"nativeFeedbackModal":return i.createElement(s.nativeFeedbackModal,Hh({key:Qh(t,e)},e));case"nativeGetStartedChecklistModal":return i.createElement(s.nativeGetStartedChecklistModal,Hh({key:Qh(t,e),designSystem:s,notify:function(){return l(e.id,e.onComplete,c)}},e));case"nativeKeyTakeawaysAssistantCard":return i.createElement(s.nativeKeyTakeawaysAssistantCard,Hh({key:Qh(t,e)},e));case"nativeProofitModal":return i.createElement(s.nativeProofitModal,Hh({key:Qh(t,e)},e));case"viewStack":return(0,a.zG)(o.fromNullable(e.views[e.selected]),o.fold((function(){return i.createElement("div",null,"unknown selected view, corresponding view is missing")}),(function(e){return C(e,t,n,r,c)})));case"dropDownMenuButton":return i.createElement(s.dropDownMenuButton,Hh({key:Qh(t,e),designSystem:s,onClick:I(c)},e));case"selectableDropDownMenu":return i.createElement(s.selectableDropDownMenu,Hh({key:Qh(t,e),designSystem:s,onClick:I(c)},e));case"nativeExperimentalGBConsistencyUpsellFooter":return i.createElement(s.nativeExperimentalGBConsistencyUpsellFooter,Hh({key:Qh(t,e)},e));case"nativeExperimentalGBToneInsightsUpsellFooter":return i.createElement(s.nativeExperimentalGBToneInsightsUpsellFooter,Hh({key:Qh(t,e)},e));case"nativeInlineCardContent":return i.createElement(s.nativeInlineCardContent,Hh({key:Qh(t,e)},e));case"inlineCard":return i.createElement(s.inlineCard,Vh(Hh({key:Qh(t,e)},e),{child:C(e.child,t,n,r,c)}));case"radioButtonsGroup":return i.createElement(s.radioButtonsGroup,Hh({key:Qh(t,e),designSystem:s,onClick:I(c)},e));case"collapsedCard":return i.createElement(s.collapsedCard,Vh(Hh({},e),{child:C(e.child,t,n,r,c),quickActions:e.quickActions?C(e.quickActions,t,n,r,c):null,onHoverChanged:function(t){return l(e.id,[{type:"hoverStateChanged",hovered:t}],c)},onPress:function(t){return I(c)([{type:"positionedClick",source:e.type,sourcePosition:t}],e.id)()}}));case"shortFormCard":return C(e.child,t,n,r,c);case"longFormCard":return i.createElement(s.longFormCard,Vh(Hh({},e),{fullContent:C(e.fullContent,t,n,r,c),collapsedContent:C(e.collapsedContent,t,n,r,c),viewKind:f.viewKind}));case"progressBar":return i.createElement(s.progressBar,Hh({key:Qh(t,e)},e));case"tooltip":return i.createElement(s.tooltip,{text:e.text,child:C(e.child,t,n,r,c),alignment:e.alignment});case"sticker":return i.createElement(s.sticker,Vh(Hh({},e),{key:Qh(t,e),label:C(e.label,Qh("".concat(t,"-label"),e),n,r,c),children:C(e.child,Qh("".concat(t,"-child"),e),n,r,c),onClick:I(c)(e.onClickActions,e.id)}));case"horizontalRule":return i.createElement(s.horizontalRule,Hh({key:Qh(t,e)},e));case"globalPartPlaceholder":return i.createElement(s.globalPartPlaceholder,{key:Qh(t,e),children:e.child?C(e.child,t,n,r,c):null});case"assistantFeed":case"lensesSwitchPanel":case"popoverStack":case"gButton":throw new Error("".concat(e.type," can not be rendered directly"));default:if(Gs(e))throw new Error("".concat(e.type," component rendering is not implemented here"));return i.createElement("div",null,"unknown element")}}))},E=function(e,t,n){return"known"===e.kind?i.createElement(s.icon[e.name],{key:n,backgroundColor:t}):i.createElement(s.image,Vh(Hh({key:n},e),{backgroundColor:t}))},I=function(e){return function(t,n){return function(){return(0,a.zG)(t,v,(function(t){return l(n,t,e)}))}}};o.isSome(n)&&Es.forEach(j.MH(n),(function(e){g(e)&&k.set(e.name.value,e)}));var A=r.reduce((function(e,t){return k.has(t.fromName)&&(e+=1),e+=1}),0),O=p.h.create([]);rd.P.useSubscriptionTo((0,a.zG)(O,w.P((function(e){return e.length===A})),_.h((function(){return A>0})),T.b(u))),rd.P.useEffectOnDidMount(c);return i.createElement(Bh.Context.Provider,{value:{alertIds:[]}},C(t,d,r,(function(e){return O.modify((function(t){return Kh(t).concat([e])}))}),{alertRefs:[]}))};function Qh(e,t){return"".concat(e,".").concat(t.id)}var Yh=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Jh=i.forwardRef((function(e,t){var{defaultHeight:n,initialVisible:r=!1,resetHeightToDefault:o=P.E,visibleOffset:a=500,children:s}=e,l=Yh(e,["defaultHeight","initialVisible","resetHeightToDefault","visibleOffset","children"]);const[c,u]=i.useState(r),[d,m]=i.useState(n),p=i.useRef(null),{registerIntersectionObserver:h}=i.useContext(Nd);return i.useEffect((()=>{const e=o.subscribe((()=>m(n)));return()=>e.unsubscribe()}),[n]),i.useEffect((()=>{const e=p.current;if(e){const t=h(`${a}px 0px ${a}px 0px`,e,(t=>{t.isIntersecting||m(e.offsetHeight),u(t.isIntersecting)}));return()=>t.dispose()}return()=>{}}),[p]),i.createElement("div",Object.assign({},l,{ref:Td([p,t])}),c?s:i.createElement("div",{style:{height:d}}))}));function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ef(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function tf(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rf(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var of=function(e){var t=e.children,n=e.className,r=rf(e,["children","className"]);return i.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){nf(e,t,n[t])}))}return e}({"data-role":"column-layout",className:zt.ux.joinClasses([af.holder,n])},r),t)},af=zt.ux.stylesheet({holder:[{display:"flex",flexDirection:"column"}]}),sf=n(63557);function lf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function uf(e){return function(t){return i.createElement(i.Fragment,null,i.createElement(e,cf(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){lf(e,t,n[t])}))}return e}({},t),{"aria-describedby":Boolean(t.meta.description)?"".concat(t.id,"-description"):void 0})),Boolean(t.meta.description)&&i.createElement(sf.T,{id:"".concat(t.id,"-description")},t.meta.description))}}var df=n(7514);function mf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pf(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var hf=new df.z6(100);function ff(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var gf=uf((function(e){var t=e.child,n=e.footer,r=e.id,o=e.meta,a=ff(e,["child","footer","id","meta"]);return i.createElement(of,{id:"".concat(r,"-container"),role:"region","aria-label":o.label,"aria-describedby":a["aria-describedby"]},t,n?i.createElement("div",{className:vf.wrapper},n):null)})),vf=zt.ux.stylesheet({wrapper:[{display:"flex",flexDirection:"column"}]});function bf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){bf(e,t,n[t])}))}return e}function xf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var kf=function(e){return"selectAlternative"===e.type?o.some(e.alternativeIndex):o.none};function Sf(e){return function(t){return(0,a.zG)(t,b.Ew((0,a.ls)(kf,o.exists((function(t){return t===e})))),o.isSome)}}function wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){wf(e,t,n[t])}))}return e}function Ef(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var _f=n(13578),If=n(77678),Af=n(64757),Of=n(94632);function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Rf(e,t,n[t])}))}return e}function Mf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yf;return{primary:uf((function(t){return i.createElement(Af.zx.Primary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.main,e.primary,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),secondary:uf((function(t){return i.createElement(Af.zx.Tertiary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.secondary,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),toggle:uf((function(t){return i.createElement(Af.zx.Secondary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([Of.LI,e.toggle,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),yellow:uf((function(t){return i.createElement(Af.zx.Primary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.yellow,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),outlined:uf((function(t){return i.createElement(Af.zx.Secondary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.outlined,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),link:uf((function(t){return i.createElement(Af.zx,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.link,e.main])}),t.text)})),darkPrimary:uf((function(t){return i.createElement(Af.zx.Tertiary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.darkPrimary,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),darkSecondary:uf((function(t){return i.createElement(Af.zx.Tertiary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.darkSecondary,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)})),ggoPrimary:uf((function(t){return i.createElement(Af.zx.Tertiary,Mf(Bf({},Jf(t)),{className:zt.ux.joinClasses([e.ggoPrimary,e.main,t.shape===zn.Round?Yf.round:void 0,t.verticalAlign===ni.Middle?Yf.textMiddleAlign:void 0,$f(t.horizontalAlign)])}),t.text)}))}}var Tf,Pf={lineHeight:"calc(2px * var(--rem) - 2px)",padding:0},Nf={flexShrink:0,minHeight:zt.ux.rem(2),justifyContent:"initial",$nest:{"& span":Pf," & > div":{width:zt.ux.percent(100)}}},jf=[{$nest:{"&[data-textpos]":{padding:0}}},(0,Of.T)({default:{backgroundColor:_f.Il.Background.Base.Default,border:"1px solid ".concat(If.CoreNeutral20),whiteSpace:"normal",lineHeight:"calc(2px * var(--rem) - 2px)",fontWeight:700},hovered:{},disabled:{},clicked:{},toggled:{backgroundColor:If.CoreNeutral1,borderColor:_f.vU.InteractiveBranded.Primary.Default},hidden:{}})],Uf={fill:If.CoreNeutral0,stroke:If.CoreNeutral0},zf=(0,Of.T)({default:{display:"inline-flex",color:If.CoreNeutral40,border:"1px solid ".concat(If.CoreNeutral20),lineHeight:"calc(1.75px * var(--rem) - 1px)"},hovered:{},clicked:{},disabled:{},toggled:{},hidden:{}}),Df=Bf({},(0,Of.T)({default:{color:If.CoreBlue40,minHeight:"auto"},hovered:{opacity:.75},clicked:{},disabled:{},toggled:{},hidden:{}})),Lf=Mf(Bf({},(0,Of.T)({default:{},hovered:{},clicked:{},disabled:{},toggled:{},hidden:{}})),{$nest:{"& span":Pf,"& i":Uf,"&:not([data-disabled='true'])[data-hovered='true'] i":Uf}}),Gf=Bf({},(0,Of.T)({default:{},hovered:{},clicked:{},disabled:{},toggled:{},hidden:{}})),Zf={borderRadius:zt.ux.rem(100)},Hf=[Nf,(0,Of.T)({default:{backgroundColor:If.CoreYellow20,color:If.CoreYellow80,lineHeight:zt.ux.rem(2),transitionDuration:".2s"},hovered:{backgroundColor:If.CoreYellow30,$nest:{"& i":{fill:If.CoreYellow80,stroke:If.CoreYellow80}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:If.CoreYellow80,stroke:If.CoreYellow80}}}],Vf=(Rf(Tf={},$n.Left,zt.ux.style({textAlign:"left"})),Rf(Tf,$n.Center,zt.ux.style({textAlign:"center"})),Rf(Tf,$n.Right,zt.ux.style({textAlign:"end"})),Tf);function $f(e){return null!=e?Vf[e]:Vf[$n.Left]}var Kf,Wf=Bf({},(0,Of.T)({default:{backgroundColor:If.CoreBlue30,color:If.CoreNeutral90,lineHeight:zt.ux.rem(2),transitionDuration:".2s",fontWeight:600},hovered:{backgroundColor:If.CoreBlue40,$nest:{"& i":{fill:If.CoreNeutral90,stroke:If.CoreNeutral90}}},disabled:{},clicked:{},toggled:{},hidden:{}})),qf=Bf({},(0,Of.T)({default:{backgroundColor:"transparent",color:If.CoreNeutral30,lineHeight:zt.ux.rem(2),transitionDuration:".2s"},hovered:{backgroundColor:If.CoreNeutral60,$nest:{"& i":{fill:If.CoreNeutral30,stroke:If.CoreNeutral30}}},disabled:{},clicked:{},toggled:{},hidden:{}})),Qf=Mf(Bf({},(0,Of.T)({default:{backgroundColor:If.CoreGreen60},hovered:{backgroundColor:If.CoreGreen40},disabled:{},clicked:{},toggled:{},hidden:{}})),{$nest:{"& svg":Uf}}),Yf=zt.ux.stylesheet({textMiddleAlign:[{$nest:{"& span":{verticalAlign:"initial"}}}],main:[Nf],primary:[Lf],secondary:[Gf],toggle:jf,round:[Zf],yellow:Hf,outlined:[zf,{$nest:{"& span":{lineHeight:"calc(1.75px * var(--rem) - 1px)",padding:0}}}],link:[Df],darkPrimary:[Wf],darkSecondary:[qf],ggoPrimary:[Qf]});function Jf(e){return Bf({name:e.name,onClick:e.onClick,"aria-label":e.meta.label,"aria-describedby":e["aria-describedby"],title:void 0!==e.tooltip&&e.state!==Dn.Disabled?Xf(e.tooltip):void 0},function(e){switch(e){case Dn.Enabled:return{disabled:!1};case Dn.Disabled:return{disabled:!0};case Dn.Selected:return{disabled:!1,active:!0};case Dn.Deselected:return{disabled:!1,active:!1};case Dn.Hidden:return{hidden:!0};default:return(0,m.vE)(e)}}(e.state))}function Xf(e){return i.createElement(i.Fragment,null,(0,a.zG)(e.split("\n"),(function(e){var t=e.length;return 0===t?e:fi.QI(e[0],e.slice(1,t).map((function(e,t){return i.createElement(i.Fragment,{key:t},i.createElement("br",null),e)})))})))}function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ng(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ig(e){return function(e){if(Array.isArray(e))return e}(e)||ng(e)||og(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(e){return function(e){if(Array.isArray(e))return eg(e)}(e)||ng(e)||og(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){if(e){if("string"==typeof e)return eg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eg(e,t):void 0}}!function(e){e[e.HeadingLevel4LetterSpacing=0]="HeadingLevel4LetterSpacing",e[e.HeadingLevel3LetterSpacing=0]="HeadingLevel3LetterSpacing",e[e.HeadingLevel1LetterSpacing=-.0025]="HeadingLevel1LetterSpacing",e[e.BodyLetterSpacing=0]="BodyLetterSpacing",e[e.MediumLetterSpacing=0]="MediumLetterSpacing",e[e.SmallLetterSpacing=0]="SmallLetterSpacing",e[e.HeadingLevel4Size=1]="HeadingLevel4Size",e[e.HeadingLevel3Size=1.25]="HeadingLevel3Size",e[e.HeadingLevel1Size=1.75]="HeadingLevel1Size",e[e.BodySize=.875]="BodySize",e[e.MediumLetterSize=1]="MediumLetterSize",e[e.SmallSize=.75]="SmallSize"}(Kf||(Kf={}));var ag,sg,lg=zt.ux.style({padding:"".concat(zt.ux.rem(.15625)," 0")}),cg=zt.ux.style({position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:0}),ug=function(e){var t=e.size,n=e.format,r=e.textColor,o=e.backgroundColor,a=e.outlineColor,s=e.text,l=e.meta,c=e.removeImplicitPadding,u=void 0!==c&&c,d=function(e,t){var n="".concat(e,"-").concat(t),i=_g.get(n);if(void 0!==i)return i;var r=zt.ux.style({color:If[e],backgroundColor:Boolean(t)?If[t]:t});return _g.put(n,r),r}(r,o),m=ig(n),p=m[0],h=m.slice(1),f=void 0!==p?Eg[p]:{name:"span",canHaveAriaLabel:!1},g=h.map((function(e){return e===Jn.StrikeoutDiagonal?function(e){var t="sd-".concat(e),n=_g.get(t);if(void 0!==n)return n;var i=zt.ux.style(function(e){return{backgroundImage:"linear-gradient(to top left,\n    rgba(0,0,0,0) 0%,\n    rgba(0,0,0,0) calc(50% - 0.5px),\n    ".concat(If[e]," 50%,\n    rgba(0,0,0,0) calc(50% + 0.5px),\n    rgba(0,0,0,0) 100%)")}}(e));return _g.put(t,i),i}(null!=a?a:r):Cg[e]}));void 0!==a&&g.push(function(e){var t="ol-".concat(e),n=_g.get(t);if(void 0!==n)return n;var i=zt.ux.style({borderColor:If[e]});return _g.put(t,i),i}(a)),u||g.push(lg);var v=zt.ux.joinClasses([d,wg[t]].concat(rg(g)));if(l.label&&!f.canHaveAriaLabel){var b=i.createElement(f.name,{className:v,"aria-hidden":!0,children:s});return i.createElement(i.Fragment,null,i.createElement("span",{className:cg},l.label),b)}return i.createElement(f.name,{className:v,"aria-label":l.label,children:s})},dg=zt.ux.rem(1.5),mg=zt.ux.rem(1.5),pg=zt.ux.rem(2),hg=zt.ux.rem(1.5),fg=zt.ux.rem(21/16),gg=zt.ux.rem(.875),vg={letterSpacing:zt.ux.rem(Kf.HeadingLevel4LetterSpacing),fontSize:zt.ux.rem(Kf.HeadingLevel4Size),lineHeight:dg},bg={letterSpacing:zt.ux.rem(Kf.HeadingLevel3LetterSpacing),fontSize:zt.ux.rem(Kf.HeadingLevel3Size),lineHeight:mg},yg={letterSpacing:"".concat(Kf.HeadingLevel1LetterSpacing,"em"),fontSize:zt.ux.rem(Kf.HeadingLevel1Size),lineHeight:pg},xg={letterSpacing:zt.ux.rem(Kf.MediumLetterSpacing),fontSize:zt.ux.rem(Kf.MediumLetterSize),lineHeight:hg},kg={letterSpacing:zt.ux.rem(Kf.BodyLetterSpacing),fontSize:zt.ux.rem(Kf.BodySize),lineHeight:fg},Sg={letterSpacing:zt.ux.rem(Kf.SmallLetterSpacing),fontSize:zt.ux.rem(Kf.SmallSize),lineHeight:gg},wg=zt.ux.stylesheet((tg(ag={},Xn.HeadingLevel4,[vg]),tg(ag,Xn.HeadingLevel3,[bg]),tg(ag,Xn.HeadingLevel1,[yg]),tg(ag,Xn.Medium,[xg]),tg(ag,Xn.Regular,[kg]),tg(ag,Xn.Small,[Sg]),ag)),Cg=zt.ux.stylesheet((tg(sg={},Jn.Bold,[{fontWeight:"bolder"}]),tg(sg,Jn.Italic,[{fontStyle:"italic"}]),tg(sg,Jn.StrikeoutHorizontal,[{textDecoration:"line-through"}]),tg(sg,Jn.StrikeoutDiagonal,[]),tg(sg,Jn.Outline,[{padding:"".concat(zt.ux.rem(1/16)," ").concat(zt.ux.rem(3.5/16)," ").concat(zt.ux.rem(1/16)," ").concat(zt.ux.rem(3.5/16)),border:"1px solid",borderRadius:"2px"}]),sg)),Eg={strikeoutHorizontal:{name:"s",canHaveAriaLabel:!1},strikeoutDiagonal:{name:"span",canHaveAriaLabel:!1},outline:{name:"span",canHaveAriaLabel:!1},bold:{name:"strong",canHaveAriaLabel:!1},italic:{name:"em",canHaveAriaLabel:!1}};var _g=new df.z6(100);function Ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ag=function(e){return i.createElement("div",{"data-role":"box",className:Og(e)},e.children)};function Og(e){var t=e.padding,n=e.borderRadius,i=e.backgroundColor,r=e.minWidth,o=[Mg.base];return void 0!==t&&o.push(function(e){var t,n,i,r,o="p-".concat(null===(t=e)||void 0===t?void 0:t.top,"-").concat(null===(n=e)||void 0===n?void 0:n.bottom,"-").concat(null===(i=e)||void 0===i?void 0:i.left,"-").concat(null===(r=e)||void 0===r?void 0:r.right),a=Fg.get(o);if(void 0!==a)return a;var s={$debugName:"padding"};void 0!==e&&(s.paddingRight=zt.ux.rem(Number(e.right)),s.paddingBottom=zt.ux.rem(Number(e.bottom)),s.paddingTop=zt.ux.rem(Number(e.top)),s.paddingLeft=zt.ux.rem(Number(e.left)));var l=zt.ux.style(s);return Fg.put(o,l),l}(t)),void 0!==n&&o.push(function(e){var t=e.topLeft,n=e.topRight,i=e.bottomRight,r=e.bottomLeft,o="bdr-".concat(t,"-").concat(n,"-").concat(i,"-").concat(r),a=Fg.get(o);if(void 0!==a)return a;var s={$debugName:"borderRadius"};void 0!==e&&(s.borderTopLeftRadius=zt.ux.rem(Number(Tg[t])),s.borderTopRightRadius=zt.ux.rem(Number(Tg[n])),s.borderBottomRightRadius=zt.ux.rem(Number(Tg[i])),s.borderBottomLeftRadius=zt.ux.rem(Number(Tg[r])));var l=zt.ux.style(s);return Fg.put(o,l),l}(n)),void 0!==i&&o.push(function(e){var t="bgc-".concat(e),n=Fg.get(t);if(void 0!==n)return n;var i=zt.ux.style({backgroundColor:If[e]});return Fg.put(t,i),i}(i)),void 0!==r&&o.push(function(e){var t="minW-".concat(e),n=Fg.get(t);if(void 0!==n)return n;var i={$debugName:"minwidth"};void 0!==e&&(i.minWidth=zt.ux.rem(Number(e)));var r=zt.ux.style(i);return Fg.put(t,r),r}(r)),o.length>0?zt.ux.joinClasses(o):void 0}var Rg,Bg={display:"block",fontSize:zt.ux.rem(1),lineHeight:zt.ux.rem(1.15)},Mg=zt.ux.stylesheet({base:[Bg]}),Fg=new df.z6(100);var Tg=(Ig(Rg={},Qn.Radius0,0),Ig(Rg,Qn.RadiusHalf,.125),Ig(Rg,Qn.Radius1,.25),Ig(Rg,Qn.Radius2,.5),Ig(Rg,Qn.Radius3,.75),Rg);function Pg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ng=function(e){var t=i.useRef(null);return i.useEffect((function(){var n,i=e.maxLines&&(null===(n=t.current)||void 0===n?void 0:n.querySelector("*:last-child"));if(t.current&&i){var r=setTimeout((function(){var e,n,r=self.getComputedStyle(i,null),o=r.getPropertyValue("color"),a=r.getPropertyValue("font-size"),s=r.getPropertyValue("line-height"),l=r.getPropertyValue("letter-spacing");Object.assign(null!==(n=null===(e=t.current)||void 0===e?void 0:e.style)&&void 0!==n?n:{},{color:o,fontSize:a,lineHeight:s,letterSpacing:l})}),0);return function(){return clearTimeout(r)}}return function(){}}),[e.maxLines]),i.createElement("div",{ref:t,"data-role":"block-layout",className:jg(e)},e.children)};function jg(e){var t=e.spacing,n=e.innerSpacing,i=e.horizontalAlign,r=e.verticalAlign,o=e.fraction,a=e.maxLines,s=[Ug.base];return void 0!==a&&s.push(function(e){var t="m-".concat(e),n=Lg.get(t);if(void 0!==n)return n;var i=zt.ux.style({display:"-webkit-inline-box",overflow:"hidden",WebkitBoxOrient:"vertical","-webkit-line-clamp":e});return Lg.put(t,i),i}(a)),void 0===t&&void 0===n||s.push(function(e){var t,n,i,r,o,a,s=e.spacing,l=e.innerSpacing,c="".concat(null===(t=s)||void 0===t?void 0:t.top,"-").concat(null===(n=s)||void 0===n?void 0:n.bottom,"-").concat(null===(i=s)||void 0===i?void 0:i.left,"-").concat(null===(r=s)||void 0===r?void 0:r.right,"-").concat(null===(o=l)||void 0===o?void 0:o.vertical,"-").concat(null===(a=l)||void 0===a?void 0:a.horizontal),u=Lg.get(c);if(void 0!==u)return u;var d,m,p,h,f={$debugName:"spacing"};void 0!==s&&(f.marginRight=zt.ux.rem(Number(s.right)),f.marginBottom=zt.ux.rem(Number(s.bottom)),f.marginTop=zt.ux.rem(Number(s.top)),f.marginLeft=zt.ux.rem(Number(s.left))),void 0!==l&&(f.marginRight=zt.ux.rem(Number(null!==(p=null===(d=s)||void 0===d?void 0:d.right)&&void 0!==p?p:0)-Number(l.horizontal)),f.marginBottom=zt.ux.rem(Number(null!==(h=null===(m=s)||void 0===m?void 0:m.bottom)&&void 0!==h?h:0)-Number(l.vertical)),f.$nest={"& > *":{marginRight:zt.ux.rem(Number(l.horizontal)),marginBottom:zt.ux.rem(Number(l.vertical))}});var g=zt.ux.style(f);return Lg.put(c,g),g}({spacing:t,innerSpacing:n})),void 0!==i&&s.push(Gg[i]),void 0!==r&&s.push(Zg[r]),void 0!==o&&s.push(function(e){var t="f-".concat(e),n=Lg.get(t);if(void 0!==n)return n;var i=zt.ux.style({flex:e,overflow:"hidden"});return Lg.put(t,i),i}(o)),s.length>0?zt.ux.joinClasses(s):void 0}var Ug=zt.ux.stylesheet({base:[{overflowWrap:"anywhere",display:"inline-block"}]});var zg,Dg,Lg=new df.z6(100),Gg=zt.ux.stylesheet((Pg(zg={},$n.Left,[{textAlign:"left"}]),Pg(zg,$n.Center,[{textAlign:"center"}]),Pg(zg,$n.Right,[{textAlign:"right"}]),zg)),Zg=zt.ux.stylesheet((Pg(Dg={},ni.Top,[{$nest:{"& > *":{verticalAlign:"top"}}}]),Pg(Dg,ni.Middle,[{$nest:{"& > *":{verticalAlign:"middle"}}}]),Pg(Dg,ni.Bottom,[{$nest:{"& > *":{verticalAlign:"bottom"}}}]),Dg)),Hg=n(48670),Vg=n(66720),$g=n(44443),Kg=n(62912),Wg=n(70604),qg=n(49032),Qg=n(23354),Yg=n(91217);function Jg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Jg(e,t,n[t])}))}return e}function ev(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var tv={close:function(e){return i.createElement(Vt.JO.Close,{className:av(e)})},"arrow-right":function(e){return i.createElement(Vt.JO.Arrow,{direction:Vt.n4.right,className:av(e)})},"arrow-left":function(e){return i.createElement(Vt.JO.Arrow,{direction:Vt.n4.left,className:av(e)})},gear:function(e){return i.createElement(Vt.JO.Gear,{enforceStroke:!0,width:13,className:av(e)})},dictionary:function(e){return i.createElement(Hg.F,{className:av(e)})},clarity:function(e){return i.createElement(Vt.JO.ClarityOutcome,{className:av(e)})},correctness:function(e){return i.createElement(Vt.JO.Correctness,{className:av(e)})},engagement:function(e){return i.createElement(Vt.JO.EngagementOutcome,{className:av(e)})},delivery:function(e){return i.createElement(Vt.JO.DeliveryOutcome,{className:av(e)})},diamond:function(e){return i.createElement(Vt.JO.Paid,{width:20,className:av(e)})},diamondSmall:function(e){return i.createElement(Vg.q,(0,Wd.Sh)(av(e),ov.premium))},feedback:function(e){return i.createElement(Vt.JO.AssistantFeedback,{className:av(e)})},sensitivity:function(e){return i.createElement(Vt.JO.Sensitivity,{className:av(e)})},"external-link":function(e){return i.createElement(Vt.JO.ExternalLink,{className:av(e)})},sparkles:function(e){return i.createElement(Vt.JO.Sparkles,{className:av(e)})},ignore:function(e){return i.createElement($g.M,{className:av(e)})},info:function(e){return i.createElement(Vt.JO.Info,{className:av(e)})},report:function(e){return i.createElement(Vt.JO.Report,{width:12,className:av(e)})},proofreader:function(e){return i.createElement(Vt.JO.Proofread,{width:16,className:av(e)})},mute:function(e){return i.createElement(Vt.JO.Mute,{width:16,className:av(e)})},more:function(e){return i.createElement(Vt.a1,ev(Xg({},(0,Wd.Sh)(av(e))),{width:14,viewBox:"0 0 14 4"}),i.createElement("path",{d:"M6.99951 0.5C7.82794 0.5 8.49951 1.17157 8.49951 2C8.49951 2.82843 7.82794 3.5 6.99951 3.5C6.17108 3.5 5.49951 2.82843 5.49951 2C5.49951 1.17157 6.17108 0.5 6.99951 0.5Z",fill:"#6D758D"}),i.createElement("path",{d:"M11.9995 0.5C12.8279 0.5 13.4995 1.17157 13.4995 2C13.4995 2.82843 12.8279 3.5 11.9995 3.5C11.1711 3.5 10.4995 2.82843 10.4995 2C10.4995 1.17157 11.1711 0.5 11.9995 0.5Z",fill:"#6D758D"}),i.createElement("path",{d:"M1.99951 0.5C2.82794 0.5 3.49951 1.17157 3.49951 2C3.49951 2.82843 2.82794 3.5 1.99951 3.5C1.17108 3.5 0.499512 2.82843 0.499512 2C0.499512 1.17157 1.17108 0.5 1.99951 0.5Z",fill:"#6D758D"}))},controls:function(e){return i.createElement(Vt.a1,{className:av(e),width:24,height:24,viewBox:"0 0 24 24",fill:"none"},i.createElement("path",{d:"M12 5.5H21M3 5.5H7M7 5.5C7 6.32843 7.67157 7 8.5 7C9.32843 7 10 6.32843 10 5.5C10 4.67157 9.32843 4 8.5 4C7.67157 4 7 4.67157 7 5.5ZM3 11.5H12M17 11.5H21M17 11.5C17 12.3284 16.3284 13 15.5 13C14.6716 13 14 12.3284 14 11.5C14 10.6716 14.6716 10 15.5 10C16.3284 10 17 10.6716 17 11.5ZM14 17.5H21M3 17.5H9M9 17.5C9 18.3284 9.67157 19 10.5 19C11.3284 19 12 18.3284 12 17.5C12 16.6716 11.3284 16 10.5 16C9.67157 16 9 16.6716 9 17.5Z",stroke:"#6D758D","stroke-linecap":"round"}))},performance:function(e){return i.createElement(Vt.JO.Performance,{className:av(e)})},"bullet-list":function(e){return i.createElement(Vt.JO.Formatting.BulletList,{className:av(e)})},accept:function(e){return i.createElement(Vt.JO.Yes,{className:av(e)})},copy:function(e){return i.createElement(Vt.JO.Copy,{className:av(e)})},newSmall:function(e){return i.createElement(Kg.m,{className:av(e)})},gButtonSmall:function(e){return i.createElement(Vt.a1,{className:av(e),width:20,height:20,viewBox:"0 0 20 20",fill:"none",stroke:"none"},i.createElement("path",{d:"M0 10C0 4.478 4.477 0 10 0c5.524 0 10 4.477 10 10 0 4.833-3.426 8.864-7.983 9.797-.65.134-1.325.203-2.014.203H0V10Z",fill:"#027E6F"}),i.createElement("path",{d:"M16.92 9.053h-4.506l-1.061 1.838h3.716c-.583 3.197-4.138 5.374-7.691 3.533a4.184 4.184 0 0 1-1.788-1.771c-2.044-3.892.748-7.807 4.433-7.807 1.519 0 2.887.665 3.827 1.72l.952-1.65a6.925 6.925 0 0 0-5.27-1.888c-3.477.24-6.295 3.121-6.464 6.6-.193 3.996 3 7.305 6.952 7.305 3.953 0 6.963-3.124 6.963-6.963 0-.312-.024-.618-.063-.917Z",fill:"#fff"}))},edit:function(e){return i.createElement(Wg.g,{className:av(e)})},user:function(e){return i.createElement(qg.g,{className:av(e)})},plagiarism:function(e){return i.createElement(Qg.k,{className:av(e)})},questionMark:function(e){return i.createElement(Vt.JO.QuestionMark,{width:12,className:av(e)})},newFeature:function(e){return i.createElement(Vt.a1,ev(Xg({},(0,Wd.Sh)(av(e),ov.newFeature)),{width:66,height:38,viewBox:"0 0 66 38",fill:"none"}),i.createElement("g",{filter:"url(#filter0_d_162_10246)"},i.createElement("rect",{x:"10.8281",y:"8.33301",width:"45.7239",height:"21.033",rx:"10.5165",fill:"url(#paint0_linear_162_10246)"}),i.createElement("path",{d:"M26.5115 14.5216V22.333H25.2529L21.5722 17.0122H21.5073V22.333H20.0923V14.5216H21.3586L25.0355 19.8462H25.1041V14.5216H26.5115ZM29.7719 22.333V14.5216H34.8524V15.7078H31.187V17.8285H34.5893V19.0147H31.187V21.1468H34.8829V22.333H29.7719ZM39.6585 22.333L37.4539 14.5216H38.9758L40.3832 20.2619H40.4557L41.9585 14.5216H43.343L44.8496 20.2657H44.9183L46.3257 14.5216H47.8476L45.643 22.333H44.247L42.6832 16.852H42.6222L41.0545 22.333H39.6585Z",fill:"#0E101A",stroke:"none"})),i.createElement("path",{d:"M62.6293 10.667L63.4395 12.8567L65.6293 13.667L63.4395 14.4773L62.6293 16.667L61.819 14.4773L59.6293 13.667L61.819 12.8567L62.6293 10.667Z",fill:"white",stroke:"none"}),i.createElement("path",{d:"M57.9672 0L59.3176 3.64955L62.9672 5L59.3176 6.35045L57.9672 10L56.6167 6.35045L52.9672 5L56.6167 3.64955L57.9672 0Z",fill:"white",stroke:"none"}),i.createElement("path",{d:"M4.70349 20.333L5.78385 23.2526L8.70349 24.333L5.78385 25.4134L4.70349 28.333L3.62313 25.4134L0.703491 24.333L3.62313 23.2526L4.70349 20.333Z",fill:"white",stroke:"none"}),i.createElement("defs",null,i.createElement("filter",{id:"filter0_d_162_10246",x:"7.17021",y:"8.33301",width:"49.3818",height:"24.6909",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},i.createElement("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feMorphology",{radius:"9.14479",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_162_10246"}),i.createElement("feOffset",{dx:"-3.65792",dy:"3.65792"}),i.createElement("feGaussianBlur",{stdDeviation:"4.57239"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_162_10246"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_162_10246",result:"shape"})),i.createElement("linearGradient",{id:"paint0_linear_162_10246",x1:"10.8281",y1:"18.8495",x2:"56.5521",y2:"18.8495",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{"stop-color":"#FBEFB7"}),i.createElement("stop",{offset:"1","stop-color":"#F9C7C7"}))))},assistant:function(e){return i.createElement(Vt.a1,{className:av(e),width:20,height:20,viewBox:"0 0 20 20",fill:"none"},i.createElement("path",{d:"M12 15H14C15.1046 15 16 14.1046 16 13V6.00004C16 4.89547 15.1046 4.00004 14 4.00004L7.00001 4.00001C5.89544 4 5 4.89544 5 6.00001V10",stroke:"#646B81","stroke-linecap":"round"}),i.createElement("path",{d:"M4 13C4 12.4477 4.44772 12 5.00001 12L9.00001 12C9.55229 12 10 12.4478 10 13V15C10 15.5523 9.55228 16 9 16H5C4.44772 16 4 15.5523 4 15V13Z",stroke:"#646B81","stroke-linecap":"round"}))},warning:function(e){return i.createElement(Yg.F,{className:av(e)})}},nv={width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),minWidth:zt.ux.rem(1.5),minHeight:zt.ux.rem(1.5),borderRadius:zt.ux.rem(1.5)},iv={$nest:{"& path":{fill:If.CoreYellow80}}},rv={width:zt.ux.rem(4.125),height:zt.ux.rem(2.375)},ov=zt.ux.stylesheet({main:[nv],premium:[iv],newFeature:[rv]});function av(e){return void 0===e.backgroundColor?ov.main:zt.ux.joinClasses([ov.main,sv(e.backgroundColor)])}function sv(e){var t=lv.get(e);if(void 0!==t)return t;var n=zt.ux.style({backgroundColor:If[e]});return lv.put(e,n),n}var lv=new df.z6(100),cv={width:zt.ux.rem(.85),height:zt.ux.rem(.85)},uv={width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),borderRadius:zt.ux.rem(1.5),display:"inline-flex",justifyContent:"center",alignItems:"center"},dv=zt.ux.stylesheet({main:[{objectFit:"contain",alignSelf:"center",overflow:"hidden"}],defaultSize:[cv],wrapper:[uv]});function mv(e){return void 0===e?dv.wrapper:zt.ux.joinClasses([dv.wrapper,sv(e)])}function pv(e){return void 0===e?zt.ux.joinClasses([dv.main,dv.defaultSize]):zt.ux.joinClasses([dv.main,hv(e)])}function hv(e){var t=fv.get(e);if(void 0!==t)return t;var n=zt.ux.style({width:zt.ux.rem(Number(e)),height:zt.ux.rem(Number(e))});return fv.put(e,n),n}var fv=new df.z6(100);function gv(e,t,n){var i="wrapper-".concat(e,"-").concat(t,"-backgroundColor"),r=bv.get(i);if(void 0!==r)return r;var o=zt.ux.style({width:zt.ux.rem(Number(t)),height:zt.ux.rem(Number(e)),display:"inline-flex",justifyContent:"center",alignItems:"center",margin:0});return void 0!==n&&(o=zt.ux.joinClasses([o,sv(n)])),bv.put(i,o),o}function vv(e,t,n){var i=n?"content-".concat(e,"-").concat(t,"-").concat(n):"content-".concat(e,"-").concat(t),r=bv.get(i);if(void 0!==r)return r;var o=zt.ux.style({width:zt.ux.rem(Number(t)),height:zt.ux.rem(Number(e)),borderRadius:n?zt.ux.rem(Number(n)):void 0});return bv.put(i,o),o}var bv=new df.z6(100);function yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){yv(e,t,n[t])}))}return e}function kv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Sv={display:"flex",flexWrap:"nowrap",alignItems:"inherit",maxWidth:"100%"},wv=kv(xv({},Sv),{flexGrow:1}),Cv=kv(xv({},Sv),{marginLeft:"auto",flexShrink:0,alignSelf:"stretch"}),Ev=zt.ux.stylesheet({row:[{display:"flex",flexDirection:"row",alignItems:"center"}],rowLeft:[wv],rowRight:[Cv]});function _v(e){return void 0===e?Ev.row:zt.ux.joinClasses([Ev.row,Ov(e)])}function Iv(e){return void 0===e?Ev.rowLeft:zt.ux.joinClasses([Ev.rowLeft,Mv[e]])}function Av(e){return void 0===e?Ev.rowRight:zt.ux.joinClasses([Ev.rowRight,Mv[e]])}function Ov(e){var t=e.top,n=e.bottom,i=e.left,r=e.right,o="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r),a=Bv.get(o);if(void 0!==a)return a;var s=zt.ux.style({marginTop:zt.ux.rem(Number(t)),marginLeft:zt.ux.rem(Number(i)),marginRight:zt.ux.rem(Number(r)),marginBottom:zt.ux.rem(Number(n))});return Bv.put(o,s),s}var Rv,Bv=new df.z6(100),Mv=zt.ux.stylesheet((yv(Rv={},ni.Top,[{alignItems:"start"}]),yv(Rv,ni.Middle,[{alignItems:"center"}]),yv(Rv,ni.Bottom,[{alignItems:"end"}]),Rv)),Fv=n(17519),Tv=n(88392),Pv=n(9546),Nv=uf((function(e){return i.createElement(Fv.e.List,{"data-role":"list",selectionMode:"single",selectionBehavior:"toggle","aria-label":e.meta.label,"aria-describedby":e["aria-describedby"],assistiveScroll:!0,theme:{list:jv.list,item:{base:zt.ux.joinClasses([jv.listItem,zv(e.itemHoveredColor)]),focused:Dv(e.itemFocusedColor)}},onSelectionChange:function(t){return("all"===t?e.items:e.items.filter((function(e){return t.has(e.id)}))).forEach(e.onSelect)},onClick:function(t){return e.onClick({id:t.key.toString(),clickPoint:t.clickPoint})}},e.items.map((function(t,n){return i.createElement(Fv.e.Item,{key:t.id,textValue:t.meta.label},e.renderItem(t,n))})))})),jv=zt.ux.stylesheet({list:[{margin:0,display:"flex",flexDirection:"column"}],listItem:[{display:"flex",minHeight:zt.ux.rem(2),cursor:"pointer",outline:"none",border:"none",backgroundColor:If.CoreNeutral0,borderRadius:zt.ux.rem(Tv.xB),padding:"0 0 0 ".concat(zt.ux.rem(Pv.x)),boxSizing:"border-box"}]}),Uv=new df.z6(100);function zv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln.CoreNeutral10,t="ihc-".concat(e),n=Uv.get(t);if(void 0!==n)return n;var i=zt.ux.style({$nest:{"&:hover":{backgroundColor:If[e],$nest:{'& [data-role="list-item-secondary-button"]':{opacity:1}}}}});return Uv.put(t,i),i}function Dv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln.CoreNeutral10,t="ifc-".concat(e),n=Uv.get(t);if(void 0!==n)return n;var i=zt.ux.style({backgroundColor:If[e],$nest:{'& [data-role="list-item-secondary-button"]':{opacity:1}}});return Uv.put(t,i),i}var Lv=n(65223);function Gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zv="listItemPrimaryButton",Hv="listItemLabel",Vv="listItemSecondaryButtonsContainer",$v="listItemSecondaryButton",Kv={width:"calc(".concat(zt.ux.rem(Pv.Ze)," - ").concat(zt.ux.rem(Pv.yC),")"),height:"calc(".concat(zt.ux.rem(Pv.Ze)," - ").concat(zt.ux.rem(Pv.F2),")"),margin:"".concat(zt.ux.rem(Pv.yC)),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",border:"none",backgroundColor:If.CoreNeutral10,borderRadius:zt.ux.rem(Tv.xB),$nest:{"&:active, &:hover, &:focus-visible":{backgroundColor:If.CoreNeutral20,opacity:1}}},Wv={listItemPrimaryButton:zt.ux.joinClasses([Zv,zt.ux.style({cursor:"pointer",outline:"none",border:"none",background:"transparent",padding:0})]),listItemLabel:zt.ux.joinClasses([Hv,zt.ux.style({display:"inline-flex",textAlign:"left"})]),listItemSecondaryButtonsContainer:zt.ux.joinClasses([Vv,zt.ux.style({display:"flex",alignItems:"center",opacity:0,$nest:{"&:focus-within":{opacity:1}}})]),listItemSecondaryButton:zt.ux.joinClasses([$v,zt.ux.style(Kv)])},qv=n(54678);function Qv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yv={flexShrink:0,alignItems:"center",justifyContent:"center",height:zt.ux.rem(2),width:zt.ux.rem(2)},Jv={$nest:{"& i":{height:zt.ux.rem(2),width:zt.ux.rem(2)}}},Xv=zt.ux.stylesheet({button:[Yv],item:[Jv]});function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ib=function(e,t){var n={root:e,rootMargin:"0px",threshold:[0,1]};return Md.n(t,n).pipe(_.h(fi.Od),I.U((function(e){return 1!==e[0].intersectionRatio})),dt.O(t.offsetHeight>e.offsetHeight))},rb=function(e,t){return p.h.combine(e,t,j.vB(ib)).pipe(M.oA,c.w(a.yR),Fd.h(u.of(!0)))},ob=U.MW({topOverflow:U.vD,bottomOverflow:U.vD});var ab=new df.z6(100);var sb=zt.ux.stylesheet({"scroll-main":[{display:"flex",flexDirection:"column",borderTop:"1px solid transparent",borderBottom:"1px solid transparent",transitionProperty:"border-top-color, border-bottom-color",transitionDuration:".2s",pointerEvents:"auto"}],overflowBottom:[{borderBottomColor:zt.ux.important(If.CoreNeutral20)}],overflowTop:[{borderTopColor:zt.ux.important(If.CoreNeutral20)}]});function lb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){cb(e,t,n[t])}))}return e}function db(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pb="sliderOuterContainer",hb="sliderLabel",fb="sliderContainer",gb="slider",vb="sliderDragging",bb="sliderNotDragging",yb="sliderSliderDivisionPoint",xb="sliderDivisionPointHoverArea",kb="sliderInner",Sb="sliderInnerNotDragging",wb="sliderInnerDragging",Cb="sliderInnerJiggle",Eb="sliderKnob",_b="sliderKnobJiggle",Ib="sliderKnobNotDragging",Ab="sliderKnobDragging",Ob="sliderKnobEmoji",Rb={fontWeight:700,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1),width:zt.ux.rem(8)},Bb={height:zt.ux.rem(2.625),display:"flex",flexDirection:"column",justifyContent:"center"},Mb={position:"relative",width:zt.ux.percent(100),backgroundColor:If.CoreNeutral40,borderRadius:zt.ux.rem(.375),transition:"height 0.15s ease-in-out",$nest:cb({"&:hover":{height:zt.ux.rem(.5)}},"&:hover .".concat(yb),{visibility:"visible"})},Fb={height:zt.ux.rem(.125)},Tb={height:zt.ux.rem(.5),$nest:cb({},"& .".concat(yb),{visibility:"visible"})},Pb={position:"absolute",height:zt.ux.rem(.25),backgroundColor:If.CoreNeutral0,top:zt.ux.rem(.125),bottom:zt.ux.rem(.125),borderRadius:zt.ux.percent(100),visibility:"hidden"},Nb={background:If.CoreNeutral90,opacity:0,height:zt.ux.rem(1.5),position:"absolute",borderRadius:zt.ux.percent(100),cursor:"pointer",top:zt.ux.rem(-.5),zIndex:1,$nest:{"&:hover":{opacity:.1}}},jb={position:"relative",display:"flex",alignItems:"center",backgroundColor:If.CorePurple40,height:zt.ux.percent(100),borderRadius:zt.ux.rem(.375)},Ub=zt.ux.keyframes({from:{width:"100%"},to:{width:"calc(100% - ".concat(zt.ux.rem(1.5),")")}}),zb=zt.ux.keyframes({from:{width:"calc(100% - ".concat(zt.ux.rem(1.5),")")},to:{width:"100%"}}),Db={animation:"".concat(Ub," 0.8s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 1s forwards,\n              ").concat(zb," 0.2s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 2s forwards")},Lb=zt.ux.keyframes({from:{transform:"none"},to:{transform:"translateX(".concat(zt.ux.rem(-.75),")")}}),Gb=zt.ux.keyframes({from:{transform:"translateX(".concat(zt.ux.rem(-.75),")")},to:{transform:"none"}}),Zb={animation:"".concat(Lb," 0.8s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 1s forwards,\n              ").concat(Gb," 0.2s cubic-bezier( 0.05, 0.46, 0.37, 0.92 ) 2s forwards")},Hb={position:"absolute",right:zt.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:If.CoreNeutral0,borderRadius:zt.ux.rem(1.875),cursor:"ew-resize",transitionProperty:"width, height",transitionDuration:"0.15s",transitionTimingFunction:"ease-in-out",zIndex:1,$nest:{"&:hover":{width:zt.ux.rem(2),height:zt.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},Vb={width:zt.ux.rem(1.75),height:zt.ux.rem(1.75),boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)"},$b={width:zt.ux.rem(2),height:zt.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},Kb={width:zt.ux.rem(.9375),height:zt.ux.rem(.9375),pointerEvents:"none"},Wb={outerContainer:zt.ux.joinClasses([pb,zt.ux.style({display:"flex",alignItems:"center"})]),label:zt.ux.joinClasses([hb,zt.ux.style(Rb)]),container:zt.ux.joinClasses([fb,zt.ux.style(Bb)]),slider:zt.ux.joinClasses([gb,zt.ux.style(Mb)]),sliderNotDragging:zt.ux.joinClasses([bb,zt.ux.style(Fb)]),sliderDragging:zt.ux.joinClasses([vb,zt.ux.style(Tb)]),sliderDivisionPoint:zt.ux.joinClasses([yb,zt.ux.style(Pb)]),sliderDivisionPointHoverArea:zt.ux.joinClasses([xb,zt.ux.style(Nb)]),sliderInner:zt.ux.joinClasses([kb,zt.ux.style(jb)]),sliderInnerNotDragging:zt.ux.joinClasses([Sb,zt.ux.style({transition:"width 0.15s ease-in-out"})]),sliderInnerDragging:zt.ux.joinClasses([wb,zt.ux.style({transition:"none"})]),sliderInnerJiggle:zt.ux.joinClasses([Cb,zt.ux.style(Db)]),knob:zt.ux.joinClasses([Eb,zt.ux.style(Hb)]),knobJiggle:zt.ux.joinClasses([_b,zt.ux.style(Zb)]),knobNotDragging:zt.ux.joinClasses([Ib,zt.ux.style(Vb)]),knobDragging:zt.ux.joinClasses([Ab,zt.ux.style($b)]),knobEmoji:zt.ux.joinClasses([Ob,zt.ux.style(Kb)])};function qb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Yb(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Jb=zt.ux.stylesheet({default:[{overflow:"initial",userSelect:"initial",verticalAlign:"initial"}]}),Xb=n(40295),ey=n(87597),ty=n(92236);function ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){iy(e,t,n[t])}))}return e}function oy(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ay(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ny(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var sy=uf((function(e){var t=i.useRef(null),n=(0,ey.U)({"aria-label":e.meta.label,"aria-labelledby":null==e.meta.label?e.contentId:void 0,"aria-describedby":e["aria-describedby"],onPress:function(t){return e.onPress(t.target.getBoundingClientRect())},elementType:"div"},t).buttonProps;return i.createElement("div",ry({className:ly.button},n))})),ly=zt.ux.stylesheet({container:[{position:"relative",minHeight:zt.ux.rem(3.5),display:"grid"}],content:[{display:"flex",alignItems:"center",$nest:{"& > div:first-of-type":{flexGrow:1}}}],button:[{position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"transparent",cursor:"pointer"}]});function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function uy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dy=function(e){return zt.ux.rem(null!=e?e:.25)},my=function(e){return zt.ux.rem(1.25*(null!=e?e:.25))},py=function(e,t){return zt.ux.style({height:"calc(".concat(dy(t)," + ").concat(void 0!==e?my(t):0,")")})},hy=function(e,t,n){return zt.ux.style({height:dy(n),backgroundColor:"".concat(If[e]),border:t?"1px solid ".concat(If[t]):"none",borderRadius:dy(n)})},fy=function(e,t,n){return zt.ux.style({width:"".concat(e,"%"),height:dy(n),backgroundColor:"".concat(If[t])})},gy=function(e,t){return zt.ux.style({left:"calc(".concat((n=e,i=[2,98],r=uy(i,2),o=r[0],a=r[1],Math.min(a,Math.max(o,n))),"% - ").concat(dy(t),")"),borderLeft:"".concat(dy(t)," solid transparent"),borderRight:"".concat(dy(t)," solid transparent"),borderTop:"".concat(my(t)," solid ").concat(If.CoreNeutral50)});var n,i,r,o,a},vy=zt.ux.stylesheet({outerContainer:[{position:"relative",display:"flex",flexDirection:"column",justifyContent:"flex-end"}],pinPoint:[{position:"absolute",top:0,width:0,height:0}],background:[{width:"100%",overflow:"hidden"}],fill:[{position:"relative"}],loading:[{position:"absolute",width:"100%",backgroundImage:"linear-gradient(-45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent)",backgroundSize:"20px 20px"}]});function by(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||ky(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xy(e){return function(e){if(Array.isArray(e))return by(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ky(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ky(e,t){if(e){if("string"==typeof e)return by(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?by(e,t):void 0}}function Sy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,a.zG)(e.parentElement,o.fromNullable,o.chain((function(e){return Sy(e,xy(t).concat([e]))})),o.alt((function(){return y.nI(t)})))}var wy=function(e,t){return{$nest:{"@media (prefers-reduced-motion: no-preference)":{animation:"".concat(e," ").concat(zt.ux.seconds(.3)," ").concat(t)}}}},Cy=zt.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),Ey=zt.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}});function _y(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}var Iy,Ay,Oy,Ry,By,My,Fy,Ty=zt.ux.stylesheet({default:[{height:"1px",backgroundColor:If[Ln.CoreNeutral20],border:"none",flex:1}]}),Py=n(32096),Ny=n(598),jy=n(62172);function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Ay=Iy||(Iy={}),Oy=Ay.pointerWidth=Math.sqrt(200),Ay.slightMargin=17.5,Ry={position:"absolute",zIndex:Py.$n,width:220,backgroundColor:jy.yK,borderRadius:zt.ux.rem(Py.Jr),$nest:{"& button i path":{fill:If.CoreNeutral30,stroke:If.CoreNeutral30}}},By={position:"absolute",top:zt.ux.rem(.75),right:zt.ux.rem(.75),color:jy.uJ,textDecoration:"none"},My={display:"block",position:"absolute",width:0,height:0,borderTop:"".concat(Iy.pointerWidth,"px solid transparent"),borderBottom:"".concat(Iy.pointerWidth,"px solid transparent"),borderLeft:"".concat(Iy.pointerWidth,"px solid transparent"),borderRight:"".concat(Iy.pointerWidth,"px solid transparent")},Fy=Ay.stylesheet=zt.ux.stylesheet({wrapper:[{position:"relative"}],popover:[Ry],closeButton:[By],anchorPointer:[My]}),Ay.modifiers=zt.ux.stylesheet({preCheck:[{$nest:zy({},"&.".concat(Fy.anchorPointer),{visibility:"hidden",position:"fixed",top:-1e3,left:-1e3})}],top:[{$nest:zy({},"&.".concat(Fy.anchorPointer),{borderTopColor:jy.yK,top:-Oy,left:"calc(50% - ".concat(Oy,"px)")})}],bottom:[{$nest:zy({},"&.".concat(Fy.anchorPointer),{borderBottomColor:jy.yK,bottom:-Oy,left:"calc(50% - ".concat(Oy,"px)")})}],left:[{$nest:zy({},"&.".concat(Fy.anchorPointer),{borderLeftColor:jy.yK,left:-Oy,top:"calc(50% - ".concat(Oy,"px)")})}],right:[{$nest:zy({},"&.".concat(Fy.anchorPointer),{borderRightColor:jy.yK,right:-Oy,top:"calc(50% - ".concat(Oy,"px)")})}]});var Ly=function(e,t){return e.left>=t.left&&e.top>=t.top&&e.left+e.width<t.left+t.width&&e.top+e.height<t.top+t.height},Gy=function(e,t,n,i){switch(e){case qn.Left:return o.some(n.left-t.width-Iy.pointerWidth/2);case qn.Right:return o.some(n.right+Iy.pointerWidth/2);case qn.Top:case qn.Bottom:var r=-t.width/2,s=-t.width+Iy.pointerWidth/2+Iy.slightMargin,l=-Iy.slightMargin;return(0,a.zG)(Zy(e,t,n,i),o.chain((function(e){return o.fromNullable([r,s,l].find((function(r){return Ly({top:e,left:n.left+n.width/2+r,width:t.width,height:t.height},i)})))})));default:(0,m.vE)(e)}},Zy=function(e,t,n,i){switch(e){case qn.Top:return o.some(n.top-t.height-Iy.pointerWidth/2);case qn.Bottom:return o.some(n.bottom+Iy.pointerWidth/2);case qn.Left:case qn.Right:var r=-t.height/2,s=-t.height+Iy.pointerWidth+Iy.slightMargin,l=-Iy.slightMargin;return(0,a.zG)(Gy(e,t,n,i),o.chain((function(e){return o.fromNullable([r,s,l].find((function(r){return Ly({top:n.top+n.height/2+r,left:e,width:t.width,height:t.height},i)})))})));default:(0,m.vE)(e)}},Hy=function(e,t,n,i){var r="".concat(Iy.pointerWidth/2,"px");switch(e){case qn.Top:return(0,a.zG)(Gy(e,t,n,i),o.map((function(e){return{left:e,bottom:r}})));case qn.Bottom:return(0,a.zG)(Gy(e,t,n,i),o.map((function(e){return{left:e,top:r}})));case qn.Left:return(0,a.zG)(Zy(e,t,n,i),o.map((function(e){return{top:e,right:r}})));case qn.Right:return(0,a.zG)(Zy(e,t,n,i),o.map((function(e){return{top:e,left:r}})));default:(0,m.vE)(e)}},Vy=n(6815),$y={flexShrink:0,alignItems:"center",justifyContent:"center",height:zt.ux.rem(2),width:zt.ux.rem(2)},Ky={$nest:{"& i":{height:zt.ux.rem(2),width:zt.ux.rem(2)}}},Wy=zt.ux.stylesheet({button:[$y],item:[Ky]});function qy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy,Yy="stickerContainer",Jy="sticker",Xy="stickerLabel",ex="stickerBackgroundContainer",tx="stickerBackgroundWithCutOut",nx="stickerBackgroundTriangle",ix=zt.ux.px(-4),rx={display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-end",position:"relative",minHeight:zt.ux.rem(3.9375)},ox={display:"inline-block",border:"none",padding:0,position:"absolute",width:"calc(100% + ".concat(zt.ux.px(8),")"),left:ix,top:ix,right:ix,bottom:ix,overflow:"hidden",cursor:"pointer",backgroundColor:"transparent",textAlign:"initial"},ax=zt.ux.px(35),sx=zt.ux.px(38),lx={zIndex:2,position:"relative",display:"inline-flex",flexDirection:"column",padding:"0 ".concat(zt.ux.rem(Pv.mh)," 0 ").concat(ax)},cx={transitionDuration:"300ms",transitionTimingFunction:"ease"},ux={position:"absolute",width:"100%",height:"100%",zIndex:1,top:0,left:0,borderRadius:zt.ux.rem(Tv.xB),overflow:"hidden",transform:"rotateX(180deg)",transitionProperty:"clip-path",clipPath:"polygon(".concat(ax," 0, 100% 0, 100% 100%, 0 100%, 0 ").concat(sx,")")},dx={position:"absolute",width:ax,height:sx,zIndex:3,left:0,bottom:0,transitionProperty:"clip-path, width, height",clipPath:'path("M0 0.5L35 38L31.3648 9.37293C31.1471 7.6587 29.8533 6.27805 28.1568 5.9497L0 0.5Z")'},mx=zt.ux.px(40),px=zt.ux.px(47),hx={$nest:(Qy={},qy(Qy,"&:hover .".concat(tx),{clipPath:"polygon(".concat(mx," 0, 100% 0, 100% 100%, 0 100%, 0 ").concat(px,")")}),qy(Qy,"&:hover .".concat(nx),{width:mx,height:px,clipPath:'path("M0 0.5L40 47L39.0836 5.7635C39.0366 3.64906 37.3518 1.93661 35.2383 1.85532L0 0.5Z")'}),Qy)},fx={outerContainer:zt.ux.joinClasses([Yy,zt.ux.style(rx)]),sticker:zt.ux.joinClasses([Jy,zt.ux.style(ox),zt.ux.style(hx)]),label:zt.ux.joinClasses([Xy,zt.ux.style(lx)]),backgroundContainer:zt.ux.joinClasses([ex,zt.ux.style({position:"absolute",width:"100%",height:"100%",left:0,top:0})]),backgroundWithCutOut:zt.ux.joinClasses([tx,zt.ux.style(cx),zt.ux.style(ux)]),backgroundTriangle:zt.ux.joinClasses([nx,zt.ux.style(cx),zt.ux.style(dx)])},gx=new df.z6(100);function vx(e){var t="bgc-".concat(e),n=gx.get(t);if(void 0!==n)return n;var i=zt.ux.style({backgroundColor:If[e]});return gx.put(t,i),i}var bx,yx,xx=function(e){var t=e.type;return i.createElement("div",null,t," not implemented")},kx={animation:function(e){var t=i.useRef(null),n=function(e,t){switch(e){case"behavior:animation:fadeIn":return{className:zt.ux.style(wy(Cy,_y(t))),direction:"in"};case"behavior:animation:fadeOut":return{className:zt.ux.style(wy(Ey,_y(t))),direction:"out"};default:(0,m.vE)(e)}}(e.type,e.timeCurve),r=yy(i.useState("in"===n.direction?n.className:void 0),2),s=r[0],l=r[1];return i.useEffect((function(){return function(){var e,i,r;e=t.current,(null!==(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument.defaultView)&&void 0!==r?r:self).matchMedia("(prefers-reduced-motion: reduce)").matches||function(e,t){(0,a.zG)((0,a.bc)((0,a.zG)(t,o.fromPredicate((function(e){return"out"===e.direction}))),Sy(e)),(0,a.og)(g.g(o.option)),j.bw((function(t){var n,i,r=yy(t,2),s=r[0],l=r[1],c=null!==(i=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)&&void 0!==i?i:document,u=e.getBoundingClientRect(),d=e.cloneNode(!0);d.classList.add(s.className),d.style.position="absolute",d.style.top="".concat(u.top,"px"),d.style.left="".concat(u.left,"px"),d.style.width="".concat(u.width,"px"),d.style.height="".concat(u.height,"px"),requestAnimationFrame((function(){(0,a.zG)(l.find((function(e){return c.contains(e)})),o.fromNullable,j.bw((function(e){d.addEventListener("animationend",(function(){c.contains(d)&&d.remove()})),e.appendChild(d)})))}))})))}(t.current,n)}}),[n]),i.createElement("div",{"data-name":"behavior-animation-wrapper","data-animation":e.type,ref:t,className:s,onAnimationEnd:function(){return l(void 0)}},e.children)},button:Ff(),alternativeChoice:function(e){var t=e.id,n=e.designSystem,r=e.content,s=e.activeIndex,l=e.notify,c=e.meta,u=Pl.C8.Logging.getLogger("AlternativeChoiceView");return i.createElement("div",{role:"group","aria-label":c.label,"aria-describedby":"".concat(t,"-description"),children:[i.createElement(n.column,{children:[(0,a.zG)(o.fromNullable(r[s]),v.fromOption((function(){return"Cannot render alternative choice preview if there's no choice that matches the current alternative index."})),v.map((function(e){return e.preview})),v.filterOrElse(ss.isBlock,(function(){return"Cannot render alternative choice preview if it's not of type `block.`"})),v.filterOrElse(ss.hasOnlyTextParts,(function(){return"Cannot render alternative choice preview `block` if not every part is of type `text.`"})),v.map((function(e){return e.parts.length>0?i.createElement(n.block,xf(yf({},e),{children:e.parts.map((function(e,t){return i.createElement(n.text,yf({key:t},e))})),spacing:{top:Yn.D0,right:Yn.D0,bottom:Yn.D1,left:Yn.D0},key:"preview"})):null})),v.getOrElse((function(e){return u.warn(e),null}))),i.createElement(n.block,{innerSpacing:{horizontal:Yn.D05,vertical:Yn.D05},verticalAlign:ni.Top,children:r.map((function(e,t){return"button"===e.label.type&&"block"===e.label.label.type?i.createElement(n.button.toggle,{key:t,id:e.label.id,text:n.block(xf(yf({},e.label.label),{children:e.label.label.parts.map((function(e,t){return"text"===e.type?e.text:"icon"===e.type&&"known"===e.source.kind?i.createElement(n.icon[e.source.name],yf({key:t},e)):null}))})),name:e.label.name.value,state:Sf(s)(e.label.actions)?Dn.Selected:Dn.Deselected,tooltip:void 0,shape:zn.Square,meta:{},onClick:l(e.label.actions,e.label.id)}):u.warn("Content where `label.type` is not `button` and `label.label.type` is not `block` are not supported (yet)",{content:e})})),key:"control",id:xs.from("AlternativeChoiceView-control")}),(0,a.zG)(o.fromNullable(c.description),o.map((function(e){return i.createElement(sf.T,{id:"".concat(t,"-description"),key:"description",children:[e]})})),o.toNullable)],key:"AlternativeChoiceView",id:xs.from("AlternativeChoiceView")})]})},text:ug,clickableText:function(e){var t=e.textView,n=e.onClick,r=e.name,o=Yb(e,["textView","onClick","name"]);return i.createElement(Af.zx,{name:r,onClick:n,className:zt.ux.joinClasses([Of.LI,Jb.default])},i.createElement(t,Qb(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){qb(e,t,n[t])}))}return e}({},o),{text:o.text})))},image:function(e){var t=e.name,n=e.url,r=e.size,o=e.backgroundColor;return i.createElement("div",{className:mv(o),"data-role":"icon"},i.createElement("img",{src:n,className:pv(r),alt:t}))},imageSized:function(e){var t,n=e.name,r=e.url,o=e.height,a=e.width,s=e.backgroundColor,l=e.borderRadius,c=e.meta;return i.createElement("figure",{className:gv(o,a,s),"data-role":"icon"},i.createElement("img",{src:r,className:vv(o,a,l),alt:null!==(t=c.label)&&void 0!==t?t:n.value}))},icon:tv,alertsCount:function(e){var t=e.textView,n=tf(e,["textView"]),r=i.useContext(Bh.Context).alertIds.length;return r>0?i.createElement(t,ef(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Xh(e,t,n[t])}))}return e}({key:"alertsCountText"},n),{text:"".concat(r),removeImplicitPadding:!0})):null},assistantCard:gf,count:function(e){var t=e.backgroundColor,n=e.value,r=e.id,o=e.textColor,a=void 0===o?Ln.CoreNeutral0:o,s=e.meta;return i.createElement(Ng,{id:r,"aria-label":s.label,"aria-description":s.description},i.createElement(Ag,{id:r,backgroundColor:t,borderRadius:{topLeft:Qn.Radius3,topRight:Qn.Radius3,bottomRight:Qn.Radius3,bottomLeft:Qn.Radius3},minWidth:.75,padding:{top:Yn.D0,right:Yn.D025,bottom:Yn.D0125,left:Yn.D025}},i.createElement(ug,{size:Xn.Small,format:[Jn.Bold],textColor:a,text:n,meta:s,removeImplicitPadding:!0})))},block:Ng,row:function(e){var t=e.left,n=e.right,r=e.spacing,o=e.verticalAlign,a=Array.isArray(t)&&0===t.length,s=Array.isArray(n)&&0===n.length;return a&&s?null:i.createElement("div",{"data-role":"row-layout",className:_v(r)},a?null:i.createElement("div",{"data-role":"row-content",className:Iv(o)},t),s?null:i.createElement("div",{"data-role":"row-content",className:Av(o)},n))},column:of,slider:function(e){var t=e.fillColor,n=e.segmentSize,r=e.choices,l=e.designSystem,c=e.onChoiceSelected,u=rd.P.useElWatcher(),d=u.ref,m=u.onMount,p=new s.xQ,h=new s.xQ,f=new s.xQ,g=new s.xQ,v=new s.xQ,b=new s.xQ,y=new el.X(!0),x=r.length-1,k=x>0?100/x:0,w=r.reduce((function(e){var t=e[e.length-1],n=0;return void 0!==t&&(n=t+k),e.push(n),e}),[]),C=new el.X(w[1]),E=mn.T(v.pipe(Ol.h(!0)),f.pipe(Ol.h(!1)),g.pipe(Ol.h(!1))).pipe(dt.O(!1)),A=mn.T(v,h).pipe(At.M(E),_.h((function(e){var t=mb(e,2);t[0];return t[1]})),I.U((function(e){return mb(e,1)[0]})),At.M(d),I.U((function(e){var t=mb(e,2),n=t[0],i=t[1];return(0,a.zG)(i,o.map((function(e){return e.getBoundingClientRect()})),o.bindTo("sliderClientRect"),o.apS("containerMouseEventVal",o.some(n)))})),M.oA,I.U((function(e){var t=e.containerMouseEventVal,n=e.sliderClientRect,i=n.x,r=n.x+n.width;return t.clientX<=i?0:t.clientX>=r?100:(t.clientX-i)/(r-i)*100}))),O=C.pipe(S.x(),I.U((function(e){for(var t=-1,n=0;n<w.length-1;n++){var i=w[n],r=w[n+1];e>=i&&e<=r&&(t=e>=(i+r)/2?n+1:n)}return t}))),R=O.pipe(S.x(),I.U((function(e){return r[e]})));return rd.P.useSubscriptionTo(mn.T(A.pipe(S.x()),E.pipe(S.x(),_.h((function(e){return!e})),At.M(A),I.U((function(e){var t=mb(e,2);t[0];return t[1]})),I.U((function(e){var t,n=0,i=!0,r=!1,o=void 0;try{for(var a,s=w[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,c=Math.abs(e-l);(void 0===t||c<t)&&(t=c,n=l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}))),p.pipe(_.h((function(e){return"ArrowRight"===e.key||"ArrowLeft"===e.key})),T.b((function(e){e.preventDefault(),e.stopPropagation()})),I.U((function(e){return e.key})),_.h((function(e){return"ArrowRight"===e||"ArrowLeft"===e})),At.M(C),I.U((function(e){var t,n=mb(e,2),i=n[0],r=n[1];return(t="ArrowRight"===i?r+k:r-k)>100?100:t<0?0:t}))),b.pipe(I.U((function(e){return w[e]})))).pipe(T.b((function(e){return C.next(e)})))),rd.P.useSubscriptionTo(R.pipe(I.U((function(e){return c(e.actions,e.id,Tn.SelectSliderChoice)})),T.b((function(e){return e()})))),r.length<2?(Pl.C8.Logging.getLogger("SliderView").warn("Cannot render slider with less than 2 choices.",{choicesLength:r.length}),null):i.createElement(Gt.F.div,{className:Wb.outerContainer,onKeyDown:function(e){return p.next(e)},"data-role":"slider"},i.createElement(Gt.F.div,{className:Wb.label},R.pipe(I.U((function(e){return e.label})))),i.createElement(Gt.F.div,{className:Wb.container,style:{width:zt.ux.rem(x*n)},onMouseMove:function(e){return h.next(e)},onMouseUp:function(e){return f.next(e)},onMouseLeave:function(e){return g.next(e)}},i.createElement(Gt.F.div,db(ub({},(0,Wd.Sh)(Wb.slider,E.pipe(I.U((function(e){return e?Wb.sliderDragging:Wb.sliderNotDragging}))))),{mount:m,onMouseOver:function(){return y.next(!1)},onFocus:function(){return y.next(!1)}}),i.createElement(Gt.F.div,db(ub({},(0,Wd.Sh)(Wb.sliderInner,E.pipe(I.U((function(e){return e?Wb.sliderInnerDragging:Wb.sliderInnerNotDragging}))),y.pipe(I.U((function(e){return e&&1===x?Wb.sliderInnerJiggle:null}))))),{style:{width:C.pipe(I.U(zt.ux.percent)),color:If[t]}}),i.createElement(Gt.F.div,db(ub({},(0,Wd.Sh)(Wb.knob,E.pipe(I.U((function(e){return e?Wb.knobDragging:Wb.knobNotDragging}))),y.pipe(I.U((function(e){return e&&x>1?Wb.knobJiggle:null}))))),{onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),v.next(e)},tabIndex:0}),R.pipe(I.U((function(e){return"known"===e.icon.source.kind?i.createElement(l.icon[e.icon.source.name],{key:e.icon.source.name,backgroundColor:e.icon.backgroundColor}):i.createElement(l.image,ub({key:e.icon.source.name,backgroundColor:e.icon.backgroundColor},e.icon.source))}))))),E.pipe(I.U((function(e){return r.map((function(t,r){var o={width:zt.ux.rem(.25),left:zt.ux.rem(0===r?.125:r===x?r*n-.25-.125:r*n-.25)};return i.createElement(Gt.F.Fragment,{key:t.id},i.createElement("div",{className:Wb.sliderDivisionPoint,style:o}),O.pipe(I.U((function(t){return t===r||e?null:i.createElement(Gt.F.div,{className:Wb.sliderDivisionPointHoverArea,style:db(ub({},o),{transform:"scaleX(6)"}),onClick:function(){return b.next(r)}})}))))}))}))))))},box:Ag,alternativeSlider:function(e){var t=e.fillColor,n=e.segmentSize,r=e.choices,s=e.designSystem,l=e.activeAltIndex,c=e.meta,u=e.notify;return i.createElement(s.column,{children:[i.createElement(s.slider,{fillColor:t,segmentSize:n,meta:c,choices:r.map((function(e){return{id:e.id,icon:e.icon,label:e.label,actions:e.actions}})),designSystem:s,onChoiceSelected:u,key:"select"}),i.createElement(Gt.F.Fragment,{key:"preview"},l.view((function(e){return(0,a.zG)(o.fromNullable(r[e+1]),v.fromOption((function(){return"Cannot render alternative slider preview if there's no choice that matches the current alternative index."})),v.map((function(e){return e.preview})),v.filterOrElse(ss.isBlock,(function(){return"Cannot render alternative slider preview if it's not of type `block.`"})),v.filterOrElse(ss.hasOnlyTextParts,(function(){return"Cannot render alternative slider preview `block` if not every part is of type `text.`"})),v.map((function(e){return i.createElement(s.block,Ef(Cf({},e),{children:e.parts.map((function(e,t){return i.createElement(s.text,Cf({key:t},e))}))}))})),v.getOrElse((function(e){return Pl.C8.Logging.getLogger("AlternativeSliderView").warn(e),null})))})))],id:xs.from("AlternativeSlider")})},scroll:function(e){var t=p.h.create(o.none),n=p.h.create(o.none),r=p.h.create(o.none),a=rb(t,n),s=rb(t,r),l=vt.aj([a,s]).pipe(I.U((function(e){var t=nb(e,2);return{topOverflow:t[0],bottomOverflow:t[1]}})),dt.O({topOverflow:!1,bottomOverflow:!1}),S.x(ob.equals));return i.createElement(i.Fragment,null,i.createElement("style",null,'div[data-role="scroll"] {\n            border-color: transparent;\n          }'),i.createElement(Gt.F.div,{"data-role":"scroll",className:l.pipe(I.U((function(t){return function(e){var t=e.maxHeight,n=e.topOverflow,i=e.bottomOverflow,r=[];r.push(sb["scroll-main"]),n&&r.push(sb.overflowTop);i&&r.push(sb.overflowBottom);void 0!==t&&r.push(function(e){var t="overflow-".concat(e),n=ab.get(t);if(void 0!==n)return n;var i=zt.ux.style({$debugName:"overflow",maxHeight:zt.ux.rem(e),overflowY:"auto",overflowX:"hidden",$nest:{"& > *":{overflow:"visible"}}});return ab.put(t,i),i}(t));return r.length>0?zt.ux.joinClasses(r):void 0}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){tb(e,t,n[t])}))}return e}({},e,t))}))),mount:function(e){return t.set(o.fromNullable(e))}},i.createElement("div",{style:{margin:0},ref:function(e){return n.set(o.fromNullable(e))}}),e.children,i.createElement("div",{style:{margin:0},ref:function(e){return r.set(o.fromNullable(e))}})))},list:Nv,listItem:function(e){var t=i.createElement(i.Fragment,null,i.createElement("div",{"data-role":"list-item",className:Wv.listItemPrimaryButton},i.createElement("div",{"data-role":"list-item-label",className:Wv.listItemLabel},e.label)),e.secondaryButtons.length>0?i.createElement("div",{"data-role":"list-item-secondary-buttons",className:Wv.listItemSecondaryButtonsContainer},e.secondaryButtons.map((function(t){var n=uf((function(t){return i.createElement("button",{key:t.id,"data-role":"list-item-secondary-button",onClick:function(e){e.stopPropagation(),t.onClick()},onKeyDown:function(e){return e.stopPropagation()},onPointerDown:function(e){return e.stopPropagation()},className:Wv.listItemSecondaryButton,"aria-label":t.meta.label,"aria-describedby":t["aria-describedby"]},"icon"===t.label.type?"known"===t.label.icon.source.kind?i.createElement(e.designSystem.icon[t.label.icon.source.name],{key:t.label.icon.source.name,backgroundColor:t.label.icon.backgroundColor}):i.createElement(e.designSystem.image,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Gv(e,t,n[t])}))}return e}({key:t.label.icon.source.name,backgroundColor:t.label.icon.backgroundColor},t.label.icon.source)):t.label.text)}))(t);return t.tooltip?i.createElement(Lv.u,{key:t.id,title:t.tooltip},n):n}))):null);return e.tooltip?i.createElement(Lv.u,{title:Xf(e.tooltip)},t):t},strongAlertRef:function(e){var t=e.children,n=e.alertIds;return i.createElement(Bh.Context.Provider,{value:{alertIds:n}},t)},popoverAnchor:function(e){var t=rd.P.useElWatcher(),n=rd.P.useElWatcher(),r=rd.P.useMemoOnDidMount((function(){return p.h.create(zt.ux.joinClasses([Iy.modifiers.preCheck,Iy.modifiers[e.positionHint]]))})),s=rd.P.useMemoOnDidMount((function(){return p.h.create({top:0,left:0})}));i.useEffect((function(){e.onShow()}),[]),i.useEffect((function(){var i=O.timer(0,500).pipe(Ny.c(t.ref),I.U(o.map((function(e){return e.getBoundingClientRect()}))),S.x(o.getEq(Dm.UL.eq).equals)),l=O.timer(0,500).pipe(Ny.c(n.ref),I.U(o.map((function(e){return e.getBoundingClientRect()}))),S.x(o.getEq(Dm.xu.eq).equals)),c=vt.aj([i,l]).subscribe((function(t){var n=Dy(t,2),i=n[0],l=n[1];(0,a.zG)((0,g.g)(o.option)(i,l),o.chain((function(t){var n=Dy(t,2),i=n[0],r=n[1];return function(e,t,n,i){var r=[e,qn.Top,qn.Left,qn.Right,qn.Bottom].filter((function(e,t,n){return n.indexOf(e)===t}));return(0,a.zG)(r,b.f2((function(e){return(0,a.zG)(Hy(e,t,n,i),o.map((function(t){return{position:e,adjustment:t}})))})))}(e.positionHint,r,i,{top:0,left:0,right:document.documentElement.scrollWidth,bottom:document.documentElement.scrollHeight,width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight})})),o.fold((function(){return r.set(Iy.modifiers.preCheck)}),(function(e){var t=e.position,n=e.adjustment;r.set(Iy.modifiers[t]),s.set(n)})))}));return function(){return c.unsubscribe()}}),[]);var l=r.pipe(S.x(),I.U((function(e){return zt.ux.joinClasses([Iy.stylesheet.anchorPointer,e])}))),c=s.pipe(S.x(hi.Xy));return i.createElement(Gt.F.div,{className:Iy.stylesheet.wrapper,mount:t.onMount,style:{display:e.inlineWrapper?"inline-block":"block"}},i.createElement(Gt.F.div,{className:l},i.createElement(Gt.F.div,{className:Iy.stylesheet.popover,style:c,mount:n.onMount},e.popover)),e.children)},nativeSkillsModal:xx,nativeSkillsList:function(e){var t=e.designSystem,n=e.notify,r=e.onSelect;return i.createElement(t.block,{innerSpacing:{horizontal:Yn.D05,vertical:Yn.D05},verticalAlign:ni.Top,horizontalAlign:$n.Center,children:[i.createElement("p",{key:"header"},"Mock implementation of Skills list"),i.createElement(t.radioButtonsGroup,{id:"skills-list-radio-group",type:"radioButtonsGroup",onClick:function(){return n},meta:{label:"select-a-skill",description:"Select a skill"},options:[{id:"translate",label:"Translate",onSelect:r,meta:{label:"translate",description:"Access the translate skill"}},{id:"paraphrase",label:"Paraphrase",onSelect:r,meta:{label:"paraphrase",description:"Access the paraphrase skill"}}],designSystem:t})],key:"block",id:xs.from("container-block")})},nativeSkillsView:function(){return i.createElement(Ng,{innerSpacing:{horizontal:Yn.D05,vertical:Yn.D05},verticalAlign:ni.Top,horizontalAlign:$n.Center,children:[i.createElement("p",{key:"header"},"Mock implementation of Skills View")],key:"block",id:xs.from("container-block")})},nativeToneInsightsModal:xx,nativeLearnMoreModal:xx,nativeSettingsModal:xx,nativeFeedbackModal:xx,nativeInlineCardContent:xx,inlineCard:uf((function(e){var t=e.child,n=e.id,r=e.meta,o=e.minWidth,a=e.maxWidth,s=pf(e,["child","id","meta","minWidth","maxWidth"]),l=function(e,t){var n="".concat(e,"-").concat(t),i=hf.get(n);if(void 0!==i)return i;var r=zt.ux.style(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){mf(e,t,n[t])}))}return e}({display:"inline-block"},e?{minWidth:zt.ux.rem(e)}:{},t?{maxWidth:zt.ux.rem(t)}:{}));return hf.put(n,r),r}(null!=o?o:bx,null!=a?a:yx);return i.createElement(of,{id:"".concat(n,"-container"),role:"region","aria-label":r.label,"aria-describedby":s["aria-describedby"],className:l},t)})),nativeGetStartedChecklistModal:function(e){var t=e.designSystem,n=e.notify;return i.createElement(t.block,{innerSpacing:{horizontal:Yn.D05,vertical:Yn.D05},verticalAlign:ni.Top,horizontalAlign:$n.Center,children:[i.createElement("p",{key:"header"},"Mock Implementation of nativeGetStartedChecklistModal"),i.createElement(t.button.primary,{key:"complete-all-items-btn",id:"complete-all-items-btn",text:"Complete all items",name:"fire-actions",state:Dn.Enabled,tooltip:void 0,shape:zn.Square,meta:{},onClick:n}),i.createElement("p",{key:"footer"},"")],key:"block",id:xs.from("container-block")})},nativeKeyTakeawaysAssistantCard:xx,nativeProofitModal:xx,dropDownMenuButton:function(e){var t=function(t){return"known"===t.source.kind?i.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):i.createElement(e.designSystem.image,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Qv(e,t,n[t])}))}return e}({key:t.source.name,backgroundColor:t.backgroundColor},t.source))};return i.createElement(qv.v.Dropdown,{label:t(e.icon),placement:"bottom right",theme:{button:Xv.button,item:Xv.item},"aria-label":e.menu.meta.label,onAction:function(t){return(0,a.zG)(e.menu.sections,b.tS((function(e){return e.items})),b.Ew((function(e){return e.id===String(t)})),j.bw((function(t){return e.onClick(t.onClickActions,t.id)()})))}},e.menu.sections.map((function(e,n){return i.createElement(qv.v.Section,{key:n,title:e.title},e.items.map((function(e){return i.createElement(qv.v.Item,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)})))})))},selectableDropDownMenu:function(e){return i.createElement(Vy.P.Component,{placeholder:e.placeholder,placement:"bottom left",theme:{button:Wy.button},"aria-label":e.select.meta.label,defaultSelectedKey:e.selectedItem,onSelectionChange:function(t){return(0,a.zG)(e.select.items,b.Ew((function(e){return e.id===String(t)})),j.bw((function(t){return e.onClick(t.onClickActions,t.id)()})))}},e.select.items.map((function(e){return i.createElement(Vy.P.Item,{key:e.id},e.label)})))},radioButtonsGroup:function(e){var t=e.id,n=e.options,r=e.onClick,o=e.meta;return i.createElement(Xb.Y.Group,{name:t,"aria-label":o.label,description:o.description,onChange:function(e){return(0,a.zG)(n,fi.Ew((function(t){return t.id===e})),j.bw((function(e){return r(e.onSelect,e.id)})))}},n.map((function(e){return i.createElement(Xb.Y.Item,{id:e.id,key:e.id,value:e.id,"aria-label":e.meta.label,"aria-description":e.meta.description},e.label)})))},nativeExperimentalGBConsistencyUpsellFooter:xx,nativeExperimentalGBToneInsightsUpsellFooter:xx,collapsedCard:function(e){var t="".concat(e.id,"-collapsed-content"),n=ay(i.useState(!1),2),r=n[0],o=n[1],a=i.useCallback((function(t){o(t),e.onHoverChanged(t)}),[]),s=(0,ty.XI)({onHoverChange:a}).hoverProps,l=(0,ty.L_)({onFocusWithinChange:a}).focusWithinProps;return i.createElement("div",oy(ry({},s,l),{className:ly.container}),i.createElement(sy,oy(ry({},e),{contentId:t})),i.createElement("div",{id:t,className:ly.content},e.child,i.createElement("div",{role:"tooltip",style:{opacity:r?1:0}},e.quickActions)))},longFormCard:function(e){return i.createElement(i.Fragment,null,function(e,t,n){switch(e){case"focused":return t;case"collapsed":return n;case"hidden":return null;default:return(0,m.vE)(e)}}(e.viewKind,e.fullContent,e.collapsedContent))},progressBar:function(e){var t=e.value,n=e.backgroundColor,r=e.fillColor,o=e.borderColor,a=e.height,s=e.pinPointValue,l=e.state;return i.createElement("div",{role:"progressbar","aria-label":"Progress","aria-valuenow":t,className:zt.ux.joinClasses([vy.outerContainer,py(s,a)])},void 0!==s&&i.createElement("div",{"aria-label":"Progress starting point",className:zt.ux.joinClasses([vy.pinPoint,gy(s,a)])}),i.createElement("div",{className:zt.ux.joinClasses([vy.background,hy(n,o,a)])},i.createElement("div",{className:zt.ux.joinClasses([vy.fill,fy(t,r,a)])},l===Vn.Loading&&i.createElement("div",{className:vy.loading,style:{height:dy(a)}}))))},horizontalRule:function(){return i.createElement("hr",{className:Ty.default})},tooltip:function(e){var t=e.text,n=e.child,r=e.alignment;return i.createElement(Lv.u,{title:Xf(t),align:r},n)},sticker:function(e){var t=e.label,n=e.children,r=e.onClick,o=e.stickerColor,a=e.stickerReverseColor,s=e.meta,l=vx(o),c=vx(a);return i.createElement("div",{className:fx.outerContainer},i.createElement("div",{className:"sticker-content","aria-hidden":"true"},n),i.createElement("button",{className:fx.sticker,onClick:r,"aria-label":s.label},i.createElement("span",{className:fx.backgroundContainer},i.createElement("span",{className:zt.ux.joinClasses([fx.backgroundWithCutOut,fx.backgroundWithCutOut,l])}),i.createElement("span",{className:zt.ux.joinClasses([fx.backgroundTriangle,fx.backgroundTriangle,c])})),i.createElement("span",{className:fx.label},t)))},lifecycle:function(e){var t=e.onMountHandler,n=e.onUnmountHandler,r=e.children;return i.useEffect((function(){return t(),function(){return n()}}),[]),i.createElement(i.Fragment,null,r)},globalPartPlaceholder:function(e){var t=e.children;return i.createElement(i.Fragment,null,t)}};const Sx=e=>{const t=i.useRef(null),n=function(e,t){switch(e){case"behavior:animation:fadeIn":return{className:zt.ux.style(Cx(Ex,Ix(t))),direction:"in"};case"behavior:animation:fadeOut":return{className:zt.ux.style(Cx(_x,Ix(t))),direction:"out"};default:(0,m.vE)(e)}}(e.type,e.timeCurve),[r,s]=i.useState("in"===n.direction?n.className:void 0);return i.useEffect((()=>()=>{var e,i,r;t.current&&(e=t.current,!(null!==(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument.defaultView)&&void 0!==r?r:self).matchMedia("(prefers-reduced-motion: reduce)").matches)&&function(e,t){(0,a.zG)((0,a.bc)((0,a.zG)(t,o.fromPredicate((e=>"out"===e.direction))),wx(e)),(0,a.og)(g.g(o.option)),j.bw((([t,n])=>{var i,r;const s=null!==(r=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)&&void 0!==r?r:document,l=e.getBoundingClientRect(),c=e.cloneNode(!0);c.classList.add(t.className),c.style.position="absolute",c.style.top=`${l.top}px`,c.style.left=`${l.left}px`,c.style.width=`${l.width}px`,c.style.height=`${l.height}px`,requestAnimationFrame((()=>{(0,a.zG)(n.find((e=>s.contains(e))),o.fromNullable,j.bw((e=>{c.addEventListener("animationend",(()=>{s.contains(c)&&c.remove()})),e.appendChild(c)})))}))})))}(t.current,n)}),[n]),i.createElement("div",{"data-testid":"behavior-animation-wrapper","data-animation":e.type,ref:t,className:r,onAnimationEnd:()=>s(void 0)},e.children)};function wx(e,t=[]){return(0,a.zG)(e.parentElement,o.fromNullable,o.chain((e=>wx(e,[...t,e]))),o.alt((()=>y.nI(t))))}const Cx=(e,t)=>({$nest:{"@media (prefers-reduced-motion: no-preference)":{animation:`${e} ${zt.ux.seconds(.3)} ${t}`}}}),Ex=zt.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),_x=zt.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}});function Ix(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const Ax={default:{$nest:{"& span":{verticalAlign:"initial"}}}},Ox={[$n.Left]:{default:{textAlign:"left"}},[$n.Center]:{default:{textAlign:"center"}},[$n.Right]:{default:{textAlign:"end"}}};function Rx(e){return void 0!==e?Ox[e]:Ox[$n.Left]}function Bx(e){return Object.assign({name:e.name,onClick:e.onClick,"aria-label":e.meta.label,"aria-describedby":e["aria-describedby"],title:void 0!==e.tooltip&&e.state!==Dn.Disabled?Xf(e.tooltip):void 0},function(e){switch(e){case Dn.Enabled:return{disabled:!1};case Dn.Disabled:return{disabled:!0};case Dn.Selected:return{disabled:!1,active:!0};case Dn.Deselected:return{disabled:!1,active:!1};case Dn.Hidden:return{hidden:!0};default:return(0,m.L0)(e)}}(e.state))}var Mx=n(28511),Fx=n(58675),Tx=n(99517),Px=n(29504),Nx=n(57427);function jx({item:e,state:t,className:n,name:r}){const o=i.useMemo((()=>r?`${r}-item`:"menu-item"),[r]),a=i.useRef(null),{menuItemProps:s,isDisabled:l,isSelected:c}=(0,Mx.iX)({key:e.key},t,a);return rd.P.useEffectOnDidMount((()=>{if(null!=a.current)try{const e=a.current.focus.bind(a.current);a.current.focus=t=>{var n;(null===(n=a.current)||void 0===n?void 0:n.matches(":hover"))||e(t)}}catch(e){}})),i.createElement("li",Object.assign({"data-testid":o},s,{ref:a,className:zt.ux.joinClasses([zx(l,c),n])}),i.createElement("span",{className:Ux},e.rendered))}const Ux=zt.ux.style({display:"flex",alignItems:"center",fontFamily:"Inter",fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:400,color:Qt.Z.TextBaseDefault}),zx=(e,t)=>zt.ux.style(Object.assign(Object.assign({display:"flex",alignItems:"center",minHeight:zt.ux.rem(2),padding:`${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.sD)} ${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.qp)}`,borderRadius:zt.ux.rem(Lu.xB),opacity:e?.4:void 0,cursor:"pointer"},t&&!e?{background:Qt.Z.MenuBackgroundSelected,boxShadow:`inset  0 0 0 1px ${Qt.Z.MenuBorderDefault}`}:{}),{$nest:{"&:hover":e?{}:{background:Qt.Z.MenuBackgroundHover,boxShadow:`inset  0 0 0 1px ${Qt.Z.MenuBorderDefault}`,$nest:{"& i":{stroke:Qt.Z.MenuIconHover,fill:Qt.Z.MenuIconHover}}},"&:focus, &:focus-visible":e?{}:{boxShadow:`0 0 0 1px ${Lt.I.Background.Base.Default}, 0 0 0 3px ${Qt.Z.BorderBrandDefault}`,outline:"none",background:Qt.Z.MenuBackgroundSelected,$nest:{"& i":{stroke:Qt.Z.MenuIconSelected,fill:Qt.Z.MenuIconSelected}}},"& i":{marginLeft:zt.ux.rem(-Dt.F2),marginRight:zt.ux.rem(Dt.x),minWidth:zt.ux.rem(1.5),minHeight:zt.ux.rem(1.5)},"& span":{fontWeight:t?700:void 0}}}));var Dx=n(1532);function Lx({name:e,section:t,state:n,onAction:r,theme:o={}}){const a=i.useMemo((()=>e?`${e}-section`:"dropdown-menu-section"),[e]),{itemProps:s,headingProps:l,groupProps:c}=(0,Mx.x7)({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:u}=(0,Dx.z)({elementType:"li"});return i.createElement(i.Fragment,null,t.key!==n.collection.getFirstKey()&&i.createElement("li",Object.assign({},u,{className:Hx})),i.createElement("li",Object.assign({"data-testid":a},s,{className:zt.ux.joinClasses([Gx,o.section])}),Boolean(t.rendered)&&i.createElement("h5",Object.assign({},l,{className:Zx}),t.rendered),i.createElement("ul",Object.assign({},c,{className:Vx}),Array.from(t.childNodes).map((t=>i.createElement(jx,{key:t.key,item:t,state:n,onAction:r,className:o.item,name:e}))))))}const Gx=zt.ux.style({padding:0}),Zx=zt.ux.style({margin:0,fontSize:zt.ux.rem(.75),fontWeight:400,lineHeight:zt.ux.rem(1.125),color:Lt.I.Text.Base.Subdued,padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.sD)} ${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.qp)}`}),Hx=zt.ux.style({borderTop:`1px solid ${Lt.I.Border.Base.Subdued}`,margin:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(-Dt.mh)}`}),Vx=zt.ux.style({listStyle:"none",margin:0,padding:0,outline:zt.ux.important("none")});var $x=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function Kx(e){var{name:t,className:n,theme:r={},onMouseOver:o,onMouseLeave:a}=e,s=$x(e,["name","className","theme","onMouseOver","onMouseLeave"]);const l=i.useMemo((()=>t?`${t}-list`:"menu-list"),[t]),c=(0,Nx.D)(s),u=i.useRef(null),{menuProps:d}=(0,Mx.H9)(s,c,u),m=(0,Px.dG)(d,{onMouseOver:o,onMouseLeave:a});return i.createElement("ul",Object.assign({"data-testid":l},m,{ref:u,className:zt.ux.joinClasses([Wx,r.list,n])}),Array.from(c.collection).map((e=>"section"===e.type?i.createElement(Lx,{key:e.key,section:e,state:c,theme:r}):i.createElement(jx,{key:e.key,name:t,item:e,state:c,className:r.item}))))}const Wx=zt.ux.style({listStyle:"none",margin:0,outline:zt.ux.important("none"),padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`});var qx=n(30116),Qx=n(33829),Yx=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};var Jx=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Xx=e=>{var t,{children:n,className:r,state:o,offset:a=4,onTransitionEnd:s,portalContainer:l}=e,c=Jx(e,["children","className","state","offset","onTransitionEnd","portalContainer"]);const u=i.useRef(null),{popoverProps:d}=function(e,t){const{triggerRef:n,popoverRef:i,isNonModal:r,isKeyboardDismissDisabled:o}=e,a=Yx(e,["triggerRef","popoverRef","isNonModal","isKeyboardDismissDisabled"]),{overlayProps:s,underlayProps:l}=(0,Qx.I)({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:!0,isDismissable:!1!==r,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:(e,t)=>{const n=null==t?void 0:t.composedPath();return!n||!n.some((e=>{var t;return e instanceof Node&&(null===(t=i.current)||void 0===t?void 0:t.contains(e))}))}},i),{overlayProps:c,arrowProps:u,placement:d}=(0,qx.tN)(Object.assign(Object.assign({},a),{targetRef:n,overlayRef:i,isOpen:t.isOpen,onClose:void 0}));return(0,qx.tk)({isDisabled:r}),(0,Px.bt)((()=>t.isOpen&&!r&&i.current?(0,qx.RP)([i.current]):()=>{}),[r,t.isOpen,i]),{popoverProps:(0,Px.dG)(s,c),arrowProps:u,underlayProps:l,placement:d}}(Object.assign(Object.assign({},c),{isNonModal:!0,offset:a,popoverRef:u}),o);return i.createElement(qx.aV,{portalContainer:l},i.createElement("div",Object.assign({},d,{style:Object.assign(Object.assign({},d.style),{minWidth:null===(t=c.triggerRef.current)||void 0===t?void 0:t.clientWidth}),ref:u,className:zt.ux.joinClasses([tk,r]),onTransitionEnd:e=>{if(e.target===u.current)return null==s?void 0:s()}}),i.createElement(qx.U4,{onDismiss:o.close}),i.createElement("div",{className:ek},n),i.createElement(qx.U4,{onDismiss:o.close})))},ek=zt.ux.style({width:zt.ux.percent(100)}),tk=zt.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",background:Lt.I.Background.Base.Default,boxShadow:ad.H8.boxShadow,border:ad.H8.border,borderRadius:zt.ux.rem(Lu.xB)});var nk=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function ik(e){var{placement:t="bottom start",theme:n={},name:r,portalContainer:o,title:a}=e,s=nk(e,["placement","theme","name","portalContainer","title"]);const l=i.useMemo((()=>r?`${r}-trigger`:"menu-trigger"),[r]),c=i.useRef(null),u=(0,Fx.W)(s),d=(0,Mx.u4)(Object.assign(Object.assign({},s),{type:"menu"}),u,c),m=d.menuTriggerProps,{onPress:p,onPressStart:h}=m,f=nk(m,["onPress","onPressStart"]),{menuProps:g}=d;return i.createElement(i.Fragment,null,i.createElement(Zt.z,Object.assign({},f,{variant:"tertiary",name:l,onClick:()=>u.open(),mount:e=>c.current=e,active:u.isOpen,"aria-label":s["aria-label"],title:null!=a?a:s["aria-label"],className:n.button,style:n.buttonStyle}),s.label),i.createElement(Tx.n,{in:u.isOpen},((e,a)=>i.createElement(Xx,{state:u,triggerRef:c,placement:t,portalContainer:o,className:e,onTransitionEnd:a},i.createElement(Kx,Object.assign({},s,g,{name:r,theme:n,onAction:e=>{var t;return null===(t=s.onAction)||void 0===t?void 0:t.call(s,e)}}))))))}var rk=n(36278);const ok=e=>{const t=t=>"known"===t.source.kind?i.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):i.createElement(e.designSystem.image,Object.assign({key:t.source.name,backgroundColor:t.backgroundColor},t.source));return i.createElement(tp.l.Consumer,null,(({portalContainer:n})=>i.createElement(Gt.F.Fragment,null,n.view(o.fold(a.gn,(n=>i.createElement(ik,{label:t(e.icon),portalContainer:n,placement:"bottom right",theme:{button:ak,item:sk},"aria-label":e.menu.meta.label,onAction:t=>(0,a.zG)(e.menu.sections,b.tS((e=>e.items)),b.Ew((e=>e.id===String(t))),j.bw((t=>e.onClick(t.onClickActions,t.id)()))),title:e.menu.meta.label},e.menu.sections.map(((e,n)=>i.createElement(rk.$0,{key:n,title:e.title},e.items.map((e=>i.createElement(rk.ck,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))))))))},ak=zt.ux.style({flexShrink:0,alignItems:"center",justifyContent:"center",height:zt.ux.rem(2),width:zt.ux.rem(2)}),sk=zt.ux.style({$nest:{"& i":{height:zt.ux.rem(2),width:zt.ux.rem(2)}}});const lk={width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),minWidth:zt.ux.rem(1.5),minHeight:zt.ux.rem(1.5)},ck=zt.ux.style(lk);function uk(){return Object.assign(Object.assign({},kx),{animation:Sx,button:Object.assign(Object.assign({},Ff()),{ggoPrimary:e=>i.createElement(Zt.z,Object.assign({},Bx(e),{variant:"primary",style:[e.verticalAlign===ni.Middle?Ax:void 0,Rx(e.horizontalAlign)]}),e.text),primary:e=>i.createElement(Zt.z,Object.assign({},Bx(e),{variant:"primary",style:[e.verticalAlign===ni.Middle?Ax:void 0,Rx(e.horizontalAlign)]}),e.text),secondary:e=>i.createElement(Zt.z,Object.assign({},Bx(e),{variant:"tertiary",style:[e.verticalAlign===ni.Middle?Ax:void 0,Rx(e.horizontalAlign)]}),e.text),toggle:e=>{const t=(e,t=1)=>`inset 0 0 0 ${t}px ${e}`,n=(e,n=1)=>`${t(e,n)}, 0 0 0 2px ${Lt.I.Text.Base.Inverse}, 0 0 0 4px ${Qt.Z.BorderBrandDefault}`;return i.createElement(Zt.z,Object.assign({},Bx(e),{variant:"secondary",size:"small",style:[e.verticalAlign===ni.Middle?Ax:void 0,Rx(e.horizontalAlign),{default:{boxShadow:t(Lt.I.Border.Base.Subdued),$nest:Object.assign(Object.assign({},(0,Ht.Rv)(n(Lt.I.Border.Base.Subdued))),{"& > div > span, & > div, & > *":{color:zt.ux.important(Lt.I.Text.Base.Default)}})},hovered:{backgroundColor:Qt.Z.ButtonBackgroundSecondaryHover,boxShadow:t(Qt.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ht.Rv)(n(Qt.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:zt.ux.important(Qt.Z.ButtonTextSecondaryHover)}})},active:{backgroundColor:Qt.Z.ButtonBackgroundSecondaryActive,boxShadow:t(Qt.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ht.Rv)(n(Qt.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:zt.ux.important(Qt.Z.ButtonTextSecondaryActive)}})},selected:{backgroundColor:"transparent",boxShadow:t(Qt.Z.BorderBrandDefault,1.5),$nest:Object.assign(Object.assign({},(0,Ht.Rv)(n(Qt.Z.BorderBrandDefault,1.5))),{"& > div > span, & > div, & > *":{color:zt.ux.important(Qt.Z.ColorBrandDefault),fontWeight:zt.ux.important("bold")}})}}]}),e.text)}}),icon:Object.assign(Object.assign({},tv),{[Kn.More]:e=>i.createElement(Vt.JO.EllipsisSmall,{className:ck})}),text:e=>kx.text(function(e){var t,n;if(e.format.includes(Jn.Bold)&&(null===(t=e.meta.label)||void 0===t?void 0:t.startsWith("insert"))&&e.textColor.startsWith("CoreBlue"))return Object.assign(Object.assign({},e),{textColor:Ln.CoreNeutral90,outlineColor:e.format.includes(Jn.Outline)?Ln.CoreNeutral90:e.outlineColor});if(e.format.includes(Jn.Bold)&&(null===(n=e.meta.label)||void 0===n?void 0:n.startsWith("delete")))return Object.assign(Object.assign({},e),{textColor:Ln.CoreNeutral50,outlineColor:e.format.includes(Jn.Outline)?Ln.CoreNeutral50:e.outlineColor});return e}(e)),dropDownMenuButton:ok,nativeExperimentalGBConsistencyUpsellFooter:kx.nativeExperimentalGBConsistencyUpsellFooter})}const dk=U.MW({item:_s.Item.eq,isFocused:U.vD,isFirst:U.vD,prevFocusedItemPosition:o.getEq(Ih.GK)}),mk=r.UI.Node.make((({state:e,notify:t})=>{const{scrolling:n}=i.useContext(Nd);return i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({item:e,isFocused:r,isFirst:s})=>i.createElement(i.Fragment,null,s?null:i.createElement(Ik,null),i.createElement("div",{className:(0,z.RN)(fk,hk)(r)},i.createElement(qh,{key:`${e.id}-${r?"expanded":"collapsed"}`,sduiRootId:e.id,content:e.content,designSystem:uk(),notify:(i,r,o)=>{const a=n.get()?r.filter((e=>"hoverStateChanged"!==e.type)):r;a.length>0&&t({kind:"longFormCardSduiNotify",sourceId:i,actions:a,scope:o,item:e})()},transitions:[],prevContent:o.none,onAnimationEnd:a.Q1,onMount:()=>{t({isFocused:r,kind:"longFormCardMount",item:e})()},longFormCardState:{viewKind:r?"focused":"collapsed"}})))))))})),pk=e=>({padding:`${zt.ux.rem(Dt.F2)} 0`,borderRadius:"inherit",$nest:{"&:hover":{backgroundColor:e?void 0:Lt.I.Background.Base.Subdued}}}),hk=zt.ux.style(pk(!1)),fk=zt.ux.style(pk(!0)),gk=zt.ux.keyframes({from:{transform:"scaleY(1)",opacity:1},to:{transform:"scaleY(0.75)",opacity:0}}),vk={animation:`${zt.ux.keyframes({from:{transform:"scaleY(0.75)",opacity:0},to:{transform:"scaleY(1)",opacity:1}})} 200ms ease-in-out`},bk={animation:`${gk} 200ms ease-in-out`,position:"absolute",width:"100%"},yk=zt.ux.style(Object.assign(Object.assign({},vk),{transformOrigin:"bottom"})),xk=zt.ux.style(Object.assign(Object.assign({},vk),{transformOrigin:"top"})),kk=zt.ux.style(Object.assign(Object.assign({},bk),{transformOrigin:"bottom"})),Sk=zt.ux.style(Object.assign(Object.assign({},bk),{transformOrigin:"top"})),wk=r.UI.Transition.make({collapseForward:kk,collapseBackward:Sk},{expandForward:yk,expandBackward:xk}),Ck=zt.ux.style({position:"relative"}),Ek=U.MW({isFocused:U.vD,itemId:U.yv}),_k=r.UI.Knot.make(r.UI.Grid.make((({slots:e,view:t})=>{const n=i.useContext(id.u.Context),{ref:r,onMount:o}=rd.P.useElWatcher(),a=i.useMemo((()=>t("isFocused").pipe(jt.G(),_.h((([e,t])=>e&&!t)),Ol.h(null))),[]),{scrollableContainer:s}=i.useContext(Nd),l=i.useMemo((()=>t("isFocused").pipe(dt.O(!1),jt.G(),_.h((([e,t])=>!e&&t)),c.w((()=>r.pipe(M.oA,R.q(1)))),At.M(s.pipe(M.oA)),Ah.g(200),T.b((([e,t])=>{e.offsetTop<t.scrollTop?t.scroll({top:e.offsetTop,left:0,behavior:"smooth"}):e.offsetTop+e.offsetHeight>t.scrollTop+t.offsetHeight?t.scroll({top:e.offsetTop-t.offsetHeight/2,left:0,behavior:"smooth"}):e.scrollIntoView({behavior:"smooth",block:"nearest"})})))),[r]);return rd.P.useSubscriptionTo(l),i.createElement(Gt.F.Fragment,null,vt.aj([n,t("itemId")]).pipe(I.U((([t,n])=>i.createElement(Jh,{visibleOffset:500,defaultHeight:4*t,resetHeightToDefault:a,"data-testid":n,className:Ck,ref:o},e.content)))))})),{content:r.UI.Animated.make(wk,mk)}),Ik=()=>i.createElement("div",{role:"separator",className:Ak}),Ak=zt.ux.style({margin:`0 ${zt.ux.rem(Dt.mh)}`,borderBottom:`1px solid ${Lt.I.Border.Base.Subdued}`}),Ok=r.UI.List.make(b.bw,_k),Rk=()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",clipPath:"url(#EmptyH_a)"},i.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M62.4 11.2H23.24C22.16 28.28 3.64 40.4 7.8 62.4h39.16C43.6 35.2 61.32 28.28 62.4 11.2Z"}),i.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M59.2 8H20.04C18.96 25.08.44 37.2 4.6 59.2h39.16C40.8 32.8 58.13 25.08 59.2 8Z"}),i.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"M56 4.8H17.4C16.35 21.88-1.91 34 2.2 56H40C36.67 34 54.93 21.88 56 4.8Z"}),i.createElement("path",{d:"M24 13.6h20M20 22.4h20M14.4 32h20M9.6 42.8H24"}),i.createElement("path",{fill:"#F8E485",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l16.3 28.24-7.43 4.3L.55 10.11Z"}),i.createElement("path",{fill:"#79A8F2",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l3.21 5.58-7.43 4.29-3.21-5.57Z"}),i.createElement("path",{fill:"#F8C6DA",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l.64 1.12-7.43 4.29-.64-1.11Z"}),i.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"m16.85 38.35 7.43-4.29-.07 8.47-7.36-4.18Z"}),i.createElement("path",{fill:"#0E101A",strokeMiterlimit:"10",d:"m20.2 39.88 3.72-2.14.3 4.79-4.01-2.65Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyH_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Bk=r.UI.Node.make((({notify:e})=>i.createElement(Um,{"aria-busy":"true","aria-live":"polite","data-testid":"plagiarism-empty",style:Fk,mount:e({kind:"plagiarismFeedSuccessMountAction"})},i.createElement(Gt.F.div,{className:Tk},i.createElement(oh,{style:Mk},"No plagiarism detected"),i.createElement("p",{className:Pk},"We compared your document to billions of web pages and academic papers and found no duplicate text."),i.createElement(Zt.z,{variant:"secondary",style:jk,onClick:e({kind:"seeAllSuggestions"})},"See all suggestions")),i.createElement(Gt.F.div,{className:Nk},i.createElement(Rk,null))))),Mk={whiteSpace:"normal"},Fk={padding:`${zt.ux.rem(Dt.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${zt.ux.rem(Dt.mh)}`,height:"100%",boxSizing:"border-box"},Tk=zt.ux.style({textAlign:"center",padding:`${zt.ux.rem(Dt.mh)} ${zt.ux.rem(Dt.mh)} 0 ${zt.ux.rem(Dt.mh)}`}),Pk=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),Nk=zt.ux.style({width:zt.ux.rem(6),height:zt.ux.rem(6),minWidth:zt.ux.rem(6),minHeight:zt.ux.rem(6)}),jk={default:{marginTop:zt.ux.rem(Dt.x),alignSelf:"flex-start"}},Uk=zt.ux.keyframes({"0%":{transform:"translateX(-300px)"},"85%, 100%":{transform:"translateX(calc(100%))"}}),zk=zt.ux.style({overflow:"hidden",position:"absolute",top:0,right:0,bottom:0,left:0}),Dk=e=>{var t,n,i;const r=zt.ux.color(null!==(t=e.overlayGradientCenterColor)&&void 0!==t?t:"rgba(0, 0, 0, 1)"),o=zt.ux.color(null!==(n=e.overlayGradientEndColor)&&void 0!==n?n:"rgba(255, 255, 255, 0)"),a=`rgba(${r.red()}, ${r.green()}, ${r.blue()}, ${r.alpha()})`,s=`rgba(${o.red()}, ${o.green()}, ${o.blue()}, ${o.alpha()})`;return zt.ux.style({width:"100%",height:"100%",pointerEvents:"none",mixBlendMode:null!==(i=e.overlayBlendMode)&&void 0!==i?i:"overlay",background:`linear-gradient(90deg,${s} 0px,${a} 120px,${a} 180px,${s} 300px)`,backgroundRepeat:"no-repeat",animationDelay:"300ms",animationDuration:"1.5s",animationName:Uk,animationTimingFunction:"linear",animationIterationCount:"infinite"})},Lk=e=>i.createElement("div",{className:zk},i.createElement("div",{className:Dk(e)})),Gk=()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyC_a)"},i.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m29.48 18.98-3.27 21.53-22.38-9.64L18.9 14.03a6.1 6.1 0 0 1 10.58 4.95Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 51.78c7.04 0 12.75-5.68 12.75-12.69 0-7-5.7-12.69-12.75-12.69A12.72 12.72 0 0 0 .8 39.09c0 7 5.7 12.7 12.74 12.7Z"}),i.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),i.createElement("path",{stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),i.createElement("path",{fill:"#DDEFF5",d:"M20.7 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56L20.7 45.37Z"}),i.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),i.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m34.52 18.98 3.27 21.53 22.38-9.64L45.1 14.03a6.1 6.1 0 0 0-10.58 4.95Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 51.78c7.03 0 12.74-5.68 12.74-12.69 0-7-5.7-12.69-12.74-12.69A12.72 12.72 0 0 0 37.7 39.09c0 7 5.7 12.7 12.75 12.7Z"}),i.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),i.createElement("path",{stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),i.createElement("path",{fill:"#DDEFF5",d:"M57.61 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56l10.26 15.26Z"}),i.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),i.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M36.4 31.35h-8.8l1.25-8.24a3.17 3.17 0 0 1 3.15-2.7 3.2 3.2 0 0 1 3.15 2.7l1.25 8.24Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 36.18a4.57 4.57 0 1 0 .02-9.13 4.57 4.57 0 0 0-.02 9.13Z"}),i.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 33.22a1.6 1.6 0 1 0 0-3.2 1.6 1.6 0 0 0 0 3.2Z"}),i.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M61.64 2.7c-2.8.62-9.61 2.33-7.74 11.68 2.8.3 11.21-2.34 7.74-11.69Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M56.7 10.64 63.2.4"}),i.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M6.44 10.94c-1.9 5.36-.2 10.75 12.3 9.39 0-2.26-3.44-10.28-12.3-9.39Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M15.3 17.14 2.9 8.72"}),i.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M36.58 61.7c-.65-4.37-3.42-8.63-12.94-9.48.38 4.98 2.53 12.23 12.94 9.48Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m27.5 55.34 12.16 8.22"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyC_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Zk=r.UI.Node.make((()=>i.createElement(Um,{"aria-busy":"true","aria-live":"polite",style:Hk,"data-testid":"plagiarism-loading"},i.createElement("div",{className:Jk},i.createElement("div",{className:Xk},i.createElement(oh,{style:Vk},"Checking for plagiarism..."),i.createElement("p",{className:eS},"Were comparing your document to billions of web pages and academic papers.")),i.createElement("div",{className:tS},i.createElement(Gk,null))),i.createElement("div",{className:$k},i.createElement("div",{className:Kk},i.createElement(Lk,null),i.createElement("div",{className:Wk}),i.createElement("div",{className:qk}),i.createElement("div",{className:Qk})),i.createElement("div",{className:Yk}),i.createElement("div",{className:Kk},i.createElement(Lk,null),i.createElement("div",{className:Wk}),i.createElement("div",{className:qk}),i.createElement("div",{className:Qk})),i.createElement("div",{className:Yk}),i.createElement("div",{className:Kk},i.createElement(Lk,null),i.createElement("div",{className:Wk}),i.createElement("div",{className:qk}),i.createElement("div",{className:Qk})),i.createElement("div",{className:Yk}),i.createElement("div",{className:Kk},i.createElement(Lk,null),i.createElement("div",{className:Wk}),i.createElement("div",{className:qk}),i.createElement("div",{className:Qk})))))),Hk={padding:0},Vk={whiteSpace:"normal"},$k=zt.ux.style({display:"flex",flexDirection:"column",margin:zt.ux.rem(1)}),Kk=zt.ux.style({display:"flex",alignItems:"center",position:"relative",height:zt.ux.rem(2.25)}),Wk=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(.5),borderRadius:"50%",background:Du.BlueGray5,marginRight:zt.ux.rem(1.25)}),qk=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(3.875),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5,marginRight:zt.ux.rem(Dt.mh)}),Qk=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(7.875),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),Yk=zt.ux.style({margin:`${zt.ux.rem(.5)} ${zt.ux.rem(1)}`,borderBottom:`1px solid ${Lt.I.Border.Base.Subdued}`}),Jk=zt.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:zt.ux.rem(Dt.mh)}),Xk=zt.ux.style({display:"flex",flexDirection:"column",marginRight:zt.ux.rem(2),justifyContent:"center"}),eS=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:400}),tS=zt.ux.style({width:zt.ux.rem(4),height:zt.ux.rem(4),minWidth:zt.ux.rem(4),minHeight:zt.ux.rem(4)}),nS=()=>i.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"32",cy:"32.5",r:"32",fill:"#F9EA9E"}),i.createElement("path",{d:"M48.3961 29.2909L39.2608 19.4111C38.9744 19.1247 38.6308 18.9529 38.2299 18.9529H26.775H15.3487C14.9191 18.9529 14.5182 19.1533 14.2605 19.497L6.32793 29.3482C5.8411 29.9496 5.8411 30.8946 6.35657 31.4674L25.744 53.8617C25.8586 54.0049 26.0304 54.1195 26.1736 54.2054C26.2022 54.2054 26.2022 54.234 26.2308 54.234C26.2881 54.2627 26.374 54.2913 26.4313 54.3199C26.4599 54.3199 26.4599 54.3486 26.4886 54.3486C26.5459 54.3772 26.6318 54.3772 26.689 54.3772C26.7177 54.3772 26.7463 54.3772 26.775 54.3772C26.8609 54.3772 26.9181 54.3772 27.0041 54.3486C27.0327 54.3486 27.0327 54.3486 27.0613 54.3486C27.1186 54.3486 27.2045 54.3199 27.2618 54.2913C27.2904 54.2913 27.3191 54.2913 27.3477 54.2627C27.405 54.234 27.4336 54.2054 27.4909 54.1767C27.5195 54.1481 27.5768 54.1481 27.6054 54.1195L27.6341 54.0908C27.6913 54.0336 27.7773 53.9763 27.8345 53.919L48.3961 31.5819C48.9688 30.9233 48.9688 29.8923 48.3961 29.2909Z",fill:"#303A68"}),i.createElement("path",{d:"M54.4671 27.4294L45.3318 17.5495C45.0454 17.2631 44.7018 17.0913 44.3008 17.0913H32.8459H21.4483C21.0187 17.0913 20.6178 17.2918 20.3601 17.6354L12.4275 27.4866C11.9407 28.088 11.9407 29.0331 12.4562 29.6058L31.8436 52.0002C32.13 52.3152 32.5023 52.487 32.8746 52.487C33.2469 52.487 33.6478 52.3438 33.9341 52.0288L54.4957 29.6917C55.0398 29.0617 55.0398 28.0594 54.4671 27.4294Z",fill:"url(#paint0_linear_4597_20798)"}),i.createElement("path",{d:"M45.3318 17.5495C45.0454 17.2631 44.7018 17.0913 44.3008 17.0913H32.8459H21.4483C21.0187 17.0913 20.6178 17.2918 20.3601 17.6354L12.4275 27.4866C11.9407 28.088 11.9407 29.0331 12.4562 29.6058L31.8436 52.0002C32.4164 52.6588 33.3614 52.6588 33.9341 52.0288L54.4957 29.6917C55.0685 29.0617 55.0685 28.0594 54.4957 27.458L45.3318 17.5495Z",stroke:"#303A68",strokeMiterlimit:"10"}),i.createElement("path",{d:"M28.6648 17.0913L24.3405 27.9735C24.1974 28.3458 24.1687 28.7753 24.3119 29.1762L32.8745 52.487",stroke:"#303A68",strokeMiterlimit:"10"}),i.createElement("path",{d:"M37.0554 17.0913L41.3796 27.9735C41.5228 28.3458 41.5514 28.7753 41.4083 29.1762L32.8457 52.487",stroke:"#303A68",strokeMiterlimit:"10"}),i.createElement("path",{d:"M54.8966 28.5461H12.0552",stroke:"#303A68",strokeMiterlimit:"10"}),i.createElement("path",{d:"M45.217 19.4683L44.8447 18.1796C44.8161 18.0937 44.7588 18.0364 44.6729 18.0078L43.3842 17.6355C43.1551 17.5782 43.1551 17.2346 43.3842 17.1487L44.6729 16.7764C44.7588 16.7477 44.8161 16.6905 44.8447 16.6045L45.217 15.3159C45.2743 15.0868 45.6179 15.0868 45.7039 15.3159L46.0761 16.6045C46.1048 16.6905 46.1621 16.7477 46.248 16.7764L47.5366 17.1487C47.7657 17.2059 47.7657 17.5496 47.5366 17.6355L46.248 18.0078C46.1621 18.0364 46.1048 18.0937 46.0761 18.1796L45.7039 19.4683C45.6179 19.726 45.2743 19.726 45.217 19.4683Z",fill:"white"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4597_20798",x1:"20.8994",y1:"41.0591",x2:"44.8759",y2:"17.0825",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#979DFF"}),i.createElement("stop",{offset:"0.9971",stopColor:"#FFCEDD"})))),iS=e=>i.createElement(Vt.a1,{className:e.className,viewBox:"0 0 20 20",width:20,height:20},i.createElement("path",{d:"M2.5 8.06034L5.65789 3.75H8.81579M2.5 8.06034L10 16.25M2.5 8.06034H6.84211M17.5 8.06034L14.3421 3.75H11.1842M17.5 8.06034L10 16.25M17.5 8.06034H12.7632M10 16.25L6.84211 8.06034M10 16.25L12.7632 8.06034M6.84211 8.06034H12.7632M6.84211 8.06034L8.81579 3.75M12.7632 8.06034L11.1842 3.75M11.1842 3.75H8.81579",stroke:"#794100",strokeLinecap:"round",strokeLinejoin:"round"}));var rS=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const oS=e=>{var{children:t,style:n}=e,r=rS(e,["children","style"]);return i.createElement(Zt.z,Object.assign({style:Object.assign(Object.assign({},n),{default:{backgroundColor:_f.Il.Background.Premium.Default,color:_f.Il.Text.Premium.Default},active:{backgroundColor:jy.sj,color:_f.Il.Text.Premium.Default},hovered:{backgroundColor:jy.sj,color:_f.Il.Text.Premium.Default}})},r),i.createElement(iS,null),null!=t?t:"Go Premium")},aS=r.UI.Node.make((({notify:e})=>{const{onMount:t}=(0,sd.F)(T.b((()=>e({kind:"plagiarismUphookShow"})())));return i.createElement(Um,{"aria-busy":"true","aria-live":"polite","data-testid":"plagiarism-uphook",style:sS},i.createElement(nS,null),i.createElement("div",{className:lS},i.createElement(oh,{style:cS},"Plagiarism"),i.createElement("p",{className:uS},"Grammarly compares billions of web pages to your document and alerts you to passages that may need citations."),i.createElement("div",{className:dS},i.createElement(oS,{onClick:e({kind:"plagiarismUphookClick"}),mount:t}),i.createElement(Zt.z,{variant:"tertiary",onClick:e({kind:"plagiarismUphookDismiss"})},"Maybe later"))))})),sS={padding:zt.ux.rem(Pv.mh),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:zt.ux.rem(Pv.sD),height:"100%",boxSizing:"border-box"},lS=zt.ux.style({textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingLeft:zt.ux.rem(Pv.mh),paddingRight:zt.ux.rem(Pv.mh),gap:zt.ux.rem(Pv.x)}),cS={whiteSpace:"normal",padding:0},uS=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),dS=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:zt.ux.rem(.5)}),mS=e=>i.createElement(Vt.a1,Object.assign({width:"36",height:"36",viewBox:"0 0 36 36"},e),i.createElement("rect",{width:"36",height:"36",rx:"18",fill:"#09646C",stroke:"none"}),i.createElement("path",{d:"M19.4062 21.6132C21.1214 21.2406 22.0558 20.2882 22.5 18.8303C20.636 18.8303 19.125 17.3433 19.125 15.5089C19.125 13.6745 20.636 12.1875 22.5 12.1875C24.364 12.1875 25.875 13.5803 25.875 15.5089C25.875 17.4375 25.5 22.3125 19.4062 23.8125V21.6132Z",fill:"white",stroke:"none"}),i.createElement("path",{d:"M10.4062 21.6132C12.1214 21.2406 13.0558 20.2882 13.5 18.8303C11.636 18.8303 10.125 17.3433 10.125 15.5089C10.125 13.6745 11.636 12.1875 13.5 12.1875C15.364 12.1875 16.875 13.5803 16.875 15.5089C16.875 17.4375 16.5 22.3125 10.4062 23.8125V21.6132Z",fill:"white",stroke:"none"}));function pS(e){if(Number.isFinite(e)){if(0===e)return 100;if(1===e)return 0;{const t=e<.01?.01:e>.99?.99:e;return Math.round(100*(1-t))}}return 0}const hS=r.UI.Node.make((({view:e})=>i.createElement("footer",{className:fS},i.createElement(mS,null),i.createElement(Gt.F.span,{className:gS},i.createElement(Gt.F.b,null,e("originality").pipe(I.U(pS)),"% of your document")," ","matches text",e("sourceCount").pipe(I.U(o.fold((()=>" "),(e=>` in ${e} sources `)))),"on the web or in academic databases.")))),fS=zt.ux.style({padding:`${zt.ux.rem(1.0625)} ${zt.ux.rem(1.1875)}`,backgroundColor:Qt.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`,boxSizing:"border-box",display:"flex",alignItems:"center",flexDirection:"row",gap:zt.ux.rem(Dt.mh)}),gS=zt.ux.style({fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),color:Lt.I.Text.Base.Subdued}),vS=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:r}=(0,sd.F)((0,a.ls)(T.b(n({kind:"plagiarismFeedMount"})),od.x(Wc.notifyFeedUnmount)));return i.createElement(Um,{"data-testid":"plagiarism-non-empty",style:kS,mount:r,"aria-live":"polite"},i.createElement(Gt.F.div,{className:wS},i.createElement(oh,{style:SS},"Plagiarism detected"),t("citationDropdown").pipe(I.U(o.fold(a.gn,(e=>i.createElement(Eh,{className:CS,menuClassName:ES,placeholder:e.placeholder,options:e.select.items,optionsGroupLabel:"Citation style",selection:e.select.items.find((t=>t.id===e.selectedItem)),onSelectionChange:e=>n({kind:"sduiCitationDropdownSelect",actions:e.onClickActions,sourceId:e.id})(),label:e=>e.label,renderOption:e=>e.label})))))),i.createElement(jd,{className:xS},e.cardList),e.footer)})),bS=r.UI.Knot.make(vS,{cardList:Ok,footer:r.UI.Union.asOption(hS)}),yS=r.UI.Union.make("kind",{loadingState:Zk,emptyState:Bk,nonEmptyState:bS,uphookState:aS}),xS=zt.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`}}}),kS={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},SS={whiteSpace:"normal",padding:0},wS=zt.ux.style({display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`,paddingTop:zt.ux.rem(Dt.mh)}),CS=zt.ux.style({width:"min-content",height:zt.ux.rem(1.5),$nest:{"& > button":{padding:`${zt.ux.rem(3*Dt.W9)} ${zt.ux.rem(Dt.F2)} ${zt.ux.rem(3*Dt.W9)} ${zt.ux.rem(Dt.x)}`}}}),ES=zt.ux.style({width:zt.ux.rem(9.75)});var _S=n(51869),IS=n(29972);const AS=i.forwardRef((function(e,t){const{as:n,className:r,variant:o="heading-medium",color:a,align:s,margin:l,marginLeft:c,marginRight:u,marginTop:d,marginBottom:m,style:p,...h}=e,f={...p,...null!=a&&{color:`var(--color-text-${a})`},...null!=s&&{textAlign:s},...(0,IS.A)({margin:l,marginLeft:c,marginRight:u,marginTop:d,marginBottom:m})};return i.createElement(n,{ref:t,className:(0,_S.W)("gds-typography","gds-"+(o.startsWith("heading")?"heading":"text"),`gds-${o}`,r),style:f,...h})}));var OS=n(40938);const RS=zt.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"}),BS=zt.ux.style({position:"relative",height:zt.ux.rem(1),borderRadius:zt.ux.rem(.25),overflow:"hidden"}),MS=e=>`linear-gradient(90deg, ${e[0]} 0%, ${e[1]} 100%)`,FS=({lineColorGradient:e=["#F5F5F5","#D9D9D9"],gapInRem:t=.6,lineWidthPercents:n=[95,85,75],overlayGradient:r=[]})=>{const o={background:MS(e)},a={gap:zt.ux.rem(t)},s=i.createElement(Lk,{overlayBlendMode:"soft-light",overlayGradientCenterColor:r[0],overlayGradientEndColor:r[1]});return i.createElement("div",{className:RS,style:a},i.createElement("div",{className:BS,style:Object.assign(Object.assign({},o),{width:zt.ux.percent(n[0])})},s),i.createElement("div",{className:BS,style:Object.assign(Object.assign({},o),{width:zt.ux.percent(n[1])})},s),i.createElement("div",{className:BS,style:Object.assign(Object.assign({},o),{width:zt.ux.percent(n[2])})},s))},TS=zt.ux.style({display:"flex",flexDirection:"column",flex:1,gap:zt.ux.rem(.125),borderRadius:`${zt.ux.rem(2)} ${zt.ux.rem(2)} ${zt.ux.rem(2)} 0`,padding:`${zt.ux.rem(Dt.w9)}`,background:"linear-gradient(265.79deg, #014C43 0%, #062824 101.29%)"}),PS=({state:e})=>i.createElement(Gt.F.Fragment,null,e.pipe(I.U((e=>Xc.isLoadingEvaluation(e.checking)?i.createElement("div",{className:TS,key:"evaluationResult"},i.createElement(AS,{variant:"heading-xsmall",as:"h4",color:"base-inverse"},"Reviewing your text"),i.createElement(FS,{lineColorGradient:["rgba(55, 85,\t81)","rgba(47, 102,\t96)"],overlayGradient:["rgba(0, 0, 0, 0.15)","rgba(255, 255, 255, 0)"],gapInRem:.375,lineWidthPercents:[100,98,96]})):(0,a.zG)(e.evaluationResult,(0,o.map)((({title:e,subTitle:t})=>i.createElement("div",{className:TS,key:"evaluationResult"},i.createElement(AS,{variant:"heading-xsmall",as:"h4",color:"base-inverse"},e),i.createElement(OS.x,{variant:"text-small",as:"span",color:"base-inverse"},t)))),o.toNullable))))),NS=()=>i.createElement("svg",{width:"36",height:"37",viewBox:"0 0 36 37",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{filter:"url(#filter0_i_3099_29594)"},i.createElement("path",{d:"M0 18.8572C0 8.91605 8.05888 0.857178 18 0.857178C27.9411 0.857178 36 8.91605 36 18.8572C36 28.7983 27.9411 36.8572 18 36.8572H0V18.8572Z",fill:"#FFFFFF",className:US}),i.createElement("path",{opacity:"0.5",d:"M11.9998 21.1906L20.3331 12.8572L18.6665 19.5239H21.9998L13.6665 27.8572L15.3331 21.1906H11.9998Z",fill:"black",fillOpacity:"0.5"})),i.createElement("defs",null,i.createElement("filter",{id:"filter0_i_3099_29594",x:"0",y:"0.857178",width:"37.5",height:"39",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:"1.5",dy:"3"}),i.createElement("feGaussianBlur",{stdDeviation:"1.5"}),i.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.571383 0 0 0 0 0.684049 0 0 0 0 0 0 0 0 0.15 0"}),i.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3099_29594"})))),jS=zt.ux.keyframes({"0%":{fill:"#00E0AC"},"33%":{fill:"#D5FF00"},"66%":{fill:"#00E6E6"},"100%":{fill:"#00E0AC"}}),US=zt.ux.style({animation:`${jS} 15s infinite`}),zS=r.UI.Node.make((({state:e})=>i.createElement(Um,{"aria-busy":"true","aria-live":"polite","data-testid":"writing-expert-loading",style:LS},i.createElement(QS,null,i.createElement(PS,{state:e}),e.pipe(I.U((e=>Xc.isLoadingSuggestions(e.checking)?i.createElement("div",{className:GS,key:"headerLoading"},i.createElement(AS,{variant:"heading-xsmall",as:"h4",color:"base-default"},"Coming up with suggestions"),i.createElement(NS,null)):null)))),i.createElement(Gt.F.div,{className:ZS,style:{visibility:e.pipe(I.U((({checking:e})=>Xc.isLoadingSuggestions(e)?"visible":"hidden")))}},[1,2,3,4].map((e=>i.createElement("div",{key:e,className:HS},i.createElement("div",{className:DS}),i.createElement("div",{style:{flex:1}},i.createElement(FS,null))))))))),DS=zt.ux.style({height:zt.ux.rem(Dt.mh),width:zt.ux.rem(Dt.mh),content:'" "',borderRadius:"50%",background:Du.NeutralGray0}),LS={padding:0,paddingBottom:zt.ux.rem(Dt.mh)},GS=zt.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),ZS=zt.ux.style({padding:`0 ${zt.ux.rem(1)}`,display:"flex",flexDirection:"column",gap:zt.ux.rem(1.75)}),HS=zt.ux.style({display:"flex",gap:zt.ux.rem(Dt.x),flexDirection:"row"}),VS=r.UI.Node.make((({state:e,notify:t})=>i.createElement(Um,{"aria-busy":"true","aria-live":"polite","data-testid":"writing-expert-empty",style:KS},i.createElement(Gt.F.div,{className:$S},e.pipe(I.U((e=>e.sduiContent)),I.U(o.fold((()=>i.createElement("div",null,"loading....")),(e=>i.createElement("div",{className:$S},i.createElement(qh,{key:`writing-expert-feed-state-${e.id}`,sduiRootId:e.id,content:e.content.content,designSystem:uk(),notify:(n,i,r)=>{t({kind:"longFormCardSduiNotify",sourceId:n,actions:i,scope:r,item:e})()},transitions:[],prevContent:o.none,onAnimationEnd:z.Q1,onMount:z.Q1})))))))))),$S=zt.ux.style({textAlign:"center",padding:`${zt.ux.rem(Pv.mh)} ${zt.ux.rem(Pv.mh)} 0 ${zt.ux.rem(Pv.mh)}`}),KS={padding:`${zt.ux.rem(Pv.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${zt.ux.rem(Pv.mh)}`,height:"100%",boxSizing:"border-box"},WS=r.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{onMount:r}=(0,sd.F)((0,a.ls)(T.b(n({kind:"writingExpertFeedMount"})),od.x(Wc.notifyFeedUnmount)));return i.createElement(Um,{"data-testid":"writing-expert-non-empty",style:JS,mount:r,"aria-live":"polite"},i.createElement(QS,null,i.createElement(PS,{state:t.pipe(I.U((e=>Object.assign(Object.assign({},e),{checking:"idle"}))))})),i.createElement(jd,{className:XS},e.cardList))})),qS=r.UI.Knot.make(WS,{cardList:Ok}),QS=({children:e})=>i.createElement(Gt.F.div,{style:{display:"flex",flexDirection:"column",padding:zt.ux.rem(Dt.mh),gap:zt.ux.rem(Dt.qp)}},e),YS=r.UI.Union.make("kind",{loadingState:zS,emptyOrErrorState:VS,nonEmptyState:qS}),JS={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},XS=zt.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`}}}),ew=r.UI.Node.make((({view:e})=>i.createElement(Um,{"data-testid":"settings"},e("content")))),tw=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2 8.444 5.692 12 14 4"})))),nw=r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:aw},i.createElement("h2",{className:sw},"Looks like you got signed out"),e.content,e.signIn))),iw=r.UI.Union.make("kind",{free:r.UI.Node.make((()=>i.createElement("p",{className:lw},"Sign back in to use personalized features and generative AI."))),premium:r.UI.Node.make((()=>i.createElement(i.Fragment,null,i.createElement("p",{className:lw},"Youre missing out on your Premium features. Sign back in to:"),i.createElement("ul",{className:cw},i.createElement("li",null,i.createElement(tw,{className:uw}),"Rewrite full sentences"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Strike the right tone"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Use generative AI"))))),business:r.UI.Node.make((()=>i.createElement(i.Fragment,null,i.createElement("p",{className:lw},"Youre missing out on your Grammarly Business features. Sign back in to:"),i.createElement("ul",{className:cw},i.createElement("li",null,i.createElement(tw,{className:uw}),"Rewrite full sentences"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Strike the right tone"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Access time-saving snippets"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Maintain your brand voice"),i.createElement("li",null,i.createElement(tw,{className:uw}),"Use generative AI")))))}),rw=r.UI.Union.asOption(r.UI.Node.make((({notify:e})=>i.createElement(Zt.z,{name:"signBackIn",onClick:e({kind:ht.i.Kind.signInButtonClick})},"Sign in")))),ow=r.UI.Knot.make(nw,{content:iw,signIn:rw}),aw=zt.ux.style({padding:zt.ux.rem(Dt.mh)}),sw=zt.ux.style({fontSize:zt.ux.rem(1),lineHeight:"1.5em",margin:0}),lw=zt.ux.style({fontSize:zt.ux.rem(.875),lineHeight:"1.5em",margin:`0 0 ${zt.ux.rem(Dt.mh)} 0`,color:Lt.I.Text.Base.Subdued}),cw=zt.ux.style({fontSize:zt.ux.rem(.875),margin:`${zt.ux.rem(Dt.mh)} 0`,paddingInlineStart:zt.ux.rem(2),listStyle:"none",position:"relative",$nest:{"& > li":{margin:`${zt.ux.rem(Dt.x)} 0`}}}),uw=zt.ux.style({width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),position:"absolute",left:0,marginTop:zt.ux.rem(-.25)});var dw=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const mw=zt.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),pw=zt.ux.style({animation:`${mw} 1s linear infinite`,width:zt.ux.rem(1),height:zt.ux.rem(1),minWidth:zt.ux.rem(1),minHeight:zt.ux.rem(1)}),hw=e=>{const{className:t}=e,n=dw(e,["className"]);return i.createElement(Vt.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},(0,Wd.Sh)(pw,t),n),i.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),i.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"}))},fw=e=>i.createElement(Vt.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"})),gw={padding:0,height:zt.ux.rem(14.625),overflow:"hidden",boxSizing:"border-box",maxHeight:"inherit",display:"flex",justifyContent:"center",alignItems:"center",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},vw={height:"100%",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"},bw=zt.ux.style(Object.assign(Object.assign({},vw),{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),yw=zt.ux.style(Object.assign(Object.assign({},vw),{border:"none",margin:"0",width:"100%"})),xw=zt.ux.style({color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.75),fontFamily:"Inter",fontWeight:700,lineHeight:zt.ux.rem(1.125)}),kw=zt.ux.style({color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.75),fontFamily:"Inter",lineHeight:zt.ux.rem(1.125)}),Sw=zt.ux.style({visibility:"hidden",position:"absolute"}),ww=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{notifyUnmount:r}=i.useContext(ld),{ref:o,onMount:s}=(0,sd.F)((0,a.ls)(T.b((e=>n({kind:ht.i.Kind.mount,name:bt.e.skill,element:e})())),od.x((()=>r({kind:ht.i.Kind.unmount,name:bt.e.skill}))))),l=i.useMemo((()=>t("status").pipe(jt.G(),_.h((([e,t])=>"loading"===e&&"ready"===t)),c.w((()=>o.pipe(M.oA,T.b((e=>e.focus()))))))),[o]);return rd.P.useSubscriptionTo(l),i.createElement(Um,{"data-testid":"skill",style:t("size").pipe(I.U((e=>Object.assign(Object.assign({},gw),{height:e.height}))))},e.pipe(I.U((({status:e,srcUrl:t})=>"loading"===e||"ready"===e?i.createElement(i.Fragment,null,"loading"===e&&i.createElement("div",{className:bw},i.createElement(hw,null),i.createElement("span",{className:kw},"Loading...")),i.createElement("iframe",{"aria-busy":"loading"===e,key:t,src:t,ref:s,allow:`clipboard-write ${t}`,className:zt.ux.joinClasses([yw,"loading"===e?Sw:void 0])})):"error"===e?i.createElement("div",{className:bw},i.createElement(fw,null),i.createElement("span",{className:xw},"Something went wrong"),i.createElement("span",{className:kw},"Please try again.")):(0,m.L0)(e)))))})),Cw=r.UI.Union.asOption(ww),Ew=()=>i.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none","aria-hidden":!0,focusable:!1},i.createElement("g",{filter:"url(#filter0_d_8024_21772)"},i.createElement("path",{d:"M55.8852 31.8162C55.8852 45.1944 45.0401 56.0395 31.6619 56.0395C18.2837 56.0395 7.43851 45.1944 7.43851 31.8162C7.43851 18.438 18.2837 7.59281 31.6619 7.59281C45.0401 7.59281 55.8852 18.438 55.8852 31.8162Z",fill:"#F8E485",stroke:"#0E101A",strokeWidth:"0.923895"}),i.createElement("path",{d:"M21.7978 23.7215C22.8908 23.928 23.9428 23.2174 24.1473 22.1344C24.3519 21.0514 23.6317 20.0061 22.5387 19.7996C21.4456 19.5932 20.3937 20.3037 20.1892 21.3867C19.9846 22.4697 20.7048 23.515 21.7978 23.7215Z",fill:"#0E101A"}),i.createElement("path",{d:"M41.4843 27.4402C42.5774 27.6467 43.6293 26.9362 43.8339 25.8532C44.0384 24.7702 43.3182 23.7249 42.2252 23.5184C41.1322 23.3119 40.0803 24.0225 39.8757 25.1055C39.6711 26.1885 40.3913 27.2338 41.4843 27.4402Z",fill:"#0E101A"}),i.createElement("path",{d:"M24.2816 34.395C24.2816 34.395 29.559 33.4257 32.7662 37.1937L24.2816 34.395Z",fill:"#F8E485"}),i.createElement("path",{d:"M24.2816 34.395C24.2816 34.395 29.559 33.4257 32.7662 37.1937",stroke:"black",strokeWidth:"0.923895",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("mask",{id:"path-6-outside-1_8024_21772",maskUnits:"userSpaceOnUse",x:"8.96191",y:"33.5461",width:"27",height:"25",fill:"black"},i.createElement("rect",{fill:"white",x:"8.96191",y:"33.5461",width:"27",height:"25"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6191 56.9757L22.7965 55.6378C14.6478 59.7692 7.64857 53.1582 10.6855 43.2215C11.3435 41.0674 11.0422 39.168 10.8093 37.6995C10.5628 36.1455 10.3928 35.0741 11.5172 34.6942C14.0431 33.8393 15.4863 36.7255 15.2158 42.3628C18.0521 41.5103 19.8629 40.6726 21.2853 40.0146C22.7461 39.3389 23.7971 38.8527 25.1283 38.7347C26.0211 38.6556 27.1853 39.1115 28.5046 39.6282C29.906 40.1771 31.4825 40.7945 33.0945 40.912C35.6349 41.0955 34.3174 45.1814 31.2708 44.3961C30.8221 44.2809 30.3668 44.0484 29.8691 43.7942C29.0231 43.3622 28.0546 42.8677 26.7878 42.7801C29.4925 44.3034 30.3464 45.5253 28.8772 48.4425C28.8772 48.4425 28.1305 47.4427 26.0982 46.98C29.0752 48.9892 29.2384 50.4874 27.7364 52.796C27.2302 52.3594 26.1822 51.7586 24.7362 51.689C29.8615 53.7446 26.4662 59.3702 21.6191 56.9757Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6191 56.9757L22.7965 55.6378C14.6478 59.7692 7.64857 53.1582 10.6855 43.2215C11.3435 41.0674 11.0422 39.168 10.8093 37.6995C10.5628 36.1455 10.3928 35.0741 11.5172 34.6942C14.0431 33.8393 15.4863 36.7255 15.2158 42.3628C18.0521 41.5103 19.8629 40.6726 21.2853 40.0146C22.7461 39.3389 23.7971 38.8527 25.1283 38.7347C26.0211 38.6556 27.1853 39.1115 28.5046 39.6282C29.906 40.1771 31.4825 40.7945 33.0945 40.912C35.6349 41.0955 34.3174 45.1814 31.2708 44.3961C30.8221 44.2809 30.3668 44.0484 29.8691 43.7942C29.0231 43.3622 28.0546 42.8677 26.7878 42.7801C29.4925 44.3034 30.3464 45.5253 28.8772 48.4425C28.8772 48.4425 28.1305 47.4427 26.0982 46.98C29.0752 48.9892 29.2384 50.4874 27.7364 52.796C27.2302 52.3594 26.1822 51.7586 24.7362 51.689C29.8615 53.7446 26.4662 59.3702 21.6191 56.9757Z",fill:"#F9EA9E"}),i.createElement("path",{d:"M22.7965 55.6378L23.4901 56.2482L22.3788 54.8138L22.7965 55.6378ZM21.6191 56.9757L20.9255 56.3652L20.1291 57.2701L21.2098 57.804L21.6191 56.9757ZM10.6855 43.2215L11.5691 43.4916L11.5691 43.4914L10.6855 43.2215ZM10.8093 37.6995L9.89676 37.8442L10.8093 37.6995ZM11.5172 34.6942L11.8129 35.5694L11.8134 35.5693L11.5172 34.6942ZM15.2158 42.3628L14.293 42.3185L14.2303 43.6237L15.4817 43.2476L15.2158 42.3628ZM21.2853 40.0146L21.6732 40.8532L21.2853 40.0146ZM25.1283 38.7347L25.2099 39.655L25.2099 39.655L25.1283 38.7347ZM28.5046 39.6282L28.1677 40.4885L28.5046 39.6282ZM33.0945 40.912L33.0274 41.8334L33.0279 41.8335L33.0945 40.912ZM31.2708 44.3961L31.5014 43.5015L31.5006 43.5013L31.2708 44.3961ZM29.8691 43.7942L29.4489 44.6171L29.8691 43.7942ZM26.7878 42.7801L26.8516 41.8584L26.3345 43.5851L26.7878 42.7801ZM28.8772 48.4425L28.137 48.9953L29.0306 50.1918L29.7023 48.8581L28.8772 48.4425ZM26.0982 46.98L26.3032 46.0792L25.5813 47.7458L26.0982 46.98ZM27.7364 52.796L27.1329 53.4956L27.9339 54.1865L28.5108 53.2999L27.7364 52.796ZM24.7362 51.689L24.7806 50.7662L24.3923 52.5465L24.7362 51.689ZM22.103 55.0274L20.9255 56.3652L22.3126 57.5861L23.4901 56.2482L22.103 55.0274ZM9.80196 42.9515C8.21218 48.1532 9.20062 52.6777 11.8945 55.3599C14.6148 58.0683 18.8498 58.6746 23.2143 56.4619L22.3788 54.8138C18.5946 56.7323 15.2556 56.0989 13.1983 54.0505C11.1146 51.9759 10.1219 48.2266 11.5691 43.4916L9.80196 42.9515ZM9.89676 37.8442C10.1299 39.3143 10.3914 41.0217 9.80191 42.9516L11.5691 43.4914C12.2956 41.1131 11.9544 39.0216 11.7217 37.5547L9.89676 37.8442ZM11.2214 33.8189C10.8038 33.96 10.4382 34.1906 10.1678 34.5389C9.90133 34.8821 9.78146 35.2699 9.73319 35.6357C9.6443 36.3092 9.78198 37.1206 9.89676 37.8442L11.7217 37.5547C11.59 36.7243 11.5195 36.2231 11.5651 35.8774C11.5841 35.7336 11.6171 35.6852 11.6273 35.6721C11.6336 35.6641 11.6684 35.6183 11.8129 35.5694L11.2214 33.8189ZM16.1386 42.4071C16.2762 39.5396 15.9913 37.2198 15.2457 35.6893C14.8668 34.9115 14.3335 34.2665 13.6055 33.9095C12.8591 33.5435 12.0364 33.5431 11.221 33.819L11.8134 35.5693C12.2609 35.4178 12.5659 35.4576 12.792 35.5685C13.0365 35.6884 13.3207 35.957 13.5846 36.4985C14.1244 37.6068 14.4259 39.5487 14.293 42.3185L16.1386 42.4071ZM20.8974 39.1761C19.4867 39.8287 17.7228 40.6445 14.9499 41.478L15.4817 43.2476C18.3813 42.3761 20.2392 41.5165 21.6732 40.8532L20.8974 39.1761ZM25.0468 37.8144C23.5293 37.9489 22.3342 38.5115 20.8974 39.1761L21.6732 40.8532C23.1581 40.1662 24.065 39.7564 25.2099 39.655L25.0468 37.8144ZM28.8416 38.768C28.1917 38.5135 27.5321 38.2544 26.9197 38.0724C26.3145 37.8925 25.6671 37.7594 25.0467 37.8144L25.2099 39.655C25.4824 39.6308 25.8634 39.6861 26.3933 39.8436C26.9161 39.999 27.4982 40.2263 28.1677 40.4885L28.8416 38.768ZM33.1616 39.9905C31.7128 39.885 30.2669 39.3262 28.8416 38.768L28.1677 40.4885C29.5452 41.028 31.2521 41.7041 33.0274 41.8334L33.1616 39.9905ZM31.0402 45.2908C33.0568 45.8106 34.5818 44.6954 35.1311 43.3715C35.3991 42.7257 35.4703 41.9426 35.1461 41.2517C34.7967 40.5072 34.0764 40.0566 33.1611 39.9905L33.0279 41.8335C33.3828 41.8591 33.4505 41.9881 33.4734 42.0367C33.5214 42.139 33.5491 42.3628 33.4244 42.6633C33.1885 43.2319 32.5314 43.767 31.5014 43.5015L31.0402 45.2908ZM29.4489 44.6171C29.9222 44.8588 30.4736 45.1453 31.041 45.291L31.5006 43.5013C31.1706 43.4165 30.8114 43.2381 30.2892 42.9714L29.4489 44.6171ZM26.7241 43.7018C27.7815 43.7749 28.5974 44.1822 29.4489 44.6171L30.2892 42.9714C29.4488 42.5423 28.3277 41.9605 26.8516 41.8584L26.7241 43.7018ZM29.7023 48.8581C30.476 47.322 30.7784 45.9677 30.2472 44.7254C29.7453 43.5513 28.5923 42.7361 27.2412 41.9751L26.3345 43.5851C27.688 44.3475 28.3143 44.9048 28.5482 45.4518C28.7529 45.9305 28.7476 46.6458 28.052 48.0269L29.7023 48.8581ZM25.8931 47.8809C26.7894 48.0849 27.3747 48.4005 27.7208 48.6422C27.895 48.7639 28.0114 48.8688 28.078 48.9349C28.1114 48.968 28.1324 48.9914 28.1419 49.0024C28.1466 49.008 28.1485 49.0103 28.1476 49.0093C28.1472 49.0087 28.1461 49.0073 28.1443 49.005C28.1434 49.0039 28.1424 49.0025 28.1411 49.0009C28.1405 49.0001 28.1399 48.9992 28.1392 48.9983C28.1388 48.9978 28.1385 48.9973 28.1381 48.9969C28.1379 48.9966 28.1376 48.9962 28.1375 48.9961C28.1372 48.9957 28.137 48.9953 28.8772 48.4425C29.6174 47.8896 29.6171 47.8892 29.6168 47.8888C29.6167 47.8887 29.6164 47.8883 29.6162 47.888C29.6158 47.8875 29.6154 47.8869 29.6149 47.8863C29.614 47.8851 29.6131 47.8839 29.6121 47.8826C29.6102 47.88 29.608 47.8772 29.6056 47.8742C29.6009 47.868 29.5953 47.861 29.589 47.853C29.5762 47.8371 29.56 47.8175 29.5404 47.7948C29.5011 47.7493 29.4479 47.691 29.3795 47.6232C29.2426 47.4874 29.0453 47.3134 28.7788 47.1273C28.2435 46.7535 27.4393 46.3378 26.3032 46.0792L25.8931 47.8809ZM28.5108 53.2999C29.2971 52.0914 29.8145 50.856 29.494 49.5548C29.1821 48.2882 28.1416 47.2445 26.615 46.2142L25.5813 47.7458C27.0317 48.7247 27.5614 49.4347 27.6999 49.9967C27.8297 50.524 27.6778 51.192 26.962 52.2922L28.5108 53.2999ZM24.6918 52.6119C25.9073 52.6703 26.7634 53.1768 27.1329 53.4956L28.3399 52.0964C27.6971 51.5419 26.457 50.8468 24.7806 50.7662L24.6918 52.6119ZM21.2098 57.804C23.9894 59.1771 26.6084 58.3216 27.7106 56.4746C28.256 55.5607 28.3939 54.4321 27.945 53.3617C27.4985 52.297 26.5256 51.4112 25.0801 50.8315L24.3923 52.5465C25.5094 52.9946 26.0341 53.5828 26.241 54.0763C26.4455 54.564 26.3926 55.0775 26.1239 55.5277C25.5981 56.4088 24.0959 57.1688 22.0283 56.1473L21.2098 57.804Z",fill:"black",mask:"url(#path-6-outside-1_8024_21772)"})),i.createElement("defs",null,i.createElement("filter",{id:"filter0_d_8024_21772",x:"0.331055",y:"5.4856",width:"57.6621",height:"57.9946",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",{dx:"-5",dy:"5"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.776471 0 0 0 0 0.796078 0 0 0 0 0.870588 0 0 0 1 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8024_21772"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8024_21772",result:"shape"})))),_w=r.UI.Node.make((({notify:e})=>{const{onMount:t}=(0,sd.F)(T.b(e({kind:ht.i.Kind.toneReportLoadedEmptyMount})));return i.createElement(Um,{mount:t,key:"tone-report-empty","data-testid":"tone-report-empty",style:Iw},i.createElement(Ew,null),i.createElement(oh,{style:Aw},"No tone detected"),i.createElement("p",{className:Ow},"Keep writing to refine your communication skills with real-time tone analysis."),i.createElement(Zt.z,{variant:"secondary",onClick:e({kind:ht.i.Kind.toneReportBackToSuggestionsButtonClick})},"See all suggestions"))})),Iw={padding:`${zt.ux.rem(Dt.mh)}`,display:"flex",justifyContent:"center",alignItems:"center",gap:`${zt.ux.rem(Dt.mh)}`,boxSizing:"border-box"},Aw={whiteSpace:"normal",padding:0},Ow=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:"1.5em",fontWeight:400,textAlign:"center"});var Rw=n(48911);const Bw=({onUphookMount:e,onUphookClick:t,uphookTitle:n,uphookEmojiId:r})=>{const{onMount:s}=(0,sd.F)(T.b((t=>e(t))));return i.createElement(Gt.F.div,{className:Mw,mount:s,key:"tone-report-footer"},i.createElement(Gt.F.div,{className:Fw},(0,a.zG)(r,o.map((e=>i.createElement(Rw.In,{id:e,className:Tw,key:"uphookEmoji"}))),o.getOrElse((()=>i.createElement(i.Fragment,null)))),i.createElement("div",{className:Pw},n)),i.createElement(oS,{onClick:t,"data-testid":"tone-report-tone-suggestion-info-cta"},"Unlock Premium"))},Mw=zt.ux.style({borderTop:`1px solid ${Qt.Z.FooterBorder}`,marginTop:zt.ux.rem(.5),paddingTop:zt.ux.rem(.75),display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center"}),Fw=zt.ux.style({display:"flex",alignItems:"center",flexBasis:zt.ux.percent(45)}),Tw=zt.ux.style({padding:zt.ux.rem(Dt.yC),marginRight:zt.ux.rem(Dt.qp),width:zt.ux.rem(Dt.w9),height:zt.ux.rem(Dt.w9)}),Pw=zt.ux.style({paddingTop:zt.ux.rem(Dt.yC),marginRight:zt.ux.rem(Dt.yC),fontSize:zt.ux.rem(.875)}),Nw=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#646B81",d:"M9.2 8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0M9.2 12.8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0M9.2 3.2a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0"})))),jw=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",d:"M13.5 8.635q-.001.137-.047.265l-1.797 3.607-.008.016-.007.017c-.116.284-.371.46-.641.46H6.4c-.362 0-.7-.316-.7-.77V7.578c0-.218.086-.417.215-.553l3.589-3.796.264.279c.08.09.128.202.132.321l-.012.143-.523 2.663-.117.597H13.2c.138 0 .3.13.3.346zM3.6 7.23c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346h-.8c-.14 0-.3-.128-.3-.346V7.577c0-.218.16-.346.3-.346z"})))),Uw=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",d:"M2.5 7.865c0-.09.017-.181.047-.265l1.797-3.607.008-.016.007-.017c.116-.283.371-.46.641-.46h4.6c.362 0 .7.316.7.77v4.653a.8.8 0 0 1-.215.553l-3.589 3.796-.264-.279a.5.5 0 0 1-.132-.322l.012-.142.523-2.663.117-.597H2.8c-.138 0-.3-.13-.3-.346zm9.9 1.404c-.14 0-.3-.128-.3-.346V3.846c0-.218.16-.346.3-.346h.8c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346z"}))));var zw=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function Dw(e){var{children:t,onOpenChange:n,title:r,placement:s="bottom end"}=e,l=zw(e,["children","onOpenChange","title","placement"]);return i.createElement(tp.l.Consumer,null,(({portalContainer:e})=>i.createElement(Gt.F.Fragment,null,e.view(o.fold(a.gn,(e=>i.createElement(ik,Object.assign({},l,{portalContainer:e,placement:s,title:r,onOpenChange:e=>null==n?void 0:n(e)}),t)))))))}const Lw=({status:e,description:t})=>{const[n,r]=e===_t.On?[Zw,$w]:e===_t.Off?[Hw,Kw]:(0,m.L0)(e),s=(0,a.zG)(t,o.fold((()=>i.createElement(Vt.JO.Info,{className:r})),(e=>i.createElement(Lv.u,{title:i.createElement("div",{className:qw},e)},i.createElement(Vt.JO.Info,{className:r})))));return i.createElement("div",{className:n},i.createElement("div",{className:Ww},e,"-BRAND ",s))},Gw={display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:zt.ux.rem(Dt.F2),paddingRight:zt.ux.rem(Dt.F2),paddingLeft:zt.ux.rem(Dt.F2),textTransform:"uppercase",letterSpacing:"0.04em",fontSize:zt.ux.rem(Dt.x+Dt.yC),lineHeight:zt.ux.rem(Dt.mh)},Zw=zt.ux.style(Gw,{background:Qt.Z.OnBrandBadge,color:Qt.Z.OnBrandBadgeLabel}),Hw=zt.ux.style(Gw,{background:Qt.Z.OffBrandBadge,color:Qt.Z.OffBrandBadgeLabel}),Vw={width:zt.ux.rem(Dt.x+Dt.yC),minWidth:"unset",minHeight:"unset",paddingLeft:zt.ux.rem(Dt.x)},$w=zt.ux.style(Vw,{stroke:Qt.Z.OnBrandBadgeIcon,fill:Qt.Z.OnBrandBadgeIcon}),Kw=zt.ux.style(Vw,{stroke:Qt.Z.OffBrandBadgeIcon,fill:Qt.Z.OffBrandBadgeIcon}),Ww=zt.ux.style({display:"flex",justifyContent:"center",whiteSpace:"nowrap"}),qw=zt.ux.style({maxWidth:zt.ux.rem(65*Dt.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),Qw=({tone:e,index:t,onReportPositiveFeedback:n,onReportNegativeFeedback:r})=>{const s=(0,a.zG)(e.brandToneInfo,o.fold((()=>i.createElement(Lv.u,{title:`${e.prevalence} intensity`},i.createElement("div",{className:iC},[0,1,2,3,4].map((t=>{const n=t/5<=e.confidence;return i.createElement("div",{key:`${e.name}-intensity-${t}`,className:n?oC:rC})}))))),(({status:e,description:t})=>i.createElement(Lw,{status:e,description:t}))));return i.createElement("div",{"data-testid":"tone-report-tone","data-tone-report-tone-name":e.name,role:`tone-${t}-${e.name}`,className:Jw},i.createElement("div",{className:Xw},i.createElement(Rw.In,{id:e.emojiId,className:eC}),i.createElement("span",{className:tC},e.name)),i.createElement("div",{className:nC},s),i.createElement(Dw,{"aria-label":`${e.name} Tone Actions Menu`,placement:"left",label:i.createElement(Nw,{className:aC}),onAction:e=>{switch(e){case"likeTone":return n();case"dislikeTone":return r();default:return}}},i.createElement(rk.$0,{title:"Help us improve"},i.createElement(rk.ck,{key:"likeTone",textValue:"likeTone"},i.createElement(jw,{className:sC}),"Tone seems correct"),i.createElement(rk.ck,{key:"dislikeTone",textValue:"dislikeTone"},i.createElement(Uw,{className:sC}),"Tone seems incorrect"))))},Yw={height:zt.ux.rem(5*Dt.W9),width:zt.ux.rem(5*Dt.W9),borderRadius:zt.ux.percent(50),marginRight:zt.ux.rem(3*Dt.W9)},Jw=zt.ux.style({display:"grid",alignItems:"center",gridTemplateColumns:"0.6fr 0.5fr auto",height:zt.ux.rem(2.5)}),Xw=zt.ux.style({display:"flex",alignItems:"center",flexBasis:zt.ux.percent(45)}),eC=zt.ux.style({padding:zt.ux.rem(Dt.yC),marginRight:zt.ux.rem(Dt.qp),width:zt.ux.rem(Dt.w9),height:zt.ux.rem(Dt.w9)}),tC=zt.ux.style({textTransform:"capitalize",fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125)}),nC=zt.ux.style({display:"inline-flex"}),iC=zt.ux.style({display:"flex"}),rC=zt.ux.style(Yw,{backgroundColor:Qt.Z.IndicatorDotDefault}),oC=zt.ux.style(Yw,{backgroundColor:Qt.Z.IndicatorDotActive}),aC=zt.ux.style({padding:zt.ux.rem(Dt.F2)}),sC=zt.ux.style({marginRight:zt.ux.rem(Dt.x)});const lC=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{onMount:r}=(0,sd.F)(T.b((()=>n({kind:ht.i.Kind.toneReportLoadedNonEmptyMount})())));return i.createElement(Um,{mount:r,key:"tone-report","data-testid":"tone-report"},i.createElement("div",{className:cC},i.createElement(Gt.F.div,{className:uC},e.pipe(I.U((e=>function({tones:e,onBrandTitleEnabled:t}){const n=(0,a.zG)(e,y.hX((e=>o.isSome(e.brandToneInfo)&&e.brandToneInfo.value.status===_t.Off)),o.map(y.UI((e=>e.confidence))),o.map(y.u4(0,L.max(L.ordNumber)))),i=e.filter((e=>o.isSome(e.brandToneInfo)&&e.brandToneInfo.value.status===_t.On)).length;return o.isSome(n)&&n.value>.75?"Your tone may sound off to readers":o.isSome(n)?"Something sounds slightly off...":i>0&&t?"You're on-brand! Great job!":i>0?"Your writing sounds clear and aligned. Great job!":"How this may sound to readers:"}(e)))))),i.createElement(Gt.F.div,{className:dC,"data-testid":"tone-report-items"},t("tones").pipe(I.U((e=>e.map(((e,t)=>i.createElement(Qw,{key:e.name,index:t,tone:e,onReportPositiveFeedback:n({kind:ht.i.Kind.toneReportToneLikeButtonClick,toneName:e.name}),onReportNegativeFeedback:n({kind:ht.i.Kind.toneReportToneDislikeButtonClick,toneName:e.name})}))))))),t("uphookInfo").pipe(I.U(o.fold((()=>null),(({title:e,emojiId:t})=>i.createElement(Bw,{key:"tone-report-footer",uphookTitle:e,uphookEmojiId:t,onUphookMount:n({kind:ht.i.Kind.toneReportFooterUphookPremiumButtonShow}),onUphookClick:n({kind:ht.i.Kind.toneReportFooterUphookPremiumButtonClick})}))))))})),cC=zt.ux.style({display:"flex",alignItems:"flex-start"}),uC=zt.ux.style({flexGrow:1,fontStyle:"normal",fontWeight:"bold",fontSize:zt.ux.rem(1),lineHeight:zt.ux.rem(1.5)}),dC=zt.ux.style({marginTop:zt.ux.rem(.5)}),mC=r.UI.Node.make((()=>i.createElement(Um,{style:pC},i.createElement(hw,null),i.createElement("span",{className:hC},"Loading...")))),pC={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:zt.ux.rem(9.5)},hC=zt.ux.style({color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.75),fontFamily:"Inter",lineHeight:zt.ux.rem(1.125)}),fC=r.UI.Union.make("kind",{loading:mC,loadedEmpty:_w,loadedNonEmpty:lC});var gC=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const vC=e=>{var{text:t,onChange:n,placeholder:r,disabled:o,className:a,onFocus:s,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:d}=e,m=gC(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[p,h]=i.useState(null);return i.useEffect((()=>{p&&void 0!==u&&p.focus()}),[u,p]),i.createElement(fd,{className:a,style:{height:zt.ux.rem(1.375)},name:"text-input-iframe"},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${zt.ux.rem(Lu.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${zt.ux.rem(.875)};\n        font-weight: 400;\n        color: ${pd};\n      }\n      .textBox::placeholder {\n        color: ${hd};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `.replace(/\s/g,"")}}),i.createElement("input",Object.assign({},m,{className:"textBox",style:{lineHeight:zt.ux.rem(1.375)},value:t,ref:h,onChange:e=>n(e.target.value),placeholder:r,disabled:o,onFocus:()=>null==s?void 0:s(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyDown:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))},bC={padding:`${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.F2+Dt.Ze)} ${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.qp)}`,border:`1px solid ${Lt.I.Background.Neutral.Default}`,borderRadius:zt.ux.rem(Lu.xB),width:zt.ux.rem(15),height:zt.ux.rem(2),boxSizing:"border-box",position:"relative"},yC={position:"absolute",right:zt.ux.rem(Dt.x),top:zt.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),padding:0},xC=Object.assign(Object.assign({},(0,qt.fx)(1.5)),{$nest:{"& svg":{stroke:Lt.I.Text.Base.Subdued}}}),kC={padding:zt.ux.rem(Dt.F2),background:"white",boxShadow:ad.H8.boxShadow,border:ad.H8.border,borderRadius:zt.ux.rem(Lu.xB),width:zt.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:zt.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},SC={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),color:Lt.I.Text.Base.Default,padding:`${zt.ux.rem(.1875)} ${zt.ux.rem(Dt.qp)}`,borderRadius:zt.ux.rem(Lu.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:Du.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},wC={width:zt.ux.percent(100),border:"none"},CC=zt.ux.style(bC),EC=zt.ux.style(yC),_C=zt.ux.style(xC),IC=zt.ux.style(kC),AC=zt.ux.style(SC),OC=zt.ux.style({whiteSpace:"pre"}),RC=zt.ux.style(wC),BC=new uh(999999);function MC({text:e,placeholder:t,clearButton:n,selectOnBlur:r,label:o,options:a,className:l,filterBy:c=((e,t)=>o(e).toLowerCase().includes(t.toLowerCase())),onInputChange:u,onSelectionChange:d}){const[m,p]=i.useState(!1),h=i.useRef(BC.newId().toString()),[f,g]=i.useState(null),[v,b]=i.useState(null),{styles:y,attributes:x}=(0,ah.D)(f,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=a.filter((t=>c(t,e.trim()))),S=m&&k.length>0,w=i.useMemo((()=>new s.xQ),[]);return rd.P.useSubscriptionTo(w.pipe(Nt.b(50),_.h((e=>!e)),T.b((()=>{p(!1),r&&""!==e.trim()&&d(k.length>0?k[0]:null)})))),i.createElement("div",Object.assign({},(0,Wd.Sh)(CC,l),{ref:g}),i.createElement(vC,{className:RC,placeholder:t,onChange:u,text:e,onFocus:()=>{p(!0),w.next(!0)},onBlur:()=>w.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":h.current,"aria-expanded":S}),""!==e.trim()&&!!n&&i.createElement("button",{onClick:(0,ph.m)((()=>d(null))),className:EC,"aria-label":"Clear",type:"button"},i.createElement(Vt.JO.Close,{className:_C})),S&&i.createElement("div",Object.assign({ref:b,style:y.popper},x.popper,{className:IC,onFocus:()=>w.next(!0),onBlur:()=>w.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:h.current},k.map((t=>{const n=o(t);return i.createElement("li",{key:n,"aria-label":n,role:"option"},i.createElement("button",{className:AC,onClick:(0,ph.m)((()=>{d(t),p(!1)}))},i.createElement(FC,{label:n,pattern:e})))})))))}const FC=({label:e,pattern:t})=>{if(""===t.trim())return i.createElement(i.Fragment,null,e);const n=t.trim(),r=e.split(new RegExp(n,"i")),o=(0,a.zG)(r.map(((e,t)=>({token:e,mark:!1,end:t*n.length+r.slice(0,t).join("").length+e.length}))),b.iD({token:"",mark:!0,end:0})).map(((t,i,r)=>t.mark&&i>0?{token:e.slice(r[i-1].end,r[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return i.createElement(i.Fragment,null,o.map(((e,t)=>e.mark?i.createElement("mark",{key:t,className:OC},e.token):i.createElement("span",{key:t,className:OC},e.token))))};const TC=e=>i.createElement(Vt.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),i.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),PC=({kind:e,label:t,description:n,iconUrl:r,isUnselectable:o,onToggle:a})=>i.createElement(Lv.u,{title:n},i.createElement("button",{disabled:"disabled"===e,className:NC,"data-kind":e,"data-unselectable":o,onClick:(0,ph.m)((()=>{"disabled"!==e&&a("selected"!==e&&("unselected"===e||(0,m.L0)(e)))}))},r?i.createElement("img",{src:r,style:{width:20,height:20}}):null,i.createElement("span",null,t),o&&"selected"===e?i.createElement(TC,{className:jC}):null)),NC=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:zt.ux.rem(Dt.x),padding:`${zt.ux.rem(Dt.F2)} ${zt.ux.rem(.625)} ${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.x)}`,background:Lt.I.Background.Base.Default,color:Lt.I.Text.Base.Default,border:`${zt.ux.px(1)} solid transparent`,borderRadius:zt.ux.rem(1.875),fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${zt.ux.px(1)} solid ${Du.BlueGray5}`,color:Lt.I.Text.Base.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${zt.ux.px(1)} solid ${Du.BlueGray5}`,color:Du.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${zt.ux.px(2)} solid ${Qt.Z.BrandGreen60}`,padding:`${zt.ux.rem(.1875)} ${zt.ux.rem(.5625)} ${zt.ux.rem(.1875)} ${zt.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),jC=zt.ux.style(Object.assign(Object.assign({position:"absolute",top:zt.ux.rem(-(Dt.F2+Dt.W9)),right:zt.ux.rem(-(Dt.F2+Dt.W9)),boxSizing:"content-box"},(0,qt.fx)(.75)),{border:`${zt.ux.rem(.125)} solid white`,borderRadius:"50%",background:Qt.Z.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),UC=({chips:e,className:t,onToggle:n})=>i.createElement(Gt.F.div,Object.assign({},(0,Wd.Sh)(zC,t)),e.pipe(I.U(b.UI((e=>i.createElement(PC,Object.assign({},e,{onToggle:t=>n(e,t),key:e.label}))))))),zC=zt.ux.style({display:"flex",flexWrap:"wrap",gap:zt.ux.rem(Dt.F2),$nest:{div:{marginTop:zt.ux.rem(Dt.F2)}}}),DC={margin:0,padding:zt.ux.rem(Dt.mh),gap:zt.ux.rem(Dt.mh),boxSizing:"border-box",minHeight:"100%"},LC={color:Lt.I.Text.Base.Default,fontWeight:700,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),margin:0},GC={color:Lt.I.Text.Base.Subdued,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)},ZC={marginTop:zt.ux.rem(Dt.x)},HC={color:Du.BlueGray60,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)},VC={display:"flex",justifyContent:"flex-end",gap:zt.ux.rem(Dt.x),flexGrow:1,alignItems:"flex-end"},$C={fontSize:zt.ux.important(zt.ux.rem(.875))},KC={marginTop:zt.ux.rem(Dt.x)},WC={marginTop:zt.ux.rem(Dt.x)},qC={display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)},QC={width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},YC=zt.ux.style({display:"grid",minHeight:"100%",gridTemplateRows:"minmax(min-content, auto)"}),JC=DC,XC=zt.ux.style(LC),eE=zt.ux.style(ZC),tE=zt.ux.style(GC),nE=zt.ux.style(HC),iE=zt.ux.style(VC),rE=zt.ux.style($C),oE=zt.ux.style($C),aE=zt.ux.style(KC),sE=zt.ux.style(WC),lE=zt.ux.style(qC),cE=zt.ux.style(QC),uE=r.UI.Node.make((({view:e,state:t,notify:n})=>i.createElement("div",{className:YC},i.createElement(Um,{style:JC,"data-testid":"voice-profile"},i.createElement("section",null,i.createElement("h2",{className:XC},"Formality"),i.createElement(UC,{className:eE,chips:e("styles").pipe(I.U(b.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>n({kind:ht.i.Kind.styleToggleClick,id:e.id})()})),i.createElement("section",null,i.createElement("h2",{className:XC},"Tone"),i.createElement(Gt.F.div,{className:tE},"Select up to"," ",e("maxSelectableTones").pipe(I.U((e=>{return t=e,Number.isInteger(t)&&t>=0&&t<10?function(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}(e):`${e}`;var t})))),i.createElement(UC,{className:eE,chips:e("tones").pipe(I.U(b.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:ht.i.Kind.toneToggleClick,selected:t,id:e.id})()})),t.pipe(I.U((e=>(0,a.zG)(e.roles,y.c2,o.fold(a.gn,(t=>i.createElement("section",null,i.createElement("h2",{className:XC},"Your profession"),i.createElement(MC,{className:aE,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:ht.i.Kind.roleTypeaheadSelectionChange,role:o.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0})))))))),i.createElement("section",null,i.createElement("h2",{className:XC},"I write in"),i.createElement(Gt.F.Fragment,null,t.pipe(I.U((({dialects:e,selectedDialect:t})=>i.createElement(Eh,{className:sE,options:e.filter((e=>!we.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:ht.i.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>i.createElement("div",{className:lE},i.createElement("div",{className:cE},i.createElement("img",{src:e.iconUrl,style:{width:zt.ux.rem(1),height:zt.ux.rem(1)}})),e.label)})))))),e("description").pipe(I.U((e=>""!==e.trim()?i.createElement("div",{className:nE},e):null))),i.createElement(Gt.F.div,{className:iE},i.createElement(Zt.z,{variant:"tertiary",className:oE,onClick:n({kind:ht.i.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(I.U((e=>i.createElement(Zt.z,{className:rE,onClick:n({kind:ht.i.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))))),dE=({className:e})=>i.createElement("div",Object.assign({role:"separator"},(0,Wd.Sh)(mE,e))),mE=zt.ux.style({position:"relative",width:"100%",borderBottom:`0.5px solid ${Du.BlueGray10}`});var pE,hE=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(pE||(pE={}));const fE=({tabs:e,activeTabId:t,onActiveTabChange:n,children:r})=>i.createElement(i.Fragment,null,i.createElement("div",{className:vE,role:"tablist"},e.map((e=>i.createElement("button",{key:e.id,onClick:()=>n(e.id),tabIndex:0,className:bE,id:`tab-${e.id}`,"aria-label":`${e.label} ${e.id===t?"Selected.":""}`,"aria-controls":`tabpanel-${e.id}`,"aria-selected":t===e.id,role:"tab",type:"button"},e.label)))),r),gE=e=>{var{id:t,isActive:n,children:r,className:o,style:a}=e,s=hE(e,["id","isActive","children","className","style"]);return i.createElement("div",Object.assign({role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,hidden:!n,style:n?a:void 0,className:n?o:void 0},s),r)},vE=zt.ux.style({display:"flex",alignContent:"flex-start",gap:zt.ux.rem(Dt.x)}),bE=zt.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${zt.ux.rem(Dt.yC)} solid transparent`,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),height:zt.ux.rem(1.5),color:Qt.Z.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:Qt.Z.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:Du.BlueGray10}}});var yE=n(46354),xE=n(1386);const kE={editBtn:"editBtn",cancelBtn:"cancelBtn",saveBtn:"saveBtn"},SE={default:{backgroundColor:Qt.Z.BlueGray0}},wE={gap:0,backgroundImage:"url(https://assets.grammarly.com/cheetah/v1/voice-profile/cheetah-my-voice-bg.svg)",backgroundPosition:"right",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",padding:`${zt.ux.rem(Dt.qp)} ${zt.ux.rem(Dt.mh)}`,$nest:{[`.${kE.editBtn}`]:{opacity:0,pointerEvents:"none",$nest:{"&:focus":{opacity:1,pointerEvents:"auto"}}},[`&:hover .${kE.editBtn}, &:focus .${kE.editBtn}`]:{opacity:1,pointerEvents:"auto"}}},CE=e=>zt.ux.style({display:"flex",justifyContent:"space-between",marginBottom:e?zt.ux.rem(Dt.x):zt.ux.rem(Dt.yC+Dt.F2)}),EE=zt.ux.style({margin:0,fontSize:zt.ux.rem(1.25),lineHeight:zt.ux.rem(1.5),fontWeight:700}),_E=zt.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}),IE=zt.ux.style({display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.x)}),AE=zt.ux.style({display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.F2)}),OE=zt.ux.style({color:Qt.Z.TextBaseSubduedColor,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),margin:0}),RE=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)}),BE=zt.ux.style({width:zt.ux.rem(1.5),height:zt.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center",$nest:{"& img":{width:zt.ux.rem(1),height:zt.ux.rem(1)}}}),ME=zt.ux.style({display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.F2)}),FE=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.F2),height:zt.ux.rem(1.5),color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:500}),TE=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)});var PE=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const NE=e=>{var{children:t,active:n}=e,r=PE(e,["children","active"]);const o=i.useRef(null);return i.createElement(i.Fragment,null,o.current&&n?i.createElement(td.J2,Object.assign({},r,{reference:o.current})):null,i.cloneElement(t,{ref:o}))},jE=i.forwardRef((function({name:e,active:t,onClick:n},r){return i.createElement("button",{role:"button",tabIndex:0,"aria-label":e,"aria-pressed":t,"data-active":t,onClick:n,ref:r,className:UE},e)})),UE=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",height:zt.ux.rem(2),borderRadius:zt.ux.rem(Lu.xB),border:`${zt.ux.rem(Dt.yC)} solid transparent`,padding:`${zt.ux.rem(Dt.yC+Dt.F2)} ${zt.ux.rem(Dt.x)}`,backgroundColor:Qt.Z.Green0,color:Qt.Z.Green90,lineHeight:zt.ux.rem(1.3125),fontSize:zt.ux.rem(.875),$nest:{"&:hover":{backgroundColor:zt.ux.color(Qt.Z.Green10).mix(zt.ux.color(Qt.Z.BlueGray5)).toRGBA().toString(),color:Qt.Z.Green80},'&[data-active="true"]':{outline:`${zt.ux.rem(Dt.yC)} solid ${Qt.Z.Green80}`}}}),zE=({profileName:e,sectionName:t,tagName:n,activeTagId:r,onVoiceTagPopoverClose:s,onKeepClick:l,onRemoveClick:c,onVoiceTagClick:u})=>i.createElement(NE,{active:(0,a.zG)(r,o.exists((i=>i===Ce.createId({tagName:n,sectionName:t,profileName:e})))),onClose:i=>{"keep"===i?l():"remove"===i?c(n,e,t):s()},title:i.createElement("h1",{className:DE},"Does this sound like you?"),footer:i.createElement(td.yS.Consumer,null,(({closePopover:e})=>i.createElement(i.Fragment,null,i.createElement(Zt.z,{onClick:()=>e("keep"),style:LE,textPosition:"everywhere"},i.createElement(jw,null),"Yes, keep it"),i.createElement(Zt.z,{onClick:()=>e("remove"),style:LE,textPosition:"everywhere"},i.createElement(Uw,null),"No, remove it"))))},i.createElement(jE,{name:n,active:(0,a.zG)(r,o.exists((i=>i===Ce.createId({tagName:n,sectionName:t,profileName:e})))),onClick:()=>u(n,e,t)})),DE=zt.ux.style({fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),fontWeight:700,margin:0}),LE={default:{gap:zt.ux.rem(Dt.F2),padding:`0 ${zt.ux.rem(Dt.x)} 0 ${zt.ux.rem(Dt.F2)}`,color:Qt.Z.TextBaseDefault,backgroundColor:Lt.I.Background.Base.Default},hovered:{color:Qt.Z.TextBaseDefault,backgroundColor:Qt.Z.BlueGray5},active:{color:Qt.Z.TextBaseDefault,backgroundColor:Qt.Z.BlueGray5}},GE=({profile:e,activeProfileName:t,activeTagId:n,onVoiceTagPopoverClose:r,onKeepClick:a,onRemoveClick:s,onVoiceTagClick:l})=>i.createElement(gE,{id:pE.Id.create(e.name),isActive:e.name===o.toNullable(t),className:ZE},e.summary,i.createElement("div",{className:VE},e.sections.map((t=>i.createElement("div",{key:t.name},t.name,i.createElement("div",{className:$E},0===t.tags.length?i.createElement("div",{className:HE},"Detected qualities will appear here"):t.tags.map((o=>i.createElement(zE,{key:o.name,tagName:o.name,sectionName:t.name,profileName:e.name,activeTagId:n,onVoiceTagPopoverClose:r,onKeepClick:a,onRemoveClick:s,onVoiceTagClick:l}))))))))),ZE=zt.ux.style({fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.qp),paddingTop:zt.ux.rem(Dt.x)}),HE=zt.ux.style({padding:`0 ${zt.ux.rem(Dt.x)}`,background:Qt.Z.BlueGray0,color:Qt.Z.TextBaseSubduedColor,borderRadius:zt.ux.rem(Lu.xB),height:zt.ux.rem(2),fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),display:"flex",justifyContent:"center",alignItems:"center"}),VE=zt.ux.style({display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.qp)}),$E=zt.ux.style({marginTop:zt.ux.rem(Dt.x),display:"flex",flexWrap:"wrap",gap:zt.ux.rem(Dt.F2)}),KE=(0,Wd.xb)((({onEditButtonClick:e,onSaveButtonClick:t,onCancelButtonClick:n,onDialectDropdownChange:r,onRoleDropdownChange:s,userName:l,isEditing:c,selectedRole:u,roles:d,dialects:m,selectedDialect:p})=>i.createElement(Um,{style:wE},i.createElement("div",{className:CE(c)},i.createElement("h1",{className:EE},l),c?null:i.createElement(Zt.z,{variant:"secondary",onClick:e,className:kE.editBtn,style:SE,size:"small"},"Edit")),c?i.createElement("div",{className:_E},i.createElement("div",{className:IE},0!==d.length&&i.createElement("div",{className:AE},i.createElement("h2",{className:OE},"My role"),i.createElement(Eh,{placeholder:"Select a role...",options:d,selection:o.toUndefined(u),onSelectionChange:s,label:e=>e.id,renderOption:e=>e.id})),i.createElement("div",{className:AE},i.createElement("h2",{className:OE},"I write in"),i.createElement(Eh,{options:m,selection:p,onSelectionChange:r,label:e=>e.label,renderOption:e=>i.createElement("div",{className:RE},i.createElement("div",{className:BE},i.createElement("img",{src:e.iconUrl,alt:""})),e.label)}))),i.createElement("div",{className:TE},i.createElement(Zt.z,{variant:"tertiary",onClick:n},"Cancel"),i.createElement(Zt.z,{onClick:t},"Save"))):i.createElement("div",{className:ME},(0,a.zG)(u,o.fold(a.gn,(e=>i.createElement("div",{className:FE},i.createElement("div",{className:BE},i.createElement(yE.J,{icon:xE.N,accessibilityLabel:"Role"})),i.createElement("span",null,e.label))))),i.createElement("div",{className:FE},i.createElement("div",{className:BE},i.createElement("img",{src:p.iconUrl,alt:""})),i.createElement("span",null,p.label)))))),WE=r.UI.Node.make((({view:e,state:t,notify:n})=>i.createElement(Gt.F.div,{className:qE},i.createElement(KE,{onEditButtonClick:n({kind:ht.i.Kind.voiceSelectionsEditButtonClick}),onDialectDropdownChange:e=>n({kind:ht.i.Kind.voiceDialectDropdownSelectionChange,dialect:e})(),onRoleDropdownChange:e=>n({kind:ht.i.Kind.voiceRoleDropdownSelectionChange,role:e})(),onSaveButtonClick:n({kind:ht.i.Kind.voiceSelectionsSaveButtonClick}),onCancelButtonClick:n({kind:ht.i.Kind.voiceSelectionsCancelButtonClick}),userName:e("userName"),isEditing:e("isEditing"),selectedRole:e("selectedRole"),selectedDialect:e("selectedDialect"),roles:e("roles"),dialects:e("dialects")}),i.createElement(Um,{style:QE},i.createElement(Gt.F.div,null,t.pipe(I.U((e=>i.createElement(i.Fragment,null,i.createElement("div",{className:YE},i.createElement("div",null,i.createElement("h1",{className:JE},e.title),i.createElement("h2",{className:XE},e.subTitle)),i.createElement(fE,{key:"Tabs",tabs:e.profiles.map((e=>({id:pE.Id.create(e.name),label:e.name}))),activeTabId:pE.Id.create(o.toNullable(e.activeProfileName)||""),onActiveTabChange:e=>n({kind:ht.i.Kind.voiceProfileTabChange,profileName:e})()})),e.profiles.map((t=>i.createElement(GE,{key:t.name,profile:t,activeProfileName:e.activeProfileName,activeTagId:e.activeTagId,onVoiceTagPopoverClose:n({kind:ht.i.Kind.voiceTagPopoverClose}),onKeepClick:n({kind:ht.i.Kind.voiceTagPopoverKeepButtonClick}),onRemoveClick:(e,t,i)=>n({kind:ht.i.Kind.voiceTagPopoverRemoveButtonClick,tagName:e,profileName:t,sectionName:i})(),onVoiceTagClick:(e,t,i)=>n({kind:ht.i.Kind.voiceTagClick,tagName:e,profileName:t,sectionName:i})()})))))))),i.createElement(dE,null),i.createElement("p",{className:e_},"You can prompt Grammarly to rewrite text in your voice."))))),qE=zt.ux.style({display:"flex",flexDirection:"column"}),QE={gap:zt.ux.rem(Dt.mh),padding:`${zt.ux.rem(Dt.qp)} ${zt.ux.rem(Dt.mh)} ${zt.ux.rem(Dt.mh)} ${zt.ux.rem(Dt.mh)}`},YE=zt.ux.style({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),JE=zt.ux.style({fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:700,margin:0}),XE=zt.ux.style({color:Qt.Z.TextBaseSubduedColor,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),margin:0}),e_=zt.ux.style({margin:0,padding:0,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.25),fontStyle:"italic",color:Lt.I.Text.Base.Subdued});var t_=n(4110);const n_=r.UI.Node.make((({view:e,notify:t})=>i.createElement(Um,{style:i_,"data-testid":e("error").pipe(I.U((e=>`error-${e.reason}`)))},i.createElement(Gt.F.div,{className:o_},e("error").pipe(I.U((e=>i.createElement(i.Fragment,null,i.createElement(fw,{className:l_,width:24,height:24}),i.createElement("span",{className:a_},e.header)))))),i.createElement(Gt.F.div,{className:s_},e("error").pipe(I.U((e=>e.text)))),i.createElement(Gt.F.Fragment,null,e("showDismissButton").pipe(I.U((e=>e?i.createElement(Zt.z,{variant:"tertiary",className:c_,name:"dismissButton",onClick:t({kind:ht.i.Kind.errorCardDismissButtonClick}),size:"small"},i.createElement(t_.o,{width:16})):null))))))),i_={gap:zt.ux.rem(Dt.x),padding:`${zt.ux.rem(Dt.qp)} ${zt.ux.rem(Dt.mh)}`},r_=r.UI.Union.asOption(n_),o_=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),marginTop:zt.ux.rem(Dt.F2),marginBottom:zt.ux.rem(Dt.F2)}),a_=zt.ux.style({fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.375),fontWeight:700,color:Lt.I.Text.Base.Default}),s_=zt.ux.style({fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),color:Lt.I.Text.Base.Subdued,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),l_=zt.ux.style((0,qt.fx)(1.5)),c_=zt.ux.style({alignSelf:"flex-end",marginTop:zt.ux.rem(Dt.x),marginBottom:zt.ux.rem(Dt.x)}),u_=r.UI.Node.make((({view:e})=>i.createElement(Um,{style:p_,"data-testid":"document-overview"},i.createElement(oh,{style:m_},"This document"),i.createElement(Gt.F.div,{className:h_},e("title")),i.createElement(Gt.F.div,{className:f_},e("summary"))))),d_=r.UI.Union.asOption(u_),m_={userSelect:"none",padding:0},p_={position:"relative",padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`,gap:zt.ux.rem(Dt.x),fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC)},h_=zt.ux.style({fontSize:zt.ux.rem(Dt.qp+Dt.yC),color:Lt.I.Text.Base.Subdued,fontWeight:600}),f_=zt.ux.style({color:Lt.I.Text.Base.Default}),g_=e=>i.createElement(Vt.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),i.createElement("path",{d:"M5.31255 7.11538H14.6876M5.31255 10H14.6876M5.00006 13.6951V16.25L8.33339 13.6951C10.5282 13.6951 14.2996 13.6951 16.2502 13.6951C16.9406 13.6951 17.5001 13.1354 17.5001 12.4451V5C17.5001 4.30964 16.9404 3.75 16.2501 3.75H3.75001C3.05965 3.75 2.5 4.30965 2.50001 5.00001L2.50005 12.4451C2.50005 13.1354 3.05969 13.6951 3.75005 13.6951H5.00006Z",fill:"none"})),v_=e=>i.createElement(Vt.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),b_="reportMenuBtnIcon",y_=(0,qt.dD)((0,qt.fx)(1.5),b_),x_=({title:e,name:t,label:n,buttonClass:r,onAction:o,onOpenChange:a,children:s})=>{const l={minWidth:zt.ux.rem(2),minHeight:zt.ux.rem(2),lineHeight:zt.ux.rem(2)};return i.createElement(Dw,{"aria-label":e,title:e,name:t,label:n,theme:{button:r,buttonStyle:{default:Object.assign({padding:0},l),icon:l}},onAction:o,onOpenChange:a},s)},k_=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:r})=>i.createElement(x_,{title:"Provide feedback",name:"reportMenu",label:i.createElement(v_,{className:zt.ux.joinClasses([b_,zt.ux.style(y_)])}),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t()}},onOpenChange:r},i.createElement(rk.ck,{key:"provideFeedback",textValue:"provideFeedback"},i.createElement(g_,null),"Share your thoughts"),i.createElement(rk.ck,{key:"reportOffensive",textValue:"reportOffensive"},i.createElement(Vt.JO.Report,null),"Report as offensive")),S_=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:r,onDismiss:o})=>i.createElement(x_,{title:"More",name:"dismissReportMenu",label:i.createElement(Vt.JO.EllipsisSmall,null),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t();case"dismissResult":return o()}},onOpenChange:r},i.createElement(rk.ck,{key:"dismissResult",textValue:"dismissResult"},i.createElement(Vt.JO.Ignore,null),"Delete"),i.createElement(rk.ck,{key:"provideFeedback",textValue:"provideFeedback"},i.createElement(g_,null),"Give feedback"),i.createElement(rk.ck,{key:"reportOffensive",textValue:"reportOffensive"},i.createElement(Vt.JO.Report,null),"Report offensive content")),w_=r.UI.Node.make((({view:e})=>i.createElement(Um,{"aria-busy":"true","data-testid":"intent-loading"},i.createElement(oh,null,e("header")),i.createElement("div",{className:C_},i.createElement(Lk,null))))),C_=zt.ux.style({height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Dt.W9),background:Du.BlueGray5,flexGrow:1,maxWidth:zt.ux.rem(22.5),position:"relative",marginBottom:zt.ux.rem(Dt.F2)}),E_=r.UI.Node.make((({view:e,notify:t})=>i.createElement(Um,{style:A_,"data-testid":"intent"},i.createElement(oh,null,e("header")),i.createElement(k_,{reportMenuButtonClassName:R_,onClickProvideFeedback:t({kind:ht.i.Kind.openFeedbackFormButtonClick,source:kp.x.Source.intentCard}),onClickReportOffensive:t({kind:ht.i.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:ht.i.Kind.reportMenuVisibilityChange,trigger:wu.uiItem(bt.e.intentCard),visible:e})()}),i.createElement(Gt.F.div,Object.assign({className:O_},$(e("text"),[...V,"person"])))))),__=r.UI.Union.make("kind",{loading:w_,loaded:E_}),I_=r.UI.Union.asOption(__),A_={position:"relative",gap:zt.ux.rem(Dt.yC)},O_=zt.ux.style({color:Lt.I.Text.Base.Default,fontStyle:"normal",fontWeight:400,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:zt.ux.rem(1.25),height:zt.ux.rem(1.25),marginRight:zt.ux.rem(Dt.yC),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${Du.BlueGray60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${Du.BlueGray60}"/></svg>`)}')`}}}}}),R_=zt.ux.style({position:"absolute",top:zt.ux.rem(Dt.qp),right:zt.ux.rem(Dt.qp)});var B_=n(31956);function M_(e,t){var n,r;const[o,a]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&a(t)}),[null===(n=e.current)||void 0===n?void 0:n.scrollWidth,null===(r=e.current)||void 0===r?void 0:r.clientWidth,t]),o}const F_=({title:e,url:t})=>{const n=i.useRef(null),r=M_(n,e);return(0,a.zG)(t,o.fold((()=>i.createElement("span",{className:T_,title:r,ref:n},e)),(t=>i.createElement(B_.d,{className:T_,title:r,ref:n,href:t},e))))},T_=zt.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),P_=r.UI.Node.make((({view:e})=>i.createElement(Um,{style:j_,"data-testid":"detected-references"},i.createElement("span",{className:U_},"Detected references"),i.createElement(Gt.F.ul,{className:z_},e("detectedReferences").pipe(I.U((e=>e.map((({title:e,iconUrl:t,url:n},r)=>i.createElement("li",{key:r,className:D_},i.createElement("img",{src:t,className:L_,alt:""}),i.createElement(F_,{title:e,url:n}))))))))))),N_=r.UI.Union.asOption(P_),j_={position:"relative",padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`,gap:0},U_=zt.ux.style({fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),color:Lt.I.Text.Base.Subdued,userSelect:"none"}),z_=zt.ux.style({fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),color:Lt.I.Text.Base.Default,margin:0,padding:0}),D_=zt.ux.style({height:zt.ux.rem(Dt.sD),display:"flex",alignItems:"center",borderRadius:zt.ux.rem(Lu.xB)}),L_=zt.ux.style({minWidth:zt.ux.rem(Dt.mh),height:zt.ux.rem(Dt.mh),marginRight:zt.ux.rem(Dt.x)}),G_=({count:e})=>i.createElement("div",{className:Z_},e),Z_=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"center",fontSize:zt.ux.rem(.75),fontStyle:"normal",fontWeight:700,lineHeight:zt.ux.rem(1.125),color:Lt.I.Text.Base.Inverse,padding:`0 ${zt.ux.rem(Dt.F2)}`,background:Qt.Z.BackgroundNeutralDefault,borderRadius:zt.ux.rem(Lu.HP),border:`1px solid ${Lt.I.Text.Base.Inverse}`}),H_=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M4 5.375 8 2l4 3.375m-8 5.25L8 14l4-3.375"})))),V_=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 3 3.176L11 2M5 14l3-3.177L11 14"})))),$_=({children:e,style:t})=>i.createElement("i",{className:zt.ux.style(K_,t),"aria-hidden":"true"},e),K_={display:"inline-flex",alignItems:"center",justifyContent:"center",width:zt.ux.rem(1),height:zt.ux.rem(1),$nest:{"& > svg":{transform:"scale(calc(var(--rem)/16))"}}},W_=({feedForm:e,onClick:t})=>i.createElement(Zt.z,{variant:"tertiary",size:"small",style:q_,onClick:t},"shortForm"===e?i.createElement(i.Fragment,null,i.createElement("span",{className:Q_},"Show more"),i.createElement($_,null,i.createElement(H_,null))):"longForm"===e?i.createElement(i.Fragment,null,i.createElement("span",{className:Q_},"Show less"),i.createElement($_,null,i.createElement(V_,null))):(0,m.L0)(e)),q_={default:{gap:zt.ux.rem(Dt.F2),padding:zt.ux.rem(Dt.F2),paddingLeft:zt.ux.rem(Dt.x)},icon:{minHeight:zt.ux.rem(1),minWidth:zt.ux.rem(1)}},Q_=zt.ux.style({fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)}),Y_=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M11 2 5 8l6 6"}))));var J_=n(8174);const X_=zt.ux.style({position:"relative"}),eI=zt.ux.style({overscrollBehavior:"contain",overflowX:"auto",scrollSnapType:"x mandatory",position:"relative",width:0,minWidth:"100%"}),tI=(zt.ux.style({scrollSnapAlign:"start"}),zt.ux.style({display:"flex",flexDirection:"row",flexWrap:"nowrap"}),{position:"absolute",top:"50%",zIndex:1,$nest:{"&.override":{transform:"translate(0,-50%)"}}}),nI=zt.ux.style({left:zt.ux.rem(Dt.x)}),iI=zt.ux.style({right:zt.ux.rem(Dt.x)}),rI=zt.ux.style({scrollbarWidth:"none","-ms-overflow-style":"none",$nest:{"&::-webkit-scrollbar":{width:0,height:0}}}),oI=({count:e=1,hideScrollbar:t=!1,children:n})=>{const{onMount:r,rect:s}=rd.P.useRectWatcher(),{ref:l,onMount:c}=rd.P.useElWatcher(),u=i.useMemo((()=>p.h.create({scroll:0,width:0,scrollWidth:0,itemAverageWidth:0})),[]);rd.P.useSubscriptionTo(i.useMemo((()=>vt.aj([l.pipe(M.oA,S.x()),s.pipe(M.oA,S.x())]).pipe(F.e(100),T.b((([t])=>{const n=t.clientWidth,i=t.scrollWidth;u.set({scroll:t.scrollLeft,width:n,scrollWidth:i,itemAverageWidth:Math.min(n,i/e)})})))),[e,l,s]));const d=i.useCallback(((e=!1)=>{(0,a.zG)(l.get(),o.map((t=>{const{scroll:n,itemAverageWidth:i}=u.get();t.scroll({top:0,left:n+(e?1:-1)*i,behavior:"smooth"})})))}),[l]);return i.createElement("div",{className:X_,ref:r},i.createElement("div",{ref:c,className:zt.ux.joinClasses([eI,t?rI:void 0]),onScroll:e=>{e.target instanceof HTMLDivElement&&u.lens("scroll").set(e.target.scrollLeft)},"data-role":"scroll"},n),i.createElement(Gt.F.Fragment,null,u.pipe(I.U((({scroll:e,width:t,scrollWidth:n})=>i.createElement(i.Fragment,null,e>0?i.createElement(Zt.z,{name:"scroll_left",title:"Scroll left","aria-label":"Scroll left",variant:"round",className:zt.ux.joinClasses([zt.ux.style(tI),nI,"override"]),onClick:()=>d(),"aria-hidden":!0,tabIndex:-1},i.createElement(Y_,null)):null,n-t-e>0?i.createElement(Zt.z,{name:"scroll_right",title:"Scroll right","aria-label":"Scroll right",variant:"round",className:zt.ux.joinClasses([zt.ux.style(tI),iI,"override"]),onClick:()=>d(!0),"aria-hidden":!0,tabIndex:-1},i.createElement(J_.M,null)):null))))))},aI=({percent:e,lensId:t})=>i.createElement("div",{className:sI(t)},i.createElement("div",{className:lI(t),style:{transform:`scaleX(${e})`}})),sI=e=>zt.ux.style({border:`1px solid ${cI[e]}`,width:zt.ux.rem(2.5),height:zt.ux.rem(.25),boxSizing:"border-box",borderRadius:zt.ux.rem(Dt.yC)}),lI=e=>zt.ux.style({backgroundColor:cI[e],border:0,width:"100%",height:"100%",transformOrigin:"left",transition:"transform 0.2s linear"}),cI={[dn.lensAllSuggestionFeedShortForm]:Lt.I.Background.Neutral.Default,[dn.lensAllSuggestionFeed]:Lt.I.Background.Neutral.Default,[dn.lensCorrectnessFeed]:Lt.I.Background.Correctness.Default,[dn.lensClarityFeed]:Lt.I.Background.Clarity.Default,[dn.lensDeliveryFeed]:Lt.I.Background.Delivery.Default,[dn.lensEngagementFeed]:Lt.I.Background.Engagement.Default,[dn.lensStyleGuideFeed]:Lt.I.Background.Neutral.Default,[dn.plagiarismFeed]:Lt.I.Background.Plagiarism.Default,[dn.writingExpertFeed]:Lt.I.Background.Brand.Default},uI=e=>zt.ux.style({display:"grid",gridTemplateColumns:Array.from({length:e}).map(((e,t)=>t>0?"1px minmax(min-content, 1fr)":"minmax(min-content, 1fr)")).join(" "),alignItems:"center"}),dI=zt.ux.style({borderTop:`1px solid ${Lt.I.Border.Base.Subdued}`,borderBottom:`1px solid ${Lt.I.Border.Base.Subdued}`}),mI=zt.ux.style({height:"100%",borderLeft:`1px solid ${Lt.I.Border.Base.Subdued}`}),pI={default:{display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.F2),padding:`${zt.ux.rem(.75)} ${zt.ux.rem(Dt.x)} ${zt.ux.rem(.5)} ${zt.ux.rem(Dt.x)}`,borderRadius:0,color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),scrollSnapAlign:"start"},hovered:{boxShadow:"none"},active:{boxShadow:"none"},selected:{boxShadow:"none",fontWeight:"bold",backgroundColor:Lt.I.Background.Base.Subdued}},hI=(0,Wd.xb)(Um),fI=r.UI.Node.make((({state:e,notify:t})=>{const{onMount:n}=(0,sd.F)(T.b(t({kind:"longFormFeedEmptyMount"})));return i.createElement(hI,{style:bI,"data-testid":"long-form-feed-empty","aria-live":"polite",mount:n},e.pipe(I.U((({content:e})=>i.createElement(i.Fragment,null,i.createElement("div",{className:yI},i.createElement("p",{className:xI},e.title),i.createElement("p",{className:kI},e.description)),i.createElement("div",{className:SI},e.illustration))))))})),gI=r.UI.Node.make((({state:e,notify:t})=>{const{onMount:n}=(0,sd.F)(T.b(t({kind:"longFormFeedSuccessMount"})));return i.createElement(hI,{style:bI,"data-testid":"long-form-feed-success","aria-live":"polite",mount:n},e.pipe(I.U((({content:e,goBackFrom:n})=>i.createElement(i.Fragment,null,i.createElement("div",{className:yI},i.createElement("p",{className:xI},e.title),i.createElement("p",{className:kI},e.description),(0,a.zG)(n,o.fold(a.gn,(e=>i.createElement(Zt.z,{variant:"secondary",style:vI,onClick:t({kind:"goBack",goBackFrom:e})},"See all suggestions"))))),i.createElement("div",{className:SI},e.illustration))))))})),vI={default:{marginTop:zt.ux.rem(Dt.x),alignSelf:"flex-start"}},bI={padding:`${zt.ux.rem(Dt.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${zt.ux.rem(Dt.mh)}`,height:"100%",boxSizing:"border-box"},yI=zt.ux.style({textAlign:"center",padding:`${zt.ux.rem(Dt.mh)} ${zt.ux.rem(Dt.mh)} 0 ${zt.ux.rem(Dt.mh)}`}),xI=zt.ux.style({margin:0,color:Qt.Z.TextBaseDefault,fontSize:zt.ux.rem(1),lineHeight:"1.5em",fontWeight:700}),kI=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),SI=zt.ux.style({width:zt.ux.rem(6),height:zt.ux.rem(6),minWidth:zt.ux.rem(6),minHeight:zt.ux.rem(6)}),wI=r.UI.Node.make((({view:e})=>i.createElement(Um,{"aria-busy":"true",style:CI,"data-testid":"long-form-feed-loading"},i.createElement("div",{className:EI},i.createElement(Lk,null),i.createElement(Gt.F.div,{className:MI},i.createElement("div",{className:FI}),e("supportsShortForm").pipe(I.U((0,z.RN)(i.createElement("div",{className:TI}),null)))),i.createElement("div",{className:PI},i.createElement("div",{className:NI}),i.createElement("div",{className:NI}),i.createElement("div",{className:NI}),i.createElement("div",{className:NI})),i.createElement("div",{className:jI},i.createElement("div",{className:UI}),i.createElement("div",{className:zI})),i.createElement("div",{className:DI(!0)}),i.createElement("div",{className:DI(!1)}),i.createElement("div",{className:LI},i.createElement("div",{className:GI}),i.createElement("div",{className:ZI}))),i.createElement("div",{className:_I},i.createElement("div",{className:II},i.createElement(Lk,null),i.createElement("div",{className:AI}),i.createElement("div",{className:OI}),i.createElement("div",{className:RI})),i.createElement("div",{className:BI}),i.createElement("div",{className:II},i.createElement(Lk,null),i.createElement("div",{className:AI}),i.createElement("div",{className:OI}),i.createElement("div",{className:RI})),i.createElement("div",{className:BI}),i.createElement("div",{className:II},i.createElement(Lk,null),i.createElement("div",{className:AI}),i.createElement("div",{className:OI}),i.createElement("div",{className:RI})),i.createElement("div",{className:BI}),i.createElement("div",{className:II},i.createElement(Lk,null),i.createElement("div",{className:AI}),i.createElement("div",{className:OI}),i.createElement("div",{className:RI})))))),CI={padding:0},EI=zt.ux.style({display:"flex",flexDirection:"column",position:"relative",padding:`${zt.ux.rem(Dt.mh)}`,borderBottom:`1px solid ${Lt.I.Border.Base.Subdued}`}),_I=zt.ux.style({display:"flex",flexDirection:"column",margin:zt.ux.rem(1)}),II=zt.ux.style({display:"flex",alignItems:"center",position:"relative",height:zt.ux.rem(2.25)}),AI=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(.5),borderRadius:"50%",background:Du.BlueGray5,marginRight:zt.ux.rem(1.25)}),OI=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(3.875),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5,marginRight:zt.ux.rem(Dt.mh)}),RI=zt.ux.style({height:zt.ux.rem(.5),width:zt.ux.rem(7.875),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),BI=zt.ux.style({margin:`${zt.ux.rem(.5)} ${zt.ux.rem(1)}`,borderBottom:`1px solid ${Lt.I.Border.Base.Subdued}`}),MI=zt.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:zt.ux.rem(Dt.x),alignItems:"center"}),FI=zt.ux.style({width:zt.ux.rem(11.875),height:zt.ux.rem(1),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),TI=zt.ux.style({flex:1,maxWidth:zt.ux.rem(3.5),height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),PI=zt.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:zt.ux.rem(11.5*Dt.F2)}),NI=zt.ux.style({width:zt.ux.rem(3.5625),height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5,margin:`0 ${zt.ux.rem(9.5*Dt.W9)}`}),jI=zt.ux.style({display:"flex",flexDirection:"row",gap:zt.ux.rem(Dt.F2),alignItems:"center",marginTop:zt.ux.rem(8.5*Dt.F2)}),UI=zt.ux.style({width:zt.ux.rem(1.25),height:zt.ux.rem(1.25),borderRadius:"50%",background:Du.BlueGray5}),zI=zt.ux.style({flex:1,height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),DI=e=>zt.ux.style({height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5,marginTop:zt.ux.rem(e?2.5*Dt.F2:Dt.mh)}),LI=zt.ux.style({display:"flex",flexDirection:"row",gap:zt.ux.rem(Dt.mh),alignItems:"center",marginTop:zt.ux.rem(Dt.mh+Dt.yC)}),GI=zt.ux.style({width:zt.ux.rem(4.125),height:zt.ux.rem(2),borderRadius:zt.ux.rem(Lu.xB),background:Du.BlueGray5}),ZI=zt.ux.style({width:zt.ux.rem(3.125),height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),HI=(0,Wd.xb)(G_),VI=(0,Wd.xb)((({activeLensId:e,lenses:t,className:n,onToggleLens:r})=>t.length>0?i.createElement("section",{className:zt.ux.joinClasses([dI,n])},i.createElement(oI,{count:t.length,hideScrollbar:!0},i.createElement("div",{className:uI(t.length)},t.map(((t,n)=>i.createElement(i.Fragment,{key:t.lensId},n>0?i.createElement("div",{className:mI,role:"separator"}):null,i.createElement(Zt.z,{variant:"tertiary",contained:!0,size:"small",name:`${t.label}-button`,style:pI,active:t.lensId===e,onClick:()=>r(t.lensId)},i.createElement(aI,{percent:t.percent,lensId:t.lensId}),i.createElement("span",null,t.label)))))))):null)),$I=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:r}=(0,sd.F)((0,a.ls)(T.b(n({kind:"longFormFeedMount"})),od.x(Wc.notifyFeedUnmount)));return i.createElement(Um,{"data-testid":"long-form-feed",style:{padding:0,display:"grid",gridTemplateRows:"auto auto 1fr",height:"100%"},mount:r,"aria-live":"polite"},i.createElement(oh,{style:Object.assign(Object.assign({},WI),{padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`,paddingTop:zt.ux.rem(Dt.mh)})},i.createElement("div",{className:qI},"Review suggestions",i.createElement(HI,{count:t("suggestionCount")})),t("canCollapseToShortForm").pipe(I.U((0,z.RN)(i.createElement(W_,{feedForm:"longForm",onClick:n({kind:"toggleShortFormFeed"})}),null)))),i.createElement(VI,{lenses:t("lenses"),activeLensId:t("feedId"),onToggleLens:e=>n({kind:"toggleLens",lensId:e})(),className:KI}),i.createElement(jd,null,e.lensView))})),KI=zt.ux.style({margin:`${zt.ux.rem(Dt.x)} 0`}),WI={display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),justifyContent:"space-between"},qI=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)}),QI=r.UI.Group.make({cardList:Ok}),YI=r.UI.Union.make("kind",{successState:gI,cardList:QI}),JI=r.UI.Knot.make($I,{lensView:YI}),XI=r.UI.Union.make("kind",{loadingState:wI,emptyState:fI,successState:gI,nonEmptyState:JI});const eA=[{emptyState:{title:"Rooting for you.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 66 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#C6CBDE",d:"M33.4 64c9.4 0 17.02-1.45 17.02-3.24 0-1.79-7.62-3.24-17.01-3.24-9.4 0-17.02 1.45-17.02 3.24 0 1.79 7.62 3.24 17.02 3.24Z"}),i.createElement("path",{fill:"#F6DF6C",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M36.65 61.36H28.8c-6.03 0-10.92-4.43-10.92-9.89V40.5c0-.4 30.22-.4 30.22 0v10.5c0 5.72-5.13 10.37-11.46 10.37Z"}),i.createElement("path",{fill:"#C7EEFB",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M33 44.13c8.35 0 15.11-1.56 15.11-3.47 0-1.92-6.76-3.48-15.1-3.48-8.36 0-15.12 1.56-15.12 3.48 0 1.91 6.76 3.47 15.11 3.47Z"}),i.createElement("path",{fill:"#27282E",d:"M45.56 42.15c-2.5.96-7.19 1.6-12.56 1.6s-10.06-.64-12.56-1.6c.7-1.38 6.05-2.45 12.56-2.45 6.5 0 11.87 1.07 12.56 2.45Z"}),i.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m22.87 33.14 2.26-.62-1.98-1.25M25.35 27.2l2.18.85-.83-2.18M22.93 37.44l2.33.2-1.71 1.59M43.7 33.14l-2.26-.62 1.98-1.25M41.22 27.2l-2.17.85.82-2.18M43.64 37.44l-2.33.2 1.71 1.59"}),i.createElement("path",{fill:"#16AC9A",stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M41.34 31.15c-.97-3.31-4.13-5.63-8.06-5.63v0h0v0c-3.93 0-7.09 2.32-8.06 5.63-1.39 4.76.83 9.86 1.86 10.8 1.76.38 3.05.69 6.2.69 3.13 0 4.98-.4 6.2-.7 1.04-.93 3.25-6.03 1.86-10.8h0Z"}),i.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M34.7 42.44c.7-1.36 2.15-4.86 2.19-8.36.03-3.36-1.46-6.84-3.38-8.46M39.03 35.02l-2.14-.94 2.14-.95"}),i.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m38.56 30.08-2.33-.14 1.68-1.63M38.56 38.46l-2.33.2 1.71 1.58M31.87 42.44a20.66 20.66 0 0 1-2.2-8.36c-.03-3.4 1.5-6.91 3.45-8.52"}),i.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m27.54 35.02 2.14-.94-2.14-.95M28 30.08l2.33-.14-1.67-1.63M28 38.46l2.33.2-1.71 1.58"}),i.createElement("path",{fill:"#fff",stroke:"#27282E",strokeMiterlimit:"10",d:"M6.9 54.28c-.07 0-.12-.06-.12-.14.11-4.3-1.36-5.85-5.66-5.97-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.3.11 5.86-1.36 5.98-5.66 0-.07.06-.12.14-.12.07 0 .12.06.12.13-.11 4.3 1.36 5.86 5.66 5.97.07 0 .12.06.12.13s-.06.12-.13.12c-4.3-.1-5.86 1.37-5.98 5.66-.01.09-.06.14-.13.14ZM59.17 37.27c-.07 0-.11-.06-.11-.13.1-4.01-1.28-5.47-5.29-5.58-.07 0-.11-.06-.11-.12 0-.07.06-.12.12-.12 4.01.1 5.47-1.27 5.58-5.28 0-.07.06-.12.13-.12s.11.06.11.13c-.1 4.01 1.27 5.47 5.29 5.57.06 0 .11.05.11.12 0 .07-.06.12-.13.12-4-.1-5.46 1.27-5.58 5.28 0 .08-.05.13-.12.13ZM46.14 22.68c-.1 0-.16-.08-.16-.18.14-5.73-1.82-7.8-7.55-7.97-.1 0-.16-.08-.16-.18 0-.1.08-.16.17-.16 5.74.15 7.81-1.82 7.98-7.55 0-.1.08-.16.17-.16.1 0 .17.08.17.18-.15 5.73 1.82 7.8 7.55 7.95.1 0 .16.09.16.18 0 .1-.08.17-.18.17-5.73-.15-7.8 1.81-7.97 7.54-.02.12-.08.18-.18.18Z"}))),null)},successState:{title:"You're on point!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessA_a)"},i.createElement("path",{fill:"#C6CBDE",d:"M32 64c9.28 0 16.8-1.43 16.8-3.2 0-1.77-7.52-3.2-16.8-3.2-9.28 0-16.8 1.43-16.8 3.2 0 1.77 7.52 3.2 16.8 3.2Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M44.08 7.6h-3.24L43 5.2M42.93 36.13l-2.59-1.95 3.2-.6M46.3 17.13l-3.13-.84 2.73-1.75M45.14 26.65l-2.73-1.74 3.13-.85M19.12 7.6h3.24L20.2 5.2M20.27 36.13l2.59-1.95-3.19-.6M16.9 17.13l3.13-.84-2.73-1.75M18.06 26.65l2.73-1.74-3.13-.85"}),i.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 61.4h-7.73c-5.96 0-10.8-4.38-10.8-9.77V40.78c0-.4 29.86-.4 29.86 0v10.36c0 5.66-5.07 10.25-11.33 10.25Z"}),i.createElement("path",{fill:"#C7EEFB",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31.6 44.38c8.24 0 14.93-1.54 14.93-3.43 0-1.9-6.69-3.43-14.93-3.43-8.24 0-14.92 1.53-14.92 3.43 0 1.9 6.68 3.43 14.92 3.43Z"}),i.createElement("path",{fill:"#0E101A",d:"M44 42.43c-2.47.94-7.1 1.57-12.4 1.57-5.3 0-9.93-.63-12.4-1.57.68-1.37 5.98-2.43 12.4-2.43s11.72 1.06 12.4 2.43Z"}),i.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.6 2.41v.01h0c-22.5 0-6.52 39.78-6.52 39.78s2.2.86 6.52.86c4.32 0 6.52-.86 6.52-.86S54.1 2.41 31.6 2.41h0Z"}),i.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M12 7.25s2.8-1.38 5.22-.87c-1.36-2.06-1.11-5.1-1.11-5.1 5.32 2.17 4.15 7.14 4.15 7.14s-5.76 2.26-3.56.81A6.82 6.82 0 0 1 12 7.25Z"}),i.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M13.79 4.5s2.6-.32 4.67 1.02A7.77 7.77 0 0 1 19.17.8c4.17 3.95 1.56 7.99 1.56 7.99s-2.34 4.21-7.8 2.4c0 0 1.6-2.38 4.18-2.93A6.92 6.92 0 0 1 13.8 4.5Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M33.26 42.98s8.41-38.16-1.68-40.57"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m39.15 28.43-2.81-1.6 3.08-1M37.54 37.9l-2.56-2 3.2-.54M39.48 9.37l-3.2-.56 2.57-1.98M40.03 18.9l-3.11-.91 2.77-1.7M29.94 42.98S21.53 4.82 31.63 2.41"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m24.05 28.43 2.82-1.6-3.09-1M25.66 37.9l2.56-2-3.2-.54M23.72 9.37l3.2-.56-2.57-1.98M23.17 18.9l3.11-.91-2.77-1.7"}),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M56.62 39.2c-.08 0-.13-.06-.13-.14.12-4.53-1.43-6.17-5.96-6.3-.08 0-.13-.06-.13-.14 0-.08.06-.13.14-.13 4.53.12 6.17-1.43 6.3-5.96 0-.08.06-.13.14-.13.08 0 .13.06.13.14-.12 4.53 1.43 6.17 5.96 6.29.08 0 .13.06.13.14 0 .07-.06.12-.14.12-4.53-.11-6.17 1.44-6.3 5.97-.01.09-.06.14-.14.14ZM6.24 24c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessA_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"You got this.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",strokeLinejoin:"round",d:"M12.8 46.4 32.8.8l20 45.6V62h-40V46.4Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m12.8 46.4 20-13.2 20 13.2"}),i.createElement("path",{fill:"#0E101A",fillRule:"evenodd",d:"M32.4 4.76V1.6h.8v3.16h-.8Zm0 6.31V7.92h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31V39.5h.8v3.16h-.8Zm0 6.32V45.8h.8v3.16h-.8Zm0 6.31v-3.15h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Z",clipRule:"evenodd"}),i.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M10 33.6C5.2 34.8-2.4 42 2.8 48.8c5.2 6.8 16.8 4.5 21.2.89"}),i.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M10.4 33.05c.21.08.31.3.23.51l-1.3 3.36a.4.4 0 0 1-.75-.3l1.16-2.97-2.98-1.17a.4.4 0 0 1 .29-.74l3.35 1.3Z",clipRule:"evenodd"}))),null)},successState:{title:"Well, this is shaping up!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessB_a)"},i.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"m18 34-3.4-10.67L59.41 1.49 18 34Z"}),i.createElement("path",{fill:"#D7F7F0",stroke:"#0E101A",strokeLinejoin:"round",d:"M24.25 24.7 60.8.8l-20.23 40-16.32-16.1ZM2.4 19.42 60.8.8 14.6 23.33l-12.2-3.9Z"}),i.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",d:"m28.62 29.08-4.37-4.37L18 34l10.62-4.92Z"}),i.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M25.4 52c-.09 0-.15-.07-.15-.16.13-5.1-1.61-6.94-6.7-7.08-.1 0-.15-.08-.15-.16 0-.09.07-.15.16-.15 5.1.13 6.94-1.61 7.08-6.7 0-.1.08-.15.16-.15.09 0 .15.07.15.16-.13 5.1 1.61 6.94 6.7 7.07.1 0 .15.07.15.16 0 .08-.07.14-.16.14-5.1-.13-6.94 1.62-7.08 6.71-.02.1-.08.16-.16.16ZM57.44 39.2c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12ZM11.45 11.2c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11Z"}),i.createElement("path",{stroke:"#000",strokeDasharray:"4 5",strokeLinecap:"square",d:"M10.4 31.2c-4.8 2-14.64 14.4-6 23.2 8.64 8.8 44.8-2 58 8.8"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessB_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"Nothing to see yet.",description:"Suggestions will appear here.",illustration:i.createElement(Gk,null)},successState:{title:"Look at that!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M1.78 43.26a1.94 1.94 0 0 0 1.5 2.9l35.87 3.6-15.29 7.45a1.43 1.43 0 0 0 1 2.65l30.56-8.46 7.78.79V41.83l-59.74.45c-.7 0-1.33.38-1.68.98Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m3.28 46.15.05-.5-.05.5Zm-1.5-2.89-.43-.24.43.24Zm37.37 6.5.22.45 1.59-.77-1.76-.17-.05.5Zm-15.29 7.45.22.45-.22-.45Zm1 2.65-.13-.48.14.48Zm30.56-8.46.05-.5h-.09l-.1.02.14.48Zm7.78.79-.05.5.55.05v-.55h-.5Zm0-10.36h.5v-.5h-.5v.5Zm-59.74.45v-.5.5Zm-.13 3.37a1.44 1.44 0 0 1-1.11-2.14l-.87-.5a2.44 2.44 0 0 0 1.88 3.64l.1-1Zm35.87 3.62L3.33 45.65l-.1 1 35.87 3.61.1-1Zm-15.12 8.39 15.3-7.45-.45-.9-15.29 7.45.44.9Zm-.52.83c0-.36.2-.68.52-.83l-.44-.9c-.66.32-1.08 1-1.08 1.73h1Zm1.17.9a.93.93 0 0 1-1.17-.9h-1c0 1.27 1.21 2.2 2.44 1.85l-.27-.96Zm30.56-8.47-30.56 8.46.27.96 30.56-8.46-.27-.96Zm7.96.77-7.78-.78-.1.99 7.78.78.1-1Zm-.55-9.86v10.36h1V41.83h-1Zm-59.24.95 59.74-.45v-1l-59.74.45v1Zm-1.24.73c.25-.45.73-.73 1.24-.73v-1c-.88 0-1.68.48-2.11 1.24l.87.49Z"}),i.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M19.9 46.88a3.14 3.14 0 1 1 .97 5.86 3.67 3.67 0 0 1-7.05-.92 3.3 3.3 0 0 1-4.75-2.94 3.3 3.3 0 0 1 5.2-2.75 2.93 2.93 0 0 1 5.63.75Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m19.9 46.88-.5.06a.5.5 0 0 0 .74.38l-.24-.44Zm1.44-.36v-.5.5Zm3.17 3.1.5-.01h-.5Zm-3.1 3.17.01.5v-.5Zm-.54-.04.08-.5a.5.5 0 0 0-.54.3l.46.2Zm-3.36 2.28v.5-.5Zm-3.69-3.21.5-.06a.5.5 0 0 0-.72-.4l.22.46Zm-1.4.33-.01-.5v.5Zm-3.35-3.27h.5-.5Zm3.26-3.35v-.5.5Zm1.94.6-.28.41a.5.5 0 0 0 .75-.22l-.47-.19Zm2.69-1.85v.5-.5Zm3.18 3.04c.36-.19.77-.3 1.2-.3v-1c-.6 0-1.18.16-1.67.42l.47.88Zm1.2-.3a2.64 2.64 0 0 1 2.67 2.6l1-.01a3.64 3.64 0 0 0-3.68-3.6l.01 1Zm2.67 2.6a2.64 2.64 0 0 1-2.6 2.67l.01 1c2.01-.03 3.62-1.68 3.6-3.68h-1Zm-2.6 2.67c-.16 0-.31-.01-.46-.04l-.16.99c.2.03.42.05.63.05l-.01-1Zm-1 .27a3.17 3.17 0 0 1-2.9 1.97v1a4.17 4.17 0 0 0 3.82-2.6l-.92-.37Zm-2.9 1.97c-1.64.02-3-1.2-3.2-2.77l-.98.12a4.17 4.17 0 0 0 4.19 3.65l-.01-1Zm-3.9-3.16a2.8 2.8 0 0 1-1.2.28l.01 1a3.8 3.8 0 0 0 1.62-.38l-.44-.9Zm-1.2.28a2.8 2.8 0 0 1-2.84-2.77h-1a3.8 3.8 0 0 0 3.85 3.77l-.01-1Zm-2.84-2.77a2.8 2.8 0 0 1 2.77-2.85l-.01-1a3.8 3.8 0 0 0-3.76 3.86l1-.01Zm2.77-2.85c.61 0 1.18.18 1.65.51l.57-.82a3.8 3.8 0 0 0-2.23-.69l.01 1Zm2.4.29a2.43 2.43 0 0 1 2.23-1.54l-.02-1a3.43 3.43 0 0 0-3.14 2.17l.93.37Zm2.23-1.54c1.25-.02 2.3.93 2.44 2.16l.99-.11a3.42 3.42 0 0 0-3.45-3.05l.02 1Z"}),i.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M56 53.2a3.6 3.6 0 0 1-2.36 3.38 3.6 3.6 0 1 1-5.84 4.2 3.6 3.6 0 0 1-6.96-.62 3.6 3.6 0 1 1 .05-5.9 4.8 4.8 0 0 1 8.16-2.4A3.6 3.6 0 0 1 56 53.2Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m53.64 56.58-.18-.47a.5.5 0 0 0-.22.78l.4-.3Zm-5.84 4.2.42-.27a.5.5 0 0 0-.9.11l.48.17Zm-6.96-.62.5-.07a.5.5 0 0 0-.78-.34l.28.41Zm.05-5.9-.29.42a.5.5 0 0 0 .78-.31l-.49-.1Zm8.16-2.4-.36.35a.5.5 0 0 0 .83-.16l-.47-.18Zm4.76 5.2a4.1 4.1 0 0 0 2.69-3.86h-1a3.1 3.1 0 0 1-2.04 2.91l.35.94Zm1.09 1.74c0-.95-.33-1.83-.87-2.53l-.79.62c.41.53.66 1.19.66 1.91h1Zm-4.1 4.1a4.1 4.1 0 0 0 4.1-4.1h-1a3.1 3.1 0 0 1-3.1 3.1v1Zm-3.42-1.83a4.1 4.1 0 0 0 3.42 1.83v-1a3.1 3.1 0 0 1-2.58-1.39l-.84.56Zm-.05-.45a3.1 3.1 0 0 1-2.93 2.08v1a4.1 4.1 0 0 0 3.87-2.75l-.94-.33ZM44.4 62.7a3.1 3.1 0 0 1-3.06-2.61l-.99.15a4.1 4.1 0 0 0 4.05 3.46v-1Zm-5.6-1.4c.86 0 1.67-.27 2.33-.72l-.57-.83c-.5.35-1.1.55-1.76.55v1Zm-4.1-4.1a4.1 4.1 0 0 0 4.1 4.1v-1a3.1 3.1 0 0 1-3.1-3.1h-1Zm4.1-4.1a4.1 4.1 0 0 0-4.1 4.1h1a3.1 3.1 0 0 1 3.1-3.1v-1Zm2.38.76a4.08 4.08 0 0 0-2.38-.76v1c.67 0 1.3.21 1.8.58l.58-.82Zm4.42-3.96a5.3 5.3 0 0 0-5.2 4.27l.98.2a4.3 4.3 0 0 1 4.22-3.47v-1Zm3.81 1.62a5.29 5.29 0 0 0-3.81-1.62v1c1.22 0 2.31.5 3.1 1.31l.71-.69Zm2.99-2.42a4.1 4.1 0 0 0-3.81 2.58l.93.37a3.1 3.1 0 0 1 2.88-1.95v-1Zm4.1 4.1a4.1 4.1 0 0 0-4.1-4.1v1a3.1 3.1 0 0 1 3.1 3.1h1Z"}),i.createElement("path",{fill:"url(#SuccessC_a)",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M25.88 3.04a7.45 7.45 0 0 0-12.77 5.2v13.8c0 7.54 6.84 13.23 14.25 11.86l15.29-2.83 4.37 4.37H57.6L25.88 3.04Z"}),i.createElement("path",{fill:"url(#SuccessC_b)",fillRule:"evenodd",d:"M13.1 16.86v5.16c0 7.54 6.87 13.23 14.28 11.83l.45-.08c.44-.73.68-1.6.66-2.64a9.05 9.05 0 0 0-2.66-6.23l-5.92-5.92a7.65 7.65 0 0 0-6.8-2.12Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"M13.1 16.86h-.5c0-.2.13-.37.3-.45l.2.45Zm14.28 17 .1.48-.1-.49Zm.45-.1.43.27a.5.5 0 0 1-.34.23l-.1-.5Zm.66-2.63h.5-.5Zm-2.66-6.23-.36.35.36-.35Zm-5.92-5.92.36-.35-.36.35Zm-6.8-2.12-.2-.45a.5.5 0 0 1 .11-.04l.09.5Zm.5 0v5.16h-1v-5.16h1Zm0 5.16c0 7.23 6.57 12.68 13.68 11.34l.18.98a12.54 12.54 0 0 1-14.86-12.32h1Zm13.68 11.34.45-.08.18.98-.45.08-.18-.98Zm.11.15c.39-.64.6-1.42.59-2.37l1-.02a5.3 5.3 0 0 1-.73 2.9l-.86-.51Zm.59-2.37a8.55 8.55 0 0 0-2.52-5.89l.71-.7a9.55 9.55 0 0 1 2.8 6.57l-1 .02Zm-2.52-5.89-5.91-5.92.7-.7 5.92 5.91-.7.71Zm-5.91-5.92a7.15 7.15 0 0 0-6.36-1.98l-.18-.98a8.15 8.15 0 0 1 7.25 2.26l-.71.7Zm-6.25-2.01-.4-.91.4.91Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M23.86 41.85 28 33.62M29.96 41.85l4.88-9.35M24.41 13.1c0 7.65 7.19 13.26 14.6 11.4l5.83-1.82"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m13.11 6.93-5.84 3.72 5.84 3.71V6.93Z"}),i.createElement("circle",{cx:"1.09",cy:"1.09",r:"1.09",fill:"#0E101A",transform:"matrix(-1 0 0 1 19.67 6.27)"}),i.createElement("defs",null,i.createElement("radialGradient",{id:"SuccessC_b",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(8 -9 8 7 13.6 32.4)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#F3F8E5"}),i.createElement("stop",{offset:"1",stopColor:"#D7E8A9"})),i.createElement("linearGradient",{id:"SuccessC_a",x1:"16.14",x2:"55.97",y1:".8",y2:"36.57",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#D7E8A9"}),i.createElement("stop",{offset:".38",stopColor:"#87E8D1"}),i.createElement("stop",{offset:".89",stopColor:"#79A8F2"}))))),null)}},{emptyState:{title:"The first word is the hardest.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 79 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#C6CBDE",d:"M28.4 63.2c8.62 0 15.6-1.8 15.6-4s-6.98-4-15.6-4-15.6 1.8-15.6 4 6.98 4 15.6 4Z"}),i.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.19 56.6a.58.58 0 0 0 0-.25v-3.53h-2.67c-2.3-.84-5.78 0-9.72 0-3.94 0-7.45-.86-9.72 0H16.4v4.7c.43 1.9 5.83 3.4 12.4 3.4s11.95-1.5 12.39-3.4v-.93Z"}),i.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8 56.25c6.85 0 12.4-1.63 12.4-3.64 0-2-5.55-3.64-12.4-3.64-6.85 0-12.4 1.63-12.4 3.64 0 2.01 5.55 3.64 12.4 3.64Z"}),i.createElement("path",{fill:"#8ECBDE",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),i.createElement("path",{fill:"#99C2FF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.1 47.22V44.4h-2.01c-1.7-.63-4.34 0-7.29 0s-5.59-.65-7.3 0H19.5v2.94h.02c.32 1.43 4.35 2.55 9.28 2.55 4.92 0 8.95-1.12 9.27-2.55l.03-.1Z"}),i.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M28.8 46.97c5.14 0 9.3-1.22 9.3-2.73s-4.16-2.74-9.3-2.74c-5.14 0-9.3 1.23-9.3 2.74 0 1.5 4.16 2.73 9.3 2.73Z"}),i.createElement("path",{fill:"#0E101A",d:"M28.8 45.64c3.85 0 6.97-.66 6.97-1.48s-3.12-1.48-6.97-1.48c-3.85 0-6.97.66-6.97 1.48s3.12 1.48 6.97 1.48Z"}),i.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M65.02 4.06c-1.83.69-3.5 1.34-5.03 2l-3.54 5.07.7-3.8c-7.41 3.5-11.69 7.17-17.58 13.7-5.5 6.11-6.19 14.68-6.19 14.68l10.55-2.27-2.86-1.36 4.46.1a159.72 159.72 0 0 1 17.7-13.15l-4.18-1.93 7.18.04 4.55-2.75L77.83 5l-12.81-.94Z"}),i.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M67.85 8.92s-29.05 9.2-40.25 36h2c3.52-7.49 12.8-24.4 38.25-36Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m46.5 14.03-.83 4.67M59.58 21.57l-5.11-1.43M50.56 28.2l-5.11-1.45M39.6 20.91l-.71 4.2"}))),null)},successState:{title:"You did it!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.56 10.36h34.93L43.53 46.6H8.59l15.97-36.24Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M19.37 34.76c1.06-.2 2.53-.27 3.52-.82.64-.36.79.58 1.16.82 1.14.77 2.28-.09 3.26-.74.95-.63 1.14-.56 1.8.26.89 1.09 2.87.23 3.97-.03.38-.1.8-.17 1.13.06.68.49 1.48.63 2.28.75 1.15.19 2.26.29 3.42.3.67.01.83.26 1.35.52 1.09.54 2.8-.15 3.9-.37M22.4 27.57c1.54-.08 3.24.04 4.58-.82.2-.13.46-.25.69-.35.12-.05.6.92.83 1.02.57.26 1.27.19 1.88.04.57-.15 1.36-.78 1.89-.33.6.52.71.78 1.57.6.85-.2 1.31-.3 2.07-.04a6.3 6.3 0 0 0 3.73.26c.41-.09 4.57-.66 4.77-.26M24.01 20.46c1.95-.4 3.92-.75 5.81-1.4.24-.09.45-.14.7-.14.29 0 .34.29.48.52.57.95 1.56.59 2.45.56.85-.03 1.6.16 2.47.05.4-.05 1.44-.49 1.82-.31.22.1.3.4.52.53.64.38.91.44 1.65.2.58-.2 1.11.07 1.71-.3.14-.1.64-.61.7-.27.08.43.14.75.56.88 1.43.46 2.92-.5 4.33-.54"}),i.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M14.77 9.5c0 1.19.96 2.14 2.14 2.14h5.14V7.37H16.9c-1.18 0-2.14.95-2.14 2.14Z"}),i.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M19.74 9.5c0-2.6 2.1-4.7 4.7-4.7h31.28v9.41H24.45a4.7 4.7 0 0 1-4.7-4.7Z"}),i.createElement("circle",{cx:"56.15",cy:"9.51",r:"4.71",fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"}),i.createElement("path",{fill:"#F9C7C7",fillRule:"evenodd",d:"M56.54 7.37a2.14 2.14 0 1 0 0 4.27h4.52a2.14 2.14 0 0 0 0-4.27h-4.52Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#1F243C",d:"M54.9 9.5c0-.9.73-1.63 1.64-1.63v-1A2.64 2.64 0 0 0 53.9 9.5h1Zm1.64 1.64c-.9 0-1.64-.73-1.64-1.63h-1a2.64 2.64 0 0 0 2.64 2.63v-1Zm4.52 0h-4.52v1h4.52v-1Zm0 0v1-1Zm1.64-1.63c0 .9-.73 1.63-1.64 1.63v1a2.64 2.64 0 0 0 2.64-2.63h-1Zm-1.64-1.64c.9 0 1.64.73 1.64 1.64h1a2.64 2.64 0 0 0-2.64-2.64v1Zm0 0v-1 1Zm-4.52 0h4.52v-1h-4.52v1Z"}),i.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 45.5c0 1.19.96 2.14 2.14 2.14h5.13v-4.27H2.94c-1.18 0-2.14.95-2.14 2.14Z"}),i.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M5.77 45.5c0-2.6 2.1-4.7 4.7-4.7h30.47v9.41H10.47a4.7 4.7 0 0 1-4.7-4.7Z"}),i.createElement("path",{fill:"#79A8F2",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.27 48.55h8.66v14.37l-4.35-1.7-4.31 1.7V48.55Z"}),i.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"}),i.createElement("mask",{id:"SuccessD_a",width:"23",height:"24",x:"34",y:"32",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M54.6 49.2c-.55.96-1.74 1.42-2.51 2.16-.81.74-1.4 1.87-2.36 2.35-.99.47-2.18.14-3.25.27-1.05.14-2.16.75-3.23.53-1.02-.2-1.77-1.17-2.73-1.72-.92-.53-2.16-.71-2.84-1.5-.71-.8-.74-2.07-1.16-3.06-.42-1-1.3-1.86-1.4-2.95-.1-1.07.62-2.15.87-3.22.22-1.05.05-2.3.6-3.26.56-.96 1.75-1.42 2.52-2.16.81-.74 1.4-1.87 2.36-2.35.99-.47 2.18-.14 3.25-.27 1.05-.14 2.16-.75 3.23-.53 1.02.2 1.77 1.17 2.73 1.72.92.54 2.16.71 2.84 1.5.71.8.74 2.07 1.16 3.06.43 1 1.3 1.86 1.4 2.95.1 1.07-.62 2.15-.87 3.22-.22 1.05-.05 2.3-.6 3.26Z"})),i.createElement("g",{mask:"url(#SuccessD_a)"},i.createElement("path",{fill:"#FEFAE9",d:"m52.26 29.95 2.49 2.5-19.9 19.9-2.5-2.5zM60.33 37.48l-4.35-4.34-19.9 19.9 4.35 4.35z"}),i.createElement("path",{stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"})))),null)}},{emptyState:{title:"Start writing to make the magic happen.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 65",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyE_a)"},i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.87 26.1c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM10.68 28.5c-.06 0-.1-.04-.1-.1.09-3.11-.98-4.24-4.1-4.33-.04 0-.08-.04-.08-.1 0-.05.04-.08.1-.08 3.11.08 4.24-.99 4.33-4.1 0-.05.04-.09.1-.09.05 0 .08.04.08.1-.08 3.11.99 4.24 4.1 4.32.05 0 .09.04.09.1 0 .05-.04.08-.1.08-3.11-.08-4.24.99-4.33 4.1 0 .06-.04.1-.1.1ZM35.84 12.5c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}),i.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M2.19 6.8a2.53 2.53 0 1 1 2.74-4.24l30.2 19.54-2.74 4.24L2.19 6.81Z"}),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.3 21.1a2.52 2.52 0 1 1 2.74-4.23l8.75 5.65-2.74 4.24-8.75-5.66Z"}),i.createElement("circle",{cx:"34.41",cy:"24.67",r:"2.55",fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",transform:"rotate(-57 34.4 24.67)"}),i.createElement("path",{fill:"#C6CBDE",d:"M32 64.5c10.6 0 19.2-1.61 19.2-3.6s-8.6-3.6-19.2-3.6-19.2 1.61-19.2 3.6 8.6 3.6 19.2 3.6Z"}),i.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M42.84 34.42H21.16l-3.23 23.34c-.2 1.49.5 2.9 1.94 3.3 2.13.6 6 1.27 12.62 1.27 6.77 0 10.35-.7 12.17-1.3 1.17-.4 1.64-1.56 1.47-2.78l-3.29-23.83Z"}),i.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m43.74 41.35-.9-6.93H21.16l-.9 6.93h23.48Z"}),i.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M50.08 33.3H13.92a1.12 1.12 0 0 0 0 2.24h36.16a1.12 1.12 0 1 0 0-2.24Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyE_a"},i.createElement("path",{fill:"#fff",d:"M0 .5h64v64H0z"}))))),null)},successState:{title:"Poof!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessE_a)"},i.createElement("path",{fill:"#C6CBDE",d:"M32 64c11.49 0 20.8-1.8 20.8-4s-9.31-4-20.8-4-20.8 1.8-20.8 4 9.31 4 20.8 4Z"}),i.createElement("path",{fill:"#F28C8C",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),i.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M37.12 30.94a.95.95 0 0 1-.6-1.21c1.12-3.6 5.26-16.7 6.53-19.63 2.04-4.62 4.69-5.75 5.7-5.32 1 .46 1.97 3.16-.07 7.79-1.28 2.89-8.55 14.94-10.37 17.95-.25.4-.73.58-1.19.42Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m32.68 31.55-4.56 2.04s-.58-.97-1.46-2.55a348.24 348.24 0 0 1-5.63-10.29 1.31 1.31 0 0 1 .33-1.61 6.2 6.2 0 0 1 9.13 1.25 285.72 285.72 0 0 1 2.19 11.16Z"}),i.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M44.05 31.22H19.95l-3.6 25.59c-.22 1.5.49 2.93 1.95 3.35 2.31.66 6.65 1.44 14.25 1.44 7.73 0 11.71-.8 13.68-1.48 1.18-.4 1.67-1.58 1.5-2.82l-3.68-26.08Z"}),i.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m45.04 38.76-1-7.54H19.96l-1 7.54h26.1Z"}),i.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M51.58 30H12.42a1.22 1.22 0 0 0 0 2.44h39.16a1.22 1.22 0 0 0 0-2.44Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.49 20.42c-1 3.4-2.07 6.72-2.98 8.82-.28.64-.55 1.25-.85 1.8-3.26 6.38-6.94 7.33-8.55 6.63-1.74-.73-3.78-4.63-.34-12.63.52-1.18 1.31-2.68 2.22-4.32a6.2 6.2 0 0 1 10.5-.3Z"}),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.63 21.6c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13ZM19.87 10.4c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM57.03 52c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessE_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"No pressure.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyF_a)"},i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8.8h6.4v72.8h-6.4zM4.8 71.09l5.54 3.2 12.8-22.18-5.54-3.2zM59.2 71.08l-5.54 3.2-12.8-22.17 5.54-3.2z"}),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),i.createElement("path",{fill:"#DBEBFF",fillRule:"evenodd",d:"M57.6 40.12V57.6H6.4V19.47a13.4 13.4 0 0 1 2.28-1.84 6.48 6.48 0 0 1 5.52-.75 6.37 6.37 0 0 1 3.83 3.57c.75 1.75.67 3.54.56 4.45-.26 2.04-.98 3.65-1.79 5.47l-.1.24.38-.3c-.04.03.99-.79 1.91-1.33.5-.3 1.32-.72 2.33-.98a6.66 6.66 0 0 1 4.86.56c3.66 2 4.18 5.65 4.03 7.75-.1 1.36-.46 2.6-.82 3.56.84-.82 1.72-1.62 2.65-2.39 1.07-.87 2.81-1.96 4.78-2.53 1.67-.48 6.19-1.2 8.97 2.87a7.8 7.8 0 0 1 1.4 4.16c.79-.57 1.64-1.1 2.58-1.55l.05-.03c.36-.17 1.66-.8 3.1-1.05a7.1 7.1 0 0 1 4.68.77Z",clipRule:"evenodd"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M3.2 51.2h57.6v6.4H3.2z"}),i.createElement("path",{fill:"#FEFAE9",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.97 32.23a5.23 5.23 0 0 1 7.71-2.94c2.9 1.72 3.77 5.06.55 8.71-3.22 3.65-9.8 3.1-11.7 2.32 2.37-3.14 2.3-4.74 3.44-8.1Z"}),i.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M43.6 14.18a3.48 3.48 0 1 1 5.53 4.18L37.7 31.46l-3.58-2.7 9.48-14.58Z"}),i.createElement("path",{fill:"#15C39A",fillRule:"evenodd",d:"M36.94 37.12c-.21.3-.45.59-.7.88-3.23 3.65-9.8 3.1-11.7 2.32 1.75-2.32 2.17-3.8 2.72-5.77.1-.36.2-.73.33-1.13 1.3.08 2.16.22 3.76 2.6 1.34 1.98 3.54 1.66 5.59 1.1Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m36.94 37.12.4.3a.5.5 0 0 0-.54-.78l.14.48Zm-.7.88.37.33-.38-.33Zm-11.7 2.32-.4-.3a.5.5 0 0 0 .2.76l.2-.46Zm2.72-5.77-.48-.14.48.14Zm.33-1.13.03-.5a.5.5 0 0 0-.51.36l.48.14Zm3.76 2.6.42-.29-.42.28Zm5.18.8c-.2.29-.42.57-.67.85l.75.66c.27-.3.51-.61.73-.92l-.81-.58Zm-.67.85c-1.5 1.69-3.8 2.43-6.02 2.65-2.23.21-4.26-.12-5.11-.47l-.38.93c1.04.43 3.25.76 5.58.53 2.35-.22 4.95-1.02 6.68-2.98l-.75-.66Zm-10.92 2.95a15.1 15.1 0 0 0 2.8-5.94l-.96-.27c-.55 1.95-.95 3.36-2.64 5.6l.8.6Zm2.8-5.94c.1-.35.2-.72.33-1.11l-.96-.3-.33 1.14.96.27Zm4.03 1.05a7.25 7.25 0 0 0-2.16-2.3 4.13 4.13 0 0 0-2-.5l-.05 1c.64.03 1.08.08 1.55.36.48.28 1.04.84 1.83 2l.83-.56Zm5.03.9c-1.01.28-2 .48-2.87.4a2.79 2.79 0 0 1-2.16-1.3l-.83.56a3.79 3.79 0 0 0 2.89 1.73 9.2 9.2 0 0 0 3.24-.42l-.27-.96Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyF_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Bravo!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessF_a)"},i.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 5.8a5 5 0 0 1 5-5h52.4a5 5 0 0 1 5 5v52.4a5 5 0 0 1-5 5H5.8a5 5 0 0 1-5-5V5.8Z"}),i.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"}),i.createElement("g",{clipPath:"url(#SuccessF_b)"},i.createElement("path",{fill:"#99C2FF",d:"M55.66 73.05c-.76.9-1.51 1.8-1.66 2.02H-2.94c.61-2.7.03-5.61-2.37-7.42-2.44-1.83-4.9-3.64-7.27-5.56V37.05l.12.1c1.98 1.79 5.03-.78 7.15.9 11.3 17 27.6 18.48 41.09 9.82 3.86-2.48 6.83-14.07 4.07-18.06-2.48-3.58-8.15-5.66-12.29-3a58.1 58.1 0 0 1-7.42 4.1c-.27.13-.77.28-1.11.38l.92-.25c-.47.13-.94.35-1.4.51-1.22.41-2.47.76-3.73 1.02-.61.13-1.25.2-1.86.33l.89-.2a7.2 7.2 0 0 1-.8.1c-.63.03-1.25 0-1.87-.04h-.07c.44 0 .53-.03-.61-.05a19.27 19.27 0 0 1-2.23-.55h-.01c-.5-.27-1-.5-1.49-.77-.4-.23-.82-.61-1.25-.83l-.42-.34c-1.12-.97-2.1-2.05-3.09-3.13C.7 25.66-3.16 16.37-4.78 15.2 1.27 17.47 10.8 16.8 15.6 14c4.8-2.8 9.6-7.31 11.42-13.73 0 0 8.38.75 14.05 4.15 5.66 3.4 6.8 8.31 9.44 14.74 2.65 6.42 9.07 8.68 15.12 6.38l.37.05-1.13 16.61c-8.38-6-17 .89-19.27 6.04-2.22 5.05 11.37 22.27 10.06 24.81 1.5-1.77 3.06-3.53-.04.07a.52.52 0 0 1-.07.08l.07-.08a.58.58 0 0 0 .04-.07Z",opacity:".7"}),i.createElement("path",{fill:"#FCE5E5",d:"m30.37 12.1 1.17-2.18c.6-1.12 1.3-1.53 2.49-1.97a3.36 3.36 0 0 1 2.64.27c.81.42 1.47.27 2.06.97a15.46 15.46 0 0 1 2.87 13.86c-.11.4-.25.82-.22 1.25.02.34.14.66.19 1 .07.6-.1 1.19-.24 1.77-.56 2.19-.85 4.58.06 6.65.25.56.58 1.1.69 1.7.09.46.04.93 0 1.4-.26 3.04-.13 6.12.4 9.13-7.1.5-14.29-.28-21.12-2.27a1.27 1.27 0 0 1-.52-.24c-.26-.25-.27-.67-.19-1.02.21-.93.86-1.7 1.5-2.42 2.2-2.55 4.42-5.09 6.64-7.63"}),i.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M24.77 36.29s-15.01-.79-6.79-7.93l-5.65-5.65S9.72 26.48 7.5 32.4c-1.04 2.75 1.39 5.17 4.43 8.21 3.5 3.5 7.82 7.81 8.64 14.39.14 1.11.3 1.87.45 2.33.17 1.1.34 2.26.5 3.5.43 3.31.49 14.3.49 14.3l34.4-.27.05-29.5c0-4.2-2.56-7.97-6.47-9.5l-9.8 7.7c-16.84 3.76-14.9-7.14-14.9-7.14s-.22.21-.57.59l.06-.72Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#FFC940",fillRule:"evenodd",d:"m22.98 37.83 1.2.1 1.2.11a2.27 2.27 0 0 0 0 .32 5.82 5.82 0 0 0 1.34 3.7c1.44 1.72 4.83 3.52 13.04 1.68l.53 2.36c-8.61 1.93-13.15.24-15.43-2.48a8.24 8.24 0 0 1-1.88-5.77v-.02Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m17.98 28.36.33.38a.5.5 0 0 0 .02-.73l-.35.35Zm6.36 7.93.5.05a.5.5 0 0 0-.47-.55l-.03.5Zm-12-13.58.34-.35a.5.5 0 0 0-.75.05l.4.3Zm-4.92 9.45.47.17-.47-.17Zm4.78 8.56.36-.35-.36.35Zm8.48 13.62.5-.06-.5.06Zm.07.61.5-.04-.5.04Zm.06 1.26h.5-.5Zm.1 2.46.5.01a.5.5 0 0 0 0-.1l-.5.1Zm-.1 1.98.5.04-.5-.04ZM22 75.12l-.5.07a.5.5 0 0 0 .5.43v-.5Zm34.39-.26v.5a.5.5 0 0 0 .5-.5h-.5Zm.06-29.1h-.5.5Zm-6.9-9.9.18-.47a.5.5 0 0 0-.5.09l.32.38Zm-9.37 7.7.1.48a.5.5 0 0 0 .21-.1l-.31-.39Zm-14.9-7.14.49.1a.5.5 0 0 0-.84-.46l.35.36Zm-1.08 1.15-.5-.05a.5.5 0 0 0 .88.38l-.38-.33Zm-6.55-9.59c-2.07 1.8-2.9 3.36-2.63 4.73.26 1.35 1.54 2.2 2.87 2.75 1.36.57 2.98.9 4.23 1.09a28.35 28.35 0 0 0 2.15.24h.04l.03-.5.03-.5h-.04l-.11-.01a20.5 20.5 0 0 1-1.95-.22c-1.23-.18-2.75-.5-4-1.02-1.29-.54-2.11-1.22-2.27-2.02-.16-.8.27-2.01 2.3-3.78l-.65-.76Zm-5.67-4.92 5.65 5.65.7-.7-5.65-5.65-.7.7Zm-4.1 9.27a45.35 45.35 0 0 1 4.41-8.7 19.79 19.79 0 0 1 .44-.62l-.4-.3-.4-.3v.01a8.3 8.3 0 0 0-.47.65 46.35 46.35 0 0 0-4.51 8.9l.94.36Zm4.68 8.04a33.1 33.1 0 0 1-3.9-4.42c-.89-1.35-1.2-2.5-.77-3.62l-.94-.35c-.58 1.55-.09 3.06.88 4.52.95 1.45 2.44 2.96 4.02 4.57l.71-.7Zm8.62 13.9c-.8-5.95-5.13-10.35-8.62-13.9l-.71.7c3.53 3.6 7.6 7.77 8.34 13.34l.99-.14Zm.07.63-.07-.62-1 .12.07.6 1-.1Zm.06 1.3c0-.43-.02-.87-.06-1.29l-1 .09c.04.4.06.8.06 1.2h1Zm.1 2.39c-.06-.35-.1-1.1-.1-2.38h-1c0 1.27.03 2.1.11 2.55l.99-.17Zm-.1 2.1c.06-.71.09-1.38.1-2l-1-.03c0 .6-.04 1.25-.1 1.94l1 .09ZM22 75.12l.5-.07-.01-.03-.01-.09a178.11 178.11 0 0 1-.69-5.85c-.33-3.22-.62-6.79-.49-8.4l-1-.08c-.14 1.72.17 5.4.5 8.58a242.97 242.97 0 0 0 .69 5.88v.1l.01.02.5-.06Zm34.39-.76-34.4.26.01 1 34.4-.26-.01-1Zm-.44-28.6-.06 29.1h1l.06-29.1h-1Zm-6.57-9.43a10.02 10.02 0 0 1 6.57 9.43h1c0-4.63-2.88-8.77-7.22-10.37l-.35.94Zm-8.89 7.61 9.38-7.7-.63-.76-9.38 7.69.63.77Zm-15.21-7.52a28.07 28.07 0 0 0-.5-.08 1.23 1.23 0 0 0-.02.14l-.03.37A7.16 7.16 0 0 0 26 41.69c1.8 2.5 5.79 4.25 14.28 2.35l-.22-.97c-8.35 1.86-11.8.05-13.25-1.96a6.16 6.16 0 0 1-1.08-3.09 7.29 7.29 0 0 1 .03-1.51l-.5-.09Zm-.7 1.48a20.66 20.66 0 0 1 1.02-1.1l.02-.01-.34-.37-.35-.36-.02.02-.06.06a14.31 14.31 0 0 0-1.03 1.1l.76.66Zm-.24-1.61-.5-.06v.09l-.03.25-.1.95.99.1a525.27 525.27 0 0 0 .14-1.27l-.5-.06Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M48 55.39v11.85L35.83 74.8"}),i.createElement("path",{fill:"#0E101A",d:"m35.6 7.62-3.88 4.16s1.11 19.1-.24 23.23c-1.35 4.13-3.94 11.76-6.08 12.72-2.14.96-5.04.48-5.04-2.4 0-2.87 4.03-7.9 1.64-9.33.4 0 4.66-.98 3.63-6.47-1.03-5.48-2.85-13.96-.23-17.75 2.62-3.8 5.6-4.64 10.2-4.16Z"}),i.createElement("path",{fill:"#FCE5E5",d:"M32.7 11.5c-2.44-.09-6.13 1.14-6.3 3.94-.16 2.8.4 3.8.33 4.5-.08.7-1.21 3.58.24 5.9 1.45 2.34 3.78 3.89 4.59 4.12.8.24 4.51-1.16 6.6-3.18"}),i.createElement("path",{fill:"#0E101A",d:"M32.67 12a.5.5 0 0 0 .04-1l-.04 1Zm-6.27 3.44.5.03-.5-.03Zm5.16 14.52-.14.48.14-.48Zm1.15-18.95a8.94 8.94 0 0 0-4.24.93c-1.33.7-2.47 1.82-2.56 3.47l1 .06c.06-1.16.85-2.04 2.02-2.64 1.16-.6 2.6-.87 3.74-.82l.04-1Zm-6.8 4.4a14.04 14.04 0 0 0 .22 3.63l.06.38c.04.23.05.36.04.47l1 .11c.02-.25 0-.5-.05-.74l-.07-.4-.08-.46c-.1-.66-.2-1.58-.13-2.93l-1-.06Zm.32 4.48-.06.3-.13.53c-.1.41-.2.93-.26 1.51a6.08 6.08 0 0 0 .76 3.88l.85-.53a5.09 5.09 0 0 1-.62-3.25c.05-.52.15-.99.24-1.38l.13-.53c.04-.15.07-.3.08-.42l-.99-.11Zm.31 6.22a12.39 12.39 0 0 0 2.65 2.97 7.58 7.58 0 0 0 2.23 1.36l.28-.96a6.82 6.82 0 0 1-1.88-1.18 11.4 11.4 0 0 1-2.43-2.72l-.85.53Zm4.88 4.33c.2.06.42.06.62.03.22-.02.46-.07.72-.14a14.15 14.15 0 0 0 5.75-3.2l-.7-.71a13.16 13.16 0 0 1-5.88 3.06h-.23l-.28.96Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.57 19.2s-.7 3.52-.48 3.95c.21.43 1.4.43 1.99.06"}),i.createElement("path",{fill:"#0E101A",d:"M28.8 20.11c.44 0 .8-.48.8-1.07 0-.6-.36-1.08-.8-1.08-.44 0-.8.48-.8 1.08 0 .59.36 1.07.8 1.07Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m36.34 19.7-2.51-.93 2.43-.88M30.25 26.1s3.6 1.1 4-.9"}),i.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",strokeLinejoin:"round",d:"M48.27 35s-4.7 12.38-13.47 17.8c-5.76 3.56-13.2 3.6-14 3.2-3 12.82 1.59 16.32 4.38 15.39 2.8-.93 9.17-3.93 15.4-11.59C46.8 52.15 50.97 39.12 54 39.2c-1.2-2.4-5.73-4.2-5.73-4.2Z"}),i.createElement("path",{fill:"#0E101A",d:"M31.23 12c1.46 0 4.71-.06 6.32 2.42 1.61 2.49 4.49 9.96 1.74 19.87-2.74 9.9-3.36 15.25 1.72 15.25 5.07 0 5.98-2.57 5.98-7.7 0-5.12 3.42-5.55 4.27-5.55-2.42-2.02-4.84-.86-5.6-12.98C44.88 11.2 39.38 7.62 35.6 7.62c-.26 0-5.83 4.37-4.38 4.37Z"}),i.createElement("path",{fill:"#FCE5E5",d:"M22.5 23.5c5.14-2.01 5.47-2.87 4.3-3.5-1.17-.63-3.7.79-3.7.79s.28-.46 2.43-1.75c2.14-1.3-.15-2.43-1.8-1.79-.8.31-2.17.88-1.94 1.73 0 0-2-2.98-5.13.25-1.83 1.88-1.74 3.36-1.4 4.22h-.17l-4.92 6.15 4.49 1 3.5-4.79c.99.76 4.99.52 4.32-1.62-.21-.66-.5-1.37-.84-2.01l.01-.02-.16-.26"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M15.74 24.2s-2.06-2 .9-5.05c3.12-3.22 5.3 0 5.3 0s.24 4.88-2.38 3.95c-1.25-.44.05-3.85.05-3.85"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M21.77 18.56s.71-.68 2.36-1.33c1.65-.64 3.05.69.9 1.98-2.14 1.3-1.96 1.5-1.96 1.5s3.17-1.56 4.02-.79c.84.77-.31 2.04-4.63 3.5M17.52 19.5s-1.34 2.18-.26 2.85c1.07.67 1.36-.65 1.36-.65"}),i.createElement("path",{fill:"#FCE5E5",d:"M21.98 22.99c-.14-.22-.63-1.35-.77-1.57a.51.51 0 0 0-.17-.2c-.09-.04-.67-1-.77-.98-.24.04-1.02-.23-1.18-.04-.65.77.03 2.18.05 2.52 0 .08.74 1.58.88 1.57.2 0 1.12-.26 1.2-.46"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M19.56 23.1s-1.48-2.16-.41-2.98c1.06-.82 2.63 1.84 3.3 4 .67 2.14-3.33 2.38-4.32 1.62l-3.87 4.88-2.96-2.69 3.8-5.02"}),i.createElement("path",{fill:"#F28C8C",d:"M12.73 23.92s.4 3.63 4.44 4.44c0 0-2.82 2.02-3.22 4.84-.4 2.83-5.65-.37-5.65-.37l1.61-4.87"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M12.33 23.11s1.62 4.85 5.25 5.25"})),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessF_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})),i.createElement("clipPath",{id:"SuccessF_b"},i.createElement("path",{fill:"#fff",d:"M4.8 4.8h54.4v54.4H4.8z"}))))),null)}},{emptyState:{title:"Time to dig in.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyG_a)"},i.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",d:"m51.15 10.56-3.71-1.48-5.32 13.38 3.71 1.48z"}),i.createElement("path",{fill:"#4A6EE0",stroke:"#0E101A",d:"m49.29 31.5-14.87-5.9 1.48-3.75a6 6 0 0 1 7.8-3.36l3.71 1.48a6 6 0 0 1 3.36 7.8L49.3 31.5Z"}),i.createElement("path",{fill:"#4A6EE0",fillRule:"evenodd",stroke:"#0E101A",d:"M56.36 7.08a2.47 2.47 0 0 0-1.17-3.63l-5.8-2.31a2.47 2.47 0 0 0-3.35 1.83l-.94 4.95a2.47 2.47 0 0 0 1.51 2.77l4.04 1.6c1.1.44 2.36.03 3-.97l2.71-4.24Zm-2.8-1.16-2.1 3.57-3.52-1.4.93-4.03 4.69 1.86Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M2.96 54.7C-4.82 51.48 7.2 28.34 27.6 22 48 15.65 67.98 49.1 61.9 54c-6.09 4.92-20.72 5.5-32.72 5.1-12-.4-18.44-1.2-26.22-4.4Z"}),i.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",d:"m11.5 24.49 3.38-2.12 7.63 12.21-3.39 2.12z"}),i.createElement("path",{fill:"#15C39A",stroke:"#0E101A",d:"m17.08 44.75 13.57-8.48-2.13-3.4a6 6 0 0 0-8.27-1.91l-3.4 2.12a6 6 0 0 0-1.9 8.26l2.13 3.41Z"}),i.createElement("path",{fill:"#15C39A",fillRule:"evenodd",stroke:"#0E101A",d:"M5.74 22a2.47 2.47 0 0 1 .5-3.79l5.3-3.31a2.47 2.47 0 0 1 3.62 1.2l1.82 4.7c.43 1.12 0 2.37-1 3l-3.68 2.3c-1.01.63-2.32.46-3.13-.41l-3.43-3.7Zm2.55-1.65L11 23.5l3.22-2-1.64-3.81-4.28 2.67Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#FFF0D4",d:"M19.35 39.37a12.57 12.57 0 0 0-4.97 7.32l9.6 2 14.8-10-6.8-6.8c-4.26 5.53-8.47 4.55-12.63 7.48Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M14.8 44.4s.76-2.61 4.38-4.9c3.62-2.3 7.62-1.9 12.02-6.3"}),i.createElement("ellipse",{cx:"42.75",cy:"42.11",fill:"#EF6E6E",stroke:"#0E101A",strokeLinejoin:"round",rx:"10.49",ry:"3.82"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M38.63 40.85c-3.34.38-5.22 2.5-5.01 3.79.2 1.28 2.92 4.16 2.92 4.16h9.61S52 48.05 52 45.77c0-2.27-1.67-3.31-3.76-3.78-2.09-.48-4.24.41-4.24.41s-2.03-1.93-5.37-1.55Z"}),i.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"m32.3 42.45 2.18 18.16c0 1.37 3.7 2.48 8.27 2.48C47.3 63.1 51 62 51 60.61l2.19-18.16c-.47 1.95-4.97 3.47-10.45 3.47-5.48 0-9.98-1.52-10.45-3.47Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m32.3 42.45.48-.12a.5.5 0 0 0-.98.18l.5-.06Zm2.18 18.16h.5a.5.5 0 0 0 0-.06l-.5.06Zm16.53 0-.5-.06a.5.5 0 0 0 0 .06h.5Zm2.19-18.16.5.06a.5.5 0 0 0-.99-.18l.49.12Zm-21.4.06 2.18 18.16 1-.12-2.19-18.16-.99.12Zm2.18 18.1c0 .59.4 1.04.86 1.38.48.34 1.14.62 1.92.86 1.55.46 3.67.74 5.99.74v-1c-2.25 0-4.27-.27-5.7-.7a5.76 5.76 0 0 1-1.63-.72c-.37-.26-.44-.46-.44-.56h-1Zm8.77 2.98c2.32 0 4.43-.28 5.99-.74a6.71 6.71 0 0 0 1.91-.86c.47-.34.86-.8.86-1.38h-1c0 .1-.07.3-.43.56-.36.25-.9.5-1.63.72-1.44.43-3.45.7-5.7.7v1Zm8.76-2.92 2.19-18.16-1-.12-2.18 18.16 1 .12Zm1.2-18.34c-.08.33-.34.7-.87 1.08-.51.38-1.24.73-2.15 1.03-1.8.6-4.24.98-6.94.98v1c2.78 0 5.33-.38 7.26-1.03.97-.32 1.8-.72 2.42-1.17.62-.46 1.1-1 1.26-1.66l-.98-.23Zm-9.96 3.1c-2.7 0-5.14-.38-6.95-.99-.9-.3-1.63-.65-2.15-1.03s-.79-.75-.87-1.08l-.97.23c.16.65.63 1.2 1.25 1.66.63.45 1.46.85 2.42 1.17 1.94.65 4.49 1.03 7.27 1.03v-1Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M41.81 47.08c.4.63.84 1.27 1.33 1.9 3.81 5 8.67 7.7 10.86 6.03 1.83-1.4 1.22-5.38-1.25-9.56"}),i.createElement("circle",{cx:"41.79",cy:"47.04",r:"1.91",fill:"#F9C7C7",stroke:"#0E101A",strokeLinejoin:"round"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyG_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Looking good!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessG_a)"},i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M32 12V.8"}),i.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m32 .8 10.4 2-10.4 2v-4Z"}),i.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M4.19 57.54c-11.68-1.65 9.45-9.48 23.8-11.66 14.34-2.19 41.86 7.56 33.74 11.33-1.66.77-14.7 2.23-24.14 2.87a6.31 6.31 0 0 0-2.96 1.21c-1.76 1.17-4.44 1.91-7.43 1.91-2.26 0-4.34-.42-5.98-1.13a7.64 7.64 0 0 0-4-.58c-.53.07-1.07.11-1.62.11-2.4 0-4.53-.7-5.93-1.8-1.06-.83-2.18-1.77-3.52-1.97l-.64-.1-1.32-.19Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m27.98 45.88.08.5-.08-.5ZM4.2 57.54l-.07.5.07-.5Zm57.54-.33.21.45-.2-.45Zm-56.22.53.07-.5-.07.5Zm22.4-12.36C20.7 46.48 11.79 49 6.13 51.45a27.57 27.57 0 0 0-3.6 1.83 5.88 5.88 0 0 0-2 1.8 1.5 1.5 0 0 0-.2 1.07c.08.37.32.68.64.91.62.46 1.68.77 3.15.98l.14-1c-1.45-.2-2.29-.49-2.7-.78-.19-.14-.24-.26-.25-.32-.02-.07-.01-.18.09-.36.21-.39.76-.88 1.67-1.45.89-.56 2.06-1.16 3.45-1.76 5.58-2.42 14.4-4.91 21.54-6l-.15-.99Zm34.03 12.28c1.08-.5 1.77-1.2 1.76-2.11 0-.86-.63-1.67-1.48-2.4-1.73-1.46-4.94-3-8.78-4.31-7.69-2.65-18.25-4.57-25.53-3.46l.15 1c7.06-1.08 17.43.78 25.06 3.4 3.81 1.32 6.87 2.8 8.46 4.14.8.7 1.12 1.24 1.12 1.63 0 .33-.22.76-1.18 1.2l.42.91Zm-24.31 2.92c4.72-.32 10.35-.85 15-1.39 2.33-.27 4.42-.55 6.03-.8.8-.13 1.5-.26 2.05-.38a6.6 6.6 0 0 0 1.23-.35l-.42-.9a5.9 5.9 0 0 1-1.02.28c-.52.11-1.2.23-2 .36-1.59.25-3.66.53-5.98.8-4.64.54-10.25 1.07-14.96 1.39l.07 1ZM27.2 63.7c3.07 0 5.84-.76 7.7-1.99l-.55-.83c-1.66 1.1-4.23 1.82-7.15 1.82v1Zm-6.17-1.17c1.7.74 3.85 1.17 6.17 1.17v-1c-2.2 0-4.2-.41-5.78-1.09l-.4.92ZM17.14 61c-.5.06-1 .1-1.54.1v1c.58 0 1.14-.04 1.68-.11l-.14-1Zm-1.54.1c-2.3 0-4.33-.68-5.62-1.69l-.61.79c1.5 1.18 3.75 1.9 6.23 1.9v-1ZM5.44 58.23l.64.1.14-1-.64-.09-.14 1Zm-1.32-.2 1.32.2.14-.99-1.32-.2-.14 1Zm5.86 1.38c-1.02-.8-2.26-1.85-3.76-2.07l-.14.98c1.18.18 2.18 1.01 3.29 1.88l.61-.79Zm11.44 2.2a8.13 8.13 0 0 0-4.28-.61l.14.99a7.14 7.14 0 0 1 3.75.54l.4-.92Zm16.14-2.02c-1.22.08-2.3.68-3.2 1.29l.54.83a5.83 5.83 0 0 1 2.73-1.13l-.07-1Z"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M36.4 21.6h-8.8a2 2 0 0 1-2-2v-4.37a2 2 0 0 1 .59-1.42l4.4-4.4a2 2 0 0 1 2.82 0l4.4 4.4a2 2 0 0 1 .59 1.42v4.37a2 2 0 0 1-2 2Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 13.6a1.6 1.6 0 0 1 3.2 0v3.2h-3.2v-3.2Z"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M39.6 20H24.4a2 2 0 0 0-2 2v21.6c0 1.1.9 2 2 2h15.2a2 2 0 0 0 2-2V22a2 2 0 0 0-2-2Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 24.8a1.6 1.6 0 0 1 3.2 0V28h-3.2v-3.2Z"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M26 28h-7.2a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2H26a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M20.8 32.8a1.6 1.6 0 0 1 3.2 0V36h-3.2v-3.2Z"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M45.2 28H38a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2h7.2a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),i.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M40 32.8a1.6 1.6 0 1 1 3.2 0V36H40v-3.2Z"}),i.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M12.8 41.2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v4a2 2 0 0 1-.05.45c.03.18.05.36.05.55v7.4H12.8v-7.4c0-.19.02-.37.05-.55a2 2 0 0 1-.05-.45v-4Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"M19.34 43.2h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.49 2.45-.49-.11-.02.1.02.1.49-.1Zm.05 7.95v.5h.5v-.5h-.5Zm-38.4 0h-.5v.5h.5v-.5Zm.05-7.95.5.09.01-.1-.02-.1-.49.1Zm1.95-6.95a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0H14.8v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.82 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm.5.5v-2h-1v2h1Zm0-2c0-.83.68-1.5 1.5-1.5v-1a2.5 2.5 0 0 0-2.5 2.5h1Zm1.5-1.5h2.54v-1h-2.54v1Zm2.54 0c.83 0 1.5.67 1.5 1.5h1a2.5 2.5 0 0 0-2.5-2.5v1Zm1.5 1.5v4h1v-4h-1Zm0 4c0 .12-.01.23-.04.34l.98.22c.04-.18.06-.37.06-.56h-1Zm1 1c0-.22-.02-.43-.06-.64l-.98.18c.03.15.04.3.04.46h1Zm0 7.4v-7.4h-1v7.4h1Zm-19.7.5h19.2v-1H32v1Zm-19.2 0H32v-1H12.8v1Zm-.5-7.9v7.4h1v-7.4h-1Zm.06-.64c-.04.2-.06.42-.06.64h1c0-.16.01-.31.04-.46l-.98-.18Zm-.06-.36c0 .2.02.38.06.56l.98-.22a1.5 1.5 0 0 1-.04-.34h-1Zm0-4v4h1v-4h-1Z"}),i.createElement("path",{fill:"#FFF0D4",d:"M13.2 50.4h37.6v6.4H13.2v-6.4Z"}),i.createElement("circle",{cx:"7.2",cy:"7.2",r:"6.4",fill:"#F8E485",stroke:"#0E101A"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M3.2 21.6c2.18 0 4 4 4 4s1.82-4 4-4M12.8 16c1.75 0 3.2 3.2 3.2 3.2s1.45-3.2 3.2-3.2"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessG_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"All the world's a page.",description:"Suggestions will appear here.",illustration:i.createElement(Rk,null)},successState:{title:"You deserve a break.",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.64 24s2.56-1.62 2.56-4.86c0-4.92-6.4-5.8-6.4-10.67 0-3.36 3.84-6.07 3.84-6.07M36.64 21.6s2.56-1.56 2.56-4.68c0-4.8-6.4-5.52-6.4-10.28C32.8 3.41 36.64.8 36.64.8"}),i.createElement("path",{fill:"#C6CBDE",d:"M32.8 64c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2Z"}),i.createElement("path",{fill:"#1995BB",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 35.2h5.39c2.82 0 5.01 2.47 5.01 5.36v6.08c0 2.89-2.2 5.36-5.01 5.36H49.6v-3.5h5.39c.85 0 1.66-.78 1.66-1.86v-6.08c0-1.08-.81-1.86-1.66-1.86H49.6v-3.5Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31 60.8a19 19 0 0 1-19-19V31.2h40v10.6a19 19 0 0 1-19 19h-2Z"}),i.createElement("path",{fill:"#F7E68B",d:"M49.66 32.63c1.5-.44 2.34-.94 2.34-1.48C52 29.41 43.04 28 32 28s-20 1.4-20 3.15c0 .6 1.08 1.17 2.95 1.65 3.37-1 10-1.67 17.65-1.67 7.22 0 13.54.6 17.06 1.5Z"}),i.createElement("path",{fill:"#1F243C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 32.71c-3.49-.9-9.75-1.51-16.9-1.51-7.58 0-14.16.68-17.5 1.69 3.49.9 9.75 1.51 16.9 1.51 7.58 0 14.16-.68 17.5-1.69Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 34.4c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2ZM23.2 34v7.6"}),i.createElement("path",{fill:"#FAC0D6",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M25.98 48.64H20.6a.77.77 0 0 1-.77-.76V42.5c0-.42.35-.77.77-.77h5.37c.42 0 .77.35.77.77v5.37c0 .42-.35.76-.77.76Z"}))),null)}},{emptyState:{title:"So far, so good.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyI_a)"},i.createElement("path",{fill:"#C6CBDE",d:"M35.6 64c14.8 0 18.8-3.04 18.8-6.8s-4-6.8-18.8-6.8-26.8 3.04-26.8 6.8 12 6.8 26.8 6.8Z"}),i.createElement("ellipse",{cx:"32",cy:"26.8",fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"}),i.createElement("mask",{id:"EmptyI_b",width:"64",height:"14",x:"0",y:"20",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("ellipse",{cx:"32",cy:"26.8",fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"})),i.createElement("g",{mask:"url(#EmptyI_b)"},i.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M20.9 25.03a15.38 15.38 0 0 1 6.83-2.51 14.38 14.38 0 0 1 11.68 3.73s4.67-2.14 9.22-1c4.54 1.13 8.17 3.63 8.17 9.08S44.08 41.6 44.08 41.6H24.71a12.9 12.9 0 0 1-6.31 1.6c-6.19 0-11.2-4.12-11.2-9.2 0-5.08 5.01-9.2 11.2-9.2.86 0 1.7.08 2.5.23Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m27.73 22.52.07.5-.07-.5Zm-6.83 2.51-.09.5a.5.5 0 0 0 .38-.09l-.29-.41Zm18.5 1.22-.35.34c.14.16.37.2.57.11l-.21-.45Zm9.23-1-.13.48.13-.49ZM44.08 41.6v.5a.5.5 0 0 0 .07 0l-.07-.5Zm-19.37 0v-.5a.5.5 0 0 0-.24.06l.24.44Zm2.96-19.58a15.88 15.88 0 0 0-7.05 2.6l.56.82c1.7-1.17 3.93-2.09 6.62-2.43l-.13-.99Zm11.74 4.23.36-.35-.02-.02a4.06 4.06 0 0 0-.2-.2l-.63-.53a14.96 14.96 0 0 0-11.25-3.12l.13.98a13.96 13.96 0 0 1 11.25 3.58l.36-.34Zm9.34-1.5c-2.38-.59-4.77-.32-6.55.08a18.63 18.63 0 0 0-2.98.96h-.01l.2.46.2.45h.02l.03-.02a8.13 8.13 0 0 1 .72-.28c.5-.18 1.2-.4 2.04-.6 1.7-.38 3.92-.61 6.08-.07l.25-.97Zm8.55 9.58c0-2.85-.96-4.97-2.53-6.52-1.57-1.53-3.7-2.47-6.02-3.05l-.25.97c2.23.56 4.18 1.43 5.57 2.8 1.37 1.34 2.23 3.2 2.23 5.8h1ZM44.08 41.6l.07.5h.02l.02-.01a9.58 9.58 0 0 0 .53-.09 38.05 38.05 0 0 0 5.89-1.52 16.35 16.35 0 0 0 4.51-2.32c1.25-.98 2.18-2.25 2.18-3.83h-1c0 1.15-.66 2.15-1.8 3.04-1.13.9-2.66 1.6-4.23 2.17a34.72 34.72 0 0 1-6.22 1.56h-.03l.06.5Zm-19.37.5h19.37v-1H24.71v1Zm-.24-.94a12.4 12.4 0 0 1-6.07 1.54v1c2.43 0 4.68-.61 6.56-1.66l-.5-.88ZM18.4 42.7c-6 0-10.7-3.98-10.7-8.7h-1c0 5.44 5.33 9.7 11.7 9.7v-1ZM7.7 34c0-4.72 4.7-8.7 10.7-8.7v-1c-6.37 0-11.7 4.26-11.7 9.7h1Zm10.7-8.7c.83 0 1.64.08 2.41.22l.18-.98c-.83-.16-1.7-.24-2.59-.24v1Z"}),i.createElement("ellipse",{cx:"32",cy:"26.8",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"})),i.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M55 1a2.4 2.4 0 0 0-3.29.88l-7.45 12.9c-1.96 3.41-6.37 4.73-9.6 6.97a7.97 7.97 0 0 0-2.37 2.57l-2 3.46a8 8 0 0 0 13.86 8l2-3.46c.61-1.06.95-2.2 1.05-3.34.32-3.91-.75-8.39 1.22-11.8l7.45-12.9A2.4 2.4 0 0 0 55 1Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"m32.3 24.32-.44-.25.43.25Zm-2 3.46.43.25-.44-.25Zm13.85 8-.43-.25.43.25Zm2-3.46.43.25-.43-.25Zm6-30.19a1.9 1.9 0 0 1 2.6-.7l.5-.86a2.9 2.9 0 0 0-3.97 1.06l.87.5Zm-7.45 12.9 7.45-12.9-.87-.5-7.45 12.9.87.5Zm-11.97 9.54c.57-1 1.33-1.8 2.21-2.41l-.57-.82c-1 .69-1.86 1.6-2.51 2.73l.87.5Zm-2 3.46 2-3.46-.87-.5-2 3.46.87.5Zm2.74 10.25a7.5 7.5 0 0 1-2.74-10.25l-.87-.5a8.5 8.5 0 0 0 3.11 11.61l.5-.86Zm10.25-2.75a7.5 7.5 0 0 1-10.25 2.75l-.5.86a8.5 8.5 0 0 0 11.61-3.1l-.86-.5Zm2-3.46-2 3.46.86.5 2-3.46-.86-.5Zm.98-3.13a7.47 7.47 0 0 1-.98 3.13l.86.5a8.47 8.47 0 0 0 1.11-3.54l-1-.09Zm8.74-24.9-7.45 12.9.86.5 7.45-12.9-.86-.5Zm-.7-2.6a1.9 1.9 0 0 1 .7 2.6l.86.5A2.9 2.9 0 0 0 55.24.56l-.5.87ZM47.7 29.03c.09-1.01.08-2.05.06-3.07-.03-1.04-.07-2.06-.06-3.06.02-2.01.25-3.88 1.16-5.46l-.86-.5c-1.05 1.81-1.28 3.9-1.3 5.95 0 1.03.03 2.08.06 3.09.02 1.02.03 2.01-.05 2.96l1 .09Zm-3.86-14.5c-.92 1.6-2.42 2.72-4.15 3.74-.87.51-1.77.99-2.67 1.48-.9.5-1.8 1-2.64 1.59l.57.82c.79-.55 1.65-1.04 2.55-1.53.88-.48 1.81-.97 2.7-1.5 1.77-1.04 3.46-2.28 4.5-4.1l-.86-.5Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"m32.89 31.17 1.96-3.84a8.6 8.6 0 0 1 5.93-4.51"}),i.createElement("path",{fill:"#FFF0D4",d:"M49.6 28.8H27.2v10h22.4v-10Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.2 28.8h22.4"}),i.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M.83 27.07H.8V28a31.2 31.2 0 0 0 62.4 0v-.93h-.03c-.73 3.19-14.4 5.73-31.17 5.73-16.76 0-30.44-2.54-31.17-5.73Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"M.8 27.07v-.5a.5.5 0 0 0-.5.5h.5Zm.03 0 .49-.11a.5.5 0 0 0-.49-.4v.5Zm62.37 0h.5a.5.5 0 0 0-.5-.5v.5Zm-.03 0v-.5a.5.5 0 0 0-.49.39l.49.1Zm-62.37.5h.03v-1H.8v1Zm.5.43v-.93h-1V28h1ZM32 58.7A30.7 30.7 0 0 1 1.3 28h-1A31.7 31.7 0 0 0 32 59.7v-1ZM62.7 28A30.7 30.7 0 0 1 32 58.7v1A31.7 31.7 0 0 0 63.7 28h-1Zm0-.93V28h1v-.93h-1Zm.47.5h.03v-1h-.03v1Zm-.49-.61c-.05.24-.25.54-.68.88-.43.33-1.04.67-1.85 1-1.6.68-3.86 1.28-6.65 1.8-5.56 1.03-13.14 1.66-21.5 1.66v1c8.4 0 16.04-.64 21.69-1.68a35.17 35.17 0 0 0 6.85-1.85 9.01 9.01 0 0 0 2.08-1.15c.52-.4.9-.88 1.04-1.44l-.98-.22ZM32 32.3c-8.36 0-15.94-.63-21.5-1.66a34.23 34.23 0 0 1-6.65-1.8 8.05 8.05 0 0 1-1.85-1c-.43-.34-.63-.64-.68-.88l-.98.22c.13.56.52 1.04 1.04 1.44.53.42 1.23.8 2.08 1.15 1.7.7 4.04 1.33 6.85 1.85C15.96 32.66 23.6 33.3 32 33.3v-1Z"}),i.createElement("g",{opacity:".15",style:{mixBlendMode:"multiply"}},i.createElement("path",{fill:"#0E101A",d:"M32 43.6h17.93c.52 8.29 4.76 12.75 10.47 19.2H43.2C36.34 59.6 32 53.6 32 43.6Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 43.6h17.93c.52 8.29 4.76 12.75 10.47 19.2H43.2C36.34 59.6 32 53.6 32 43.6Z"})),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 41.6h18.73a34.2 34.2 0 0 0 8.98 21.6H44.56c-5.36-3.65-8.84-13.31-9.36-21.6Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M50.5 47.2h-9.7M52.1 52h-9.7M54.5 56.8h-9.7"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyI_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Nice work! Have a cookie.",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#SuccessI_a)"},i.createElement("path",{fill:"#C6CBDE",d:"M22.4 60c8.84 0 16-2.69 16-6s-7.16-6-16-6-16 2.69-16 6 7.16 6 16 6Z"}),i.createElement("path",{fill:"#C6CBDE",d:"M41.6 64c11.05 0 20-2.5 20-5.6 0-3.1-8.95-5.6-20-5.6s-20 2.5-20 5.6c0 3.1 8.95 5.6 20 5.6Z"}),i.createElement("path",{fill:"#DDEFF5",fillRule:"evenodd",d:"M36.8 6.75H.8l5.27 46.61c0 1.46 5.7 2.64 12.73 2.64s12.73-1.18 12.73-2.63L36.8 6.75Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#000",d:"M.8 6.75v-.5a.5.5 0 0 0-.5.56l.5-.06Zm36 0 .5.06a.5.5 0 0 0-.5-.56v.5ZM6.07 53.36h.5a.5.5 0 0 0 0-.05l-.5.05Zm25.46 0-.01-.5a.5.5 0 0 0-.49.5h.5Zm0 0 .02.5a.5.5 0 0 0 .48-.44l-.5-.05ZM.8 7.27h36v-1H.8v1ZM6.57 53.3 1.3 6.7l-1 .1 5.27 46.62 1-.11Zm0 .06h-1 1ZM18.8 55.5c-3.5 0-6.64-.3-8.9-.76a11.6 11.6 0 0 1-2.61-.8c-.3-.14-.5-.28-.6-.4-.12-.1-.12-.17-.12-.17h-1c0 .35.18.65.4.88.23.23.53.42.88.59.7.34 1.68.64 2.85.88 2.34.48 5.56.78 9.1.78v-1Zm12.23-2.13s0 .06-.11.18c-.12.11-.31.25-.6.4-.6.28-1.48.55-2.62.79-2.26.47-5.4.76-8.9.76v1c3.54 0 6.76-.3 9.1-.78 1.17-.24 2.15-.54 2.85-.88.35-.17.65-.36.88-.6.22-.22.4-.52.4-.87h-1Zm.49-.5.03 1-.03-1ZM36.3 6.7 31.03 53.3l1 .11L37.3 6.81l-1-.11Z"}),i.createElement("ellipse",{cx:"18.8",cy:"6.39",fill:"#DDEFF5",stroke:"#000",strokeLinejoin:"round",rx:"18",ry:"3.95"}),i.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M35.2 20.83H2.4l3.67 32.53c0 1.46 5.7 2.64 12.73 2.64s12.73-1.18 12.73-2.63l3.67-32.54Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#000",d:"M2.4 20.83v-.5a.5.5 0 0 0-.5.56l.5-.06Zm32.8 0 .5.06a.5.5 0 0 0-.5-.56v.5ZM6.07 53.36h.5a.5.5 0 0 0 0-.05l-.5.05Zm25.46 0-.03-.5a.5.5 0 0 0-.47.5h.5Zm0 0 .04.5a.5.5 0 0 0 .46-.44l-.5-.05ZM2.4 21.34h32.8v-1H2.4v1ZM6.56 53.3 2.9 20.77l-1 .12 3.67 32.53 1-.11Zm0 .06-1-.01h1ZM18.8 55.5c-3.5 0-6.64-.3-8.9-.76a11.6 11.6 0 0 1-2.61-.8c-.3-.14-.5-.28-.6-.4-.12-.11-.12-.17-.12-.17h-1c0 .35.18.65.4.88.23.23.53.42.88.59.7.34 1.68.64 2.85.88 2.34.48 5.56.78 9.1.78v-1Zm12.23-2.13s0 .06-.11.18c-.12.11-.31.25-.6.4-.6.28-1.48.55-2.62.79-2.26.47-5.4.76-8.9.76v1c3.54 0 6.76-.3 9.1-.78 1.17-.24 2.15-.54 2.85-.88.35-.17.65-.37.88-.6.22-.22.4-.52.4-.87h-1Zm.47-.5.07 1-.07-1Zm3.2-32.1-3.67 32.54 1 .11L35.7 20.9l-1-.12Z"}),i.createElement("ellipse",{cx:"18.8",cy:"20.8",fill:"#fff",stroke:"#000",strokeLinejoin:"round",rx:"16.4",ry:"3.2"}),i.createElement("path",{fill:"#FFF0D4",stroke:"#000",d:"M59.66 53.9c-.15 4.95-9.28 6.9-20.4 6.56-11.1-.33-20-2.8-19.85-7.75.15-4.94 9.28-8.67 20.39-8.34 11.11.33 20 4.6 19.86 9.54Z"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"22.77",y:"51.3",fill:"#4A6EE0",rx:"1.23",transform:"rotate(-4 22.77 51.3)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"32.42",y:"51.83",fill:"#F18AB2",rx:"1.23",transform:"rotate(41 32.42 51.83)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"43.02",y:"50.37",fill:"#8780E4",rx:"1.23",transform:"rotate(120 43.02 50.37)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"30.1",y:"47.89",fill:"#15C39A",rx:"1.23",transform:"rotate(4 30.1 47.89)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"49.73",y:"51.29",fill:"#F18AB2",rx:"1.23",transform:"rotate(29 49.73 51.3)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"42.44",y:"56.4",fill:"#15C39A",rx:"1.23",transform:"rotate(-19 42.44 56.4)"}),i.createElement("path",{fill:"#7D6455",fillRule:"evenodd",d:"M21.92 48.56c3.48-2.71 10.2-4.42 17.88-4.2 10 .3 18.2 3.8 19.64 8.1-8.37 4.82-33.76 2.81-37.52-3.9Z",clipRule:"evenodd",opacity:".3",style:{mixBlendMode:"multiply"}}),i.createElement("path",{fill:"#FFF0D4",stroke:"#000",d:"M62.13 49.5c-1.4 4.73-10.77 5.36-21.43 2.2-10.66-3.17-18.57-8.93-17.16-13.67 1.4-4.74 11.46-6.87 22.12-3.7S63.54 44.76 62.13 49.5Z"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"27.2",y:"36.55",fill:"#15C39A",rx:"1.23",transform:"rotate(-13 27.2 36.55)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"33.87",y:"39.22",fill:"#EE6C9F",rx:"1.23",transform:"rotate(62 33.87 39.22)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"38.18",y:"34.85",fill:"#4A6EE0",rx:"1.23",transform:"rotate(5 38.18 34.85)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"41.76",y:"45.57",fill:"#4A6EE0",rx:"1.23",transform:"rotate(5 41.76 45.57)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"39.05",y:"39.32",fill:"#8780E4",rx:"1.23",transform:"rotate(26 39.05 39.32)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"49.66",y:"43.71",fill:"#EE6C9F",rx:"1.23",transform:"rotate(-10 49.66 43.71)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"47.8",y:"36.64",fill:"#15C39A",rx:"1.23",transform:"rotate(47 47.8 36.64)"}),i.createElement("rect",{width:"5.86",height:"2.45",x:"53.16",y:"48.35",fill:"#4A6EE0",rx:"1.23",transform:"rotate(-28 53.16 48.35)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"SuccessI_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"Let's get to work.",description:"Suggestions will appear here.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("g",{clipPath:"url(#EmptyJ_a)"},i.createElement("ellipse",{cx:"32",cy:"57.6",fill:"#C6CBDE",rx:"32",ry:"5.6"}),i.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",d:"M26.4 5.6A2.4 2.4 0 0 0 24 8v8.8a2.4 2.4 0 0 0 2.4 2.4h12.8a2.4 2.4 0 0 0 2.4-2.4V8a2.4 2.4 0 0 0-2.4-2.4H26.4ZM19.2 8A7.2 7.2 0 0 1 26.4.8h12.8A7.2 7.2 0 0 1 46.4 8v8.8a7.2 7.2 0 0 1-7.2 7.2H26.4a7.2 7.2 0 0 1-7.2-7.2V8Z",clipRule:"evenodd"}),i.createElement("rect",{width:"62.4",height:"46.4",x:".8",y:"11.2",fill:"#41D9B5",stroke:"#000",strokeLinejoin:"round",rx:"10"}),i.createElement("path",{stroke:"#000",strokeLinejoin:"round",d:"M15.2 21.2v7.2a10 10 0 0 0 10 10h28a10 10 0 0 0 10-10v-7.2"}),i.createElement("rect",{width:"14.4",height:"46.4",x:".8",y:"11.2",fill:"#11A683",stroke:"#000",strokeLinejoin:"round",rx:"7.2"}),i.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M23.2 32.4c0-1.1.9-2 2-2h5.6a2 2 0 0 1 2 2v10a4.8 4.8 0 0 1-9.6 0v-10Z"}),i.createElement("circle",{cx:"28",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"}),i.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M46.4 32.4c0-1.1.9-2 2-2H54a2 2 0 0 1 2 2v10a4.8 4.8 0 1 1-9.6 0v-10Z"}),i.createElement("circle",{cx:"51.2",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"})),i.createElement("defs",null,i.createElement("clipPath",{id:"EmptyJ_a"},i.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Great job!",description:"There are no more suggestions.",illustration:i.createElement((()=>i.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},i.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M15.32 25.44c-1.2-2.02-3.23-.8-2.74.98-1.07-1.63-.47-2.98-1.04-4.04-.66-1.26-2.4-.82-2.33.65-.47-1.33.12-2.9-.09-3.74-.33-1.45-2.05-1.14-1.93.21a14.38 14.38 0 0 1-2.07-7.45c0-3.7 1.62-6.76 3.88-6.76 1.86 0 2.82 1.82 2.18 3.39-.3-.83-.83-1.27-1.69-1.27-1 0-1.63.98-1.63 2.2 0 1.75 1.45 2.75 3.23 2.77 2.05 0 3.4-2 3.4-4.32 0-3.09-2.28-6.14-5.91-5.65 1-.8-.16-2.26-1.39-1.28C4.26 3.43 2.4 7.36 2.4 11.82c0 11.26 10.86 23.53 21.75 20.76l-1.87-3.25c-3.15 0-5.33-1.14-6.96-3.9ZM56.94 1.13c-1.23-.98-2.39.47-1.39 1.28-3.63-.5-5.91 2.54-5.91 5.63 0 2.32 1.33 4.32 3.4 4.32 1.76 0 3.23-1 3.23-2.75 0-1.22-.63-2.2-1.63-2.2-.86 0-1.39.44-1.69 1.27-.65-1.57.32-3.37 2.18-3.37 2.26 0 3.88 3.05 3.88 6.75 0 2.65-.74 5.23-2.06 7.48.1-1.35-1.6-1.67-1.93-.21-.19.84.39 2.4-.08 3.74.07-1.48-1.69-1.92-2.34-.65-.56 1.05.02 2.4-1.03 4.03.49-1.75-1.53-2.98-2.74-.98-1.65 2.74-3.81 3.9-6.97 3.88L40 32.6c10.88 2.77 21.76-9.48 21.76-20.75-.05-4.46-1.9-8.39-4.82-10.72Z"}),i.createElement("path",{fill:"#C6CBDE",d:"M32 63.2c12.81 0 23.2-1.61 23.2-3.6S44.81 56 32 56c-12.81 0-23.2 1.61-23.2 3.6s10.39 3.6 23.2 3.6Z"}),i.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.2 55.2H16.8a2.4 2.4 0 1 0 0 4.8h30.4a2.4 2.4 0 0 0 0-4.8Z"}),i.createElement("path",{fill:"#F6DF6C",fillRule:"evenodd",d:"M32 4.64H14.77c-1.64 14.28 2.98 25.28 9.5 30.84.37.33.77.64 1.16.96 1.9 1.5 3.8 3.03 3.77 5.4-.05 3.19-.51 4.8-.51 4.8-.82 3.1-3.62 4.07-6.1 4.93-2.28.78-4.3 1.48-4.3 3.63H45.7c0-2.15-2.01-2.85-4.28-3.63-2.5-.86-5.3-1.83-6.1-4.93 0 0-.47-1.61-.52-4.8-.04-2.37 1.87-3.9 3.77-5.4.4-.32.8-.63 1.17-.96 6.51-5.56 11.13-16.56 9.49-30.84H32Z",clipRule:"evenodd"}),i.createElement("path",{fill:"#0E101A",d:"M14.77 4.64v-.5a.5.5 0 0 0-.5.44l.5.06Zm9.5 30.84.32-.38-.33.38Zm1.16.96.32-.4-.32.4Zm3.77 5.4h.5-.5Zm-.51 4.8-.48-.13.48.13Zm-6.1 4.93-.17-.48.16.48Zm-4.3 3.63h-.5c0 .28.23.5.5.5v-.5Zm27.41 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-4.28-3.63.16-.48-.16.48Zm-6.1-4.93.48-.12v-.01l-.49.13Zm-.52-4.8h-.5.5Zm3.77-5.4.3.4-.3-.4Zm1.17-.96.32.38-.32-.38Zm9.49-30.84.5-.06a.5.5 0 0 0-.5-.44v.5Zm-34.46.5H32v-1H14.77v1ZM24.6 35.1c-6.36-5.43-10.95-16.25-9.32-30.4l-1-.12c-1.65 14.41 3 25.59 9.67 31.28l.65-.76Zm1.16.95c-.4-.32-.8-.63-1.16-.95l-.65.76c.38.33.79.66 1.18.97l.63-.78Zm3.95 5.8a5.03 5.03 0 0 0-1.27-3.35c-.75-.91-1.75-1.7-2.68-2.45l-.63.78c.96.76 1.87 1.49 2.54 2.3.65.8 1.06 1.67 1.04 2.7l1 .01Zm-1.01 4.8.48.13v-.03a5.33 5.33 0 0 0 .08-.3l.17-.94c.12-.82.25-2.05.28-3.67l-1-.01a26.8 26.8 0 0 1-.43 4.4 7.18 7.18 0 0 1-.06.27l.48.14Zm-5.94 5.39c2.44-.84 5.53-1.87 6.42-5.27l-.97-.25c-.73 2.8-3.24 3.7-5.78 4.57l.33.95ZM18.8 55.2c0-.88.39-1.45 1.07-1.92.72-.5 1.72-.84 2.88-1.24l-.33-.95c-1.12.39-2.26.78-3.12 1.37-.89.61-1.5 1.46-1.5 2.74h1Zm13.2-.5H18.3v1H32v-1Zm0 1h13.7v-1H32v1Zm14.2-.5c0-1.28-.61-2.13-1.5-2.74-.86-.59-2-.98-3.12-1.37l-.33.95c1.16.4 2.16.75 2.88 1.24.68.47 1.07 1.04 1.07 1.92h1Zm-4.62-4.1c-2.54-.88-5.05-1.78-5.78-4.58l-.97.25c.9 3.4 3.98 4.43 6.42 5.27l.33-.95Zm-6.27-4.46.48-.13v-.01a5.92 5.92 0 0 1-.06-.26c-.04-.2-.1-.49-.16-.88a26.8 26.8 0 0 1-.27-3.53l-1 .01a27.78 27.78 0 0 0 .45 4.6 8.12 8.12 0 0 0 .07.31l.01.02v.01l.48-.14Zm-.01-4.81a4.04 4.04 0 0 1 1.04-2.7c.67-.81 1.58-1.54 2.54-2.3l-.63-.78c-.93.74-1.93 1.54-2.68 2.45-.76.92-1.3 2-1.27 3.34l1-.01Zm3.58-5c.4-.31.8-.64 1.18-.97l-.65-.76c-.37.32-.76.63-1.16.95l.63.78Zm1.18-.97c6.67-5.7 11.32-16.87 9.66-31.28l-.99.12c1.63 14.15-2.96 24.97-9.32 30.4l.65.76Zm9.17-31.72H32v1h17.23v-1Z"}),i.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.8 40h2.4"}),i.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.18 4.8H14.8c-.2 1.52-.33 3.25-.39 4.62.63.45 1.46.79 2.43.94 1.71.27 3.36-.15 4.3-.99.49 1.06 1.72 1.86 3.25 1.96 1.42.08 2.7-.44 3.43-1.29.6 1.14 2.23 1.96 4.2 1.96 1.95 0 3.6-.82 4.2-1.96.74.85 2.01 1.4 3.43 1.29 1.53-.1 2.79-.9 3.25-1.96.94.84 2.57 1.26 4.28.99a5.78 5.78 0 0 0 2.43-.94 79.1 79.1 0 0 0-.42-4.62Z"}),i.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 4.8H15.2C18.85 6.74 25.01 8 32 8s13.15-1.26 16.8-3.2H32Z"}),i.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M8.96 52c-.1 0-.16-.08-.16-.19.15-5.94-1.89-8.1-7.83-8.26-.1 0-.17-.08-.17-.19 0-.1.08-.16.19-.16 5.94.15 8.1-1.89 8.26-7.83 0-.1.08-.17.19-.17.1 0 .16.08.16.19-.15 5.94 1.89 8.1 7.83 8.24.1 0 .17.09.17.19s-.08.17-.19.17c-5.94-.15-8.1 1.88-8.26 7.82-.02.12-.08.19-.19.19ZM56.25 54.4c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11ZM39.84 26.4c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}))),null)}}];function tA(e=Math.random){return Math.floor(e()*eA.length)}const nA=r.UI.Node.make((({view:e,notify:t})=>{const{onMount:n}=(0,sd.F)(T.b(t({kind:"shortFormFeedEmptyMount"})));return i.createElement(Um,{style:rA,"data-testid":"short-form-feed-empty","aria-live":"polite",mount:n},e("emptyContentIndex").pipe(I.U((e=>{const t=eA[e].emptyState;return i.createElement(i.Fragment,null,i.createElement("div",{className:oA},i.createElement("p",{className:aA},t.title),i.createElement("p",{className:sA},t.description)),i.createElement("div",{className:lA},t.illustration))}))))})),iA=r.UI.Node.make((({view:e,notify:t})=>{const{onMount:n}=(0,sd.F)(T.b(t({kind:"shortFormFeedSuccessMount"})));return i.createElement(Um,{style:rA,"data-testid":"short-form-feed-success","aria-live":"polite",mount:n},e("emptyContentIndex").pipe(I.U((e=>{const t=eA[e].successState;return i.createElement(i.Fragment,null,i.createElement("div",{className:oA},i.createElement("p",{className:aA},t.title),i.createElement("p",{className:sA},t.description)),i.createElement("div",{className:lA},t.illustration))}))))})),rA={padding:`${zt.ux.rem(Dt.mh)}`,display:"flex",flexDirection:"row",justifyContent:"space-between"},oA=zt.ux.style({display:"flex",flexDirection:"column",marginRight:zt.ux.rem(2),justifyContent:"center"}),aA=zt.ux.style({margin:0,color:Qt.Z.TextBaseDefault,fontSize:zt.ux.rem(1),lineHeight:zt.ux.rem(1.5),fontWeight:700}),sA=zt.ux.style({margin:0,color:Qt.Z.TextBaseSubduedColor,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),fontWeight:400}),lA=zt.ux.style({width:zt.ux.rem(4),height:zt.ux.rem(4),minWidth:zt.ux.rem(4),minHeight:zt.ux.rem(4)}),cA=r.UI.Node.make((()=>i.createElement(Um,{"aria-busy":"true",style:uA,"data-testid":"short-form-feed-loading"},i.createElement(Lk,null),i.createElement("div",{className:dA},i.createElement("div",{className:mA}),i.createElement("div",{className:pA})),i.createElement("div",{className:hA},i.createElement("div",{className:fA}),i.createElement("div",{className:gA})),i.createElement("div",{className:vA(!0)}),i.createElement("div",{className:vA(!1)}),i.createElement("div",{className:bA},i.createElement("div",{className:yA}),i.createElement("div",{className:xA}))))),uA={padding:`${zt.ux.rem(Dt.mh)}`,display:"flex",flexDirection:"column",position:"relative"},dA=zt.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:zt.ux.rem(Dt.x),alignItems:"center"}),mA=zt.ux.style({width:zt.ux.rem(11.875),height:zt.ux.rem(1),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),pA=zt.ux.style({flex:1,maxWidth:zt.ux.rem(3.5),height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),hA=zt.ux.style({display:"flex",flexDirection:"row",gap:zt.ux.rem(Dt.F2),alignItems:"center",marginTop:zt.ux.rem(6.5*Dt.F2)}),fA=zt.ux.style({width:zt.ux.rem(1.25),height:zt.ux.rem(1.25),borderRadius:"50%",background:Du.BlueGray5}),gA=zt.ux.style({flex:1,height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),vA=e=>zt.ux.style({height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5,marginTop:zt.ux.rem(e?2.5*Dt.F2:Dt.mh)}),bA=zt.ux.style({display:"flex",flexDirection:"row",gap:zt.ux.rem(Dt.mh),alignItems:"center",marginTop:zt.ux.rem(Dt.mh+Dt.yC)}),yA=zt.ux.style({width:zt.ux.rem(4.125),height:zt.ux.rem(2),borderRadius:zt.ux.rem(Lu.xB),background:Du.BlueGray5}),xA=zt.ux.style({width:zt.ux.rem(3.125),height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.fe),background:Du.BlueGray5}),kA=(0,Wd.xb)(G_),SA=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{onMount:r}=(0,sd.F)((0,a.ls)(T.b(n({kind:"shortFormFeedMount"})),od.x(Wc.notifyFeedUnmount))),{onMount:s}=function(e,t){const{onMount:n,ref:i}=rd.P.useElWatcher();return rd.P.useSubscriptionTo(vt.aj([i,t]).pipe(I.U((([t,n])=>(0,a.zG)(t,j.bw((t=>t.style.setProperty(e,n)))))))),{onMount:n}}("--cardWidth",u.of("400"));return i.createElement(Um,{"data-testid":"short-form-feed",style:{padding:`${zt.ux.rem(Dt.x)} 0 0 0`},mount:e=>{r(e),s(e)},"aria-live":"polite"},i.createElement(oh,{style:Object.assign(Object.assign({},wA),{padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`})},i.createElement("div",{className:CA},"Review suggestions",i.createElement(kA,{count:t("suggestionCount")})),t("canExpandToLongForm").pipe(I.U((0,z.RN)(i.createElement(W_,{feedForm:"shortForm",onClick:n({kind:"toggleLongFormFeed"})}),null)))),e.pipe(I.U((({item:e,prevItem:t,transitions:r})=>i.createElement(qh,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:uk(),notify:(t,i,r)=>n({kind:"shortFormCardSduiNotify",item:e,sourceId:t,actions:i,actionScope:r})(),transitions:Array.from(r),prevContent:(0,a.zG)(t,o.map((e=>e.content))),onAnimationEnd:n({kind:"shortFormFeedAnimationEnd"}),onMount:n({kind:"shortFormCardMount",item:e}),longFormCardState:{viewKind:"focused"}})))))})),wA={display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),justifyContent:"space-between"},CA=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)}),EA=r.UI.Union.make("kind",{loadingState:cA,emptyState:nA,successState:iA,nonEmptyState:SA}),_A=r.UI.Group.make({feed:EA}),IA=r.UI.Group.make({feed:XI}),AA=r.UI.Union.make("kind",{none:r.UI.Node.empty,shortFormFeed:_A,longFormFeed:IA}),OA=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),i.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),i.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),i.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),i.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),RA=r.UI.Node.make((({notify:e})=>i.createElement(Um,{style:MA,"data-testid":"voice-banner"},i.createElement(oh,null,"Set your voice"),i.createElement("div",{className:FA},"Choose how you want your generated text to sound."),i.createElement(Zt.z,{style:PA,onClick:e({kind:ht.i.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},i.createElement(OA,{className:TA}),"Set voice")))),BA=r.UI.Union.asOption(RA),MA={gap:0,backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},FA=zt.ux.style({fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),color:Lt.I.Text.Base.Subdued}),TA=zt.ux.style({stroke:"white"}),PA={default:{alignSelf:"flex-start",marginTop:zt.ux.rem(Dt.x),padding:`0 ${zt.ux.rem(Dt.x)} 0 ${zt.ux.rem(Dt.F2)}`,lineHeight:zt.ux.rem(1.125),gap:zt.ux.rem(Dt.F2)},icon:Object.assign({marginLeft:0},(0,qt.fx)(1.5))},NA=r.UI.Grid.make((({slots:e})=>i.createElement(i.Fragment,null,e.suggestions,e.voiceBanner,e.documentOverview,e.intent,e.detectedReferences))),jA=r.UI.Knot.make(NA,{suggestions:AA,voiceBanner:BA,documentOverview:d_,intent:I_,detectedReferences:N_});var UA=n(55721);function zA(e,t=0){const n=function(e){return e.trim().replace(/\s+/g," ")}(e).split(" ").reduce(((e,n,i,r)=>Object.assign(Object.assign({},e),{head:i<r.length-t?e.head.concat(n):e.head,tail:i>=r.length-t?e.tail.concat(n):e.tail})),{head:[],tail:[]});return{head:n.head.join(" "),tail:n.tail.join(" ")}}const DA=({children:e,maxTailWordsCount:t=0})=>{const n=zA(e,t);return i.createElement("div",{className:GA},i.createElement("span",{className:ZA},n.head,n.head.length&&n.tail.length?"":null),n.tail.length?n.tail:null)},LA=({children:e,maxTailWordsCount:t=0})=>{const[n,r]=i.useState(t),{onMount:o,rect:a}=rd.P.useRectWatcher(),l=i.useRef(null),c=i.useMemo((()=>zA(e,n)),[n,e]),u=i.useMemo((()=>new s.xQ),[]);rd.P.useSubscriptionTo(i.useMemo((()=>u.pipe(UA.p(100),S.x(),T.b((e=>{r(e)})))),[]));const d=i.useMemo((()=>{return e=l.current,parseInt((null===(i=null===(n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===n?void 0:n.getComputedStyle(e))||void 0===i?void 0:i.fontSize)||(null===(o=null===(r=null==e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===o?void 0:o.getComputedStyle(e.ownerDocument.body).fontSize)||HA,10);var e,t,n,i,r,o}),[l.current]);return rd.P.useSubscriptionTo(i.useMemo((()=>a.pipe(M.oA,S.x(),_.h((e=>Boolean(e.width&&e.height))),T.b((e=>{if(e.width<9*d)u.next(0);else if(l.current&&l.current.clientWidth<l.current.scrollWidth){const i=l.current.clientWidth/(e.width||1/0);n&&i<.4?u.next(n-1):i>.6&&n<t&&u.next(n+1)}})))),[a])),i.createElement("div",{className:GA,ref:o},i.createElement("span",{className:ZA,ref:l},c.head,c.head.length&&c.tail.length?"":null),c.tail.length?c.tail:null)},GA=zt.ux.style({display:"flex",flexDirection:"row",whiteSpace:"nowrap",maxWidth:"100%",minWidth:0}),ZA=zt.ux.style({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",flexShrink:10}),HA="16px";const VA=(0,Wd.xb)((({dynamic:e=!1,maxTailWordsCount:t=0,children:n})=>e?i.createElement(LA,{maxTailWordsCount:t},n):i.createElement(DA,{maxTailWordsCount:t},n))),$A=({active:e,className:t,prefix:n,style:r,children:o})=>i.createElement("h1",{className:zt.ux.joinClasses([qA(void 0!==n,r),t])},e?i.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:WA,"aria-hidden":"true"},i.createElement("rect",{width:"16",height:"16",rx:"5",fill:"#018374"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"white"})):i.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:WA,"aria-hidden":"true"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"#646B81"})),n&&i.createElement("span",{className:KA},n),i.createElement(VA,{dynamic:!0,maxTailWordsCount:3},o)),KA=zt.ux.style({fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),color:Qt.Z.BrandGreen60}),WA=zt.ux.style({width:zt.ux.rem(1),height:zt.ux.rem(1)}),qA=(e,t)=>zt.ux.style(Object.assign({display:"grid",gridTemplateColumns:`${zt.ux.rem(1)} ${e?"min-content ":""}auto`,justifyItems:"start",alignItems:"center",gap:zt.ux.rem(Dt.x),color:Lt.I.Text.Base.Subdued,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"normal",margin:0,height:zt.ux.rem(1.5)},t)),QA=r.UI.Node.make((({state:e,notify:t})=>i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({selectedRange:e,selectedText:n})=>e?i.createElement(Zt.z,{variant:"tertiary",title:"Show the text used for this response.",style:JA,onClick:t({kind:ht.i.Kind.selectionContextInteraction,range:e,visibility:"attention"}),onMouseEnter:t({kind:ht.i.Kind.selectionContextInteraction,range:e,visibility:"visible"}),onMouseLeave:t({kind:ht.i.Kind.selectionContextInteraction,range:e,visibility:"hidden"}),name:"resultContextHeaderButton"},i.createElement($A,null,n)):i.createElement("div",{className:XA,"data-testid":"result-context-header"},i.createElement($A,null,n)))))))),YA=r.UI.Union.asOption(QA),JA={default:{justifyContent:"flex-start",padding:`0 ${zt.ux.rem(Dt.x)}`,margin:`0 ${zt.ux.rem(-Dt.x)}`,height:zt.ux.rem(2.5)}},XA=zt.ux.style({display:"flex",alignItems:"center",height:zt.ux.rem(2.5)}),eO=e=>i.createElement(Vt.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("rect",{width:"16",height:"16",rx:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7072 5.41421L6.50008 12.6213L2.29297 8.41421L3.70718 7L6.50008 9.79289L12.293 4L13.7072 5.41421Z",fill:"white"})),tO=({isMyVoice:e,isAnimated:t=!1,isBadge:n=!1,label:r="Use my style",inactiveLabel:o=r,onClick:a})=>i.createElement(Zt.z,{variant:"tertiary",name:"toggleVoice",onClick:a,size:"small",role:"checkbox","aria-checked":e,compact:!0,style:nO(e,t,n)},i.createElement(eO,Object.assign({width:16,height:16},(0,Wd.Sh)(iO,e?rO:oO))),e?r:o);function nO(e,t,n){return{default:{display:"flex",alignItems:"center",height:zt.ux.rem(1.25),lineHeight:zt.ux.rem(1.125),fontSize:zt.ux.rem(.75),color:e?Du.Green80:Du.BlueGray60,backgroundColor:e?Du.Green0:Du.BlueGray0,transition:t?zt.ux.seconds(.25):void 0,transitionProperty:t?"color, background-color":void 0},textPosRight:{padding:`0 ${zt.ux.rem(Dt.F2)}`},icon:{marginRight:zt.ux.rem(Dt.x),minWidth:zt.ux.rem(1),minHeight:zt.ux.rem(1)},hovered:{backgroundColor:e?zt.ux.color(Qt.Z.Green10).mix(zt.ux.color(Qt.Z.BlueGray5)).toRGBA().toString():Du.BlueGray10,color:e?Du.Green80:Du.BlueGray60},active:{backgroundColor:e?zt.ux.color(Qt.Z.Green10).mix(zt.ux.color(Qt.Z.BlueGray5)).toRGBA().toString():Du.BlueGray10,color:e?Du.Green80:Du.BlueGray60},disabled:n?{opacity:1,cursor:"default"}:void 0}}const iO=zt.ux.style({marginRight:zt.ux.rem(Dt.x),minWidth:zt.ux.rem(1),minHeight:zt.ux.rem(1),borderWidth:zt.ux.px(1),borderStyle:"solid",borderColor:Lt.I.Text.Base.Subdued,borderRadius:zt.ux.rem(Lu.xB),overflow:"hidden",transitionProperty:"background border-color",transitionDuration:zt.ux.seconds(.25),$nest:{svg:{stroke:"none"}}}),rO=zt.ux.style({background:Du.Green60,borderColor:Du.Green60,$nest:{path:{fill:Du.White}}}),oO=zt.ux.style({background:Du.White,borderColor:Lt.I.Text.Base.Subdued,$nest:{path:{fill:"transparent"}}}),aO=zt.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:zt.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:zt.ux.rem(1.3125),color:Lt.I.Text.Base.Default}),sO=({children:e})=>i.createElement("div",{className:aO},e),lO=({text:e})=>""!==e.trim()?i.createElement(sO,null,e):null,cO=(0,Wd.xb)(Zt.z),uO=({header:e,onClick:t,disabled:n})=>i.createElement(cO,{variant:"tertiary",compact:!0,disabled:n,onClick:t,className:gO,name:"editResultPrompt",size:"small",style:{hovered:{boxShadow:"none",backgroundColor:Qt.Z.ButtonBackgroundTertiaryHover},active:{boxShadow:"none",backgroundColor:Qt.Z.ButtonBackgroundTertiaryHover}}},i.createElement(Lv.u,{title:"Edit"},i.createElement("div",{className:vO},i.createElement("div",Object.assign({className:yO},$(e))))));var dO;!function(e){e.FadeIn="FadeIn",e.FadeOut="FadeOut"}(dO||(dO={}));const mO=({iconUrl:e,loading:t,header:n})=>{const[r,s]=i.useState({text:n,animationState:dO.FadeIn});return i.useEffect((()=>{s((e=>Object.assign(Object.assign({},e),{animationState:e.text!==n?dO.FadeOut:e.animationState})));const e=setTimeout((()=>s({text:n,animationState:dO.FadeIn})),250);return()=>clearTimeout(e)}),[n]),i.createElement("div",{className:fO},t?i.createElement(hw,{className:bO}):(0,a.zG)(e,o.fold(a.gn,(e=>i.createElement("img",{src:e,style:{width:zt.ux.rem(1.3125),height:zt.ux.rem(1.3125)}})))),i.createElement("span",Object.assign({"aria-live":"assertive",className:zt.ux.joinClasses([yO,r.animationState===dO.FadeIn&&xO,r.animationState===dO.FadeOut&&kO])},$(r.text))))},pO="headerBtn",hO=(0,qt.dD)({height:zt.ux.rem(1.5),lineHeight:zt.ux.rem(1.125),padding:`0 ${zt.ux.rem(Dt.F2)}`,margin:`0 ${zt.ux.rem(-Dt.F2)}`,overflow:"hidden"},pO),fO=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x+Dt.yC),height:zt.ux.rem(1.5),fontWeight:400,fontSize:zt.ux.rem(.875),lineHeight:zt.ux.rem(1.3125),color:Du.BlueGray60,overflow:"hidden"}),gO=zt.ux.joinClasses([pO,zt.ux.style(hO)]),vO=zt.ux.style({display:"flex",justifyContent:"space-between",width:"100%",gap:zt.ux.rem(Dt.F2)}),bO=zt.ux.style({marginBottom:`-${zt.ux.rem(Dt.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center"}),yO=zt.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",transitionProperty:"opacity",transitionDuration:zt.ux.seconds(.25)}),xO=zt.ux.style({opacity:1}),kO=zt.ux.style({opacity:0}),SO=r.UI.Grid.make((({slots:e,state:t})=>i.createElement(Gt.F.Fragment,null,t.pipe(I.U((({resultText:t,statusText:n,isMyVoiceStatus:r,sourceLabel:a,sourceIconUrl:s})=>i.createElement(ep,{"data-testid":"my-voice-in-progress-result",header:i.createElement(i.Fragment,null,e.header,i.createElement(wO,null,i.createElement(mO,{header:t.length>0?a:n,iconUrl:t.length>0?s:o.none,loading:0===t.length}),i.createElement(tO,{isBadge:!0,isAnimated:!0,isMyVoice:r,label:"Use my style"}))),body:t.length>0?i.createElement(i.Fragment,null,i.createElement(lO,{text:t}),i.createElement(EO,null)):null,isActive:!0}))))))),wO=({children:e})=>i.createElement("div",{className:CO},e),CO=zt.ux.style({display:"grid",gridTemplateColumns:"1fr auto"}),EO=()=>i.createElement("div",{className:zt.ux.style({position:"relative",overflow:"hidden",height:zt.ux.rem(.5),borderRadius:zt.ux.rem(Lu.xB),background:Du.BlueGray5,flexGrow:1})},i.createElement(Lk,null)),_O=(0,Wd.xb)(lO),IO=r.UI.Grid.make((({slots:e,view:t})=>i.createElement(ep,{"aria-busy":"true","data-testid":"in-progress-result",body:i.createElement(_O,{text:t("text")}),header:i.createElement(i.Fragment,null,e.header,i.createElement(mO,{header:"Working on it...",iconUrl:o.none,loading:!0})),isActive:!0}))),AO=(r.UI.Knot.make(SO,{header:YA}),r.UI.Knot.make(IO,{header:YA})),OO=r.UI.Union.asOption(AO),RO=({placeholder:e,error:t,openAnswer:n,onOpenAnswerChange:r,onSubmitButtonClick:s,onCancelButtonClick:l,onKeypressShiftEnter:c})=>i.createElement("form",{className:MO,onSubmit:e=>e.preventDefault()},i.createElement(vd,{className:PO,placeholder:[null!=e?e:""],text:n,onChange:r,ariaLabel:"Open ended answer",fitContentHeight:!0,theme:{fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)},onKeyDownShiftEnter:c}),(0,a.zG)(t,o.fold((()=>null),(e=>i.createElement("div",{className:NO},e)))),i.createElement("div",{className:BO},i.createElement("input",{type:"submit",value:"Submit",hidden:!0}),i.createElement(Zt.z,{variant:"secondary",style:FO,onClick:s},"Submit"),i.createElement(Zt.z,{variant:"tertiary",style:TO,onClick:l},"Dismiss"))),BO=zt.ux.style({display:"flex",justifyContent:"flex-start",alignItems:"center"}),MO=zt.ux.style({width:zt.ux.percent(100),display:"flex",flexDirection:"column",gap:zt.ux.rem(Dt.x)}),FO={default:{fontSize:zt.ux.rem(.75),fontWeight:"bold",marginRight:zt.ux.rem(Dt.x),minHeight:zt.ux.rem(Dt.sD),lineHeight:zt.ux.rem(Dt.sD)}},TO={default:{fontSize:zt.ux.rem(.75),minHeight:zt.ux.rem(Dt.sD),lineHeight:zt.ux.rem(Dt.sD)}},PO=zt.ux.style({border:`1px solid ${Du.BlueGray10}`,minHeight:zt.ux.rem(7.5*Dt.F2),backgroundColor:Du.White,borderRadius:zt.ux.rem(Dt.x),width:zt.ux.percent(100),padding:`${zt.ux.rem(1.25*Dt.F2)} ${zt.ux.rem(Dt.x)}`,boxSizing:"border-box"}),NO=zt.ux.style({color:Lt.I.Background.Critical.Default,fontSize:zt.ux.rem(.75),marginBottom:zt.ux.rem(Dt.F2)});var jO=n(56377);const UO=e=>i.createElement(Vt.a1,Object.assign({width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},e),i.createElement("path",{d:"M9 1L11.069 6.15226L16.6085 6.52786L12.3477 10.0877L13.7023 15.4721L9 12.52L4.29772 15.4721L5.65228 10.0877L1.39155 6.52786L6.931 6.15226L9 1Z",fill:"transparent",stroke:Du.NeutralGray50,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),zO=({rating:e,ratingLabels:t,maxScore:n})=>(0,a.zG)(e,o.fold((()=>t.length>=n&&n>1?i.createElement("div",{className:GO},i.createElement("span",{className:LO},t[0]),i.createElement("span",{className:LO},t[n-1])):null),(e=>e-1>=0&&t.length>=e?i.createElement("div",{className:DO},i.createElement("span",null,t[e-1])):null))),DO=zt.ux.style({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",fontWeight:"bold",fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(.875)}),LO=zt.ux.style({color:Du.NeutralGray50}),GO=zt.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(.875)});var ZO=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const HO=({disabled:e,rating:t,ratingLabels:n,maxScore:r,onSelectionChange:s})=>{const[l,c]=i.useState(o.none),u=i.useMemo((()=>[]),[]),d=t=>{e||s(t+1)},m=t=>{e||c(o.some(t+1))},p=()=>{e||c(o.none)};return i.createElement(i.Fragment,null,i.createElement("div",{className:VO,style:{gridTemplateColumns:`repeat(${r}, minmax(${zt.ux.rem(Dt.x0)}, ${zt.ux.rem(Dt.Lw)}))`},role:"slider","aria-valuemin":0,"aria-valuenow":(0,a.zG)(t,o.getOrElse((()=>0))),"aria-valuemax":5,"aria-valuetext":(0,a.zG)(t,o.fold((()=>"Not yet rated"),(e=>n[e-1])))},Array.from({length:r}).map(((s,c)=>i.createElement($O,{key:c,onClick:()=>d(c),isFilled:(0,a.zG)(t,o.fold((()=>!1),(e=>c<e)))||(0,a.zG)(l,o.fold((()=>!1),(e=>c<e))),onMouseEnter:()=>m(c),onMouseLeave:p,onFocus:()=>m(c),onBlur:p,isSelected:(0,a.zG)(t,o.fold((()=>!1),(e=>c+1===e))),isFocusable:(0,a.zG)(t,o.fold((()=>0===c),(e=>c+1===e))),ariaLabel:`Rate this generated output as ${n[c]}`,ref:e=>u.push(e),onKeyDown:t=>((t,n)=>{var i,s,c,m;e||("ArrowRight"!==t.key&&"ArrowUp"!==t.key||((0,a.zG)(l,o.fold((()=>!1),(e=>e<r)))?null===(i=u[n+1])||void 0===i||i.focus():null===(s=u[0])||void 0===s||s.focus()),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||((0,a.zG)(l,o.fold((()=>!1),(e=>e>1)))?null===(c=u[n-1])||void 0===c||c.focus():null===(m=u[4])||void 0===m||m.focus()),"Enter"!==t.key&&" "!==t.key||d(n))})(t,c),disabled:e})))),i.createElement(zO,{rating:(0,a.zG)(t,o.fold((0,a.a9)(l),(0,a.a9)(t))),ratingLabels:n,maxScore:r}),i.createElement(jO.L,{small:!0}))},VO=zt.ux.style({display:"grid",width:zt.ux.percent(100),justifyContent:"center"}),$O=i.forwardRef(((e,t)=>{var{isFilled:n,ariaLabel:r,disabled:o,isSelected:a,isFocusable:s}=e,l=ZO(e,["isFilled","ariaLabel","disabled","isSelected","isFocusable"]);return i.createElement("button",Object.assign({className:KO,role:"radio","aria-label":r,disabled:o,"aria-checked":a,tabIndex:s?0:-1,ref:t},l),i.createElement(UO,{className:n?WO:""}))}));$O.displayName="StarButton";const KO=zt.ux.style({border:"none",background:"none",cursor:"pointer",padding:0,borderRadius:zt.ux.rem(Dt.F2),$nest:{"&:focus-visible":{outlineStyle:"none",boxShadow:`0 0 0 2px ${Lt.I.Text.Base.Subdued}`}}}),WO=zt.ux.style({$nest:{"& path":{fill:Du.Gold40,stroke:Du.Gold40}}}),qO=(0,dh.I)("nocolor",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#1C1C1C",d:"M0 16C0 7.163 7.162 0 16.001 0s16 7.163 16 16c0 7.732-5.482 14.183-12.773 15.676-1.042.213-2.121.324-3.222.324H0z"}),i.createElement("path",{fill:"#fff",d:"m19.876 14.484-1.788 2.94h6.02c-.93 5.116-6.62 8.599-12.304 5.653a6.7 6.7 0 0 1-2.861-2.834c-3.27-6.226 1.197-12.49 7.093-12.49a8.19 8.19 0 0 1 6.2 2.839l1.58-2.6a11.08 11.08 0 0 0-8.566-3.148c-5.562.384-10.071 4.994-10.342 10.56-.309 6.393 4.8 11.688 11.124 11.688s11.14-4.999 11.14-11.14c0-.5-.038-.989-.1-1.468z"}))));var QO=n(46140);const YO=({stage:e,rating:t,initialTitle:n,acknowledgment:r,acknowledgmentTitle:o,onCloseButtonClick:a,className:s})=>i.createElement("div",{className:zt.ux.joinClasses([JO,s])},i.createElement(qO,{className:eR}),i.createElement(tR,{stage:e,rating:t,initialTitle:n,acknowledgment:r,acknowledgmentTitle:o}),i.createElement(Zt.z,{variant:"tertiary","aria-label":"Close survey",style:{default:{marginLeft:"auto",padding:0,minWidth:zt.ux.rem(Dt.sD),minHeight:zt.ux.rem(Dt.sD)},hovered:{backgroundColor:Du.BlueGray10},active:{backgroundColor:Du.BlueGray10}},onClick:a},i.createElement(QO.V,null))),JO=zt.ux.style({display:"flex",alignItems:"center"}),XO=zt.ux.style({fontSize:zt.ux.rem(.75)}),eR=zt.ux.style({width:zt.ux.rem(1.25),height:zt.ux.rem(1.25),marginRight:zt.ux.rem(Dt.qp)}),tR=({stage:e,rating:t,initialTitle:n,acknowledgmentTitle:r,acknowledgment:s})=>{switch(e){case hu.Stage.Type.Rating:return i.createElement("span",{className:XO},n);case hu.Stage.Type.Feedback:return i.createElement("span",{className:XO},"Your rating:"," ",Array.from({length:t}).map((()=>"")).join(" "));case hu.Stage.Type.Completed:return i.createElement("span",{className:XO},(0,a.zG)(r,o.fold((()=>i.createElement("b",null,"Thank you!")),(e=>i.createElement("b",null,e))))," ",(0,a.zG)(s,o.fold((()=>"Your feedback helps us improve."),(e=>e))));case hu.Stage.Type.Closed:return null;default:return(0,m.L0)(e)}},nR=r.UI.Union.asOption(r.UI.Node.make((({notify:e,state:t})=>i.createElement(Gt.F.Fragment,null,t.pipe(I.U((t=>i.createElement(iR,Object.assign({},t,{onRatingSelectionChange:t=>{e({kind:ht.i.Kind.surveyRatingSelectionChange,rating:t})()},onOpenAnswerChange:t=>e({kind:ht.i.Kind.surveyOpenAnswerChange,openAnswer:t})(),onSubmitButtonClick:e({kind:ht.i.Kind.surveySubmitButtonClick}),onKeypressShiftEnter:e({kind:ht.i.Kind.surveyKeyPressShiftEnter}),onCancelButtonClick:e({kind:ht.i.Kind.surveyCancelButtonClick}),onCloseButtonClick:e({kind:ht.i.Kind.surveyCloseButtonClick})}))))))))),iR=({survey:e,stage:t,transitionStage:n,rating:r,errors:s,openAnswer:l,onOpenAnswerChange:c,onRatingSelectionChange:u,onCloseButtonClick:d,onCancelButtonClick:m,onSubmitButtonClick:p,onKeypressShiftEnter:h})=>i.createElement(Um,{style:rR,"data-testid":`survey-${e.resultId}`},i.createElement(YO,{className:zt.ux.joinClasses([n===hu.Stage.Type.Feedback?sR:void 0,t===hu.Stage.Type.Feedback?lR:void 0]),stage:t,rating:(0,a.zG)(r,o.getOrElse((0,a.a9)(1))),initialTitle:e.title,acknowledgment:e.acknowledgment,acknowledgmentTitle:e.acknowledgmentTitle,onCloseButtonClick:d}),t!==hu.Stage.Type.Completed&&i.createElement(i.Fragment,null,i.createElement("div",{className:zt.ux.joinClasses([cR,n===hu.Stage.Type.Feedback?sR:void 0,t===hu.Stage.Type.Feedback?lR:void 0])},i.createElement("div",{className:dR,hidden:t!==hu.Stage.Type.Rating},i.createElement(HO,{onSelectionChange:u,rating:r,disabled:o.isSome(r),maxScore:e.maxScore,ratingLabels:e.ratingLabels})),(0,a.zG)(e.openAnswer,o.fold((0,a.a9)("(Optional) Please share your feedback to help us improve."),(e=>e.placeholder)),(e=>i.createElement("div",{className:uR,hidden:t!==hu.Stage.Type.Feedback},i.createElement(RO,{placeholder:e,onSubmitButtonClick:p,onKeypressShiftEnter:h,onCancelButtonClick:m,onOpenAnswerChange:c,openAnswer:l,error:(0,a.zG)(s,o.chain((e=>e.openAnswerError)))}))))))),rR={backgroundColor:Du.BlueGray0,padding:`${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`},oR=zt.ux.keyframes({from:{opacity:1},to:{opacity:.3}}),aR=zt.ux.keyframes({from:{opacity:.3},to:{opacity:1}}),sR=zt.ux.style({animation:`${oR} 0.3s ease-in-out`}),lR=zt.ux.style({animation:`${aR} 0.3s ease-in-out`}),cR=zt.ux.style({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:zt.ux.rem(Dt.yC)}),uR=zt.ux.style({width:zt.ux.percent(100)}),dR=zt.ux.style({maxWidth:zt.ux.percent(100),width:"fit-content",paddingTop:zt.ux.rem(Dt.F2)});var mR=n(96833);const pR=({onInsert:e,onRephrase:t,onDismiss:n,onCopy:r,onProvideFeedback:s,onReportOffensive:l,onReportMenuVisibilityChange:c,disabled:u,isActive:d})=>{const m=o.isSome(t)||o.isSome(e),p=i.createElement(S_,{reportMenuButtonClassName:bR,onClickProvideFeedback:s,onClickReportOffensive:l,onOpenChange:c,onDismiss:n});return i.createElement("div",{className:hR},i.createElement("div",{className:gR},(0,a.zG)(e,o.map((e=>i.createElement(Zt.z,{name:"insertResult",onClick:e,size:"large",key:"insert",variant:d?"primary":"secondary",textPosition:"everywhere"},i.createElement("div",{className:zt.ux.style({position:"relative"})},i.createElement("div",{className:zt.ux.style({fontWeight:"bold",visibility:"hidden"})},"Insert"),i.createElement("div",{className:zt.ux.style({position:"absolute",top:0,left:0,right:0})},"Insert"))))),o.toNullable),(0,a.zG)(t,o.map((e=>i.createElement(Zt.z,{variant:"tertiary",name:"rephraseResult",onClick:e,disabled:u,size:"large",key:"rephrase"},"Retry"))),o.toNullable),i.createElement(Gt.F.Fragment,null,m?p:null)),i.createElement(Gt.F.div,{className:vR},m?null:p,(0,a.zG)(r,o.map((e=>i.createElement(Zt.z,{name:"copyResult",onClick:e,size:"small",variant:"tertiary",title:"Copy result"},i.createElement("div",{className:zt.ux.style({padding:zt.ux.rem(.5),height:zt.ux.rem(1),width:zt.ux.rem(1)})},i.createElement(mR.c,{width:"1rem",height:"1rem"}))))),o.toNullable)))},hR=zt.ux.style({gap:zt.ux.rem(Dt.x),display:"flex",alignItems:"center",justifyContent:"space-between"}),fR={display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)},gR=zt.ux.style(fR),vR=zt.ux.style(fR),bR=$m,yR=r.UI.Grid.make((({state:e,notify:t,slots:n})=>i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({disabled:e,result:r,originalAction:s})=>i.createElement(ep,{"data-testid":`ai-notification-${r.id}`,body:i.createElement(i.Fragment,null,i.createElement("div",{className:zt.ux.style({borderBottom:`0.5px solid ${Du.BlueGray10}`})},i.createElement(lO,{text:r.text}),i.createElement("div",{className:zt.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:zt.ux.rem(.5),marginTop:zt.ux.rem(.5),marginBottom:zt.ux.rem(.75)})},n.actions)),(0,a.zG)(s,o.map((n=>i.createElement("div",null,i.createElement(lO,{text:"Continue with your original prompt:"}),i.createElement("div",{className:zt.ux.style({paddingTop:zt.ux.rem(.125)})},i.createElement(xR,{disabled:e,action:n,onClick:t({kind:ht.i.Kind.userPromptSubmit,prompt:n})}))))),o.toNullable)),header:i.createElement("h2",{className:zt.ux.style({fontSize:zt.ux.rem(1),marginBottom:zt.ux.rem(.2),marginTop:0,lineHeight:zt.ux.rem(1.5)})},"Review your AI use"),isActive:!0,footer:i.createElement(pR,{isActive:!1,onRephrase:o.none,onInsert:o.none,onCopy:o.none,onDismiss:t({kind:ht.i.Kind.resultCardDismissButtonClick,result:r}),onProvideFeedback:t({kind:ht.i.Kind.openFeedbackFormButtonClick,source:kp.x.Source.resultCard}),onReportOffensive:t({kind:ht.i.Kind.reportOffensiveResultButtonClick,result:r}),onReportMenuVisibilityChange:e=>t({kind:ht.i.Kind.reportMenuVisibilityChange,trigger:wu.card(r.id),visible:e})(),disabled:e}),style:{borderColor:Du.Gold40,borderTopWidth:zt.ux.rem(.375)}}))))))),xR=({action:e,onClick:t,disabled:n})=>i.createElement("button",{onClick:t,disabled:n,className:zt.ux.style({textDecoration:"underline",color:Du.BlueGray60,background:zt.ux.important("none"),border:"none",cursor:"pointer",lineHeight:zt.ux.rem(1.375),fontSize:zt.ux.rem(.875),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"left"})},'"',e.arg.value,'"'),kR=r.UI.List.make(b.bw,gm),SR=r.UI.Knot.make(yR,{actions:kR}),wR=({title:e,url:t,contextText:n})=>{const r=i.useRef(null),s=M_(r,e),l=(0,a.zG)(n,o.getOrElse((()=>s)));return(0,a.zG)(t,o.fold((()=>i.createElement(_R,{tooltip:l},i.createElement("span",{className:CR,ref:r},e))),(t=>i.createElement(_R,{tooltip:l},i.createElement("div",{className:ER},i.createElement(B_.d,{href:t,className:CR,ref:r},e))))))},CR=zt.ux.style({display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",maxWidth:"100%",$nest:{"&:visited":{color:"inherit"}}}),ER=zt.ux.style({display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}),_R=({children:e,tooltip:t})=>t?i.createElement(Lv.u,{align:"topCenter",title:i.createElement("div",{className:IR},t)},e):i.createElement(i.Fragment,null,e),IR=zt.ux.style({maxWidth:zt.ux.rem(80*Dt.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),AR=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#646B81",d:"M8.001 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4M12.803 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4M3.2 6.8a1.2 1.2 0 1 1 0 2.4 1.2 1.2 0 0 1 0-2.4"})))),OR=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",d:"M5.818 2.429A5.92 5.92 0 0 0 2 8a6 6 0 0 0 3.857 5.606m4.286-11.177C12.398 3.29 14 5.44 14 8a5.97 5.97 0 0 1-3.824 5.606M2.546 2h3.272v3.273M13.455 14h-3.273v-3.273"})))),RR={minWidth:zt.ux.rem(1.5),minHeight:zt.ux.rem(1.5),lineHeight:zt.ux.rem(1.5)},BR=({onRegenerateWithoutReference:e})=>i.createElement(Dw,{name:"referenceMenu",title:"Reference menu","aria-label":"Reference menu",label:i.createElement(AR,null),theme:{buttonStyle:{default:Object.assign({padding:0},RR),icon:RR}},onAction:t=>{if("regenerateWithoutReference"===t)return e()}},i.createElement(rk.ck,{key:"regenerateWithoutReference",textValue:"regenerateWithoutReference"},i.createElement(OR,{className:MR}),"Regenerate without this reference")),MR=zt.ux.style({marginRight:zt.ux.rem(Dt.x)}),FR=({className:e,children:t})=>i.createElement("div",Object.assign({},(0,Wd.Sh)(TR,e)),t),TR=zt.ux.style({color:Du.BlueGray60,fontWeight:400,fontSize:zt.ux.rem(.625),lineHeight:zt.ux.rem(1),background:Du.BlueGray0,borderRadius:zt.ux.rem(Lu.fe),padding:`0 ${zt.ux.rem(Dt.F2)}`,cursor:"default"}),PR=({privacyLevel:e})=>{switch(e.kind){case"public":return i.createElement(NR,null);case"restricted":return i.createElement(jR,null);default:return(0,a.Rz)(e)}},NR=()=>i.createElement(i.Fragment,null),jR=()=>i.createElement(Lv.u,{align:"topLeft",title:i.createElement("div",{className:UR},"This item has restricted access and is only visible to those added to the file")},i.createElement(FR,{className:zR},"Private")),UR=zt.ux.style({width:zt.ux.rem(9),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),zR=zt.ux.style({border:`1px solid ${Qt.Z.BorderBaseSubduedColor}`,borderRadius:zt.ux.rem(Dt.F2)}),DR=(0,Wd.xb)(Zt.z),LR=({className:e,isOpen:t,references:n,onOpenChange:r,onRegenerateWithoutReference:o,onReferencesMount:s,onReferencesUnmount:l})=>{const{onMount:c}=(0,sd.F)((0,a.ls)(T.b(s),od.x(l)));return i.createElement(Gt.F.div,{className:e,mount:c},i.createElement(DR,{variant:"tertiary",style:GR,onClick:()=>r(!t),name:"collapseReferencesList",size:"small"},i.createElement("span",{className:HR},n.length," ",As._6(n.length,"reference","references")),i.createElement($_,null,t?i.createElement(V_,null):i.createElement(H_,null))),i.createElement("ul",{className:VR,hidden:!t,"aria-hidden":!t},n.map((({id:e,privacyLevel:t,title:n,iconUrl:r,url:a,contextText:s},l)=>i.createElement("li",{key:l,className:$R},i.createElement("img",{src:r,className:KR,alt:""}),i.createElement(wR,{title:n,url:a,contextText:s}),i.createElement("div",{className:WR},i.createElement(PR,{privacyLevel:t}),void 0!==o?i.createElement(BR,{onRegenerateWithoutReference:()=>o(e)}):null))))))},GR={default:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:zt.ux.rem(Dt.x),paddingRight:zt.ux.rem(Dt.x)}},ZR={fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),color:Lt.I.Text.Base.Subdued,userSelect:"none"},HR=zt.ux.style(ZR),VR=zt.ux.style({fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),color:Lt.I.Text.Base.Default,margin:0,padding:0}),$R=zt.ux.style({height:zt.ux.rem(Dt.sD),display:"flex",alignItems:"center",borderRadius:zt.ux.rem(Lu.xB)}),KR=zt.ux.style({minWidth:zt.ux.rem(Dt.mh),height:zt.ux.rem(Dt.mh),marginRight:zt.ux.rem(Dt.x)}),WR=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"auto"});var qR,QR=n(36991);!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(qR||(qR={}));const YR=({insertOp:e})=>{const t=JR(e.attributes),n=XR(e.attributes);switch(t){case qR.generatedText:return i.createElement(rB,{style:n},e.insert);case qR.knowledgeHubTerm:return i.createElement(oB,{style:n},e.insert);case qR.none:return iB(e.attributes)?i.createElement(sB,{style:n,href:e.attributes.link},e.insert):i.createElement(aB,{style:n},e.insert);default:return(0,a.Rz)(t)}},JR=e=>{switch(!0){case null==e?void 0:e[uB.knowledgeHubTerm]:return qR.knowledgeHubTerm;case null==e?void 0:e[uB.generatedText]:return qR.generatedText;default:return qR.none}},XR=e=>{const t={};return eB(e)&&(t.fontWeight="bold"),tB(e)&&(t.fontStyle="italic"),nB(e)&&(t.textDecoration="underline"),iB(e)&&(t.color=Du.Blue60),t},eB=e=>!0===(null==e?void 0:e.bold),tB=e=>!0===(null==e?void 0:e.italic),nB=e=>!0===(null==e?void 0:e.underline),iB=e=>"string"==typeof(null==e?void 0:e.link),rB=({children:e,style:t})=>i.createElement("span",{className:lB,style:t},e),oB=({children:e,style:t})=>i.createElement(Lv.u,{title:"from Knowledge Share"},i.createElement("span",{className:cB,style:t},e)),aB=({children:e,style:t})=>i.createElement("span",{style:t},e),sB=({children:e,style:t,href:n})=>i.createElement("a",{style:t,href:n,target:"_blank",rel:"noreferrer"},e),lB=zt.ux.style({backgroundColor:Du.Green0,borderRadius:zt.ux.rem(Lu.fe)}),cB=zt.ux.style({backgroundColor:Du.Blue0,borderRadius:zt.ux.rem(Lu.fe)});var uB;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(uB||(uB={}));const dB=({replacementDelta:e})=>i.createElement(sO,null,e.map(((e,t)=>QR.s.isInsert(e)?i.createElement(YR,{key:t,insertOp:e}):null))),mB=({className:e,title:t,description:n})=>i.createElement("div",{className:zt.ux.joinClasses([pB,e])},i.createElement("div",{className:hB},i.createElement("span",{className:bB},t)),i.createElement("ul",{className:fB},n.map(((e,t)=>i.createElement("li",{className:gB,key:t},i.createElement(tw,{className:vB}),i.createElement("span",{className:yB},e)))))),pB=zt.ux.style({display:"flex",flexDirection:"column"}),hB=zt.ux.style({display:"flex"}),fB=zt.ux.style({display:"flex",flexDirection:"column",listStyle:"none",margin:0,padding:0,$nest:{"& li":{marginTop:zt.ux.rem(Dt.F2)}}}),gB=zt.ux.style({display:"flex",alignItems:"center"}),vB=zt.ux.style({marginRight:zt.ux.rem(Dt.x),width:zt.ux.rem(Dt.mh),maxHeight:zt.ux.rem(Dt.mh+Dt.yC),$nest:{"& path:first-of-type":{stroke:Du.Green60}}}),bB=zt.ux.style({fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),fontWeight:700,color:Lt.I.Text.Base.Subdued}),yB=zt.ux.style({fontSize:zt.ux.rem(Dt.qp),lineHeight:zt.ux.rem(Dt.mh+Dt.yC),color:Lt.I.Text.Base.Subdued,flex:1});var xB;!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(xB||(xB={}));r.UI.Union.asOption(r.UI.Node.make((({notify:e,state:t})=>i.createElement(Gt.F.Fragment,null,t.pipe(I.U((t=>i.createElement(tO,{key:"voiceButton",isMyVoice:t.selectedVoice===oe.x.GeneratedTextVoice.user,onClick:e({kind:ht.i.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})}))))))));const kB=r.UI.Node.make((({notify:e,state:t})=>i.createElement(Gt.F.div,{className:SB},t.pipe(I.U((t=>{switch(t.kind){case xB.clickableSearchLabel:return i.createElement(uO,{header:t.label,disabled:t.disabled,onClick:e({kind:ht.i.Kind.resultCardHeaderClick,prompt:t.copiablePrompt})});case xB.searchLabel:return i.createElement(mO,{header:t.label,iconUrl:t.iconUrl,loading:!1});case xB.knowledgeHub:return i.createElement(mO,{header:"Knowledge Share content was used.",iconUrl:o.none,loading:!1});default:return(0,m.L0)(t)}})))))),SB=zt.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:zt.ux.rem(Dt.x)}),wB=r.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{notifyUnmount:r}=i.useContext(ld);return i.createElement(Gt.F.Fragment,null,t.pipe(I.U((({result:t,disabled:s,isActive:l,isReferencesOpen:c,isMyVoice:u})=>i.createElement(ep,{"data-testid":`result-${t.id}`,body:i.createElement(dB,{replacementDelta:(0,a.zG)(t.replacementDelta,v.fold(a.yR,(e=>u?e.user:e.generic)))}),header:i.createElement(i.Fragment,null,e.contextHeader,e.header),footer:i.createElement(i.Fragment,null,i.createElement(pR,{isActive:l,onRephrase:(0,a.zG)(t,o.fromPredicate(oe.x.isComplete),o.filter((e=>e.supportedActions.has(oe.x.SupportedAction.rephrase))),o.map((e=>n({kind:ht.i.Kind.resultCardRephraseButtonClick,result:e,selectedVoice:u?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic})))),onInsert:(0,a.zG)(o.some(n({kind:ht.i.Kind.resultCardInsertButtonClick,result:t,selectedVoice:u?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic})),o.filter((()=>t.supportedActions.has(oe.x.SupportedAction.insert)))),onCopy:(0,a.zG)(o.some(n({kind:ht.i.Kind.resultCardCopyButtonClick,result:t,selectedVoice:u?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic})),o.filter((()=>t.supportedActions.has(oe.x.SupportedAction.copy)))),onDismiss:n({kind:ht.i.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:n({kind:ht.i.Kind.openFeedbackFormButtonClick,source:kp.x.Source.resultCard}),onReportOffensive:n({kind:ht.i.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>n({kind:ht.i.Kind.reportMenuVisibilityChange,trigger:wu.card(t.id),visible:e})(),disabled:s}),(0,a.zG)(t.references,o.filter((e=>e.length>0)),o.map((e=>i.createElement(LR,{className:_B,isOpen:c,references:e,onOpenChange:e=>n({kind:ht.i.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onRegenerateWithoutReference:oe.x.isComplete(t)?e=>n({kind:ht.i.Kind.regenerateWithoutReferenceButtonClick,result:t,referenceId:e,selectedVoice:u?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic})():void 0,onReferencesMount:e=>n({kind:ht.i.Kind.mount,name:bt.e.referencesList,element:e})(),onReferencesUnmount:()=>r({kind:ht.i.Kind.unmount,name:bt.e.referencesList})}))),o.toNullable),(0,a.zG)(oe.x.isComplete(t)?t.changesSummary:o.none,o.map((e=>i.createElement(mB,{title:e.title,description:e.description,className:EB}))),o.toNullable)),isActive:l,onHovered:e=>n({kind:ht.i.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>n({kind:ht.i.Kind.resultCardFocusChange,focused:e,resultId:t.id})(),onCopy:n({kind:ht.i.Kind.resultCardCopyToClipboard,result:t,selectedVoice:u?oe.x.GeneratedTextVoice.user:oe.x.GeneratedTextVoice.generic})})))))})),CB=r.UI.Knot.make(wB,{header:kB,contextHeader:YA}),EB=zt.ux.style({marginBottom:zt.ux.rem(Dt.F2)}),_B=zt.ux.style({marginTop:zt.ux.rem(Dt.x)}),IB=r.UI.Union.make("kind",{promptResultComplete:CB,aiUsageNotification:SR}),AB=r.UI.List.make(b.bw,IB),OB=r.UI.Group.make({results:AB}),RB=r.UI.Union.make("kind",{none:r.UI.Node.empty,loading:r.UI.Knot.make(IO,{header:r.UI.Node.empty}),loaded:OB}),BB=zt.ux.style({display:"grid",height:"100%",alignItems:"end"}),MB=r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:BB},e.documentOverview,e.intent,e.resultList,e.lastResultSurvey,e.inProgressResult,e.generationError,e.detectedReferences))),FB=r.UI.Knot.make(MB,{documentOverview:d_,intent:I_,resultList:RB,lastResultSurvey:nR,inProgressResult:OO,generationError:r_,detectedReferences:N_}),TB=r.UI.Group.make({toneReport:fC}),PB=r.UI.Group.make({plagiarism:yS}),NB=r.UI.Group.make({writingExpert:YS}),jB=r.UI.Union.make("kind",{home:jA,thread:FB,error:r_,followUpPrompt:th,legacyVoiceProfile:uE,voiceProfile:WE,feedbackForm:Vp,skill:Cw,settings:ew,toneReport:TB,plagiarism:PB,writingExpert:NB,signedOut:ow}),UB=e=>i.createElement(Vt.a1,Object.assign({width:"17",height:"16",viewBox:"0 0 17 16"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 8C2.5 4.41015 5.41015 1.5 9 1.5C12.5899 1.5 15.5 4.41015 15.5 8C15.5 11.5899 12.5899 14.5 9 14.5C7.85901 14.5 6.73812 14.1997 5.75 13.6292C5.51085 13.4911 5.42892 13.1853 5.56699 12.9462C5.70506 12.707 6.01085 12.6251 6.25 12.7631C7.08611 13.2459 8.03455 13.5 9 13.5C9.96545 13.5 10.9139 13.2459 11.75 12.7631C12.5861 12.2804 13.2804 11.5861 13.7631 10.75C14.2459 9.91389 14.5 8.96545 14.5 8C14.5 4.96243 12.0376 2.5 9 2.5C5.96243 2.5 3.5 4.96243 3.5 8V8.29289L4.64645 7.14645C4.84171 6.95118 5.15829 6.95118 5.35355 7.14645C5.54882 7.34171 5.54882 7.65829 5.35355 7.85355L3.35355 9.85355L3 10.2071L2.64645 9.85355L0.646447 7.85355C0.451184 7.65829 0.451184 7.34171 0.646447 7.14645C0.841709 6.95118 1.15829 6.95118 1.35355 7.14645L2.5 8.29289V8ZM9 4C9.27614 4 9.5 4.22386 9.5 4.5V7.5H11.5C11.7761 7.5 12 7.72386 12 8C12 8.27614 11.7761 8.5 11.5 8.5H9H8.5V8V4.5C8.5 4.22386 8.72386 4 9 4Z",stroke:"none"})),zB=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{notifyUnmount:r}=i.useContext(ld),{onMount:o}=(0,sd.F)((0,a.ls)(T.b((e=>n({kind:ht.i.Kind.mount,name:bt.e.historyButton,element:e})())),c.w((e=>t("state").pipe(I.U((e=>"enabled"===e)),dt.O(!1),S.x(),jt.G(),T.b((([t,i])=>{!t&&i?n({kind:ht.i.Kind.mount,name:bt.e.historyButtonActive,element:e})():t&&!i&&n({kind:ht.i.Kind.unmount,name:bt.e.historyButtonActive})()}))))),od.x((()=>{r({kind:ht.i.Kind.unmount,name:bt.e.historyButton}),r({kind:ht.i.Kind.unmount,name:bt.e.historyButtonActive})}))));return i.createElement("div",{className:LB},i.createElement(Zt.z,{variant:"tertiary",mount:o,onClick:n({kind:ht.i.Kind.restoreHistoryButtonClick}),disabled:t("state").pipe(I.U((e=>"disabled"===e||"loading"===e))),compact:!0,size:"small",name:"restoreHistory",title:e.pipe(I.U((({state:e})=>"disabled"===e?"No prior prompt to go back to.":"enabled"===e?"Pick up with your last prompt.":void 0)))},i.createElement(UB,null)),i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({state:e})=>"disabled"!==e?i.createElement("div",{key:"badge",role:"presentation",className:GB}):null)))))})),DB=r.UI.Union.asOption(zB),LB=zt.ux.style({position:"relative"}),GB=zt.ux.style({width:zt.ux.rem(.375),height:zt.ux.rem(.375),borderRadius:zt.ux.rem(.375),background:Qt.Z.BrandGreen60,position:"absolute",top:zt.ux.rem(Dt.yC),right:zt.ux.rem(-Dt.yC)}),ZB=i.forwardRef((function({icon:e,label:t,className:n,onClick:r},o){return i.createElement(Zt.z,{variant:"tertiary",onClick:r,name:"actionBrick",size:"small",style:VB,className:n},(0,a.zG)(e,v.fold((e=>"more"===e?i.createElement($t,null):"plagiarism"===e?i.createElement(Kt,null):"writingExpert"===e?i.createElement(Wt,null):(0,m.L0)(e)),(e=>i.createElement("img",{src:e,style:{width:zt.ux.rem(1),height:zt.ux.rem(1)}})))),i.createElement(Gt.F.div,Object.assign({mount:o},$(t),{className:$B})))})),HB={gapRems:Dt.F2,paddingLeftRems:Dt.F2,paddingRightRems:Dt.x,fontSizeRems:.75,fontFamily:"Inter",fontWeight:"normal",iconWidthRems:1},VB={default:{fontSize:zt.ux.rem(HB.fontSizeRems),fontFamily:HB.fontFamily,fontWeight:HB.fontWeight,gap:zt.ux.rem(HB.gapRems),padding:`0 ${zt.ux.rem(HB.paddingRightRems)} 0 ${zt.ux.rem(HB.paddingLeftRems)}`},icon:(0,qt.fx)(HB.iconWidthRems)},$B=zt.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:zt.ux.rem(1.125)});let KB=null;function WB(e,t){KB||(KB=document.createElement("canvas"));const n=KB.getContext("2d");if(n){n.font=t;return n.measureText(e).width}return null}const qB=({style:e,iconStyle:t,mode:n="standard"})=>{const r="standard"==n?1:.875;return i.createElement("div",{className:zt.ux.style({height:zt.ux.rem(2*r),display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),padding:`0 ${zt.ux.rem(Dt.x)} 0 ${zt.ux.rem(Dt.F2)}`,borderRadius:zt.ux.rem(Dt.F2),border:`1px solid ${Du.BlueGray5}`,boxSizing:"border-box"},e)},i.createElement("div",{className:zt.ux.style({width:zt.ux.rem(1.5*r),height:zt.ux.rem(1.5*r),borderRadius:"50%",background:Du.BlueGray5},t)}),i.createElement("div",{className:zt.ux.style({height:zt.ux.rem(.5*r),borderRadius:zt.ux.rem(Dt.W9),background:Du.BlueGray5,flexGrow:1})}))},QB=({widthRems:e})=>i.createElement(qB,{style:{width:zt.ux.rem(e),height:zt.ux.rem(1.5),border:0},iconStyle:{width:zt.ux.rem(1),height:zt.ux.rem(1)}}),YB=Dt.mh,JB=()=>i.createElement("div",{role:"separator",className:zt.ux.style({width:zt.ux.rem(YB),height:zt.ux.rem(1.5),position:"relative"})},i.createElement("div",{className:zt.ux.style({position:"absolute",top:0,bottom:0,left:"50%",borderLeft:`0.5px solid ${Du.BlueGray20}`})})),XB=({loading:e,actions:t,className:n,onShownActionsListLengthChange:r,onHasHiddenActionsChange:l,onActionClick:c,onActionMount:u,onActionsMount:d})=>{const{onMount:m,ref:p}=rd.P.useElWatcher(),h=Lm(p,!0),f=i.useContext(id.u.Context),g=i.useMemo((()=>vt.aj([h,f,t]).pipe(I.U((([e,t,n])=>({width:(0,a.zG)(e,o.map((e=>Math.round(e.width)))),remSize:t,actions:n}))),O.skipBy(U.MW({width:o.getEq(U.lr),remSize:U.lr,actions:b.Eh(U.f7(((e,t)=>e.action.label===t.action.label)))})),I.U((({width:e,remSize:t,actions:n})=>(0,a.zG)(e,o.map((e=>function(e,t,n,i,r){const o=[];let a=0;for(let s=0;s<e.length;++s){const l=WB(e[s].action.label,r),c=(null!=l?l:0)+n+(o.length>0?i:0);null!==l&&a+c<=t&&(a+=c,o.push(e[s]))}return o}(n,e,function(e){return(HB.paddingLeftRems+HB.iconWidthRems+HB.gapRems+HB.paddingRightRems)*e}(t),YB*t,function(e){return`${HB.fontWeight} ${HB.fontSizeRems*e}px ${HB.fontFamily}`}(t))))))),O.shareReplay({refCount:!0,bufferSize:1}))),[t,h,f]),v=i.useMemo((()=>vt.aj([g,t,e]).pipe(_.h((([e,t,n])=>!1===n)),I.U((([e,t])=>(0,a.zG)(e,o.fold((()=>0),(e=>e.length)),(e=>(r(e),e<t.length))))),S.x(),T.b((e=>l(e))))),[g,t]);rd.P.useSubscriptionTo(v);const y=i.useRef(new s.xQ),x=i.useRef([]);return rd.P.useSubscriptionTo(y.current.pipe(si.QV(Ld.Z),F.e(0),T.b((()=>{d(),x.current.forEach((({a:e,idx:t})=>u(e,t)))})))),i.createElement(Gt.F.div,{className:zt.ux.joinClasses([eM,n]),mount:m},vt.aj([g,e]).pipe(T.b((()=>x.current=[])),I.U((([e,t])=>(0,a.zG)(e,o.filter((()=>!t)),o.fold((()=>i.createElement(Gt.F.Fragment,null,vt.aj([h,f]).pipe(I.U((([e,t])=>(0,a.zG)(e,o.map((e=>({width:Math.floor(e.width),remSize:t})))))),O.skipBy(o.getEq(U.MW({width:U.lr,remSize:U.lr}))),I.U(o.fold(a.gn,(({width:e,remSize:t})=>{const n=15+YB,r=9/n,o=6/n,a=e/t-YB,s=Math.min(r*a,9),l=Math.min(o*a,6);return i.createElement(i.Fragment,null,i.createElement(QB,{widthRems:s}),i.createElement(JB,null),i.createElement(QB,{widthRems:l}))})))))),(e=>i.createElement("div",{className:tM},e.map(((e,t)=>i.createElement(i.Fragment,{key:e.action.id},t>0?i.createElement(JB,null):null,i.createElement(ZB,{icon:e.action.icon,label:e.action.label,onClick:()=>c(e,t),ref:n=>{n&&(x.current.push({a:e,idx:t}),y.current.next())}}))))))))))))},eM=zt.ux.style({display:"flex",height:zt.ux.rem(1.5)}),tM=zt.ux.style({display:"flex",height:zt.ux.rem(1.5)});const nM=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const r=i.useMemo((()=>p.h.create(!1)),[]),o=i.useMemo((()=>p.h.create(0)),[]),{refCallback:s}=Gd();return i.createElement("section",{className:oM,"data-testid":"actions-bar"},i.createElement("div",{className:rM},e.header),i.createElement(XB,{className:aM,loading:t("loading"),actions:t("actions"),onActionClick:(e,t)=>n({kind:ht.i.Kind.actionBrickClick,action:e,placement:"homeView",position:t})(),onActionMount:(e,t)=>{n({kind:ht.i.Kind.actionBrickMount,action:e,placement:"homeView",position:t})(),n({kind:ht.i.Kind.actionBrickShow,action:e,placement:"homeView",position:t})()},onShownActionsListLengthChange:d.wW(o),onHasHiddenActionsChange:d.wW(r),onActionsMount:n({kind:ht.i.Kind.actionsMount})}),i.createElement(Gt.F.div,{className:iM},vt.aj([t("hasMore"),r,o]).pipe(I.U((([e,r,o])=>e||r?i.createElement(i.Fragment,null,i.createElement(ZB,{icon:v.left("more"),label:"More",onClick:n({kind:ht.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:o}),ref:s(n({kind:ht.i.Kind.actionBrickMount,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:o}),n({kind:ht.i.Kind.actionBrickShow,action:{kind:"allResults",filterPredicate:a.W8},placement:"homeView",position:o}))}),i.createElement(Gt.F.Fragment,null,t("hasHistoryButton").pipe(I.U((0,z.RN)(i.createElement(JB,null),null))))):null))),e.historyButton))})),iM=zt.ux.style({gridArea:"controls",display:"flex",flexDirection:"row"}),rM=zt.ux.style({gridArea:"header"}),oM=zt.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:'"header header" "actions controls"',gridColumnGap:zt.ux.rem(Dt.x),alignItems:"center",padding:`${zt.ux.rem(Dt.F2)} ${zt.ux.rem(Dt.mh)}`,margin:`${zt.ux.rem(Dt.x)} 0`}),aM=zt.ux.style({gridArea:"actions",display:"flex",height:zt.ux.rem(1.5)}),sM=()=>i.createElement(qB,{style:{width:zt.ux.rem(7.75),height:zt.ux.rem(2.5),border:0,gap:zt.ux.rem(.875),marginLeft:zt.ux.rem(1)},iconStyle:{width:zt.ux.rem(1.25),height:zt.ux.rem(1.25)}}),lM=r.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{refCallback:r}=Gd(),{onMount:o}=(0,sd.F)(T.b(n({kind:ht.i.Kind.actionsMount})));return i.createElement(Gt.F.div,{className:cM,"data-testid":"actions-panel"},e.header,t.pipe(I.U((({loading:t,actions:s,hasMore:l,maxActionsCount:c})=>t?Array.from({length:c+1}).map(((e,t)=>i.createElement(i.Fragment,{key:t},0!==t?i.createElement(Zd,null):null,i.createElement(sM,null)))):i.createElement(i.Fragment,null,i.createElement("div",{ref:o,className:pM},s.map(((e,t)=>i.createElement(i.Fragment,{key:e.action.id},0!==t&&i.createElement(Zd,null),i.createElement(Jt,{icon:e.action.icon,label:e.action.label,onClick:n({kind:ht.i.Kind.actionBrickClick,action:e,position:t,placement:"threadView"}),ref:r(n({kind:ht.i.Kind.actionBrickMount,action:e,position:t,placement:"threadView"}),n({kind:ht.i.Kind.actionBrickShow,action:e,position:t,placement:"threadView"}))}))))),l?i.createElement(i.Fragment,null,i.createElement(Zd,null),i.createElement("div",{className:uM},i.createElement(Jt,{icon:v.left("more"),label:"More",onClick:n({kind:ht.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:a.W8},position:s.length,placement:"threadView"}),ref:r(n({kind:ht.i.Kind.actionBrickMount,action:{kind:"allResults",filterPredicate:a.W8},position:s.length,placement:"threadView"}),n({kind:ht.i.Kind.actionBrickShow,action:{kind:"allResults",filterPredicate:a.W8},position:s.length,placement:"threadView"})),style:dM}),i.createElement("div",{className:mM},e.historyButton))):null)))))})),cM=zt.ux.style({display:"flex",flexDirection:"column",marginTop:zt.ux.rem(Dt.x),marginBottom:zt.ux.rem(Dt.x)}),uM=zt.ux.style({position:"relative"}),dM={default:{width:"100%"}},mM=zt.ux.style({position:"absolute",right:zt.ux.rem(Dt.mh),bottom:"50%",transform:"translateY(50%)"}),pM=zt.ux.style({display:"flex",flexDirection:"column"}),hM=e=>i.createElement(Vt.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e),i.createElement("circle",{cx:"10",cy:"10",r:"6",stroke:"#646B81"}),i.createElement("path",{d:"M7.5 10H12.5",stroke:"#646B81",strokeLinecap:"round"})),fM=r.UI.Node.make((({view:e,notify:t})=>i.createElement("div",{className:vM},i.createElement($A,{active:!0,style:bM,prefix:"Work with:"},e("selectedText")),i.createElement(Zt.z,{variant:"tertiary",onClick:t({kind:ht.i.Kind.removeSelectionContextClick}),compact:!0,size:"small",name:"removeContext",title:"Remove"},i.createElement(hM,null))))),gM=r.UI.Union.asOption(fM),vM=zt.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",gap:zt.ux.rem(Dt.x)}),bM={height:zt.ux.rem(2.5)},yM=r.UI.Node.make((({view:e})=>i.createElement(i.Fragment,null,i.createElement(Gt.F.h1,{className:CM},e("title")),i.createElement(Gt.F.Fragment,null,e("subtitle").pipe(I.U((e=>e?i.createElement("p",{className:EM},e):null))))))),xM=r.UI.Union.make("kind",{none:r.UI.Node.empty,title:yM,selectionContext:r.UI.Composite.make(r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:_M},e.header))),fM)}),kM=r.UI.Knot.make(nM,{header:gM,historyButton:DB}),SM=r.UI.Knot.make(lM,{header:xM,historyButton:DB}),wM=r.UI.Union.make("kind",{none:r.UI.Node.empty,actionBar:kM,actionPanel:SM}),CM=zt.ux.style({padding:zt.ux.rem(Dt.x),paddingLeft:zt.ux.rem(Dt.mh),margin:0,fontWeight:700,fontSize:zt.ux.rem(1),lineHeight:"1.5em"}),EM=zt.ux.style({padding:`0 ${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.x)} ${zt.ux.rem(Dt.mh)}`,margin:0,fontSize:zt.ux.rem(.875),lineHeight:"1.5em",color:Lt.I.Text.Base.Subdued}),_M=zt.ux.style({padding:`0 ${zt.ux.rem(Dt.qp)} 0 ${zt.ux.rem(Dt.mh)}`}),IM=r.UI.Grid.make((({slots:e})=>i.createElement(Gt.F.section,{className:OM},e.header,e.fieldContainer))),AM=r.UI.Knot.make(IM,{header:wM,fieldContainer:Rm}),OM=zt.ux.style({backgroundColor:Qt.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${Qt.Z.BorderBaseSubduedColor}`,height:"100%",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit",boxSizing:"border-box"}),RM=r.UI.Union.make("kind",{none:r.UI.Node.empty,skill:Cw,promptStudio:AM}),BM=(0,dh.I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2 8h12m0 0L9.448 3M14 8l-4.552 5"})))),MM=e=>e>0?`Return home to review ${e} ${As._6(e,"suggestion","suggestions")}`:"Return home",FM=r.UI.Node.make((({state:e,notify:t})=>i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({disabled:e,label:n,count:r})=>i.createElement(Zt.z,{"aria-label":MM(r),disabled:e,name:"suggestions-counter-button",onClick:t({kind:"suggestionCountButtonClick"}),size:"small",title:n,variant:"tertiary"},i.createElement($_,null,i.createElement(BM,{className:TM})),r>0?`${r} ${As._6(r,"suggestion","suggestions")}`:null))))))),TM=zt.ux.style({$nest:{"& path":{transform:"rotate(180deg)",transformOrigin:"center"}}}),PM=e=>i.createElement(Vt.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),i.createElement("g",{id:"icon"},i.createElement("g",{id:"Vector"},i.createElement("path",{d:"M14.6429 3.92857L14.607 3.96447C13.3023 5.26917 11.0714 4.34512 11.0714 2.5H8.92857C8.92857 4.34512 6.69774 5.26917 5.39304 3.96447L5.35714 3.92857L3.92857 5.35714L3.96447 5.39304C5.26917 6.69774 4.34512 8.92857 2.5 8.92857V11.0714C4.34512 11.0714 5.26917 13.3023 3.96447 14.607L3.92857 14.6429L5.35714 16.0714L5.39304 16.0355C6.69774 14.7308 8.92857 15.6549 8.92857 17.5H11.0714C11.0714 15.6549 13.3023 14.7308 14.607 16.0355L14.6429 16.0714L16.0714 14.6429L16.0355 14.607C14.7308 13.3023 15.6549 11.0714 17.5 11.0714V8.92857C15.6549 8.92857 14.7308 6.69774 16.0355 5.39304L16.0714 5.35714L14.6429 3.92857Z",fill:"none",strokeLinejoin:"round"}),i.createElement("path",{d:"M12.5 10C12.5 11.3807 11.3807 12.5 10 12.5C8.61929 12.5 7.5 11.3807 7.5 10C7.5 8.61929 8.61929 7.5 10 7.5C11.3807 7.5 12.5 8.61929 12.5 10Z",fill:"none",strokeLinejoin:"round"})))),NM=r.UI.Node.make((({notify:e})=>i.createElement(Zt.z,{variant:"tertiary",onClick:t=>{t&&H(t.currentTarget)&&e({kind:ht.i.Kind.settingsButtonClick,buttonRect:t.currentTarget.getBoundingClientRect()})()},compact:!0,size:"small",name:"settings","aria-label":"Settings",title:"Settings"},i.createElement(PM,null)))),jM=r.UI.Union.asOption(NM),UM=r.UI.Node.make((({notify:e})=>i.createElement(Zt.z,{variant:"tertiary",style:DM,onClick:e({kind:ht.i.Kind.headerVoiceButtonClick}),name:"headerVoiceProfileButton",size:"small",title:"My voice"},i.createElement(OA,null)))),zM=r.UI.Union.asOption(UM),DM={default:{padding:0},icon:(0,qt.fx)(1.5)},LM=(0,Wd.xb)(Zt.z),GM=r.UI.Node.make((({notify:e,view:t})=>i.createElement("div",{className:HM},i.createElement(LM,{variant:"tertiary",compact:!0,onClick:t("activeView").pipe(I.U((t=>e({kind:ht.i.Kind.headerGoBackButtonClick,goBackFrom:t})))),size:"small",title:"Back to Home","aria-label":"Back to Home",name:"goBack"},i.createElement($_,null,i.createElement(BM,{className:ZM}))),i.createElement(Gt.F.div,{className:VM},t("activeViewIconUrl").pipe(I.U(o.fold(a.gn,(e=>i.createElement("img",{src:e,style:{width:zt.ux.rem(1.25),height:zt.ux.rem(1.25)},alt:"","aria-hidden":"true"}))))))))),ZM=zt.ux.style({$nest:{"& path":{transform:"rotate(180deg)",transformOrigin:"center"}}}),HM=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x),color:Du.BlueGray60,fontWeight:400,fontSize:zt.ux.rem(.75),lineHeight:zt.ux.rem(1.125)}),VM=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(Dt.x)}),$M=e=>i.createElement(Vt.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("path",{d:"M4 4L8 8M12 12L8 8M8 8L12 4M8 8L4 12",stroke:"#646B81",strokeLinecap:"round"})),KM=r.UI.Node.make((({notify:e})=>i.createElement(Zt.z,{variant:"tertiary",onClick:e({kind:ht.i.Kind.headerCloseButtonClick}),compact:!0,size:"small",name:"headerClose",title:"Close Grammarly Assistant","aria-label":"Close Grammarly Assistant"},i.createElement($M,null))));var WM=n(49708);const qM=(0,dh.I)("nocolor",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#D31332",fillRule:"evenodd",d:"M6.586 2.414a2 2 0 0 1 2.828 0l4.172 4.172a2 2 0 0 1 0 2.828l-4.172 4.172a2 2 0 0 1-2.828 0L2.414 9.414a2 2 0 0 1 0-2.828zM8 4.25a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0V5A.75.75 0 0 1 8 4.25m0 7.25A.75.75 0 1 0 8 10a.75.75 0 0 0 0 1.5",clipRule:"evenodd"})))),QM=(0,dh.I)("nocolor",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fill:"#D67400",fillRule:"evenodd",d:"M6.94 2.629a1.21 1.21 0 0 1 2.12 0l4.774 8.485c.472.838-.118 1.886-1.06 1.886H3.226c-.943 0-1.533-1.048-1.061-1.886zM8 5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 5m0 6.5A.75.75 0 1 0 8 10a.75.75 0 0 0 0 1.5",clipRule:"evenodd"})))),YM=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),i.createElement("path",{d:"M14.256,7.346C15.403,7.699 16.301,8.597 16.654,9.744C16.759,10.085 17.241,10.085 17.346,9.744C17.699,8.597 18.597,7.699 19.744,7.346C20.085,7.241 20.085,6.759 19.744,6.654C18.597,6.301 17.699,5.403 17.346,4.256C17.241,3.915 16.759,3.915 16.654,4.256C16.301,5.403 15.403,6.301 14.256,6.654C13.915,6.759 13.915,7.241 14.256,7.346ZM17,5.339C17.392,6.034 17.967,6.608 18.661,7C17.967,7.392 17.392,7.966 17,8.661C16.608,7.967 16.034,7.392 15.339,7C16.034,6.608 16.608,6.034 17,5.339Z",fill:"inherit",stroke:"none"}),i.createElement("path",{d:"M6.426,13.577C8.338,14.165 9.835,15.662 10.423,17.574C10.598,18.142 11.402,18.142 11.577,17.574C12.165,15.662 13.662,14.165 15.574,13.577C16.142,13.402 16.142,12.598 15.574,12.423C13.662,11.835 12.165,10.338 11.577,8.426C11.402,7.858 10.598,7.858 10.423,8.426C9.835,10.338 8.338,11.835 6.426,12.423C5.858,12.598 5.858,13.402 6.426,13.577ZM11,9.69C11.693,11.138 12.862,12.307 14.31,13C12.862,13.693 11.693,14.862 11,16.31C10.307,14.862 9.138,13.693 7.69,13C9.138,12.307 10.307,11.138 11,9.69Z",fill:"inherit",stroke:"none"})),JM=e=>i.createElement(Vt.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),i.createElement("path",{d:"M6.426,13.577C8.338,14.165 9.835,15.662 10.423,17.574C10.598,18.142 11.402,18.142 11.577,17.574C12.165,15.662 13.662,14.165 15.574,13.577C16.142,13.402 16.142,12.598 15.574,12.423C13.662,11.835 12.165,10.338 11.577,8.426C11.402,7.858 10.598,7.858 10.423,8.426C9.835,10.338 8.338,11.835 6.426,12.423C5.858,12.598 5.858,13.402 6.426,13.577ZM11,9.69C11.693,11.138 12.862,12.307 14.31,13C12.862,13.693 11.693,14.862 11,16.31C10.307,14.862 9.138,13.693 7.69,13C9.138,12.307 10.307,11.138 11,9.69Z",fill:"inherit",stroke:"none"}));const XM=r.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:r}=rd.P.useElWatcher(),o=i.useMemo((()=>n.pipe(M.oA,c.w((e=>WM.R(e,"mouseenter").pipe(Ny.c(u.of(null).pipe(Ah.g(500),$s.R(WM.R(e,"mouseleave"))))))),T.b(t({kind:ht.i.Kind.creditsInfoHover})))),[n]);rd.P.useSubscriptionTo(o);const{onMount:a}=(0,sd.F)(T.b((e=>t({kind:ht.i.Kind.mount,name:bt.e.creditsInfoButton,element:e})())));return i.createElement(Gt.F.Fragment,null,e.pipe(I.U((({user:e,genAIAvailability:n})=>{let o;if(h._.isActive(n)){const[t,r]=function(e){const t=`${Number(e.promptsRemaining).toLocaleString()}/${Number(e.promptsAllocated).toLocaleString()} prompts left. `,n=h._.Active.daysUntilRefillDate(e.refillDate),i=h._.Active.hoursUntilRefillDate(e.refillDate);return n>0?[t,`Next refill in ${n} ${As._6(n,"day","days")}.`]:i>0?[t,`Next refill in ${i} ${As._6(i,"hour","hours")}.`]:[t,"Next refill in less than an hour."]}(n);o=h._.isActive(n)?i.createElement(i.Fragment,null,t,i.createElement("br",null),r):pe(e)?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium."}else o=pe(e)?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium.";const s=i.createElement(eF,{promptsRemaining:n.promptsRemaining});return pe(e)&&h._.isActive(n)?i.createElement(i.Fragment,null,h._.isActiveUnlimited(n)?null:i.createElement(Lv.u,{title:o},i.createElement("div",{ref:r,className:nF},s))):i.createElement("div",{ref:r},i.createElement(Zt.z,{variant:"tertiary",compact:!0,onClick:t({kind:ht.i.Kind.creditsInfoClick}),size:"small",title:o,name:"creditsInfo",mount:a,textPosition:"everywhere"},s))}))))})),eF=({promptsRemaining:e})=>e<50?i.createElement("div",{className:iF},i.createElement(JM,{className:aF}),0===e?i.createElement(qM,{className:sF}):i.createElement(QM,{className:sF})):i.createElement(YM,{className:aF}),tF=r.UI.Union.asOption(XM),nF=zt.ux.style({cursor:"help"}),iF=zt.ux.style({position:"relative"}),rF=(0,qt.fx)(1.5),oF=(0,qt.fx)(.75),aF=zt.ux.style(rF),sF=zt.ux.style(Object.assign(Object.assign({},oF),{top:zt.ux.rem(1/16),right:0,position:"absolute"})),lF=e=>i.createElement(Vt.a1,{className:e.className,viewBox:"0 0 20 20",width:22,height:22},i.createElement("path",{d:"M0 10C0 4.478 4.459 0 9.96 0c5.502 0 9.96 4.477 9.96 10 0 4.833-3.412 8.864-7.95 9.797A9.937 9.937 0 0 1 9.962 20H0V10Z",fill:"#027E6F",stroke:"none"}),i.createElement("path",{d:"M16.853 9.053h-4.489l-1.057 1.838h3.701c-.58 3.197-4.12 5.374-7.66 3.533a4.175 4.175 0 0 1-1.78-1.771c-2.036-3.892.745-7.807 4.415-7.807 1.513 0 2.875.665 3.811 1.72l.949-1.65a6.881 6.881 0 0 0-5.25-1.888c-3.462.24-6.269 3.121-6.438 6.6-.192 3.996 2.989 7.305 6.925 7.305 3.937 0 6.935-3.124 6.935-6.963 0-.312-.024-.618-.063-.917Z",fill:"#fff",stroke:"none"})),cF=({className:e})=>i.createElement(lF,{className:zt.ux.joinClasses([uF,e])}),uF=zt.ux.style(Object.assign({display:"flex",alignItems:"center",justifyContent:"center"},(0,qt.fx)(1.375))),dF=r.UI.Node.make((({view:e})=>i.createElement(Gt.F.Fragment,null,e("version").pipe(I.U(o.fold((()=>i.createElement(cF,null)),(e=>i.createElement("div",{className:mF},i.createElement(cF,null),i.createElement("small",null,`v${e}`))))))))),mF=zt.ux.style({display:"flex",alignItems:"center",gap:zt.ux.rem(.5)}),pF=r.UI.Node.make((({state:e})=>i.createElement(Gt.F.h2,{className:fF},e))),hF=r.UI.Union.asOption(pF),fF=zt.ux.style({textAlign:"center",fontSize:zt.ux.rem(.75),fontWeight:700,lineHeight:zt.ux.rem(1.125)}),gF=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:CF},e.button))),{button:FM}),vF=r.UI.Union.make("kind",{logoOnly:dF,suggestionCount:gF,backButton:GM}),bF=r.UI.Grid.make((({slots:e})=>i.createElement("div",{className:SF},e.credits,e.voiceButton,e.settingsButton,e.closeButton))),yF=r.UI.Knot.make(bF,{voiceButton:zM,credits:tF,settingsButton:jM,closeButton:KM}),xF=r.UI.Grid.make((({slots:e})=>i.createElement(i.Fragment,null,e.left,i.createElement("div",{className:wF},e.pageTitle),e.right))),kF=r.UI.Knot.make(xF,{left:vF,pageTitle:hF,right:yF}),SF=zt.ux.style(Object.assign(Object.assign({},{display:"flex",alignItems:"center"}),{gap:zt.ux.rem(Dt.F2)})),wF=zt.ux.style({flexGrow:1}),CF=zt.ux.style({marginLeft:zt.ux.rem(-Dt.F2)});var EF=n(45174);const _F=r.UI.Knot.make(xp,{header:kF,content:jB,footer:RM,notifications:Ju,onboarding:nd});function IF(e){return r.Z.composeKnot({content:(t=e.notifications,r.Z.composeList(b.Ot,(()=>t.state.view(b.GY)),(e=>function(e,t){return r.Z.fromSideEffect((e=>{switch(e.kind){case"dismissNotification":return t.dismiss(e.id);case"mouseOver":return t.hover(!0);case"mouseOut":return t.hover(!1);default:(0,m.L0)(e)}}),e)}(e,t))))});var t}function AF(e){return(0,a.ls)(yn.B(),(t=>{return mn.T(t.pipe((n=e.logger,i=e.lifecycle,(0,a.ls)(_.h(vp),T.b((e=>{i.onVisuallyReady({content:e.element})})),I.U((e=>o.some(e.element))),rd.P.FocusTrap.dynamicFocusTrap(rd.P.FocusTrap.InitialFocus.none,OF,function(e){return(t,n)=>(t instanceof HTMLIFrameElement?t.contentDocument&&t.contentDocument.body?WM.R(t.contentDocument.body,n):P.E:WM.R(t,n)).pipe(bn.K((i=>{const r=(0,be.N)(i);return e.error("Failed to attach event listener during focus trap.",{htmlElementTagName:null!==t?t.tagName:null,eventName:n,reason:r.message}),P.E})))}(n)),vn.l()))),t.pipe(function(e){return(0,a.ls)(_.h(bp),R.q(1),T.b((t=>{e.onReadyToDrag({dragHandle:t.element})})),vn.l())}(e.lifecycle)),t.pipe(function(e){return(0,a.ls)(_.h(gp),T.b((t=>e.onFocusStateChange({isFocused:t.focused}))),vn.l())}(e.lifecycle)),t.pipe(function(e){return(0,a.ls)(_.h(yp),T.b((t=>e.onSizeChange({width:t.rect.width,height:t.rect.height}))),vn.l())}(e.lifecycle)),p.h.combine(e.assistant.state.view("canScroll"),function(e){return p.h.combine(e.assistant.state.view("genAISession"),e.promptActions.state.view("contextualActions"),e.userSurvey.state,e.routing.activeView,((e,t,n,i)=>(0,a.zG)(e,o.chain(re.toStarted),o.filter((()=>"thread"===i.kind)),o.map((e=>{const i=(0,a.zG)(e.inProgressResult,o.fold((()=>""),(e=>e.text))),r=`${e.results.length}`,s=o.isSome(n.activeSurvey),l=(0,a.zG)(t,o.fold((()=>""),(0,a.ls)((e=>e.actions),b.ke(5),b.UI((e=>e.id)),(e=>e.join("-")))));return`${i}_${r}_${s}_${l}`})))))}(e),e.promptMenu.state,p.h.combine(e.lifecycle.heightBehavior,e.textEditor.state.view("hasBeenNonEmpty"),e.routing.activeView.view("kind"),(0,a.zG)(e.revision,o.fold((()=>p.h.create(null).view()),(e=>e.feedForm.state.view("feedForm")))),((t,n,i,r)=>"fitContent"===t.kind?Object.assign(Object.assign({},t),{height:RF(t,i,r,n,e.experience)}):t)),e.lifecycle.widthBehavior,e.lifecycle.dragBehavior,((e,t,n,i,r,s)=>({canScrollContent:e,menuRef:(0,a.zG)(n,o.chain((e=>e.promptMenuContainer))),scrollContentToBottomToken:t,heightBehavior:i,widthBehavior:r,dragBehavior:s}))));var n,i}))}function OF(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function RF(e,t,n,i,r){return void 0!==e.height?e.height:"plagiarism"===t||"writingExpert"===t||"home"===t&&"longForm"===n&&("genAIAndRevision"===r&&(0,a.zG)(i,o.exists(a.yR))||"revision"===r)?e.maxHeight:e.height}function BF(e){return r.Z.fromSideEffect((t=>e.notify(t)),p.h.combine(e.feedbackForm.stagingFeedbackFormData,e.feedbackForm.domain,((e,t)=>{var n;return{formData:e,domain:t,source:null!==(n=null==e?void 0:e.source)&&void 0!==n?n:kp.x.Source.resultCard}})))}function MF(e){return r.Z.composeOption(function(e){return r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("selectedAction").view(o.chain((e=>(0,a.zG)(e.args[0].hints,o.map((t=>({header:e.label,iconUrl:e.icon.right,hintsHeader:t.header,hintsItems:t.items,radioOptions:W.match({string:()=>o.none,radio:e=>o.some(e.radioOptions)})(e.args[0])}))))))).pipe(M.oA))}(e),(()=>e.assistant.state.view("selectedAction").view(o.chain((e=>e.args[0].hints)))))}function FF(e){return void 0!==e.find((e=>"applyAlerts"===e.type||"removeAlerts"===e.type))}function TF(e,t){return n=>(0,a.zG)(e||t?Es.map(n,(n=>"button"!==n.type?n:e&&n.name.value===String(Gn.ButtonPrev)||t&&n.name.value===String(Gn.ButtonNext)?Object.assign(Object.assign({},n),{state:Dn.Disabled}):n)):o.some(n),o.getOrElse((()=>n)))}const PF=e=>(0,a.zG)(Es.map(e,(e=>"button"!==e.type?e:e.name.value===String(Gn.ButtonPrev)||e.name.value===String(Gn.ButtonNext)?Object.assign(Object.assign({},e),{state:Dn.Hidden}):e)),o.getOrElse((()=>e)));function NF(e,t,n,i){return r.Z.fromSideEffect((n=>{switch(n.kind){case"longFormCardSduiNotify":return FF(n.actions)&&t.onSuggestionAddressed(),e.processActions(n.actions,n.item,n.scope,n.sourceId);case"longFormCardMount":return e.onItemMount(n.isFocused,n.item);default:(0,m.L0)(n)}}),n.pipe(I.U(o.chain((e=>(0,a.zG)(o.fromNullable(e.items[i]),o.map((t=>({feedState:e,item:t}))))))),M.oA,I.U((({feedState:e,item:t})=>{const n=(0,a.zG)(e.focusedItemId,o.exists((e=>t.id===e)));return{item:n?Object.assign(Object.assign({},t),{content:(0,a.zG)(t.content,TF(0===i,i===e.items.length-1),PF)}):t,prevFocusedItemPosition:(0,a.zG)(e.prevFocusedItemPosition,o.filter((()=>n))),isFirst:0===i,isFocused:n}})),O.skipBy(dk)))}function jF(e,t){const n=n=>i=>function(e,t,n,i){return r.Z.composeKnot({root:()=>n.pipe(I.U(o.chain((e=>(0,a.zG)(o.fromNullable(e.items[i]),o.map((t=>({itemId:t.id,isFocused:(0,a.zG)(e.focusedItemId,o.exists((e=>t.id===e)))}))))))),M.oA,O.skipBy(Ek)),content:r.Z.animatingFlow(NF(e,t,n,i),((e,t)=>(0,a.zG)(e,o.filter((e=>!e.isFocused&&t.isFocused)),o.chain((()=>(0,a.zG)(t.prevFocusedItemPosition,o.map((e=>e<0?Js.Hk("collapseForward","expandForward"):Js.Hk("collapseBackward","expandBackward")))))))))})}(e.feed,e.suggestionCount,t,i)(n.pipe(_.h((e=>e.key===i)),I.U((e=>e.action))));return e=>t.pipe(I.U(o.fold((()=>[]),(e=>e.items))),Bu.g("length"),c.w((t=>vt.aj(t.map(((t,i)=>n(e)(i)))))))}function UF(e){return e.pipe(tl.R(((e,t)=>(0,a.zG)(t,o.map((t=>({items:Cn(t.collection),focusedItemId:(0,a.zG)(En(t.collection),o.map((e=>e.id))),focusedItemIndex:_n(t.collection),prevFocusedItemPosition:(0,a.zG)(e,o.chain((e=>(0,a.zG)(g.Y(o.option)({prevIdx:e.focusedItemIndex,currIdx:_n(t.collection)}),o.chain((e=>e.prevIdx===e.currIdx?o.none:e.prevIdx<e.currIdx?o.some(-1):o.some(1))),o.alt((()=>e.prevFocusedItemPosition))))))}))))),o.none))}function zF(e){return r.Z.composeUnion({loadingState:()=>u.of(null),emptyState:DF(e),nonEmptyState:LF(e),uphookState:GF(e)},(()=>function(e){return p.h.combine(e.user.isPremium,e.feed.feed,e.feed.feedReset,e.plagiarism.state,((e,t,n,i)=>(0,a.zG)(g.g(o.option)(t,i),o.fold((()=>e?"loadingState":"uphookState"),(([t,{checking:i}])=>e?wn(t.collection)>0?"nonEmptyState":i||n?"loadingState":"emptyState":"uphookState")))))}(e).view((e=>({kind:e})))))}function DF(e){return r.Z.fromSideEffect((t=>{switch(t.kind){case"seeAllSuggestions":return e.plagiarism.seeAllSuggestions();case"plagiarismFeedSuccessMountAction":return e.feed.onSuccessStateMount();default:(0,m.L0)(t)}}),u.of(null))}function LF(e){const t=UF(e.feed.feed).pipe(O.shareReplay({bufferSize:1,refCount:!0}));return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>{switch(t.kind){case"plagiarismFeedMount":return e.feed.onFeedMount();case"sduiCitationDropdownSelect":return e.plagiarism.onCitationDropdownSelect(t.actions,t.sourceId);default:(0,m.L0)(t)}}),e.plagiarism.state.view((e=>({citationDropdown:(0,a.zG)(e,o.chain((e=>e.citationDropdown)))})))),cardList:jF(e,t),footer:()=>e.plagiarism.state.view(o.chain((e=>(0,a.zG)(e.originality,o.map((t=>({originality:t,sourceCount:e.sourceCount})))))))})}function GF(e){return r.Z.fromSideEffect((t=>{switch(t.kind){case"plagiarismUphookShow":e.plagiarism.onUphookShow();break;case"plagiarismUphookClick":e.plagiarism.onUphookClick();break;case"plagiarismUphookDismiss":e.plagiarism.onUphookDismiss();break;default:(0,m.L0)(t)}}),u.of(null))}function ZF(e){const t=UF(e.feed.feed).pipe(O.shareReplay({bufferSize:1,refCount:!0}));return r.Z.composeUnion({loadingState:()=>e.writingExpert.state.pipe(I.U(o.getOrElse((()=>({checking:"loadingEvaluation",evaluationResult:o.none}))))),nonEmptyState:r.Z.composeKnot({root:r.Z.fromSideEffect((t=>{switch(t.kind){case"writingExpertFeedMount":return e.feed.onFeedMount();case"writingExpertFeedDummyAction":return;default:(0,a.Rz)(t)}}),e.writingExpert.state.view((e=>({evaluationResult:(0,a.zG)(e,o.chain((e=>e.evaluationResult)))})))),cardList:jF(e,t)}),emptyOrErrorState:r.Z.fromSideEffect((t=>{switch(t.kind){case"seeAllSuggestions":return void e.writingExpert.seeAllSuggestions();case"tryAgain":return void e.writingExpert.tryAgain();case"longFormCardSduiNotify":return t.actions.find((e=>"popAssistantFeed"===e.type))&&e.writingExpert.seeAllSuggestions(),e.feed.processActions(t.actions.filter((e=>"popAssistantFeed"!==e.type)),t.item,t.scope,t.sourceId);default:(0,m.vE)(t)}}),e.writingExpert.emptyOrErrorState.view((e=>({sduiContent:e,type:"general"}))))},(()=>p.h.combine(e.feed.feed,e.writingExpert.state,((e,t)=>(0,a.zG)(g.g(o.option)(e,t),o.fold((()=>"loadingState"),(([e,{checking:t}])=>wn(e.collection)>0?"nonEmptyState":Xc.isIdle(t)?"emptyOrErrorState":"loadingState")),(e=>({kind:e})))))))}function HF(e){return()=>u.of((0,a.zG)(e.settings,o.chain((e=>e.getView())),o.fold((()=>({content:null})),(e=>({content:e})))))}function VF(e){return r.Z.composeKnot({content:r.Z.composeUnion({free:()=>u.of(null),premium:()=>u.of(null),business:()=>u.of(null)},(()=>e.assistant.state.view("user").view((e=>me(e)?{kind:"institution"===e.type?"business"===e.institutionType?"business":"premium":"premium"===e.type?"premium":"free"}:{kind:"free"})))),signIn:r.Z.composeOption(r.Z.fromSideEffect((t=>{e.notify(t)}),u.of(null)),(()=>e.assistant.state.view("userCanSignIn").view((e=>e?o.some(null):o.none))))})}function $F(e,t){const n=p.h.combine(e.skill.state,e.lifecycle.heightBehavior,((e,n)=>(0,a.zG)(e,o.filter((()=>"fitContainer"===n.kind?!t:t)),o.map((e=>({displayName:e.skill.displayName,status:e.status,srcUrl:e.skill.srcUrl,size:{width:e.size.width,height:"fitContainer"===n.kind?"100%":e.size.height}}))))));return r.Z.composeOption(function(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),t)}(e,n.pipe(M.oA)),(()=>n))}function KF(e){return r.Z.composeUnion({loading:()=>u.of(null),loadedEmpty:r.Z.fromSideEffect((t=>e.notify(t)),u.of(null)),loadedNonEmpty:r.Z.fromSideEffect((t=>e.notify(t)),(0,a.zG)(e.toneDetector,o.fold((()=>u.of(null)),(e=>e.state.pipe(_.h(Mt.isLoadedNonEmpty),I.U((({tones:e,brandToneInfo:t,uphookInfo:n})=>({tones:e,onBrandTitleEnabled:o.isSome(t),uphookInfo:n}))))))))},(()=>(0,a.zG)(e.toneDetector,o.fold((()=>u.of({kind:"loading"})),(e=>e.state.view((({kind:e})=>({kind:e}))))))))}function WF(e){const t=p.h.create("");return r.Z.fromSideEffect((n=>{"updateRoleTypeaheadText"===n.kind?(t.set(n.text),""===n.text&&e.notify({kind:ht.i.Kind.roleTypeaheadSelectionChange,role:o.none})):(n.kind===ht.i.Kind.roleTypeaheadSelectionChange&&t.set((0,a.zG)(n.role,o.fold((()=>""),(e=>e.label)))),e.notify(n))}),p.h.combine(e.assistant.state.view("genAISession"),e.voiceProfile.state.view("stagingVoiceProfile"),t,((e,t,n)=>(0,a.zG)(g.Y(o.Applicative)({voiceProfile:(0,a.zG)(e,o.chain(re.toStarted),o.map((e=>e.voiceProfile)),o.chain(we.toLegacyVoiceProfile)),stagingVoiceProfile:t}),o.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:we.Dialect.all(),selectedDialect:we.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,a.zG)(t.styles,b.Ew((t=>t.id===e.selectedStyle)),(i=>({styles:(0,a.zG)(t.styles,b.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,a.zG)(i,o.fold((()=>[]),(t=>(0,a.zG)(t.tones,b.UI((n=>Object.assign(Object.assign({},n),{kind:(0,a.zG)(o.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),o.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,a.zG)(i,o.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!we.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate.",roleTypeaheadText:(0,a.zG)(e.selectedRole,o.filter((()=>""===n)),o.chain((e=>o.fromNullable(t.roles.find((t=>t.id===e))))),o.fold((()=>n),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>we.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||we.Dialect.american})))))))))}function qF(e){return r.Z.fromSideEffect((t=>e.notify(t)),p.h.combine(e.assistant.state.view("genAISession"),e.voiceProfile.state.view("stagingNewVoiceProfile"),((e,t)=>(0,a.zG)(g.Y(o.Applicative)({sessionVoiceProfile:(0,a.zG)(e,o.chain(re.toStarted),o.map((e=>e.voiceProfile)),o.chain(we.toNewVoiceProfile)),stagingVoiceProfile:t}),o.fold((()=>({userName:"",title:"",subTitle:"",roles:[],dialects:we.Dialect.all(),selectedDialect:we.Dialect.american,isEnabledByDefault:!0,isEnabledByDefaultLabel:"",profiles:[],activeProfileName:o.none,activeTagId:o.none,isEditing:!1,selectedRole:o.none})),(({sessionVoiceProfile:e,stagingVoiceProfile:t})=>({userName:e.userName,title:e.title,subTitle:e.subTitle,isEnabledByDefault:t.isEnabledByDefault,isEnabledByDefaultLabel:e.isEnabledByDefaultLabel,profiles:t.profiles,roles:(0,a.zG)(QF(t,e),o.fold((()=>e.roles),(t=>e.roles.filter((e=>e.id!==t.id))))),dialects:(0,a.zG)(YF(t,e),(t=>e.dialects.filter((e=>e.id!==t.id)))),selectedRole:QF(t,e),selectedDialect:YF(t,e),activeProfileName:t.activeProfileName,activeTagId:t.activeTagId,isEditing:o.isSome(t.stagingSelections)})))))))}function QF(e,t){return(0,a.zG)(e.stagingSelections,o.chain((e=>e.selectedRole)),o.alt((()=>e.selectedRole)),o.chain((e=>o.fromNullable(t.roles.find((t=>we.Role.Id.eq.equals(t.id,e)))))))}function YF(e,t){return(0,a.zG)(e.stagingSelections,o.fold((()=>e.selectedDialect),(e=>e.selectedDialect)),(e=>t.dialects.find((t=>we.Dialect.Id.eq.equals(t.id,e)))||we.Dialect.american))}var JF=n(49524);function XF(e,t=u.of(!0)){const n=t.pipe(_.h(JF.y),R.q(1)).pipe(c.w((()=>e.assistant.state.view("genAISession").view(o.chain((e=>e.error))))),dt.O(o.none));return r.Z.composeOption(function(e,t){const n=e.routing.activeView.view((e=>"error"!==e.kind));return r.Z.fromSideEffect((t=>e.notify(t)),t.pipe(At.M(n),I.U((([e,t])=>({error:e,showDismissButton:t})))))}(e,n.pipe(M.oA)),(()=>n))}function eT(e){const t=e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.chain((e=>e.activeContext.documentOverview))));return r.Z.composeOption((()=>(0,a.zG)(t,M.oA)),(()=>t))}function tT(e){const t=e.assistant.state.view("genAISession").view((e=>(0,a.zG)(e,o.filter((e=>ae.s.isQuickReply(e.mode))),o.chain((e=>(0,a.zG)("started"===e.kind?(0,a.zG)(e.activeContext.intent,o.map((e=>({kind:"loaded",text:e})))):o.some({kind:"loading"}),o.map((e=>Object.assign(Object.assign({},e),{header:"Senders intent"})))))))));return r.Z.composeOption(r.Z.composeUnion({loading:()=>t.pipe(M.oA),loaded:r.Z.fromSideEffect((t=>e.notify(t)),t.pipe(I.U(o.chain((e=>"loaded"===e.kind?o.some({text:e.text,header:e.header}):o.none))),M.oA))},(()=>t.pipe(M.oA))),(()=>t))}function nT(e){const t=e.assistant.state.view("detectedReferences");return r.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(I.U(o.getOrElse((0,a.a9)([]))),I.U((e=>({detectedReferences:e}))))}(e),(()=>t))}function iT(e){return p.h.combine(e.feed.feed,e.feed.feedReset,e.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.suggestionCount.state,((e,t,n,i,{allSuggestionsEmpty:r,someSuggestionsAddressed:a})=>o.isNone(e)||0===wn(e.value.collection)&&(!n&&!i||t)?"loadingState":r?a?"successState":"emptyState":"nonEmptyState"))}function rT(e,t){return r.Z.fromSideEffect((t=>{switch(t.kind){case"longFormFeedMount":return e.feed.onFeedMount();case"toggleShortFormFeed":return e.feedForm.onToggleFeedForm("shortForm");case"toggleLens":return e.feedLens.onToggleLens(t.lensId);default:(0,m.L0)(t)}}),p.h.combine(t,e.suggestionCount.state.view("activeFeedSuggestionCount"),e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))),e.feedLens.lenses,((e,t,n,i)=>(0,a.zG)(e,o.map((e=>({suggestionCount:t,canCollapseToShortForm:n,feedId:e,lenses:(0,a.zG)([dn.lensCorrectnessFeed,dn.lensClarityFeed,dn.lensEngagementFeed,dn.lensDeliveryFeed,dn.lensStyleGuideFeed],b.UI((e=>o.fromNullable(i.get(e)))),b.oA)})))))).pipe(M.oA))}function oT(e,t=Math.random){const n=tA(t);return r.Z.composeUnion({loadingState:()=>u.of(null),emptyState:r.Z.fromSideEffect((t=>{"shortFormFeedEmptyMount"!==t.kind?(0,m.L0)(t.kind):e.feed.onEmptyStateMount(e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut.get())}),u.of({emptyContentIndex:n})),successState:r.Z.fromSideEffect((t=>{"shortFormFeedSuccessMount"!==t.kind?(0,m.L0)(t.kind):e.feed.onSuccessStateMount()}),u.of({emptyContentIndex:n})),nonEmptyState:aT(e)},(()=>sT(e).view((e=>({kind:e})))))}function aT(e){const t=p.h.create([]);return r.Z.fromSideEffect((n=>{switch(n.kind){case"shortFormCardSduiNotify":return n.actions.find((e=>"prevCard"===e.type||"nextCard"===e.type))&&t.set(n.actions.filter(ms.Action.isTransitionAction)),FF(n.actions)&&e.suggestionCount.onSuggestionAddressed(),e.feed.processActions(n.actions,n.item,n.actionScope,n.sourceId);case"shortFormCardMount":return e.feed.onItemMount(!0,n.item);case"shortFormFeedAnimationEnd":return t.set([]);case"shortFormFeedMount":return t.set([]),e.feed.onFeedMount();case"toggleLongFormFeed":return e.feedForm.onToggleFeedForm("longForm");default:(0,m.L0)(n)}}),vt.aj([(n=e.feed.feed,n.pipe(tl.R(((e,t)=>(0,a.zG)(t,o.chain((e=>g.Y(o.option)({feedId:o.some(e.id),item:En(e.collection),index:_n(e.collection),size:o.some(wn(e.collection))}))),o.map((({feedId:t,item:n,index:i,size:r})=>({feedId:t,item:n,isFirst:0===i,isLast:i===r-1,prevItem:(0,a.zG)(e,o.chain((e=>e.item.id===n.id?e.prevItem:o.some(e.item))))}))))),o.none))).pipe(M.oA),e.suggestionCount.state.view("activeFeedSuggestionCount"),e.feedForm.state.view("supportedForms").view((e=>e.has("longForm"))),t]).pipe(I.U((([{item:e,prevItem:t,isFirst:n,isLast:i},r,o,s])=>({item:Object.assign(Object.assign({},e),{content:(0,a.zG)(e.content,TF(n,i))}),prevItem:t,transitions:s,suggestionCount:r,canExpandToLongForm:o&&r>1})))));var n}function sT(e){return p.h.combine(e.feed.feed,e.feed.feedReset,e.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.suggestionCount.state.view("someSuggestionsAddressed"),((e,t,n,i,r)=>(0,a.zG)(e,o.fold((()=>"loadingState"),(e=>(0,a.zG)(En(e.collection),o.fold((()=>t?"loadingState":n||i?r?"successState":"emptyState":"loadingState"),(()=>"nonEmptyState"))))))))}const lT=()=>u.of(null);function cT(e){return r.Z.composeUnion({none:lT,shortFormFeed:r.Z.composeKnot({feed:(0,a.zG)(e.revision,o.fold((()=>lT),oT))}),longFormFeed:r.Z.composeKnot({feed:(0,a.zG)(e.revision,o.fold((()=>lT),(e=>function(e,t=Math.random){const n=tA(t),i=UF(e.feed.feed).pipe(O.shareReplay({bufferSize:1,refCount:!0})),s=e.feed.feed.view(o.chain((e=>hn(e.id))));return r.Z.composeUnion({loadingState:()=>e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))).view((e=>({supportsShortForm:e}))),emptyState:r.Z.fromSideEffect((t=>{"longFormFeedEmptyMount"!==t.kind?(0,m.L0)(t.kind):e.feed.onEmptyStateMount(e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut.get())}),u.of({content:eA[n].emptyState})),successState:()=>u.of({content:eA[n].successState,goBackFrom:o.none}),nonEmptyState:r.Z.composeKnot({root:rT(e,s),lensView:r.Z.composeUnion({successState:r.Z.fromSideEffect((t=>{switch(t.kind){case"goBack":return e.feedLens.onToggleLens(t.goBackFrom);case"longFormFeedSuccessMount":return e.feed.onSuccessStateMount();default:return(0,m.L0)(t)}}),vt.aj([s,e.feedLens.lenses]).pipe(I.U((([e,t])=>({content:Object.assign(Object.assign({},eA[n].successState),(0,a.zG)(e,o.fold(a.gn,(e=>({description:(0,a.zG)(o.fromNullable(t.get(e)),o.fold((()=>eA[n].successState.description),(e=>`There are no more ${e.label.toLowerCase()} suggestions.`)))}))))),goBackFrom:e}))))),cardList:r.Z.composeKnot({cardList:jF(e,i)})},(()=>i.pipe(I.U((e=>(0,a.zG)(e,o.exists((e=>e.items.length>0)))?"cardList":"successState")),S.x(),I.U((e=>({kind:e}))))))})},(()=>iT(e).view((e=>({kind:e})))))}(Object.assign({},e)))))})},(()=>uT(e).view((e=>({kind:e})))))}function uT(e){return p.h.combine(e.routing.activeView,e.textEditor.state.view("hasBeenNonEmpty"),e.lifecycle.heightBehavior.view("kind"),(0,a.zG)(e.revision,o.fold((()=>p.h.create(null).view()),(e=>p.h.combine(e.feed.isAllSuggestionsFeedEnabled,e.feedForm.state.view("feedForm"),e.suggestionCount.state.view("allSuggestionsCount"),((e,t,n)=>({isAllSuggestionsFeedEnabled:e,feedForm:t,allSuggestionsCount:n})))))),((t,n,i,r)=>"home"===t.kind&&null!==r&&r.isAllSuggestionsFeedEnabled&&((0,a.zG)(n,o.exists(a.yR))||"revision"===e.experience||r.allSuggestionsCount>0||"longForm"===r.feedForm&&"fitContainer"===i)?"shortForm"===r.feedForm?"shortFormFeed":"longForm"===r.feedForm?"longFormFeed":(0,m.L0)(r.feedForm):"none"))}function dT(e){const t=e.assistant.state.view("genAISession").view((t=>(0,a.zG)(t,o.chain(re.toStarted),o.filter((()=>o.isNone(e.revision))),o.exists((e=>e.voiceProfile.needsSetup)))));return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),null),(()=>t.view((e=>e?o.some(null):o.none))))}function mT(e){return r.Z.composeKnot({suggestions:cT(e),voiceBanner:dT(e),documentOverview:eT(e),intent:tT(e),detectedReferences:nT(e)})}function pT(e,t,n){const i=e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.chain((e=>o.fromNullable(e.results[n+1]))),o.filter(oe.x.isComplete),o.chain((e=>e.boundaryContextId)))),s=t.pipe(At.M(i),I.U((([e,t])=>(0,a.zG)(e,o.filter((0,z.Kg)(oe.x.isComplete,oe.x.isInProgress)),o.chain((e=>e.boundaryContextId)),o.filter((e=>!!o.isNone(t)||e!==t.value)))))),l=s.pipe(I.U(o.chain((t=>e.assistant.getContextById(t))))),c=l.pipe(I.U((e=>(0,a.zG)(e,o.chain((e=>e.selection))))));return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),vt.aj([l,e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.map((({textRevision:e})=>e)))),e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.map((({selectionContextStatus:e})=>e))))]).pipe(I.U((([e,t,n])=>g.Y(o.option)({selection:(0,a.zG)(e,o.chain((({selection:e})=>e))),currentTextRevision:t,contextTextRevision:(0,a.zG)(e,o.map((({textRevision:e})=>e))),selectionContextStatus:n}))),M.oA,I.U((({selection:e,currentTextRevision:t,contextTextRevision:n,selectionContextStatus:i})=>({selectedText:e.text,selectedRange:i===re.SelectionContextStatus.dynamic&&o.isSome(n)&&t===n.value?e.range:void 0}))))),(()=>c))}function hT(e){return()=>e.assistant.state.view("genAISession").view(o.chain(re.toStarted)).view((0,a.ls)(o.chain((e=>e.inProgressResult)),o.fold((()=>({text:""})),(e=>({text:e.text})))))}function fT(e){return pT(e,e.assistant.state.view("genAISession").view(o.chain(re.toStarted)).view(o.chain((e=>e.inProgressResult))),-1)}function gT(e){const t=p.h.combine(e.assistant.state.view("genAISession"),e.routing.activeView,((e,t)=>(0,a.zG)(e,o.chain(re.toStarted),o.chain((e=>e.inProgressResult)),o.filter((()=>"thread"===t.kind)),o.map((e=>({result:e}))))));return r.Z.composeOption(function(e){return r.Z.composeKnot({root:hT(e),header:fT(e)})}(e),(()=>t))}function vT(e,t){return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),e.userSurvey.state.pipe(I.U((e=>(0,a.zG)(e.activeSurvey,o.map((t=>({survey:t,state:e})))))),M.oA,I.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,a.zG)(t.openAnswer,o.getOrElse((0,a.a9)(""))),ratingLabels:(0,a.zG)(t.activeSurvey,o.fold((0,a.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>p.h.combine(e.userSurvey.state,t,e.routing.activeView,(({activeSurvey:e,stage:t},n,i)=>(0,a.zG)(e,o.filter((e=>"thread"===i.kind&&(0,a.zG)(n,j.FX(e.resultId))&&t!==hu.Stage.Type.Closed)))))))}var bT=n(26328);function yT(e,t,n,i){return r.Z.fromSideEffect((t=>e.notify(t)),vt.aj([t,e.assistant.state.view("textBox")]).pipe(I.U((([e,t])=>({icon:"regularAction"===e.kind?e.action.icon:v.left(e.kind),label:"regularAction"===e.kind?e.action.label:"go"===e.kind?`${t.trim()}`:(0,m.L0)(e),action:e,placement:n,position:i})))))}function xT(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),t)}function kT(e,t,n){return r.Z.composeList(b.Ot,(()=>t.pipe(I.U((0,a.ls)(o.map(b.Su(((e,t)=>({action:t,index:e})))),o.getOrElse((()=>[])))))),(({action:t,index:i})=>yT(e,u.of(t),n,i)))}function ST(e,t){const n=function(e,t){return e.assistant.state.view((({genAIAvailability:e,genAISession:n})=>(0,a.zG)(n,o.chain(re.toStarted),o.map((n=>{const i=h._.isPassive(e)||h._.isUnavailable(e),r=(0,a.zG)(n.activeContext.userPromptAction,o.chain((e=>(0,a.zG)(t.header.copiablePrompt,o.map((t=>q.UserPromptActionValue.fromInput(e,t,o.none,o.none)))))));return{actions:(0,a.zG)(bT.nI(n.activeContext.availableActions.filter((0,z.Kg)(q.isFollowUpQuestionActionInput,q.isQuickActionInput))),o.filter((()=>!i)),o.map(bT.UI(_u.RegularAction.make))),originalAction:r,disabled:i,result:t}}))))).pipe(M.oA)}(e,t),i=n.pipe(Cu.j("actions"));return r.Z.composeKnot({root:xT(e,n),actions:kT(e,i,"threadView")})}function wT(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(c.w((e=>{const n=(0,a.zG)(t.header.copiablePrompt,o.fold((()=>({kind:xB.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(n=>({kind:xB.clickableSearchLabel,label:t.header.label,disabled:h._.isUnavailable(e.genAIAvailability),copiablePrompt:n}))));return oe.x.isComplete(t)&&function(e){return(0,a.zG)(e.replacementDelta,v.fold(a.yR,(e=>e.generic)),(e=>e.ops.some((e=>{var t;return QR.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[uB.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?O.timer(t.timestamp+3e3-Date.now()).pipe(Ol.h(n),dt.O({kind:xB.knowledgeHub})):u.of(n)}))))}function CT(e,t,n,i){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({genAIAvailability:e,activeCards:i,genAISession:r,referencesVisibility:s,overrideCardVoice:l})=>{var c,u,d;return{disabled:h._.isUnavailable(e),result:t,isActive:(0,a.zG)(!!i.has(t.id)||0===i.size&&n&&(d=(0,a.zG)(r,o.chain(re.toStarted)),!(0,a.zG)(d,o.fold(a.jv,(e=>o.isSome(e.inProgressResult)||o.isSome(e.error)))))),isReferencesOpen:null!==(c=s.get(t.id))&&void 0!==c&&c,isMyVoice:(null!==(u=l.get(t.id))&&void 0!==u?u:(0,a.zG)(t.replacementDelta,v.fold((()=>oe.x.GeneratedTextVoice.generic),(e=>e.preferVoice))))===oe.x.GeneratedTextVoice.user}}))),header:wT(e,t),contextHeader:pT(e,u.of(o.some(t)),i)})}function ET(e,t){return r.Z.composeList(b.Ot,(()=>t.pipe(I.U((0,a.ls)(b.ke(50),b.Su(((e,t)=>({result:t,isLast:0===e,index:e}))),b.GY)))),(({result:t,isLast:n,index:i})=>function(e,t,n,i){return r.Z.composeUnion({promptResultComplete:CT(e,t,n,i),aiUsageNotification:ST(e,t)},(()=>u.of(oe.x.isAIUsageNotification(t)?{kind:"aiUsageNotification"}:{kind:"promptResultComplete"})))}(e,t,n,i)))}function _T(e,t){return r.Z.composeUnion({none:()=>u.of(null),loading:()=>u.of({root:{text:""}}),loaded:r.Z.composeKnot({results:ET(e,t.view(o.getOrElse((()=>[]))))})},(()=>p.h.combine(t,e.assistant.state.view("genAISession").view(o.fold((()=>null),(e=>e.kind))),e.routing.activeView,((e,t,n)=>"thread"===n.kind?{kind:"starting"===t?"loading":o.isSome(e)?"loaded":"none"}:{kind:"none"}))))}function IT(e){const t=e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.map((e=>e.results)),o.chain(y.c2)));return r.Z.composeKnot({documentOverview:eT(e),intent:tT(e),resultList:_T(e,t),lastResultSurvey:vT(e,t.view(o.map((0,a.ls)(y.YM,(e=>e.id))))),inProgressResult:gT(e),generationError:XF(e),detectedReferences:nT(e)})}function AT(e){return r.Z.composeUnion({home:mT(e),thread:IT(e),error:XF(e),followUpPrompt:MF(e),legacyVoiceProfile:WF(e),voiceProfile:qF(e),feedbackForm:BF(e),skill:$F(e,!1),toneReport:r.Z.composeKnot({toneReport:KF(e)}),settings:HF(e),plagiarism:(0,a.zG)(e.revision,o.fold((()=>()=>u.of(null)),(t=>r.Z.composeKnot({plagiarism:zF({plagiarism:t.plagiarism,lifecycle:e.lifecycle,user:e.user,feed:t.feed,suggestionCount:t.suggestionCount})})))),writingExpert:(0,a.zG)(e.revision,o.fold((()=>()=>u.of(null)),(t=>r.Z.composeKnot({writingExpert:ZF(Object.assign(Object.assign({},t),{lifecycle:e.lifecycle}))})))),signedOut:VF(e)},(()=>e.routing.activeView))}const OT=new uh(999999);var RT;function BT(e){const t=e.promptMenu.state.pipe(tl.R(((e,t)=>(0,a.zG)(t,o.fold((()=>e),(()=>e+1)))),0));return r.Z.fromSideEffect((t=>e.notify(t)),vt.aj([e.assistant.state,t,e.routing.activeView]).pipe(I.U((([e,t,n])=>{return{kind:(0,a.zG)(e.genAISession,o.chain(re.toStarted),o.fold((()=>"loading"),(e=>(0,a.zG)(e.inProgressResult,o.fold((()=>"ready"),(()=>"waitingForResult")))))),genAIAvailability:e.genAIAvailability,placeholder:(i=e,(0,a.zG)(i.selectedAction,o.chain((e=>""!==e.args[0].label.trim()?o.some([e.args[0].label]):o.none)),o.alt((()=>(0,a.zG)(i.userPromptAction,o.map((e=>[e.arg.label]))))))),text:e.textBox,autofocusToken:RT.create(`${n.kind}_${(0,a.zG)(e.genAISession,o.chain(re.toStarted),o.chain((e=>e.inProgressResult)),o.fold((()=>"done"),(()=>"inProgress")))}_${(0,a.zG)(e.selectedAction,o.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuOpen:${t}`)};var i})),S.x()))}function MT(e){return r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,a.ls)(o.map((e=>e.actions)),TT)))}function FT(e){var t,n;return Object.assign(Object.assign({},e),{group:Object.assign(Object.assign({},e.group),{rank:null!==(t=q.knownGroupRank[e.group.id])&&void 0!==t?t:e.group.rank,label:null!==(n=q.knowGroupLabels[e.group.id])&&void 0!==n?n:e.group.label})})}function TT(e){return(0,a.zG)(e,o.map(y.UI(FT)),o.chain(y.hX((e=>e.group.label.trim().length>0))),o.map(y.IR(q.ListableActionInput.ordByGroup)),o.fold((()=>({actionGroups:[]})),(e=>({actionGroups:e.map((e=>({label:e[0].group.label,actions:(0,a.zG)(e,y.UI((e=>({action:_u.RegularAction.make(e),label:e.label,icon:e.icon}))))})))}))))}function PT(e){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,a.ls)(o.map((e=>e.actions)),NT))),goAction:r.Z.composeOption(yT(e,u.of({kind:"go"}),"search",0),(()=>e.assistant.state.pipe(I.U((e=>h._.isUnavailable(e.genAIAvailability)?o.none:o.some(null))))))})}function NT(e){return(0,a.zG)(e,o.fold((()=>({actions:[]})),(e=>({actions:e.map((e=>({action:_u.RegularAction.make(e),label:e.label,icon:e.icon})))}))))}function jT(e){return r.Z.composeOption(r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),u.of(null)),content:r.Z.composeUnion({searchResults:PT(e),actionStore:MT(e),none:()=>u.of(null)},(()=>e.promptMenu.state.view((e=>(0,a.zG)(e,o.fold((()=>"none"),(({kind:e})=>e)),(e=>({kind:e})))))))}),(()=>e.promptMenu.state))}function UT(e){const t=p.h.combine(e.assistant.state.view("genAIAvailability"),e.promptMenu.state,((e,t)=>h._.isUnavailable(e)&&o.isNone(t)));return r.Z.composeOption(function(e){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.pipe(I.U((e=>({menuExpanded:o.isSome(e)}))))),promptField:BT(e),promptStudioMenu:jT(e)})}(e),(()=>t.view((0,z.RN)(o.none,o.some(null)))))}function zT(e,t=p.h.create(!1)){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),p.h.combine(e.assistant.state.view("genAISession"),e.assistant.state.view("genAIAvailability"),e.routing.activeView,t,((e,t,n,i)=>{if(o.isNone(e))return o.none;const r=e.value,a="started"!==r.kind||r.historyStatus!==re.HistoryStatus.hasHistory&&0===r.results.length?"disabled":r.historyStatus===re.HistoryStatus.historyRequested?"loading":"enabled";return"home"===n.kind&&!h._.isUnavailable(t)&&!i?o.some({state:a}):o.none})))}!function(e){e.create=function(e){return null!=e?e:OT.newId()}}(RT||(RT={}));const DT=["writingExpertAction","quickAction","followUpQuestion","toneAction","plagiarismAction","skillAction"],LT={writingExpertAction:new Set(DT.slice(1)),quickAction:new Set(DT.slice(2)),followUpQuestion:new Set(DT.slice(3)),toneAction:new Set(DT.slice(4)),plagiarismAction:new Set(DT.slice(5)),skillAction:new Set(DT.slice(6))},GT=L.fromCompare(((e,t)=>e.kind===t.kind?0:LT[e.kind].has(t.kind)?-1:1));function ZT(e){return r.Z.fromSideEffect((t=>e.notify(t)),p.h.combine(e.promptActions.state,e.assistant.state.view("genAIAvailability"),e.assistant.state.view("genAISession"),e.routing.activeView,(({contextualActions:e,toneAction:t,plagiarismAction:n,skillActions:i,writingExpertAction:r},s,l,c)=>{const u=["home"===c.kind?r:o.none,t,n],d=(0,a.zG)(e,o.fold((()=>[]),(e=>e.actions))),m=(0,a.zG)(d.concat((0,a.zG)(u,b.oA)).concat(i).map(_u.RegularAction.make),b.DY(L.contramap((e=>e.action))(GT)));return{loading:(0,a.zG)(e,o.fold((()=>(0,a.zG)(l,o.fold((()=>!1),re.isStartingWithoutError))),(e=>e.loading))),actions:m,hasMore:d.length>m.length,hasHistoryButton:!h._.isUnavailable(s)}})))}function HT(e){return r.Z.fromSideEffect((t=>e.notify(t)),p.h.combine(e.promptActions.state,e.routing.activeView,e.lifecycle.size,e.assistant.state,(0,a.zG)(e.revision,o.fold((()=>p.h.create(null).view()),(e=>e.feedForm.state.view("feedForm")))),(({contextualActions:t,toneAction:n,plagiarismAction:i,skillActions:r,writingExpertAction:s},l,c,{genAISession:u},d)=>{var m;const p="quickReply"===(null===(m=o.toNullable(u))||void 0===m?void 0:m.mode)||"longForm"===d&&!VT(o.isSome(e.revision),l,c)?3:2,h=(0,a.zG)(t,o.fold((()=>[]),(e=>e.actions))),f=["home"===l.kind?s:o.none,n,i],g=(0,a.zG)(h.concat((0,a.zG)(f,b.oA)).concat(r).map(_u.RegularAction.make),b.DY(L.contramap((e=>e.action))(GT))),v=(0,a.zG)(g,b.ke(p));return{loading:(0,a.zG)(t,o.fold((()=>(0,a.zG)(u,o.fold((()=>!1),re.isStartingWithoutError))),(e=>e.loading))),maxActionsCount:p,actions:v,hasMore:g.length>v.length}})))}function VT(e,t,n){return!!(e&&"home"===t.kind&&n&&n.width<350&&n.height>600)}function $T(e){return r.Z.composeUnion({none:()=>u.of(null),actionBar:KT(e),actionPanel:WT(e)},(()=>function(e){return p.h.combine(e.routing.activeView,e.assistant.state.view("genAISession"),e.lifecycle.size,function(e){return(0,a.zG)(e.revision,o.fold((()=>p.h.create(!0)),(t=>p.h.combine(uT(e),sT(t),iT(t),((e,t,n)=>"none"===e||"shortFormFeed"===e&&("emptyState"===t||"successState"===t)||"longFormFeed"===e&&("emptyState"===n||"successState"===n))))))}(e),((t,n,i,r)=>{var s,l;if(!kt(t)||"thread"===t.kind&&"starting"===(null===(s=o.toNullable(n))||void 0===s?void 0:s.kind))return"none";if("revision"===e.experience)return"actionBar";if(o.isSome(e.revision)&&"home"===t.kind)return"quickReply"===(null===(l=o.toNullable(n))||void 0===l?void 0:l.mode)||VT(o.isSome(e.revision),t,i)||r?"actionPanel":"actionBar";return(0,a.zG)(n,o.chain(re.toStarted),o.chain((e=>e.inProgressResult)),o.isSome)?"none":"actionPanel"}))}(e).view((e=>({kind:e}))).pipe(F.e(0),dt.O({kind:"none"}))))}function KT(e){return r.Z.composeKnot({root:ZT(e),header:r.Z.fromSideEffect((t=>e.notify(t.action.action)),p.h.combine(e.assistant.state.view("genAISession").view(o.chain((e=>e.selectedText))),e.promptActions.state.view("contextualActions"),((e,t)=>(0,a.zG)(g.g(o.option)(e,t),o.filter((([e,t])=>"pending"===t.context.kind)),o.map((([e])=>e)),o.alt((()=>(0,a.zG)(t,o.chain((e=>e.context.selection)),o.map((e=>e.text))))),o.map((e=>({selectedText:e}))))))),historyButton:zT(e)})}function WT(e){return r.Z.composeKnot({root:HT(e),header:qT(e),historyButton:zT(e)})}function qT(e){return r.Z.fromSideEffect((t=>e.notify(t.action)),p.h.combine(e.routing.activeView,e.promptActions.state.view("contextualActions"),e.assistant.state.view("genAISession").view(o.fold((()=>null),(e=>e.mode))),e.textEditor.state.view("textLength"),(t=e.revision,(0,a.zG)(t,o.fold((()=>p.h.create({allSuggestionsCount:0,someSuggestionsAddressed:!1,firstCheckingFinishedAndSduiEventsSettled:!0,firstCheckingFinishedAndSduiEventsSettledTimedOut:!1}).view()),(e=>p.h.combine(e.checkingState.firstCheckingFinishedAndSduiEventsSettled,e.checkingState.firstCheckingFinishedAndSduiEventsSettledTimedOut,e.suggestionCount.state,((e,t,{allSuggestionsCount:n,someSuggestionsAddressed:i})=>({firstCheckingFinishedAndSduiEventsSettled:e,firstCheckingFinishedAndSduiEventsSettledTimedOut:t,allSuggestionsCount:n,someSuggestionsAddressed:i}))))))),((e,t,n,i,{allSuggestionsCount:r,someSuggestionsAddressed:s,firstCheckingFinishedAndSduiEventsSettled:l,firstCheckingFinishedAndSduiEventsSettledTimedOut:c})=>{if(kt(e)){const u=(0,a.zG)(i,o.exists((e=>0===e)));return(0,a.zG)(t,o.map((({context:e})=>e)),o.filter((e=>e.isBoundary&&o.isSome(e.textRevision))),o.chain((({selection:e})=>e)),o.map((e=>e.text)),o.fold((()=>"home"===e.kind&&(u||0===r&&(l||c)||"quickReply"===n)?{kind:"title",title:QT(n,u,r,s),subtitle:"Here are some ideas"}:{kind:"none"}),(e=>({kind:"selectionContext",selectedText:e}))))}return{kind:"none"}})));var t}function QT(e,t,n,i){return"quickReply"===e?"How do you want to reply?":0===n&&i?"What do you want to do next?":t||0!==n||i?"How do you want to get started?":"What do you want to do?"}function YT(e){return r.Z.composeKnot({header:$T(e),fieldContainer:UT(e)})}function JT(e){return r.Z.composeUnion({none:()=>u.of(null),skill:$F(e,!0),promptStudio:YT(e)},(()=>e.routing.activeView.view((e=>"skill"===e.kind?{kind:"skill"}:kt(e)||"followUpPrompt"===e.kind&&"string"===e.inputType?{kind:"promptStudio"}:{kind:"none"}))))}function XT(e){return r.Z.fromSideEffect((t=>{if("suggestionCountButtonClick"===t.kind)return e.routing.pop();(0,m.L0)(t.kind)}),p.h.combine(e.assistant.state.view("genAISession").view((0,a.ls)(o.chain(re.toStarted),o.chain((e=>e.inProgressResult)),o.isSome)),function(e){return(0,a.zG)(e.revision,o.fold((()=>p.h.create(o.none)),(e=>e.suggestionCount.state.view("allSuggestionsCount").view(o.some))))}(e),((e,t)=>(0,a.zG)(t,o.getOrElse((()=>0)),(t=>({count:t,disabled:e,label:t>0?`Review ${As._6(t,"suggestion","suggestions")}`:"Back to Home"}))))))}function eP(e){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),e.routing.activeView.view("kind").view((t=>o.isSome(e.settings)&&"settings"!==t?o.some(null):o.none)))}function tP(e){return()=>p.h.combine(e.routing.activeView,e.skill.state,(0,a.zG)(e.toneDetector,o.fold((()=>p.h.create(o.none)),(e=>e.state.view(o.some)))),((e,t,n)=>nP(e,t,n).label))}function nP(e,t,n){switch(e.kind){case"home":case"thread":case"error":case"followUpPrompt":case"signedOut":case"plagiarism":return{label:o.none,iconUrl:o.none};case"legacyVoiceProfile":case"voiceProfile":return{label:o.some("My voice"),iconUrl:o.none};case"feedbackForm":return{label:o.some("Share your thoughts"),iconUrl:o.none};case"skill":return{label:(0,a.zG)(t,o.map((e=>e.skill.displayName))),iconUrl:(0,a.zG)(t,o.map((e=>e.skill.iconUrl)))};case"toneReport":return{label:(0,a.zG)(n,o.filter(Mt.isLoaded),o.chain((e=>e.brandToneInfo)),o.chain((({institutionName:e})=>e)),o.map((e=>`${e} Tone Detector`)),o.alt((()=>o.some("Tone insights")))),iconUrl:(0,a.zG)(n,o.filter(Mt.isLoaded),o.chain((e=>e.brandToneInfo)),o.chain((e=>e.institutionLogo)))};case"settings":return{label:o.some("Settings"),iconUrl:o.none};case"writingExpert":return{label:o.some("Increase your impact"),iconUrl:o.none};default:(0,m.L0)(e)}}function iP(e){return r.Z.fromSideEffect((t=>e.notify(t)),p.h.combine(e.routing.activeView,e.skill.state,(0,a.zG)(e.toneDetector,o.fold((()=>p.h.create(o.none)),(e=>e.state.view(o.some)))),((e,t,n)=>(0,a.zG)(nP(e,t,n),(({iconUrl:t})=>({activeViewIconUrl:t,activeView:e}))))))}function rP(e){return r.Z.fromSideEffect((t=>e.notify(t)),u.of(null))}function oP(e){const t=e.assistant.state.view((e=>(0,a.zG)(e.genAIAvailability,o.fromPredicate(h._.isActiveOrPassive),o.filter((()=>o.isSome((0,a.zG)(e.genAISession,o.chain(re.toStarted))))))));return r.Z.composeOption(function(e,t,n){return r.Z.fromSideEffect((t=>e.notify(t)),(0,a.zG)(vt.aj([t,n]),I.U((([e,t])=>({user:e,genAIAvailability:t})))))}(e,e.assistant.state.view("user").pipe(_.h(de)),t.pipe(M.oA)),(()=>p.h.combine(e.assistant.state.view("user"),t,e.routing.activeView.view("kind"),((e,t,n)=>(0,a.zG)(t,o.filter((()=>de(e)&&"voiceProfile"!==n&&"legacyVoiceProfile"!==n&&"feedbackForm"!==n&&"skill"!==n&&"settings"!==n&&"toneReport"!==n)))))))}function aP(e){return()=>e.user.isGrammarlyInstitutionMember.view((e=>({version:e?o.some(it):o.none})))}function sP(e){return r.Z.composeKnot({left:lP(e),right:r.Z.composeKnot({credits:oP(e),voiceButton:cP(e),settingsButton:eP(e),closeButton:rP(e)}),pageTitle:tP(e)})}function lP(e){const t=p.h.combine(e.assistant.state.view("genAISession"),e.routing.activeView,((t,n)=>(0,a.zG)(t,o.chain(re.toStarted),o.fold((()=>wt(n)?"backButton":"logoOnly"),(()=>{if("error"===n.kind)return"logoOnly";if("signedOut"===n.kind)return"logoOnly";if("home"===n.kind||"thread"===n.kind){if("home"===n.kind)return"logoOnly";if("thread"===n.kind)return o.isSome(e.revision)?"suggestionCount":"logoOnly";(0,m.L0)(n)}else{if("followUpPrompt"===n.kind)return"backButton";if(wt(n))return"backButton";(0,m.L0)(n)}})))));return r.Z.composeUnion({logoOnly:aP(e),suggestionCount:r.Z.composeKnot({button:XT(e)}),backButton:iP(e)},(()=>t.pipe(dt.O("logoOnly"),I.U((e=>({kind:e}))))))}function cP(e){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),p.h.combine(e.assistant.state.view("user"),e.assistant.state.view("genAISession"),e.assistant.state.view("genAIAvailability"),e.routing.activeView,((e,t,n,i)=>(0,a.zG)(t,o.chain(re.toStarted),o.filter((()=>de(e)&&!h._.isUnavailable(n)&&kt(i))),o.map((()=>null))))))}function uP(e){return i.memo((function(){const t=i.useRef(zu(e));return i.useEffect((()=>()=>t.current.dispose())),i.createElement(i.Fragment,null,r.UI.mount((n=t.current,r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>i.createElement(ld.Provider,{value:{notifyUnmount:e=>n.notify(e)}},i.createElement(EF.N.Provider,{value:n.theme.theme},e.assistant)))),{assistant:_F})),function(e){return r.Z.composeKnot({assistant:r.Z.composeKnot({root:AF(e),content:AT(e),header:sP(e),footer:JT(e),notifications:IF(e),onboarding:(t=e.onboarding,r.Z.fromSideEffect((e=>t.notify(e)),t.onboardingStep.view((e=>({step:e})))))})});var t}(t.current)));var n}))}},45174:(e,t,n)=>{n.d(t,{N:()=>a});var i=n(27378),r=n(23239),o=n(12968);const a=i.createContext(r.h.create(o.u))},52528:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(12968);class r{constructor(e){this._theme=e,this.theme=this._theme.view((e=>Object.assign(Object.assign({},i.u),e)))}}},20545:(e,t,n)=>{n.d(t,{T:()=>i});var i,r=n(22232);!function(e){let t;!function(e){e.initial="initial",e.initialBTS="initialBTS",e.history="history",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub",e.references="references"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:case e.rewrite:return!1;default:return(0,r.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:return!1;default:return(0,r.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(i||(i={}))},24451:(e,t,n)=>{n.d(t,{l:()=>i});var i,r=n(22232);!function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(i||(i={})),(0,r.L0)(void 0)},1846:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(95195),r=n(5114),o=n(64015),a=n(57050),s=n(69243);var l;!function(e){const t=["initial","initialBTS","prompts","review","rewrite","knowledgeHub","references","history"],n=["extension","editor","llamaMac","llamaWin"];function l(e,t){return`${e}|${t}`}function c(e,t,n){return`${e}|${t}|${n}`}function u(e){return r.isSome(b(e))}function d(e){return r.isSome(y(e))}const m=new s.Dy("CompletedStepName",(e=>"string"==typeof e&&u(e)),((e,t)=>"string"==typeof e&&u(e)?s.Vp(e):s.Rn(e,t)),s.yR),p=new s.Dy("LastSeenStepName",(e=>"string"==typeof e&&d(e)),((e,t)=>"string"==typeof e&&d(e)?s.Vp(e):s.Rn(e,t)),s.yR),h=s.OT(s.r$({completed:s.Bk(m),lastSeen:s.Bk(p)}));let f,g,v;function b(e){return(0,a.zG)(r.some(e.split("|")),r.filter((e=>2===e.length)),r.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function y(e){return(0,a.zG)(r.some(e.split("|")),r.filter((e=>3===e.length)),r.filter((e=>t.includes(e[0])&&n.includes(e[1]))),r.filterMap((e=>(0,a.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?r.none:r.some([e[0],e[1],t]))))))}function x(e,t,n){var i,r,o,a;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===i?void 0:i[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===o?void 0:o[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(a=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===a?void 0:a[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(f=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new s.Dy("UpstreamOnboarding",(e=>h.is(e)),((e,t)=>(0,a.zG)(h.validate(e,t),i.map((e=>{const t=(0,a.zG)(e.completed||[],o.UI(b),o.oA),n=(0,a.zG)(e.lastSeen||[],o.UI(y),o.oA);return{initial:x("initial",t,n),initialBTS:x("initialBTS",t,n),prompts:x("prompts",t,n),review:x("review",t,n),rewrite:x("rewrite",t,n),knowledgeHub:x("knowledgeHub",t,n),references:x("references",t,n),history:x("history",t,n)}})))),(e=>({completed:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,n])=>n.completed?[l(e,t)]:[])))}(e,t)))),lastSeen:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,n])=>n.lastSeen?[c(e,t,n.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t){return(0,a.zG)(decodeURIComponent(t),(n=>{try{const t=JSON.parse(n);return e.codec.decode(t)}catch(e){return i.left(`Cannot decode raw onboarding state: ${t}.`)}}),i.getOrElse((()=>e.State.empty)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,initialBTS:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep,references:e.emptyStep,history:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],initialBTS:e.initialBTS[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t],references:e.references[t],history:e.history[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),initialBTS:Object.assign(Object.assign({},n.initialBTS),{[t]:e.initialBTS}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},n.knowledgeHub),{[t]:e.knowledgeHub}),references:Object.assign(Object.assign({},n.references),{[t]:e.references}),history:Object.assign(Object.assign({},n.history),{[t]:e.history})})}}(g=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,initialBTS:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep,references:e.emptyClientStep,history:e.emptyClientStep}}(v=e.ClientState||(e.ClientState={}))}(l||(l={}))},55093:(e,t,n)=>{n.d(t,{T:()=>be});var i=n(27378),r=n(90845),o=n(2834),a=n(98403),s=n(23239),l=n(34217),c=n(12968),u=n(45174),d=n(89894),m=n(17138),p=n(53514),h=n(93986),f=n(31956),g=n(4870),v=n(94689);const b=({name:e,style:t,onClick:n})=>i.createElement(h.z,{variant:"tertiary",style:[y,t],onClick:n,compact:!0,size:"medium",theme:"light",name:e},i.createElement(g.JO.Close,null)),y={icon:Object.assign(Object.assign({},(0,v.fx)(1.5)),{stroke:m.I.Background.Neutral.Default})};var x=n(24435),k=n(20545),S=n(24451),w=n(69470),C=n(54001);const E=({className:e})=>i.createElement("span",Object.assign({},(0,C.Sh)(_,e)),"New"),_=d.ux.style({color:m.I.Text.Base.Default,fontWeight:700,fontSize:d.ux.rem(.75),lineHeight:d.ux.rem(1),justifyContent:"center",alignItems:"center",background:"linear-gradient(226.37deg, #BBD86D 0%, #41D9B5 100%)",borderRadius:d.ux.rem(w.HP),padding:`${d.ux.rem(p.yC)} ${d.ux.rem(p.x)}`,textTransform:"uppercase",width:"fit-content",cursor:"default"});var I=n(37869),A=n(55162),O=n(40);const R=i.forwardRef((function({placement:e,style:t,arrowColor:n},r){return i.createElement("div",{ref:r,style:{width:33}},i.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${B(e)}deg)`.trimStart()}),M(e))},i.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:n||"white"})))}));function B(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function M(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const F=(0,C.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:r,className:o,arrowColor:a,children:s})=>{const[l,c]=i.useState(null),[u,d]=i.useState(null),m=(0,O.s)(),{styles:p,attributes:h,state:f}=(0,I.D)(e,l,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:u,padding:12}},{name:"preventOverflow",options:{padding:null!=r?r:5}},m]});return i.createElement("div",Object.assign({dir:"ltr",ref:c,style:p.popper},h.popper,(0,C.Sh)(P,o)),i.createElement(R,{ref:d,style:p.arrow,placement:null==f?void 0:f.placement,arrowColor:a}),s)})),T=e=>d.ux.color(A.BlueGray40).toRGBA().fade(e).toString(),P=d.ux.style({filter:`drop-shadow(0px 0px 0.5px ${A.BlueGray40}) drop-shadow(0px 0px 2px ${T(.5)}) drop-shadow(0px 1px 6px ${T(.25)})`,borderRadius:d.ux.rem(w.xB+w.fe)}),N=d.ux.rem(w.xB+w.fe),j={width:d.ux.rem(25.875),background:m.I.Background.Base.Default},U={display:"flex",flexDirection:"column",gap:d.ux.rem(p.F2),padding:`${d.ux.rem(p.mh)} ${d.ux.rem(p.x0)} ${d.ux.rem(p.sD)} ${d.ux.rem(p.sD)}`,color:m.I.Text.Base.Default},z={display:"flex",flexDirection:"row",alignItems:"center",gap:d.ux.rem(p.x),fontWeight:"bold",fontSize:d.ux.rem(1),lineHeight:d.ux.rem(1.5)},D={fontSize:d.ux.rem(.875),lineHeight:d.ux.rem(1.375)},L={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:N,borderBottomRightRadius:N,padding:`${d.ux.rem(p.qp)} ${d.ux.rem(p.sD)} ${d.ux.rem(p.qp)} ${d.ux.rem(p.sD)}`,backgroundColor:m.I.Background.Base.Subdued,color:m.I.Text.Base.Subdued,fontSize:d.ux.rem(.875),lineHeight:d.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},G={width:d.ux.rem(14),lineHeight:d.ux.rem(1),fontSize:d.ux.rem(.75)},Z=d.ux.style(j),H=d.ux.style(U),V=d.ux.style(z),$=d.ux.style(D),K=d.ux.style(L),W=d.ux.style(G),q=d.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),Q=d.ux.style({display:"inline",fontWeight:600}),Y=(e=k.T.StepName.initial)=>l.UI.Grid.make((({slots:t,view:n,notify:r})=>{const{onMount:a}=(0,x.F)(o.b((t=>r({kind:S.l.Kind.mount,step:e,element:t})())));return i.createElement(F,{className:Z,reference:n("reference"),placement:n("placement"),offset:n("offset"),boundaryAreaPadding:n("boundaryAreaPadding"),arrowColor:m.I.Background.Base.Subdued},i.createElement("div",{ref:a},t.content),i.createElement("div",{className:K},i.createElement("div",{className:W},t.footerText),i.createElement("div",{className:q},i.createElement(h.z,{variant:"tertiary",onClick:r({kind:S.l.Kind.close,step:e}),style:te,name:"skip"},"Skip"),i.createElement(h.z,{onClick:r({kind:S.l.Kind.tryItOut,step:e}),style:ne,name:"tryItOut"},"Try it out"))))})),J=l.UI.Node.make((({notify:e})=>i.createElement(i.Fragment,null,i.createElement(b,{style:ie,onClick:e({kind:S.l.Kind.close,step:k.T.StepName.initial}),name:"onboardingClose"}),i.createElement("div",{className:H},i.createElement(E,null),i.createElement("div",{className:V},i.createElement("div",null,"Write faster with generative AI")),i.createElement("div",{className:$},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips."))))),X=l.UI.Node.make((()=>i.createElement(i.Fragment,null,"If you use Grammarly's generative AI services,"," ",i.createElement(f.d,{href:"https://grammarly.com/terms",className:Q},"additional terms")," ","apply."))),ee=l.UI.Knot.make(Y(),{content:J,footerText:X}),te={default:{marginRight:d.ux.rem(.5),fontSize:d.ux.rem(.875)}},ne={default:{fontSize:d.ux.rem(.875),fontWeight:"bold"}},ie={default:{position:"absolute",top:d.ux.rem(p.x),right:d.ux.rem(p.x)}},re=l.UI.Node.make((({notify:e})=>i.createElement(i.Fragment,null,i.createElement(b,{style:ae,onClick:e({kind:S.l.Kind.close,step:k.T.StepName.initialBTS}),name:"onboardingClose"}),i.createElement("div",{className:H},i.createElement(E,null),i.createElement("div",{className:V},i.createElement("div",null,"Write better papers faster (for free!)")),i.createElement("div",{className:$},"Start with a brainstorm, then get instant feedback, revisions, and citations to ace your assignment."))))),oe=l.UI.Knot.make(Y(k.T.StepName.initialBTS),{content:re,footerText:l.UI.Node.empty}),ae={default:{position:"absolute",top:d.ux.rem(p.x),right:d.ux.rem(p.x)}};var se=n(57050),le=n(41398),ce=n(77176),ue=n(8543),de=n(27995);const me={[k.T.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. Youll get ${Number(e).toLocaleString()} each month.`:"Choose a suggested prompt, or type your own to get started."},[k.T.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Dont forget to check for any inaccuracies. "},[k.T.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[k.T.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."},[k.T.StepName.references]:{title:"GrammarlyGO now incorporates your organizational knowledge",description:"Review the references for accuracy and relevance and regenerate the response without any references that seem irrelevant or outdated."},[k.T.StepName.history]:{title:"Return to recent history",description:"Pick up where you left off with your latest prompts."}},pe=l.UI.Node.make((({state:e,view:t,notify:n})=>{const{onMount:r}=(0,x.F)((0,se.ls)(le.M(t("name")),ce.U((([e,t])=>({element:e,stepName:t}))),o.b((({element:e,stepName:t})=>n({kind:S.l.Kind.mount,step:t,element:e})()))));return i.createElement(ue.F.Fragment,null,e.pipe(ce.U((({name:e,placement:t,offset:o,reference:a,boundaryAreaPadding:s,promptsAllocated:l})=>i.createElement(de.J2,{key:e,className:d.ux.style({width:fe(e)}),reference:a,placement:t,offset:o,containerPadding:s,onClose:n({kind:S.l.Kind.close,step:e}),title:me[e].title,body:e===k.T.StepName.prompts?me[e].description(l):me[e].description,onMount:r})))))})),he=l.UI.Union.asOption(pe);function fe(e){switch(e){case k.T.StepName.knowledgeHub:return d.ux.rem(16);case k.T.StepName.references:return d.ux.rem(17.8);default:return d.ux.rem(13.75)}}const ge=l.UI.Union.make("kind",{none:l.UI.Node.empty,initial:ee,initialBTS:oe,tooltip:he}),ve=l.UI.Grid.make((({slots:e,view:t})=>{const n=i.useMemo((()=>s.h.create(c.u)),[]);return r.P.useSubscriptionTo(t("theme").pipe(o.b(a.wW(n)))),i.createElement(u.N.Provider,{value:n},e.onboarding)})),be=l.UI.Knot.make(ve,{onboarding:ge})},21903:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(5114),r=n(57050),o=n(76974),a=n(22232),s=n(34217),l=n(20545),c=n(60797);const u=e=>s.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA)),d=e=>{const t=u(e);return s.Z.composeKnot({root:t,content:t,footerText:t})},m=e=>{const t=u(e);return s.Z.composeKnot({root:t,content:t,footerText:t})};var p=n(77176),h=n(85985),f=n(41398),g=n(82496);function v(e){return s.Z.composeOption(function(e){return s.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA,h.h(g.X.isTooltipOnboardingStep),f.M(e.promptsAllocated.pipe(p.U(i.toUndefined))),p.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(p.U(i.filter(g.X.isTooltipOnboardingStep)))))}function b(e){return s.Z.composeKnot({root:()=>e.theme.theme.view((e=>({theme:e}))),onboarding:s.Z.composeUnion({none:()=>o.of(null),initial:d(e.onboarding),initialBTS:m(e.onboarding),tooltip:v(e.onboarding)},(()=>e.onboarding.activeStep.view(y).view((e=>({kind:e})))))})}function y(e){return(0,r.zG)(e,i.filter((e=>e.show)),i.fold((()=>"none"),(e=>{switch(e.name){case l.T.StepName.initial:return"initial";case l.T.StepName.initialBTS:return"initialBTS";case l.T.StepName.prompts:case l.T.StepName.review:case l.T.StepName.rewrite:case l.T.StepName.knowledgeHub:case l.T.StepName.references:case l.T.StepName.history:return"tooltip";default:return(0,a.L0)(e.name)}})))}},31874:(e,t,n)=>{n.d(t,{Q:()=>D});var i,r=n(5114),o=n(14601),a=n(85985),s=n(23239),l=n(83289),c=n(12968),u=n(52528),d=n(64015),m=n(57050),p=n(93508),h=n(16118),f=n(77176),g=n(60797),v=n(41398),b=n(66310),y=n(80544),x=n(79692),k=n(2834),S=n(24209),w=n(67434),C=n(17343),E=n(40151),_=n(8125),I=n(22232),A=n(83078),O=n(14047),R=n(54518),B=n(20545),M=n(24451);function F(e,t,n,i,r=1e3){return e.pipe(a.h(M.l.is(M.l.Kind.mount)),a.h((e=>n(e.step))),b.w((({step:e})=>t.pipe(f.U(A.FX(e)),b.w((e=>e?i.pipe(C.h(Date.now())):E.E)),a.h((e=>Date.now()-e>=r)),C.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e,stepsSeenOnThisSession:t})=>e.pipe(p.O(r.none),h.G(),f.U((([e,t])=>r.isNone(e)&&r.isSome(t)?r.some(t):r.none)),g.oA,v.M(t),b.w((([e,t])=>(0,m.zG)([t.has(B.T.StepName.initial)?r.some(B.T.StepName.initial):r.none,t.has(B.T.StepName.initialBTS)?r.some(B.T.StepName.initialBTS):r.none,R.s.isRewriteOrQuickRewrite(e.value.mode)?r.some(B.T.StepName.rewrite):r.none],d.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(f.U((0,m.ls)(r.filter((e=>"started"===e.kind)),r.fold((()=>0),(e=>e.resultCount)))),h.G(),a.h((([e,t])=>1===e&&2===t)),v.M(t),f.U((([e,t])=>(0,m.zG)(t,r.filter((e=>e===B.T.StepName.review))))),g.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:n,onboardingUIActions:i})=>F(i,t.pipe(y.QV(x.E)),B.T.StepName.isAssistantOnboardingStep,e.pipe(h.G(),a.h((([e,t])=>r.isSome(e)&&r.isNone(t)))),n),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(a.h(M.l.is(M.l.Kind.close)),f.U((e=>(e.step===B.T.StepName.initial&&t.trackOnboardingPopupSkip(),e.step===B.T.StepName.initialBTS&&t.trackBTSOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(a.h(M.l.is(M.l.Kind.tryItOut)),f.U((e=>(e.step===B.T.StepName.initial&&t.trackOnboardingPopupNext(),e.step===B.T.StepName.initialBTS&&t.trackBTSOnboardingPopupNext(),e.step)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(a.h(l.i.isResultAction),a.h((e=>O.x.isStandardCompletedResult(e.result))),f.U((()=>B.T.StepName.review))),e.completeHistoryStepOnHistoryRestore=({assistantUIActions:e})=>e.pipe(a.h(l.i.is(l.i.Kind.restoreHistoryButtonClick)),f.U((()=>B.T.StepName.history))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(a.h((0,_.Kg)(l.i.is(l.i.Kind.actionBrickClick),l.i.is(l.i.Kind.promptSubmitButtonClick),l.i.is(l.i.Kind.promptFieldKeyPressEnter),l.i.is(l.i.Kind.headerVoiceButtonClick),l.i.is(l.i.Kind.setVoiceButtonClick),l.i.is(l.i.Kind.openFeedbackFormButtonClick))),v.M(t),f.U((([e,t])=>(0,m.zG)(t,r.filter(B.T.StepName.isAssistantOnboardingStep)))),g.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:n,visibleForMs:i})=>F(e,t,(e=>e===B.T.StepName.initial||e===B.T.StepName.initialBTS),n,i);const t=e=>t=>n=>t(n).pipe(k.b((t=>{var i;return null===(i=n.logger)||void 0===i?void 0:i.debug(`Onboarding - ${e} - step to complete: ${t}.`)})));function n(e){return e.pipe(w.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?r.none:r.some(t)})),{seen:new Set,step:r.none}),f.U((e=>e.step)),g.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("user restored history")(e.completeHistoryStepOnHistoryRestore),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return S.T(...e.map((e=>e(t)))).pipe(n)}}(i||(i={}));var T=n(6273),P=n(26320);class N{constructor(e,t){this._capiService=e,this._logger=t}trackOnboardingPopupView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up view."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up skip."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding pop-up next."),this._trackUxInteraction({kind:"onboardingPopup",userAction:T.Z.Onboarding.UserAction.next})}trackBTSOnboardingPopupView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up view."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.view})}trackBTSOnboardingPopupSkip(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up skip."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.skip})}trackBTSOnboardingPopupNext(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking BTS onboarding pop-up next."),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:T.Z.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding prompts tooltip view."),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding review tooltip view."),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding rewrite tooltip view."),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding knowledge-hub tooltip view."),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingReferencesTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding references tooltip view."),this._trackUxInteraction({kind:"onboardingReferencesTooltip",userAction:T.Z.Onboarding.UserAction.view})}trackOnboardingHistoryTooltipView(){var e;null===(e=this._logger)||void 0===e||e.debug("Tracking onboarding history tooltip view."),this._trackUxInteraction({kind:"onboardingHistoryTooltip",userAction:T.Z.Onboarding.UserAction.view})}_trackUxInteraction(e,t,n,i={}){var r;const o=T.Z.getComponentId(e,t,n,i),a=T.Z.getUserAction(e);null===(r=this._logger)||void 0===r||r.debug("Sending `user_action` to CAPI.",{componentId:o,userAction:a,uxInteraction:e,contextId:t}),(0,P.t)("sendUserAction",this._capiService.user_action({componentId:o,userAction:a}),this._logger)}}var j=n(82496),U=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class z extends j.o{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function D(e){var{assistantUIActions:t,capiService:n,completeOnboardingStep:d,stepCompletionSources:m,disposed:p,theme:h,logger:f}=e,g=U(e,["assistantUIActions","capiService","completeOnboardingStep","stepCompletionSources","disposed","theme","logger"]);const v=new o.w,b=new N(n,f),y=new z(Object.assign(Object.assign({},g),{assistantMountActions:t.pipe(a.h(l.i.is(l.i.Kind.mount))),assistantUnmountActions:t.pipe(a.h(l.i.is(l.i.Kind.unmount)))}),(()=>v.unsubscribe()));return v.add(i.extractStepsToComplete(null!=m?m:i.defaultCompletionSources,{onboardingUIActions:y.uiActions,assistantUIActions:t,activeStep:y.activeStep.view(r.map((e=>e.name))),stepsSeenOnThisSession:y.stepsSeenOnThisSession,session:g.session,trackingService:b,disposed:p,logger:f}).subscribe((e=>{d(e)}))),v.add(function(e,t){return e.pipe(a.h(M.l.is(M.l.Kind.mount)),k.b((e=>{switch(e.step){case B.T.StepName.initial:return t.trackOnboardingPopupView();case B.T.StepName.initialBTS:return t.trackBTSOnboardingPopupView();case B.T.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case B.T.StepName.review:return t.trackOnboardingReviewTooltipView();case B.T.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case B.T.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();case B.T.StepName.references:return t.trackOnboardingReferencesTooltipView();case B.T.StepName.history:return t.trackOnboardingHistoryTooltipView();default:return(0,I.L0)(e.step)}})))}(y.uiActions,b).subscribe()),{onboarding:y,theme:new u.e(null!=h?h:s.h.create(c.u))}}},82496:(e,t,n)=>{n.d(t,{X:()=>i,o:()=>w});var i,r=n(5114),o=n(57050),a=n(14601),s=n(32952),l=n(98403),c=n(60797),u=n(77176),d=n(93508),m=n(16118),p=n(85985),h=n(2844),f=n(28043),g=n(41398),v=n(67434),b=n(22232),y=n(23239),x=n(99877),k=n(20545),S=n(1846);!function(e){e.isTooltipOnboardingStep=function(e){return k.T.StepName.isTooltipOnboardingStep(e.name)}}(i||(i={}));class w{constructor(e){var t,n,i,v,w,_;this._params=e,this._subs=new a.w,this._assistantElements=y.h.create({}),this._externalElements=y.h.create({}),this._hideAssistantTooltips=y.h.create(!1),this._nextCandidateStep=y.h.create(r.none),this.stepsSeenOnThisSession=y.h.create(new Set),this._uiActions=new s.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=y.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,n,i)=>(0,o.zG)(e,r.chain((e=>function(e,t,n,i){switch(e){case k.T.StepName.initial:return(0,o.zG)(r.fromNullable(n[x.n.initialPopupAnchor]),r.map((e=>({name:k.T.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.initialBTS:return(0,o.zG)(r.fromNullable(n[x.n.initialBTSPopupAnchor]),r.map((e=>({name:k.T.StepName.initialBTS,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.rewrite:return(0,o.zG)(r.fromNullable(n[x.n.rewriteTooltipAnchor]),r.map((e=>({name:k.T.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.prompts:return(0,o.zG)(r.fromNullable(t[x.e.initialActionsList]),r.map((e=>({name:k.T.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.review:return(0,o.zG)(r.fromNullable(t[x.e.followUpActionsList]),r.map((e=>({name:k.T.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.knowledgeHub:return(0,o.zG)(r.fromNullable(t[x.e.promptInput]),r.map((e=>({name:k.T.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.references:return(0,o.zG)(r.fromNullable(t[x.e.referencesList]),r.map((e=>({name:k.T.StepName.references,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.history:return(0,o.zG)(r.fromNullable(t[x.e.historyButton]),r.map((e=>({name:k.T.StepName.history,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));default:return(0,b.L0)(e)}}(e,t,n,i)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this.activeStep,n=this._params.upstreamOnboardingState,i=this._params.session,v=this._params.textStats,w=this._params.forceDisabledOnboardingSteps,_=this._params.client,h.aj([i,n,v.pipe(E()),i.pipe(u.U(r.isSome),f.x(),g.M(n),u.U((([e,t])=>e?r.some(t):r.none)))]).pipe(u.U((([e,n,i,a])=>{if(r.isNone(e)){const e=!(0,o.zG)(t.get(),r.map((e=>e.name===k.T.StepName.initial)),r.getOrElse(o.jv))&&!w.has(k.T.StepName.initialBTS)&&!n.initialBTS[_].completed&&void 0===n.initialBTS[_].lastSeen,a=!w.has(k.T.StepName.initial)&&!n.initial[_].completed&&void 0===n.initial[_].lastSeen&&!n.initialBTS[_].completed&&void 0===n.initialBTS[_].lastSeen,s=!w.has(k.T.StepName.rewrite)&&!n.rewrite[_].completed&&(n.initial[_].completed||n.initialBTS[_].completed)&&i>=30;return e?r.some(k.T.StepName.initialBTS):a?r.some(k.T.StepName.initial):s?r.some(k.T.StepName.rewrite):r.none}return S.Z.Step.anyClientCompleted(n.prompts)||w.has(k.T.StepName.prompts)?S.Z.Step.anyClientCompleted(n.review)||w.has(k.T.StepName.review)?S.Z.Step.anyClientCompleted(n.history)||w.has(k.T.StepName.history)||!C(a)?S.Z.Step.anyClientCompleted(n.knowledgeHub)||w.has(k.T.StepName.knowledgeHub)||!C(a)?S.Z.Step.anyClientCompleted(n.references)||w.has(k.T.StepName.references)||!C(a)?r.none:r.some(k.T.StepName.references):r.some(k.T.StepName.knowledgeHub):r.some(k.T.StepName.history):r.some(k.T.StepName.review):r.some(k.T.StepName.prompts)})))).subscribe(l.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((n=>Object.assign(Object.assign({},n),{[e]:{reference:t,placement:e===x.e.historyButton?"bottom":"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(l.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(l.wW(this._hideAssistantTooltips))),this._subs.add(this.activeStep.pipe(c.oA).subscribe((e=>this.stepsSeenOnThisSession.modify((t=>new Set([...t,e.name])))))),this._subs.add(this._params.session.pipe(u.U(r.isSome),d.O(!1),m.G(),p.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function C(e){return(0,o.zG)(e,r.fold(o.jv,(({prompts:e,review:t})=>{const n={prompts:S.Z.Step.anyClientCompleted(e),review:S.Z.Step.anyClientCompleted(t)};return Object.values(n).every(o.yR)})))}function E(){return(0,o.ls)(c.oA,u.U((e=>e.wordCount)),d.O(0),m.G(),v.R(((e,[t,n])=>(0,o.zG)(Math.abs(n-t),(t=>t<=2?e+t:e))),0),d.O(0),f.x())}},72004:(e,t,n)=>{var i;n.d(t,{x:()=>i}),function(e){let t,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions",e.intentCard="intentCard"}(n=e.Source||(e.Source={}))}(i||(i={}))},3299:(e,t,n)=>{n.d(t,{s:()=>i});var i,r=n(5114);!function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={})),e.create=function(t){return Object.assign(Object.assign({},t),{id:e.Id.create(t.id),url:r.fromNullable(t.url),contextText:r.none})}}(i||(i={}))},71078:(e,t,n)=>{function i(e){return"alertAdded"===e.kind}function r(e){return{kind:"alertAdded",alertId:e}}function o(e){return"alertRemoved"===e.kind}function a(e,t){return{kind:"alertRemoved",alertId:e,reason:t}}n.d(t,{BG:()=>i,Tm:()=>r,nq:()=>o,qQ:()=>a})},19125:(e,t,n)=>{function i(e){return"sduiItemAdd"===e.kind}function r(e,t){return{kind:"sduiItemAdd",sduiRootId:e,sdui:t}}function o(e){return"sduiItemUpdate"===e.kind}function a(e,t){return{kind:"sduiItemUpdate",sduiRootId:e,sdui:t}}function s(e){return"sduiItemRemove"===e.kind}function l(e){return{kind:"sduiItemRemove",sduiRootId:e}}function c(e){return"sduiReset"===e.kind}function u(){return{kind:"sduiReset"}}n.d(t,{FE:()=>a,K5:()=>r,Sq:()=>u,Ul:()=>l,Y9:()=>o,Zb:()=>c,tC:()=>i,zi:()=>s});(0,n(8125).Kg)(i,o,s,c)},48911:(e,t,n)=>{n.d(t,{In:()=>m,Vg:()=>c,dy:()=>d});var i=n(98314),r=n(20096),o=n(27378),a=n(54001),s=n(59179),l=n(89894),c=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function u(e){return s.g+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}var d=function(e){var t=e.children,n=e.emojiClassName,i=e.className,r=o.useRef(null);return o.useEffect((function(){r.current&&(r.current.innerHTML=r.current.innerHTML.replace(c,(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.emoji;return'<img alt="'.concat(e,'" class="').concat(t,'" src="').concat(u(e),'" onerror="this.replaceWith(this.alt)" draggable="false" />')}(e,n)})))}),[r,n]),o.createElement("span",{ref:r,className:i},t)},m=function(e){var t=e.id,n=e.className,l=(0,i._)(o.useState(!1),2),c=l[0],u=l[1],d=(0,i._)(o.useState(""),2),m=d[0],h=d[1],f=(0,i._)(o.useState(""),2),g=f[0],v=f[1];return o.useEffect((function(){u(!1),v(function(e){return s.g+e+".svg"}(t)),h(function(e){try{var t;return(t=String).fromCodePoint.apply(t,(0,r._)(e.map((function(e){return parseInt(e,16)}))))}catch(e){return""}}(t.split("-")))}),[t]),c?o.createElement("span",(0,a.Sh)(n,p.emojiFromIDAlt),m):o.createElement("img",{className:n,src:g,alt:m,onError:function(){return u(!0)},"aria-hidden":!0})},p=l.ux.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}],emojiFromIDAlt:[{display:"flex",alignItems:"center"}]})},56377:(e,t,n)=>{n.d(t,{L:()=>l});var i,r=n(18775),o=n(27378),a=n(54001),s=n(89894),l=function(e){var t=e.double,n=e.triple,i=e.small;return o.createElement("div",(0,a.Sh)(d,!0===t&&p,!0===n&&f,!0===i&&g))},c=.875,u="spacer",d=s.ux.joinClasses([u,s.ux.style({margin:0,minHeight:s.ux.rem(c),maxHeight:s.ux.rem(1),width:s.ux.percent(100),height:s.ux.rem(1)})]),m="spacerDouble",p=s.ux.joinClasses([m,s.ux.style({minHeight:s.ux.rem(1.75),maxHeight:s.ux.rem(2),height:s.ux.rem(2)})]),h="spacerTriple",f=s.ux.joinClasses([h,s.ux.style({minHeight:s.ux.rem(2.625),maxHeight:s.ux.rem(3),height:s.ux.rem(3)})]),g=s.ux.style({$nest:(i={},(0,r._)(i,"&.".concat(u),{minHeight:s.ux.rem(.4375),maxHeight:s.ux.rem(.5),height:s.ux.rem(.5)}),(0,r._)(i,"&.".concat(m),{minHeight:s.ux.rem(c),maxHeight:s.ux.rem(1),height:s.ux.rem(1)}),(0,r._)(i,"&.".concat(h),{minHeight:s.ux.rem(1.3125),maxHeight:s.ux.rem(1.5),height:s.ux.rem(1.5)}),i)})},24782:(e,t)=>{t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=l(e),a=o[0],s=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],a=16383,s=0,l=i-r;s<l;s+=a)o.push(c(e,s,s+a>l?l:s+a));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,i){for(var r,o,a=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},30816:(e,t,n)=>{const i=n(24782),r=n(78898),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let i=s(n);const r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?s(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|h(e))}function m(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return i?-1:$(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function b(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,r){let o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){let i=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let i=0;i<l;i++)if(c(e,o+i)!==c(t,i)){n=!1;break}if(n)return o}return-1}function x(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(Q(i))return a;e[n+a]=i}return a}function k(e,t,n,i){return W($(t,e.length-n),e,n,i)}function S(e,t,n,i){return W(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n,i){return W(K(t),e,n,i)}function C(e,t,n,i){return W(function(e,t){let n,i,r;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(r+a<=n){let n,i,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=a}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=I));return n}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(q(t,Uint8Array))r+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(i,r),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function A(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function O(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=Y[e[i]];return r}function B(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function T(e,t,n,i,r){G(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function P(e,t,n,i,r){G(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function N(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function U(e,t,n,i,o){return t=+t,n>>>=0,o||N(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){Z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){Z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let i=t,r=1,o=this[e+--i];for(;i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){Z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){Z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){F(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){F(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e,t=0){return T(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}let r=0,o=1,a=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);F(this,e,t,n,i-1,-i)}let r=n-1,o=1,a=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e,t=0){return T(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=o[r%a]}return this};const z={};function D(e,t,n){z[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function L(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,i,r,o){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new z.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){Z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(i,r,o)}function Z(e,t){if("number"!=typeof e)throw new z.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw Z(e,n),new z.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=L(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=L(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function $(e,t){let n;t=t||1/0;const i=e.length;let r=null;const o=[];for(let a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function J(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},78898:(e,t)=>{t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,m=n?-1:1,p=e[t+d];for(d+=m,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=m,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=m,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,d=u>>1,m=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?m/l:m*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=h,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*f}},83257:(e,t,n)=>{n.d(t,{AG:()=>o,IM:()=>c,IX:()=>u,OT:()=>f,Sm:()=>p,Vo:()=>h,bc:()=>d,dt:()=>s,id:()=>v,n_:()=>a,ov:()=>b,qm:()=>y,r$:()=>l,wf:()=>m});var i=n(18164),r=n(57050);function o(e){return{encode:function(t){return null===t?null:e.encode(t)}}}function a(e){return{encode:function(t){var n={};for(var i in e)n[i]=e[i].encode(t[i]);return n}}}var s=a;function l(e){return{encode:function(t){var n={};for(var i in e){var r=t[i];i in t&&(n[i]=void 0===r?void 0:e[i].encode(r))}return n}}}function c(e){return{encode:function(t){var n={};for(var i in t)n[i]=e.encode(t[i]);return n}}}function u(e){return{encode:function(t){return t.map(e.encode)}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{encode:function(t){return e.map((function(e,n){return e.encode(t[n])}))}}}var m=function(e){return function(t){return{encode:function(n){return(0,i.U)(t.encode(n),e.encode(n))}}}};function p(e){return function(t){return{encode:function(n){return t[n[e]].encode(n)}}}}function h(e){var t=(0,i.H)(e);return{encode:function(e){return t().encode(e)}}}var f=r.yR,g=function(e,t){return{encode:function(n){return e.encode(t(n))}}};function v(){return{encode:r.yR}}var b="io-ts/Encoder",y={URI:b,contramap:g}},33829:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(27378),r=n(15141),o=n(92236);const a=[];function s(e,t){const{onClose:n,shouldCloseOnBlur:s,isOpen:l,isDismissable:c=!1,isKeyboardDismissDisabled:u=!1,shouldCloseOnInteractOutside:d}=e;i.useEffect((()=>(l&&a.push(t),()=>{const e=a.indexOf(t);e>=0&&a.splice(e,1)})),[l,t]);const m=()=>{a[a.length-1]===t&&n&&n()};(0,o.Fc)({ref:t,onInteractOutside:c?e=>{e instanceof Event&&(e=>{d&&!d(e.target,e)||(a[a.length-1]===t&&(e.stopPropagation(),e.preventDefault()),m())})(e)}:void 0,onInteractOutsideStart:e=>{e instanceof Event&&(e=>{d&&!d(e.target,e)||a[a.length-1]===t&&(e.stopPropagation(),e.preventDefault())})(e)}});const{focusWithinProps:p}=(0,o.L_)({isDisabled:!s,onBlurWithin:e=>{e.relatedTarget&&!(0,r.cW)(e.relatedTarget)&&(d&&!d(e.relatedTarget,e instanceof Event?e:void 0)||null==n||n())}});return{overlayProps:Object.assign({onKeyDown:e=>{"Escape"!==e.key||u||(e.stopPropagation(),e.preventDefault(),m())}},p),underlayProps:{onPointerDown:e=>{e.target===e.currentTarget&&e.preventDefault()}}}}},40938:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(27378),r=n(51869),o=n(29972);const a=i.forwardRef((function(e,t){const{as:n,className:a,variant:s="text-medium",color:l,align:c,weight:u,italic:d,decoration:m,margin:p,marginLeft:h,marginRight:f,marginTop:g,marginBottom:v,style:b,...y}=e,x={...b,...null!=l&&{color:`var(--color-text-${l})`},...null!=c&&{textAlign:c},...null!=u&&{fontWeight:u},...null!=d&&{fontStyle:d?"italic":"normal"},...null!=m&&{textDecoration:m},...(0,o.A)({margin:p,marginLeft:h,marginRight:f,marginTop:g,marginBottom:v})};return i.createElement(n,{ref:t,className:(0,r.W)("gds-typography","gds-"+(s.startsWith("heading")?"heading":"text"),`gds-${s}`,a),style:x,...y})}))},29972:(e,t,n)=>{function i(e){return.5===e?"half":.25===e?"quarter":`${e}`}function r({margin:e,marginLeft:t,marginRight:n,marginTop:i,marginBottom:r}){const a=function(e){if("string"!=typeof e)return{top:e,right:e,bottom:e,left:e};const t=e.split(" "),n=t[0],i=t[1]||n,r=t[2]||n,o=t[3]||i;return{top:n,right:i,bottom:r,left:o}}(e);return{marginLeft:o(t,a.left),marginRight:o(n,a.right),marginTop:o(i,a.top),marginBottom:o(r,a.bottom)}}function o(e,t){const n=void 0!==e?e:t;if(void 0!==n){if("string"==typeof n)return n;if(n<0){return`calc(var(--space-${i(-1*n)}) * -1)`}return`var(--space-${i(n)})`}}n.d(t,{A:()=>r})},46140:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(27378);const r=(0,n(91961).I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m3 3 5 5m5 5L8 8m0 0 5-5M8 8l-5 5"}))))},96833:(e,t,n)=>{n.d(t,{c:()=>r});var i=n(27378);const r=(0,n(91961).I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.053 10.842v1.908c0 .69.56 1.25 1.25 1.25h4.447c.69 0 1.25-.56 1.25-1.25V8.303c0-.69-.56-1.25-1.25-1.25h-1.908M8.947 3.25v4.447c0 .69-.56 1.25-1.25 1.25H3.25c-.69 0-1.25-.56-1.25-1.25V3.25C2 2.56 2.56 2 3.25 2h4.447c.69 0 1.25.56 1.25 1.25"}))))},1386:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(27378);const r=(0,n(91961).I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinejoin:"round",d:"M5.727 6.615H3V14h10V6.615h-2.727m-4.546 0V4.273a2.273 2.273 0 1 1 4.545 0v2.342m-4.545 0h4.546"}))))},8174:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(27378);const r=(0,n(91961).I)("color",(({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 6 6-6 6"}))))},65432:(e,t,n)=>{n.d(t,{GO:()=>a,HF:()=>u,Ic:()=>S,Ng:()=>m,RS:()=>l,SP:()=>k,Wr:()=>r,_2:()=>d,_y:()=>$,c3:()=>p,ik:()=>o,xe:()=>c});class i{_sendMessage;constructor(e){this._sendMessage=e}async terminate(e){return await this._sendMessage("applet.lifecycle.terminate",e)??null}}class r{implementation;static objectName="host.authorizedHttpClient";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.authorizedHttpClient.";if(e.startsWith(n)&&(e=e.slice(n.length)),"sendRequest"===e){const e=t??null;return await this.implementation.sendRequest(e)??null}throw new Error(`Unknown action: ${e}`)}}class o{_sendMessage;constructor(e){this._sendMessage=e}async sendRequest(e){return await this._sendMessage("host.authorizedHttpClient.sendRequest",e)??null}}class a{_sendMessage;constructor(e){this._sendMessage=e}async start(e){return await this._sendMessage("applet.cheetah.start",e)??null}}class s{implementation;static objectName="host.editSession";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.editSession.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"insertText":{const e=t??null;return await this.implementation.insertText(e)??null}case"pasteImage":{const e=t??null;return await this.implementation.pasteImage(e)??null}case"copyImage":{const e=t??null;return await this.implementation.copyImage(e)??null}case"getDocumentState":{const e=t??null;return await this.implementation.getDocumentState(e)??null}case"insertAtCaret":{const e=t??null;return await this.implementation.insertAtCaret(e)??null}case"setSelection":{const e=t??null;return await this.implementation.setSelection(e)??null}case"applyDelta":{const e=t??null;return await this.implementation.applyDelta(e)??null}case"getCapabilities":{const e=t??null;return await this.implementation.getCapabilities(e)??null}case"copyText":{const e=t??null;return await this.implementation.copyText(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class l{_sendMessage;constructor(e){this._sendMessage=e}async textUpdated(e){return await this._sendMessage("applet.editSession.textUpdated",e)??null}async selectionUpdated(e){return await this._sendMessage("applet.editSession.selectionUpdated",e)??null}}class c{implementation;static objectName="host.lifecycle";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.lifecycle.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"initialize":case"init":{const e=t??null;return await this.implementation.initialize(e)??null}case"visuallyReady":{const e=t??null;return await this.implementation.visuallyReady(e)??null}case"resizeFrame":{const e=t??null;return await this.implementation.resizeFrame(e)??null}case"requestClose":{const e=t??null;return await this.implementation.requestClose(e)??null}case"startDragMove":{const e=t??null;return await this.implementation.startDragMove(e)??null}case"log":{const e=t??null;return await this.implementation.log(e)??null}case"openURL":case"openUrl":{const e=t??null;return await this.implementation.openURL(e)??null}case"triggerSettingsMenu":{const e=t??null;return await this.implementation.triggerSettingsMenu(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class u{implementation;static objectName="host.indexedDB";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.indexedDB.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"beginVersionChange":{const e=t??null;return await this.implementation.beginVersionChange(e)??null}case"finishVersionChange":{const e=t??null;return await this.implementation.finishVersionChange(e)??null}case"createObjectStore":{const e=t??null;return await this.implementation.createObjectStore(e)??null}case"deleteObjectStore":{const e=t??null;return await this.implementation.deleteObjectStore(e)??null}case"createIndex":{const e=t??null;return await this.implementation.createIndex(e)??null}case"createFullTextIndex":{const e=t??null;return await this.implementation.createFullTextIndex(e)??null}case"deleteIndex":{const e=t??null;return await this.implementation.deleteIndex(e)??null}case"connect":{const e=t??null;return await this.implementation.connect(e)??null}case"disconnect":{const e=t??null;return await this.implementation.disconnect(e)??null}case"set":{const e=t??null;return await this.implementation.set(e)??null}case"get":{const e=t??null;return await this.implementation.get(e)??null}case"delete":{const e=t??null;return await this.implementation.delete(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class d{_sendMessage;constructor(e){this._sendMessage=e}async beginVersionChange(e){return await this._sendMessage("host.indexedDB.beginVersionChange",e)??null}async finishVersionChange(e){return await this._sendMessage("host.indexedDB.finishVersionChange",e)??null}async createObjectStore(e){return await this._sendMessage("host.indexedDB.createObjectStore",e)??null}async deleteObjectStore(e){return await this._sendMessage("host.indexedDB.deleteObjectStore",e)??null}async createIndex(e){return await this._sendMessage("host.indexedDB.createIndex",e)??null}async createFullTextIndex(e){return await this._sendMessage("host.indexedDB.createFullTextIndex",e)??null}async deleteIndex(e){return await this._sendMessage("host.indexedDB.deleteIndex",e)??null}async connect(e){return await this._sendMessage("host.indexedDB.connect",e)??null}async disconnect(e){return await this._sendMessage("host.indexedDB.disconnect",e)??null}async set(e){return await this._sendMessage("host.indexedDB.set",e)??null}async get(e){return await this._sendMessage("host.indexedDB.get",e)??null}async delete(e){return await this._sendMessage("host.indexedDB.delete",e)??null}}class m{implementation;static objectName="host.userAccount";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.userAccount.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"getInfo":{const e=t??null;return await this.implementation.getInfo(e)??null}case"setDialect":{const e=t??null;return await this.implementation.setDialect(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class p{_sendMessage;constructor(e){this._sendMessage=e}async getInfo(e){return await this._sendMessage("host.userAccount.getInfo",e)??null}async setDialect(e){return await this._sendMessage("host.userAccount.setDialect",e)??null}}const h={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},f=(new RegExp(`^(?<stem>.+?)(${Object.keys(h).join("|")})$`),{icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""}),g=(new RegExp(`^(?<stem>.+?)(${Object.keys(f).join("|")})$`),"(?:(?:[^aeiouy]|(?<=[aeiou])y)+)"),v="(?:(?:[aeiou]|(?<![aeiou])y)+)";new RegExp(`^${g}?${v}${g}`),new RegExp(`^${g}?${v}${g}${v}?$`),new RegExp(`^${g}?(?:${v}${g}){2,}`),new RegExp(`^${g}?[aeiouy]`),new RegExp(`^${g}[aeiouy][^aeiouwxy]$`);class b extends Error{oldVersion;newVersion;constructor(e,t){super("upgrade needed"),this.oldVersion=e,this.newVersion=t}}var y,x;function k(e){return`${e.kind}:${e.id}`}!function(e){e.UI="ui",e.BACKGROUND="background"}(y||(y={})),function(e){e.GLOBAL="global",e.EDIT_SESSION="editSession"}(x||(x={}));class S{_manifests=new Map;_implementations=new Map;register(e){const t=k(e);if(this._manifests.set(t,e),null!=e.implementsObjects)for(const n of e.implementsObjects){const e=this._implementations.get(n)??new Set;e.add(t),this._implementations.set(n,e)}}all(){return[...this._manifests.values()]}get(e){return this._manifests.get(e)}findImplementations(e){const t=this._implementations.get(e)??new Set;return Array.from(t).map((e=>this._manifests.get(e)))}}class w{_parent;_objects=new Map;_resolving=new Map;_resolver;constructor(e=null,t){this._parent=e,this._resolver=t}register(e,t){this._objects.set(e,t)}unregister(e){this._objects.delete(e)}get(e){return this._objects.get(e)??null}execute(e,t){const n=e.split("."),i=n.pop(),r=n.join(".");if(null==r||null==i)throw new E(e);return this._handleWithResolver({target:r,method:i,data:t})}dispose(){this._objects.clear(),this._resolving.clear()}_handleWithResolver(e){const t=this._resolve(e.target);return t instanceof Promise?t.then((()=>this._handle(e))):this._handle(e)}_handle(e){const t=this._objects.get(e.target);if(null!=t)return t.handleMessage(e.method,e.data);if(null!=this._parent)return this._parent._handle(e);throw new _(e.target)}_isResolved(e){return this._objects.has(e)||(this._parent?._isResolved(e)??!1)}_resolve(e){if(!this._isResolved(e)){if(this._resolving.has(e))return this._resolving.get(e);if(null!=this._resolver){const t=this._resolver(e);if(t instanceof Promise){const n=t.then((t=>{if(!!this._resolving.has(e))return null==t?this._parent?._resolve(e):void this._objects.set(e,t)})).finally((()=>{this._resolving.delete(e)}));return this._resolving.set(e,n),n}if(null!=t)return void this._objects.set(e,t)}return this._parent?._resolve(e)}}}class C extends Error{}class E extends C{action;constructor(e){super(`Malformed action: ${e}`),this.action=e}}class _ extends C{action;constructor(e){super(`Object not found: ${e}`),this.action=e}}let I;class A{onAppletStart(e,t){this._send({action:"onAppletStart",data:[e,t],timestamp:Date.now()})}onAppletStop(e){this._send({action:"onAppletStop",data:[e],timestamp:Date.now()})}onAfterRPCCall(e,t){this._send({action:"onAfterRPCCall",data:[e,t],timestamp:Date.now()})}onBeforeRPCCall(e,t){this._send({action:"onBeforeRPCCall",data:[e,t],timestamp:Date.now()})}_send(e){self.postMessage({type:"gOS::devtools::collector",data:e},"*")}}var O,R;function B(e=""){return e?((Number(e)^16*Math.random())>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,B)}!function(e){e.INCOMING="incoming",e.OUTGOING="outgoing",e.UNEXPECTED="unexpected"}(O||(O={}));class M{_defaultRequestTimeout=3e4;_pendingRequests=new Map;_transport;requestHandler;debugHandler;constructor(e,t,n){this._transport=e,this.requestHandler=t,this.debugHandler=n,e.onMessage=e=>{"response"===e.type?this._handleIncomingResponse(e):"request"===e.type&&this._handleIncomingRequest(e)}}_lastId=0;_prefix=B();_generateId(){return`${this._prefix}-${++this._lastId}`}async call(e,t,n=this._defaultRequestTimeout){const i=this._generateId();return new Promise(((r,o)=>{const a=setTimeout((()=>{this._pendingRequests.has(i)&&(this._pendingRequests.delete(i),o(new P(i,e,t)))}),n);this._pendingRequests.set(i,{complete:e=>{clearTimeout(a),this.debugHandler?.(O.INCOMING,e),this._pendingRequests.delete(i);const t=e.data;if("success"===t.status)r(t.data);else{const e="object"==typeof t.data&&null!=t.data&&"errorMessage"in t.data?String(t.data.errorMessage):"Unknown error";o(Object.assign(new Error(e),t.data))}},timerId:a});const s={id:i,type:"request",action:e,data:t};this.debugHandler?.(O.OUTGOING,s),this._transport.sendMessage(s)}))}dispose(){for(const e of this._pendingRequests.values())clearTimeout(e.timerId);this._pendingRequests.clear(),this._transport.onMessage=void 0}_handleIncomingResponse(e){const t=this._pendingRequests.get(e.id);null!=t?t.complete(e):this.debugHandler?.(O.UNEXPECTED,e)}async _handleIncomingRequest(e){try{if(this.debugHandler?.(O.INCOMING,e),null==this.requestHandler)throw new T(e.action);const t={id:e.id,action:e.action,type:"response",data:{status:"success",data:await this.requestHandler(e)}};this.debugHandler?.(O.OUTGOING,t),this._transport.sendMessage(t)}catch(t){const n={id:e.id,action:e.action,type:"response",data:{status:"failure",data:Object.assign({errorMessage:t.message},JSON.parse(JSON.stringify(t)))}};this.debugHandler?.(O.INCOMING,n),this._transport.sendMessage(n)}}}class F extends Error{}class T extends F{action;constructor(e){super(`No handler for RPC call ${e}`),this.action=e}}class P extends F{id;action;data;constructor(e,t,n){super(`RPC call ${t} timed out`),this.id=e,this.action=t,this.data=n}}!function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(R||(R={}));class N{logger;constructor(e){this.logger=e}log(e,t,n,i="<unknown>",r=-1,o=-1,a="<unknown>"){this.logger.log(e,t,n,i,r,o,a)}trace(e,t){this.log(R.TRACE,e,t)}debug(e,t){this.log(R.DEBUG,e,t)}info(e,t){this.log(R.INFO,e,t)}warn(e,t){this.log(R.WARN,e,t)}error(e,t){this.log(R.ERROR,e,t)}fatal(e,t){this.log(R.ERROR,e,t)}}class j{_outgoing;constructor(e){this._outgoing=e}_listener;get onMessage(){return this._listener}set onMessage(e){if(this._listener=e,null!=e){for(const t of this._queue)e(t);this._queue.length=0}}async sendMessage(e){await this._outgoing.sendMessage(e)}_queue=[];receiveMessage(e){if(null==this._listener){if(this._queue.length>100)throw new U;this._queue.push(e)}else this._listener(e)}}class U extends Error{constructor(){super("Buffer overrun")}}class z extends j{constructor(e){super({sendMessage:async t=>e.postMessage(t)}),e.onMessage((e=>this.receiveMessage(e)))}}class D{frame;_isLoaded=!1;_receiveMessage;_pendingMessages=[];_postMessageTargetOrigin="";constructor(e){this.frame=e,this.resize({width:480,height:300})}_onMessage=e=>{e.source===this.frame.contentWindow&&null!=this.frame.contentWindow&&this._receiveMessage?.(e.data)};setSource(e){try{this._isLoaded=!1;const t=new URL(e,self.location.href);"null"===self.origin||"http:"===self.location.protocol&&"https:"===t.protocol||!1===this.frame.getAttribute("sandbox")?.includes("allow-same-origin")?this._postMessageTargetOrigin="*":this._postMessageTargetOrigin=t.origin,this.frame.src=t.href}catch(e){throw this._postMessageTargetOrigin="",e}this.frame.addEventListener("load",(()=>queueMicrotask(this._onLoad)),{once:!0})}_onLoad=()=>{this._isLoaded=!0,this._flushPendingMessages()};onMessage(e){this._receiveMessage=e,self.addEventListener("message",this._onMessage)}postMessage(e){this._isLoaded&&null!==this.frame.contentWindow?(this._flushPendingMessages(),this.frame.contentWindow.postMessage(e,this._postMessageTargetOrigin)):this._pendingMessages.push(e)}dispose(){this.frame.src="about:blank",this._postMessageTargetOrigin="",this._pendingMessages.length=0,self.removeEventListener("message",this._onMessage)}resize(e){this.frame.style.width=`${e.width}px`,this.frame.style.height=`${e.height}px`}_flushPendingMessages(){if(0!==this._pendingMessages.length&&null!==this.frame.contentWindow){for(const e of this._pendingMessages)console.log("postMessage",e,this.frame.src,this._postMessageTargetOrigin),this.frame.contentWindow.postMessage(e,this._postMessageTargetOrigin);this._pendingMessages.length=0}}}class L{_worker;_handler;execute(e){this._worker=new Worker(e),this._worker.onmessage=e=>this._handler?.(e.data)}onMessage(e){this._handler=e}postMessage(e){this._worker?.postMessage(e)}dispose(){this._worker?.terminate(),this._worker=void 0}}class G{logger;manifest;objects;rpc;environment;sandbox;beforeUnloadHandlers=[];devtools=function(){return I??(I=new A)}();debugId;constructor(e,t,n,i){this.environment=t.environment,this.objects=new w(t.objects,(t=>e(t,this))),this.logger=new N(t.environment.makeLogger(`container/${n.id}`)),this.manifest=n,this.sandbox=i,this.debugId=`${this.manifest.id}/${this.manifest.version}/${Date.now()}/${Math.random()}`,this.rpc=new M(new z(this.sandbox),(async e=>await this.objects.execute(e.action,e.data)),((e,t)=>{if(this.environment.isDebugMode)switch(t.type){case"request":this.devtools?.onBeforeRPCCall(this.debugId,t);break;case"response":this.devtools?.onAfterRPCCall(this.debugId,t)}}))}instantiate(e){return new e(this._call.bind(this))}_call=async(e,t)=>{if(void 0===this.rpc)throw new Error("Applet is not loaded");return await this.rpc.call(e,t)};applet=new i(this._call);async gracefullyUnloadApplet(){try{await this.applet.terminate(null);for(const e of this.beforeUnloadHandlers)await e()}finally{this.unloadApplet()}}onBeforeUnload(e){this.beforeUnloadHandlers.push(e)}async createInitializeResponse(e){const[t,n]=await Promise.all([this.environment.getContainerId(),this.environment.getUserId()]);return{platform:"macos",environment:this.environment.environment,clientType:this.environment.clientType,clientVersion:this.environment.clientVersion,containerId:t,userId:n,protocolVersion:"0.1.1",protocolVersions:{gondolaAuthorizedHttpClient:"0.1",gondolaCapiSocket:"0.1",gondolaCheetah:"0.1",gondolaCore:"0.1",gondolaEditSession:"0.1",gondolaLifecycle:"0.1",gondolaUserAccount:"0.1",gondolaAlerts:"0.1",gondolaSDUI:"0.1"}}}}class Z extends G{view;_isLoaded=!1;constructor(e,t,n,i){super(e,t,n,i),this.view=i}loadApplet(){this._isLoaded||(this.devtools?.onAppletStart(this.debugId,this.manifest.displayName),this.view.setSource(this.manifest.entryPoint),this._isLoaded=!0)}unloadApplet(){this._isLoaded=!1,this.devtools?.onAppletStop(this.debugId),this.view.dispose()}}class H extends G{constructor(e,t,n,i){super(e,t,n,i)}_isLoaded=!1;get bg(){return super.sandbox}loadApplet(){this._isLoaded||(this.devtools?.onAppletStart(this.debugId,this.manifest.displayName),this.bg.execute(this.manifest.entryPoint),this._isLoaded=!0)}unloadApplet(){this._isLoaded=!1,this.devtools?.onAppletStop(this.debugId),this.bg.dispose()}async handleMessage(e,t){return await this.rpc.call(e,t)}}const V={createUISandbox:()=>new D(document.createElement("iframe")),createBackgroundSandbox(){throw new L}};class ${parent;environment;registry;objects;_applets=new Map;_objectFactories=new Map;_containerFactory=null;static default(e,t){return new $(e,t)}constructor(e,t){let n,i;e instanceof $?(this.parent=e,n=e.environment,i=e.registry):(this.parent=null,n=e,i=t),this.environment=n,this.registry=i,this.objects=new w(this.parent?.objects,(e=>{if(null==this.parent)return this._getOrCreateAppletService(k(this._findImplementingManifest(e)))}))}createAppletService(e){const t=this._findManifest(e),n=new H(((e,t)=>this._objectFactories.get(e)?.(t)),this,t,this._getContainerFactory().createBackgroundSandbox(t,this));return n.loadApplet(),n}createAppletView(e){const t=this._findManifest(e),n=new Z(((e,t)=>this._getObjectFactory(e)?.(t)),this,t,this._getContainerFactory().createUISandbox(t,this));return n.loadApplet(),n}_getObjectFactory(e){return this._objectFactories.get(e)??this.parent?._getObjectFactory(e)}_getContainerFactory(){return this._containerFactory??this.parent?._getContainerFactory()??V}_getOrCreateAppletService(e){const t=this._applets.get(e);if(void 0!==t)return t;const n=this.createAppletService(e);return this._applets.set(e,n),n}_findManifest(e){const t=this.registry.get(e);if(void 0===t)throw new Error(`Applet ${e} is not registered`);return t}_findImplementingManifest(e){const t=this.registry.findImplementations(e);if(0===t.length)throw new Error(`No applet implements ${e}`);if(t.length>1)throw new Error(`Multiple applets implement ${e}`);return t[0]}registerObject(e,t){this.objects.register(e,t)}registerObjectFactory(e,t){this._objectFactories.set(e,t)}withEditSession(e){const t=new $(this);return t.registerObject(s.objectName,new s(e)),t}withContainerFactory(e){const t=new $(this);return t._containerFactory=e,t}}}}]);