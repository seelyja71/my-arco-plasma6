(function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b})()({1:[function(a){const b=a("./modules/config"),c=a("./modules/storage-local-async"),d=a("./modules/utils"),{STORAGE_KEY_INSTALLATION_DATE:e}=a("./modules/notifications.js"),f="app-version",g={};window.audioStates=g;const h=(a,c)=>{const d=new window.AudioContext,e=d.createMediaStreamSource(c),f=d.createGain(),h=d.createBiquadFilter();h.type="peaking";const i=d.createAnalyser();i.fftSize=b.ANALYSER_FFT_SIZE;const j=d.createAnalyser();j.fftSize=b.ANALYSER_FFT_SIZE;const k=[e,b.ANALYSER_BEFORE_ENABLED&&i,f,h,b.ANALYSER_AFTER_ENABLED&&j];k.filter(a=>a).reduce((a,b)=>(a.connect(b),b)).connect(d.destination),g[a]=g[a]||{},g[a][b.AUDIO_STATE_AUDIO_CONTEXT]=d,g[a][b.AUDIO_STATE_GAIN_NODE]=f,g[a][b.AUDIO_STATE_BIQUAD_FILTER_NODE]=h,g[a][b.AUDIO_STATE_ANALYSER_NODE_BEFORE]=i,g[a][b.AUDIO_STATE_ANALYSER_NODE_AFTER]=j},i=(a,c)=>{g[a][b.AUDIO_STATE_GAIN_NODE].gain.value=c/100},j=(a,c,d,e,f)=>{null!=c&&(g[a][b.AUDIO_STATE_BIQUAD_FILTER_NODE].type=c),null!=d&&(g[a][b.AUDIO_STATE_BIQUAD_FILTER_NODE].frequency.value=d),null!=e&&(g[a][b.AUDIO_STATE_BIQUAD_FILTER_NODE].Q.value=e),null!=f&&(g[a][b.AUDIO_STATE_BIQUAD_FILTER_NODE].gain.value=f)},k=(a,c)=>{if(a.action===b.ACTION_POPUP_AUDIO_DATA_GET){let d=null;return a.tabId in g&&(d={gain:{gain:g[a.tabId][b.AUDIO_STATE_GAIN_NODE].gain.value},equalizer:{algorithm:g[a.tabId][b.AUDIO_STATE_BIQUAD_FILTER_NODE].type,frequency:g[a.tabId][b.AUDIO_STATE_BIQUAD_FILTER_NODE].frequency.value,q:g[a.tabId][b.AUDIO_STATE_BIQUAD_FILTER_NODE].Q.value,gain:g[a.tabId][b.AUDIO_STATE_BIQUAD_FILTER_NODE].gain.value}}),void c(d)}if(a.action===b.ACTION_POPUP_GAIN_CHANGE&&(a.tabId in g?(i(a.tabId,a.volumeValue),d.updateBadge(a.tabId,a.volumeValue)):chrome.tabCapture.capture({audio:!0,video:!1},b=>{chrome.runtime.lastError?d.dce(chrome.runtime.lastError):(h(a.tabId,b),i(a.tabId,a.volumeValue),d.updateBadge(a.tabId,a.volumeValue))})),a.action===b.ACTION_POPUP_BIQUAD_FILTER_CHANGE&&(a.tabId in g?j(a.tabId,a.algorithm,a.frequency,a.q,a.gain):chrome.tabCapture.capture({audio:!0,video:!1},b=>{chrome.runtime.lastError?d.dce(chrome.runtime.lastError):(h(a.tabId,b),j(a.tabId,a.algorithm,a.frequency,a.q,a.gain))})),a.action===b.ACTION_POPUP_ANALYSER_BEFORE_DATA_GET){if(a.tabId in g){const d=g[a.tabId][b.AUDIO_STATE_AUDIO_CONTEXT],e=g[a.tabId][b.AUDIO_STATE_ANALYSER_NODE_BEFORE];if(d&&e){const a=e.frequencyBinCount,b=new Uint8Array(a);return e.getByteFrequencyData(b),void c({dataArray:Array.from(b),bufferLength:a,sampleRate:d.sampleRate})}}}if(a.action===b.ACTION_POPUP_ANALYSER_AFTER_DATA_GET){if(a.tabId in g){const d=g[a.tabId][b.AUDIO_STATE_AUDIO_CONTEXT],e=g[a.tabId][b.AUDIO_STATE_ANALYSER_NODE_AFTER];if(d&&e){const a=e.frequencyBinCount,b=new Uint8Array(a);return e.getByteFrequencyData(b),void c({dataArray:Array.from(b),bufferLength:a,sampleRate:d.sampleRate})}}}c(null)};chrome.tabs.onRemoved.addListener(a=>{a in g&&g[a][b.AUDIO_STATE_AUDIO_CONTEXT].close().then(()=>{delete g[a]})}),chrome.runtime.onMessage.addListener((a,b,c)=>{k(a,c)}),chrome.runtime.onInstalled.addListener(async({reason:a})=>{if(a===chrome.runtime.OnInstalledReason.INSTALL)chrome.tabs.create({url:b.INSTALL_URL});else if(a===chrome.runtime.OnInstalledReason.UPDATE){const a=await c.load(f,null),d=await c.load(e,null);let g=null;if(d&&(g=Math.floor((Date.now()-new Date(d))/86400000)),(!a||a!=b.APP_VERSION)&&b.APP_VERSION_WITH_UPDATE_URL.includes(b.APP_VERSION))if(b.APP_VERSION_WITH_UPDATE_URL_EXTENDED.includes(b.APP_VERSION)&&g){const a=b.updateUrl(b.UPDATE_URL,{d:g});chrome.tabs.create({url:a})}else chrome.tabs.create({url:b.UPDATE_URL})}await c.save(f,b.APP_VERSION)}),chrome.runtime.setUninstallURL(b.UNINSTALL_URL)},{"./modules/config":3,"./modules/notifications.js":4,"./modules/storage-local-async":5,"./modules/utils":6}],2:[function(a,b){const c="2029-12-31",d=100,e=200,f=`If you like Volume Master please rate it on <a href="https://chrome.google.com/webstore/detail/volume-master/jghecgabfgfdldnmbfkhmffcabddioke/reviews" target="_blank" tabindex="-1">Chrome Web Store</a> to let me know that. If you don't want to - it's ok. Thank you for your feedback and have a nice day! ‚òÄÔ∏è`,g="Volume Master is a \"pay what you like\" software. You can use it for free, forever. \uD83D\uDE0A",h=`However, if you really like it, you can <a href="https://www.petasittek.com/volume-master/pay-what-you-like/" target="_blank" tabindex="-1">pay for it to support its development</a>. As a thank-you you'll get <strong>800&nbsp;% volume boost</strong>. It's up to you and it's ok if you don't want to. Thank you and have a nice day! ‚òÄÔ∏è`;b.exports={notifications:[{id:"8evjmxn94cchdjii45kq2pdsnndzcxsu",priority:e,title:g,message:h,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1,maxDaysFromInstallation:11},{id:"v3za9vcy6rji3kx3t32wzjdqi7ztqmxw",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:12,maxDaysFromInstallation:13},{id:"cvifms5exdmqy2g3ar4kzhmxi4zepvvq",priority:d,title:"Tip: custom keyboard shortcut",message:"Just type <strong>chrome://extensions/shortcuts</strong> in the address bar and set your own shortcut to open Volume Master.",dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:6,maxDaysFromInstallation:null},{id:"h6s5u6eqgjpxwqasujret4vz2pnkj945",priority:d,title:"Tip: use keys 0 - 6 to adjust volume",message:"Right after opening Volume Master press keys 0&nbsp;-&nbsp;6 to change volume from 0&nbsp;% to 600&nbsp;% respectively.",dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:8,maxDaysFromInstallation:null},{id:"tk7tse8yedvsdyve2dtpzd349hkbnugk",priority:d,title:"Tip: adjust volume with arrow keys",message:"Right after opening Volume Master press:<ul><li>\u2B06\uFE0F or \u27A1\uFE0F to volume up</li><li>\u2B07\uFE0F or \u2B05\uFE0F to volume down</li></ul>",dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:12,maxDaysFromInstallation:null},{id:"fms5exdvb8b9e6kk4bc2pckq3zcvifnr",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:14,maxDaysFromInstallation:29},{id:"b8b9uivc4yde6kk4bc2pckq3zjt2vfnr",priority:e,title:g,message:h,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:30,maxDaysFromInstallation:89},{id:"e6kk46kk4bc2pcxdvb8b9kq3zjt2vfnr",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:90,maxDaysFromInstallation:179},{id:"ff9cvpupxqqwrxm5p7at3xt332igtb38",priority:e,title:g,message:h,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:180,maxDaysFromInstallation:269},{id:"jibaemgq5hw777pksb27ywv6y2dppiyh",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:270,maxDaysFromInstallation:364},{id:"uvfqat8542f87kk6yj5hnm556qbru8b6",priority:e,title:`Congratulations, you're celebrating 1 year with Volume Master! üéâ`,message:`${g} ${h}`,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:365,maxDaysFromInstallation:539},{id:"jbve32m6sefvfc6bwmkmngqgxmnzsdtd",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:540,maxDaysFromInstallation:729},{id:"b66vv722k5v3ndkfase93pr7hupb9yyt",priority:e,title:`Congratulations, you're celebrating 2 years with Volume Master! üéâ`,message:`${g} ${h}`,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:730,maxDaysFromInstallation:899},{id:"kv79qxn7fh8s3z8xh8yiu7qdig6gn5ws",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:900,maxDaysFromInstallation:1094},{id:"p52xqawqq7wa525m3m7fvxnuczfhu3ua",priority:e,title:`Congratulations, you're now celebrating 3 years with Volume Master! üéâ`,message:`${g} ${h}`,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1095,maxDaysFromInstallation:1259},{id:"mvjgy5swr8h35htufk7y3aziupxscqtg",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1260,maxDaysFromInstallation:1459},{id:"t6c9hnd8kyz2kqpmrvdwa6jdnhyvgz9w",priority:e,title:`Congratulations, you're now celebrating 4 years with Volume Master! üéâ`,message:`${g} ${h}`,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1460,maxDaysFromInstallation:1639},{id:"fypaf96knvw49uprc5ux9fkbcx4mj7fr",priority:e,title:"",message:f,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1640,maxDaysFromInstallation:1824},{id:"5dfhc4hhkp3vb7dm6ge63tu7p8d4r3ww",priority:e,title:`Congratulations, you're now celebrating 5 years with Volume Master! üéâ`,message:`${g} ${h}`,dateFrom:"2018-01-01",dateTo:c,minDaysFromInstallation:1825,maxDaysFromInstallation:null}]}},{}],3:[function(a,b){const c="https://www.petasittek.com/",d=`${c}volume-master/`,e=new URLSearchParams({utm_source:"volume-master",utm_medium:"browser-extension",utm_campaign:"chrome",utm_content:"none"}),f=chrome.runtime.getManifest().version,g=(a,b="")=>{const c=new URL(a);if(b){const a=new URLSearchParams(e);a.set("utm_content",b),c.search=a.toString()}return c.href};b.exports={CWS_REVIEWS_URL:`${"https://chrome.google.com/webstore/detail/volume-master/jghecgabfgfdldnmbfkhmffcabddioke"}/reviews`,HOMEPAGE_URL:g(c),INSTALL_URL:g(c,"install"),UNINSTALL_URL:g(c,"uninstall"),FOOTER_URL:g(c,"footer"),ISSUE_URL:g(`${d}issue/`),UPDATE_URL:g(`${`${d}version/`}${f}`,"update"),updateUrl:(a,b)=>{const c=new URL(a),d=new URLSearchParams(c.search);return Object.keys(b).forEach(a=>d.set(a,b[a])),c.search=d.toString(),c.href},APP_VERSION:f,APP_VERSION_WITH_UPDATE_URL:["1.10.7","1.12.6","1.13.2","1.14.4"],APP_VERSION_WITH_UPDATE_URL_EXTENDED:["1.14.4"],DEVELOPMENT_MODE:!("update_url"in chrome.runtime.getManifest()),ACTION_POPUP_AUDIO_DATA_GET:"popup-audio-data-get",ACTION_POPUP_GAIN_CHANGE:"popup-gain-change",ACTION_POPUP_BIQUAD_FILTER_CHANGE:"popup-biquad-filter-change",ACTION_POPUP_ANALYSER_BEFORE_DATA_GET:"popup-analyser-before-data-get",ACTION_POPUP_ANALYSER_AFTER_DATA_GET:"popup-analyser-after-data-get",AUDIO_STATE_AUDIO_CONTEXT:"audioContext",AUDIO_STATE_GAIN_NODE:"gainNode",AUDIO_STATE_BIQUAD_FILTER_NODE:"biquadFilter",AUDIO_STATE_ANALYSER_NODE_BEFORE:"analyserBefore",AUDIO_STATE_ANALYSER_NODE_AFTER:"analyserAfter",ANALYSER_BEFORE_ENABLED:!1,ANALYSER_AFTER_ENABLED:!1,ANALYSER_INTERVAL:1e3/30,ANALYSER_FFT_SIZE:128,EQUALIZER_PRESETS:{default:{algorithm:"highpass",frequency:0,q:1,gain:0},voice:{algorithm:"peaking",frequency:1500,q:1,gain:12},bass:{algorithm:"lowshelf",frequency:350,q:1,gain:6}},VOLUME_VALUE_DEFAULT:100,VOLUME_VALUE_MAX:600,HTML_JS_HOOK_VOLUME_SLIDER:".js-volume-slider__slider"}},{}],4:[function(a,b){const c=a("./storage-local-async"),{notifications:d}=a("../config/notifications"),e="notifications",f="installation-date",g={date:new Date,installationDate:new Date,usedIds:[]},h=async()=>{g.usedIds=await c.load(e,[])},i=async a=>{g.usedIds.push(a),await c.save(e,g.usedIds)},j=async()=>{g.installationDate=new Date,await c.save(f,g.installationDate)},k=async()=>{const a=await c.load(f,null);a?g.installationDate=new Date(a):await j()},l=()=>{document.addEventListener("click",async a=>{const b=a.target.closest(".js-notification__close");if(b){const a=b.dataset.id;await i(a),b.closest(".notification").classList.remove("is-active"),document.querySelector("html").style.minHeight="auto"}})};b.exports={initNotifications:async()=>{await k(),await h(),l()},getNotification:()=>{const a=Math.floor((g.date-g.installationDate)/1e3/60/60/23);return d.filter(a=>g.date>=new Date(a.dateFrom)).filter(a=>g.date<=new Date(a.dateTo)).filter(a=>-1===g.usedIds.indexOf(a.id)).filter(b=>b.minDaysFromInstallation<=a).filter(b=>null===b.maxDaysFromInstallation||a<=b.maxDaysFromInstallation).sort((c,a)=>c.priority-a.priority).pop()},STORAGE_KEY_INSTALLATION_DATE:f}},{"../config/notifications":2,"./storage-local-async":5}],5:[function(a,b){b.exports={save:(a,b)=>new Promise(c=>{const d={[a]:JSON.stringify(b)};chrome.storage.local.set(d,()=>{c()})}),load:(a,b)=>new Promise(c=>{const d={[a]:JSON.stringify(b)};chrome.storage.local.get(d,b=>{c(JSON.parse(b[a]))})})}},{}],6:[function(a,b){const c=a("./config");let d=0;const e=(a,b)=>{d+=1,c.DEVELOPMENT_MODE&&(a(`-- ${d} --`),a(b))};b.exports={dcl:a=>{e(console.log,a)},dce:a=>{e(console.error,a)},updateBadge:(a,b)=>{chrome.browserAction.setBadgeText({text:`${b}`,tabId:a})}}},{"./config":3}]},{},[1]);